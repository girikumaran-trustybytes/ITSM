function rN(e,t){for(var s=0;s<t.length;s++){const r=t[s];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const a=Object.getOwnPropertyDescriptor(r,i);a&&Object.defineProperty(e,i,a.get?a:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function s(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=s(i);fetch(i.href,a)}})();function iN(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Ai(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var s=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};s.prototype=t.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(s,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),s}var lj={exports:{}},Ru={},oj={exports:{}},ht={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xo=Symbol.for("react.element"),aN=Symbol.for("react.portal"),lN=Symbol.for("react.fragment"),oN=Symbol.for("react.strict_mode"),cN=Symbol.for("react.profiler"),dN=Symbol.for("react.provider"),uN=Symbol.for("react.context"),mN=Symbol.for("react.forward_ref"),pN=Symbol.for("react.suspense"),fN=Symbol.for("react.memo"),hN=Symbol.for("react.lazy"),fv=Symbol.iterator;function gN(e){return e===null||typeof e!="object"?null:(e=fv&&e[fv]||e["@@iterator"],typeof e=="function"?e:null)}var cj={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},dj=Object.assign,uj={};function xl(e,t,s){this.props=e,this.context=t,this.refs=uj,this.updater=s||cj}xl.prototype.isReactComponent={};xl.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};xl.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function mj(){}mj.prototype=xl.prototype;function bh(e,t,s){this.props=e,this.context=t,this.refs=uj,this.updater=s||cj}var wh=bh.prototype=new mj;wh.constructor=bh;dj(wh,xl.prototype);wh.isPureReactComponent=!0;var hv=Array.isArray,pj=Object.prototype.hasOwnProperty,Nh={current:null},fj={key:!0,ref:!0,__self:!0,__source:!0};function hj(e,t,s){var r,i={},a=null,l=null;if(t!=null)for(r in t.ref!==void 0&&(l=t.ref),t.key!==void 0&&(a=""+t.key),t)pj.call(t,r)&&!fj.hasOwnProperty(r)&&(i[r]=t[r]);var c=arguments.length-2;if(c===1)i.children=s;else if(1<c){for(var d=Array(c),p=0;p<c;p++)d[p]=arguments[p+2];i.children=d}if(e&&e.defaultProps)for(r in c=e.defaultProps,c)i[r]===void 0&&(i[r]=c[r]);return{$$typeof:Xo,type:e,key:a,ref:l,props:i,_owner:Nh.current}}function vN(e,t){return{$$typeof:Xo,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Sh(e){return typeof e=="object"&&e!==null&&e.$$typeof===Xo}function xN(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(s){return t[s]})}var gv=/\/+/g;function fp(e,t){return typeof e=="object"&&e!==null&&e.key!=null?xN(""+e.key):t.toString(36)}function Rd(e,t,s,r,i){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var l=!1;if(e===null)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case Xo:case aN:l=!0}}if(l)return l=e,i=i(l),e=r===""?"."+fp(l,0):r,hv(i)?(s="",e!=null&&(s=e.replace(gv,"$&/")+"/"),Rd(i,t,s,"",function(p){return p})):i!=null&&(Sh(i)&&(i=vN(i,s+(!i.key||l&&l.key===i.key?"":(""+i.key).replace(gv,"$&/")+"/")+e)),t.push(i)),1;if(l=0,r=r===""?".":r+":",hv(e))for(var c=0;c<e.length;c++){a=e[c];var d=r+fp(a,c);l+=Rd(a,t,s,d,i)}else if(d=gN(e),typeof d=="function")for(e=d.call(e),c=0;!(a=e.next()).done;)a=a.value,d=r+fp(a,c++),l+=Rd(a,t,s,d,i);else if(a==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function Zc(e,t,s){if(e==null)return e;var r=[],i=0;return Rd(e,r,"","",function(a){return t.call(s,a,i++)}),r}function yN(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(s){(e._status===0||e._status===-1)&&(e._status=1,e._result=s)},function(s){(e._status===0||e._status===-1)&&(e._status=2,e._result=s)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Bn={current:null},Md={transition:null},jN={ReactCurrentDispatcher:Bn,ReactCurrentBatchConfig:Md,ReactCurrentOwner:Nh};ht.Children={map:Zc,forEach:function(e,t,s){Zc(e,function(){t.apply(this,arguments)},s)},count:function(e){var t=0;return Zc(e,function(){t++}),t},toArray:function(e){return Zc(e,function(t){return t})||[]},only:function(e){if(!Sh(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ht.Component=xl;ht.Fragment=lN;ht.Profiler=cN;ht.PureComponent=bh;ht.StrictMode=oN;ht.Suspense=pN;ht.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=jN;ht.cloneElement=function(e,t,s){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=dj({},e.props),i=e.key,a=e.ref,l=e._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,l=Nh.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(d in t)pj.call(t,d)&&!fj.hasOwnProperty(d)&&(r[d]=t[d]===void 0&&c!==void 0?c[d]:t[d])}var d=arguments.length-2;if(d===1)r.children=s;else if(1<d){c=Array(d);for(var p=0;p<d;p++)c[p]=arguments[p+2];r.children=c}return{$$typeof:Xo,type:e.type,key:i,ref:a,props:r,_owner:l}};ht.createContext=function(e){return e={$$typeof:uN,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:dN,_context:e},e.Consumer=e};ht.createElement=hj;ht.createFactory=function(e){var t=hj.bind(null,e);return t.type=e,t};ht.createRef=function(){return{current:null}};ht.forwardRef=function(e){return{$$typeof:mN,render:e}};ht.isValidElement=Sh;ht.lazy=function(e){return{$$typeof:hN,_payload:{_status:-1,_result:e},_init:yN}};ht.memo=function(e,t){return{$$typeof:fN,type:e,compare:t===void 0?null:t}};ht.startTransition=function(e){var t=Md.transition;Md.transition={};try{e()}finally{Md.transition=t}};ht.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};ht.useCallback=function(e,t){return Bn.current.useCallback(e,t)};ht.useContext=function(e){return Bn.current.useContext(e)};ht.useDebugValue=function(){};ht.useDeferredValue=function(e){return Bn.current.useDeferredValue(e)};ht.useEffect=function(e,t){return Bn.current.useEffect(e,t)};ht.useId=function(){return Bn.current.useId()};ht.useImperativeHandle=function(e,t,s){return Bn.current.useImperativeHandle(e,t,s)};ht.useInsertionEffect=function(e,t){return Bn.current.useInsertionEffect(e,t)};ht.useLayoutEffect=function(e,t){return Bn.current.useLayoutEffect(e,t)};ht.useMemo=function(e,t){return Bn.current.useMemo(e,t)};ht.useReducer=function(e,t,s){return Bn.current.useReducer(e,t,s)};ht.useRef=function(e){return Bn.current.useRef(e)};ht.useState=function(e){return Bn.current.useState(e)};ht.useSyncExternalStore=function(e,t,s){return Bn.current.useSyncExternalStore(e,t,s)};ht.useTransition=function(){return Bn.current.useTransition()};ht.version="18.2.0";oj.exports=ht;var u=oj.exports;const oe=iN(u),cf=rN({__proto__:null,default:oe},[u]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bN=u,wN=Symbol.for("react.element"),NN=Symbol.for("react.fragment"),SN=Object.prototype.hasOwnProperty,kN=bN.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,CN={key:!0,ref:!0,__self:!0,__source:!0};function gj(e,t,s){var r,i={},a=null,l=null;s!==void 0&&(a=""+s),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(l=t.ref);for(r in t)SN.call(t,r)&&!CN.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:wN,type:e,key:a,ref:l,props:i,_owner:kN.current}}Ru.Fragment=NN;Ru.jsx=gj;Ru.jsxs=gj;lj.exports=Ru;var n=lj.exports,vj={exports:{}},Ns={},xj={exports:{}},yj={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(K,W){var ne=K.length;K.push(W);e:for(;0<ne;){var R=ne-1>>>1,Q=K[R];if(0<i(Q,W))K[R]=W,K[ne]=Q,ne=R;else break e}}function s(K){return K.length===0?null:K[0]}function r(K){if(K.length===0)return null;var W=K[0],ne=K.pop();if(ne!==W){K[0]=ne;e:for(var R=0,Q=K.length,je=Q>>>1;R<je;){var se=2*(R+1)-1,ze=K[se],Ze=se+1,ye=K[Ze];if(0>i(ze,ne))Ze<Q&&0>i(ye,ze)?(K[R]=ye,K[Ze]=ne,R=Ze):(K[R]=ze,K[se]=ne,R=se);else if(Ze<Q&&0>i(ye,ne))K[R]=ye,K[Ze]=ne,R=Ze;else break e}}return W}function i(K,W){var ne=K.sortIndex-W.sortIndex;return ne!==0?ne:K.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var l=Date,c=l.now();e.unstable_now=function(){return l.now()-c}}var d=[],p=[],g=1,v=null,S=3,O=!1,x=!1,y=!1,M=typeof setTimeout=="function"?setTimeout:null,k=typeof clearTimeout=="function"?clearTimeout:null,j=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(K){for(var W=s(p);W!==null;){if(W.callback===null)r(p);else if(W.startTime<=K)r(p),W.sortIndex=W.expirationTime,t(d,W);else break;W=s(p)}}function E(K){if(y=!1,C(K),!x)if(s(d)!==null)x=!0,ce(B);else{var W=s(p);W!==null&&N(E,W.startTime-K)}}function B(K,W){x=!1,y&&(y=!1,k(J),J=-1),O=!0;var ne=S;try{for(C(W),v=s(d);v!==null&&(!(v.expirationTime>W)||K&&!xe());){var R=v.callback;if(typeof R=="function"){v.callback=null,S=v.priorityLevel;var Q=R(v.expirationTime<=W);W=e.unstable_now(),typeof Q=="function"?v.callback=Q:v===s(d)&&r(d),C(W)}else r(d);v=s(d)}if(v!==null)var je=!0;else{var se=s(p);se!==null&&N(E,se.startTime-W),je=!1}return je}finally{v=null,S=ne,O=!1}}var _=!1,F=null,J=-1,ue=5,Y=-1;function xe(){return!(e.unstable_now()-Y<ue)}function Ne(){if(F!==null){var K=e.unstable_now();Y=K;var W=!0;try{W=F(!0,K)}finally{W?Re():(_=!1,F=null)}}else _=!1}var Re;if(typeof j=="function")Re=function(){j(Ne)};else if(typeof MessageChannel<"u"){var L=new MessageChannel,X=L.port2;L.port1.onmessage=Ne,Re=function(){X.postMessage(null)}}else Re=function(){M(Ne,0)};function ce(K){F=K,_||(_=!0,Re())}function N(K,W){J=M(function(){K(e.unstable_now())},W)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(K){K.callback=null},e.unstable_continueExecution=function(){x||O||(x=!0,ce(B))},e.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ue=0<K?Math.floor(1e3/K):5},e.unstable_getCurrentPriorityLevel=function(){return S},e.unstable_getFirstCallbackNode=function(){return s(d)},e.unstable_next=function(K){switch(S){case 1:case 2:case 3:var W=3;break;default:W=S}var ne=S;S=W;try{return K()}finally{S=ne}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(K,W){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var ne=S;S=K;try{return W()}finally{S=ne}},e.unstable_scheduleCallback=function(K,W,ne){var R=e.unstable_now();switch(typeof ne=="object"&&ne!==null?(ne=ne.delay,ne=typeof ne=="number"&&0<ne?R+ne:R):ne=R,K){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=ne+Q,K={id:g++,callback:W,priorityLevel:K,startTime:ne,expirationTime:Q,sortIndex:-1},ne>R?(K.sortIndex=ne,t(p,K),s(d)===null&&K===s(p)&&(y?(k(J),J=-1):y=!0,N(E,ne-R))):(K.sortIndex=Q,t(d,K),x||O||(x=!0,ce(B))),K},e.unstable_shouldYield=xe,e.unstable_wrapCallback=function(K){var W=S;return function(){var ne=S;S=W;try{return K.apply(this,arguments)}finally{S=ne}}}})(yj);xj.exports=yj;var AN=xj.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jj=u,ws=AN;function be(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,s=1;s<arguments.length;s++)t+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var bj=new Set,Co={};function la(e,t){ol(e,t),ol(e+"Capture",t)}function ol(e,t){for(Co[e]=t,e=0;e<t.length;e++)bj.add(t[e])}var Fr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),df=Object.prototype.hasOwnProperty,EN=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,vv={},xv={};function TN(e){return df.call(xv,e)?!0:df.call(vv,e)?!1:EN.test(e)?xv[e]=!0:(vv[e]=!0,!1)}function RN(e,t,s,r){if(s!==null&&s.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:s!==null?!s.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function MN(e,t,s,r){if(t===null||typeof t>"u"||RN(e,t,s,r))return!0;if(r)return!1;if(s!==null)switch(s.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function zn(e,t,s,r,i,a,l){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=s,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=l}var Cn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Cn[e]=new zn(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Cn[t]=new zn(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Cn[e]=new zn(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Cn[e]=new zn(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Cn[e]=new zn(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Cn[e]=new zn(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Cn[e]=new zn(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Cn[e]=new zn(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Cn[e]=new zn(e,5,!1,e.toLowerCase(),null,!1,!1)});var kh=/[\-:]([a-z])/g;function Ch(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(kh,Ch);Cn[t]=new zn(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(kh,Ch);Cn[t]=new zn(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(kh,Ch);Cn[t]=new zn(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Cn[e]=new zn(e,1,!1,e.toLowerCase(),null,!1,!1)});Cn.xlinkHref=new zn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Cn[e]=new zn(e,1,!1,e.toLowerCase(),null,!0,!0)});function Ah(e,t,s,r){var i=Cn.hasOwnProperty(t)?Cn[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(MN(t,s,i,r)&&(s=null),r||i===null?TN(t)&&(s===null?e.removeAttribute(t):e.setAttribute(t,""+s)):i.mustUseProperty?e[i.propertyName]=s===null?i.type===3?!1:"":s:(t=i.attributeName,r=i.attributeNamespace,s===null?e.removeAttribute(t):(i=i.type,s=i===3||i===4&&s===!0?"":""+s,r?e.setAttributeNS(r,t,s):e.setAttribute(t,s))))}var Hr=jj.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ed=Symbol.for("react.element"),Ua=Symbol.for("react.portal"),Ba=Symbol.for("react.fragment"),Eh=Symbol.for("react.strict_mode"),uf=Symbol.for("react.profiler"),wj=Symbol.for("react.provider"),Nj=Symbol.for("react.context"),Th=Symbol.for("react.forward_ref"),mf=Symbol.for("react.suspense"),pf=Symbol.for("react.suspense_list"),Rh=Symbol.for("react.memo"),ai=Symbol.for("react.lazy"),Sj=Symbol.for("react.offscreen"),yv=Symbol.iterator;function Gl(e){return e===null||typeof e!="object"?null:(e=yv&&e[yv]||e["@@iterator"],typeof e=="function"?e:null)}var Ht=Object.assign,hp;function oo(e){if(hp===void 0)try{throw Error()}catch(s){var t=s.stack.trim().match(/\n( *(at )?)/);hp=t&&t[1]||""}return`
`+hp+e}var gp=!1;function vp(e,t){if(!e||gp)return"";gp=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(p){var r=p}Reflect.construct(e,[],t)}else{try{t.call()}catch(p){r=p}e.call(t.prototype)}else{try{throw Error()}catch(p){r=p}e()}}catch(p){if(p&&r&&typeof p.stack=="string"){for(var i=p.stack.split(`
`),a=r.stack.split(`
`),l=i.length-1,c=a.length-1;1<=l&&0<=c&&i[l]!==a[c];)c--;for(;1<=l&&0<=c;l--,c--)if(i[l]!==a[c]){if(l!==1||c!==1)do if(l--,c--,0>c||i[l]!==a[c]){var d=`
`+i[l].replace(" at new "," at ");return e.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",e.displayName)),d}while(1<=l&&0<=c);break}}}finally{gp=!1,Error.prepareStackTrace=s}return(e=e?e.displayName||e.name:"")?oo(e):""}function PN(e){switch(e.tag){case 5:return oo(e.type);case 16:return oo("Lazy");case 13:return oo("Suspense");case 19:return oo("SuspenseList");case 0:case 2:case 15:return e=vp(e.type,!1),e;case 11:return e=vp(e.type.render,!1),e;case 1:return e=vp(e.type,!0),e;default:return""}}function ff(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Ba:return"Fragment";case Ua:return"Portal";case uf:return"Profiler";case Eh:return"StrictMode";case mf:return"Suspense";case pf:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Nj:return(e.displayName||"Context")+".Consumer";case wj:return(e._context.displayName||"Context")+".Provider";case Th:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Rh:return t=e.displayName||null,t!==null?t:ff(e.type)||"Memo";case ai:t=e._payload,e=e._init;try{return ff(e(t))}catch{}}return null}function LN(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ff(t);case 8:return t===Eh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function ki(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function kj(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function IN(e){var t=kj(e)?"checked":"value",s=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var i=s.get,a=s.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(l){r=""+l,a.call(this,l)}}),Object.defineProperty(e,t,{enumerable:s.enumerable}),{getValue:function(){return r},setValue:function(l){r=""+l},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function td(e){e._valueTracker||(e._valueTracker=IN(e))}function Cj(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var s=t.getValue(),r="";return e&&(r=kj(e)?e.checked?"true":"false":e.value),e=r,e!==s?(t.setValue(e),!0):!1}function Yd(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function hf(e,t){var s=t.checked;return Ht({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??e._wrapperState.initialChecked})}function jv(e,t){var s=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;s=ki(t.value!=null?t.value:s),e._wrapperState={initialChecked:r,initialValue:s,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Aj(e,t){t=t.checked,t!=null&&Ah(e,"checked",t,!1)}function gf(e,t){Aj(e,t);var s=ki(t.value),r=t.type;if(s!=null)r==="number"?(s===0&&e.value===""||e.value!=s)&&(e.value=""+s):e.value!==""+s&&(e.value=""+s);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?vf(e,t.type,s):t.hasOwnProperty("defaultValue")&&vf(e,t.type,ki(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function bv(e,t,s){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,s||t===e.value||(e.value=t),e.defaultValue=t}s=e.name,s!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,s!==""&&(e.name=s)}function vf(e,t,s){(t!=="number"||Yd(e.ownerDocument)!==e)&&(s==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+s&&(e.defaultValue=""+s))}var co=Array.isArray;function Za(e,t,s,r){if(e=e.options,t){t={};for(var i=0;i<s.length;i++)t["$"+s[i]]=!0;for(s=0;s<e.length;s++)i=t.hasOwnProperty("$"+e[s].value),e[s].selected!==i&&(e[s].selected=i),i&&r&&(e[s].defaultSelected=!0)}else{for(s=""+ki(s),t=null,i=0;i<e.length;i++){if(e[i].value===s){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function xf(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(be(91));return Ht({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function wv(e,t){var s=t.value;if(s==null){if(s=t.children,t=t.defaultValue,s!=null){if(t!=null)throw Error(be(92));if(co(s)){if(1<s.length)throw Error(be(93));s=s[0]}t=s}t==null&&(t=""),s=t}e._wrapperState={initialValue:ki(s)}}function Ej(e,t){var s=ki(t.value),r=ki(t.defaultValue);s!=null&&(s=""+s,s!==e.value&&(e.value=s),t.defaultValue==null&&e.defaultValue!==s&&(e.defaultValue=s)),r!=null&&(e.defaultValue=""+r)}function Nv(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Tj(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function yf(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Tj(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var nd,Rj=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,s,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,s,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(nd=nd||document.createElement("div"),nd.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=nd.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Ao(e,t){if(t){var s=e.firstChild;if(s&&s===e.lastChild&&s.nodeType===3){s.nodeValue=t;return}}e.textContent=t}var fo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ON=["Webkit","ms","Moz","O"];Object.keys(fo).forEach(function(e){ON.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fo[t]=fo[e]})});function Mj(e,t,s){return t==null||typeof t=="boolean"||t===""?"":s||typeof t!="number"||t===0||fo.hasOwnProperty(e)&&fo[e]?(""+t).trim():t+"px"}function Pj(e,t){e=e.style;for(var s in t)if(t.hasOwnProperty(s)){var r=s.indexOf("--")===0,i=Mj(s,t[s],r);s==="float"&&(s="cssFloat"),r?e.setProperty(s,i):e[s]=i}}var $N=Ht({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function jf(e,t){if(t){if($N[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(be(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(be(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(be(61))}if(t.style!=null&&typeof t.style!="object")throw Error(be(62))}}function bf(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wf=null;function Mh(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Nf=null,el=null,tl=null;function Sv(e){if(e=tc(e)){if(typeof Nf!="function")throw Error(be(280));var t=e.stateNode;t&&(t=Ou(t),Nf(e.stateNode,e.type,t))}}function Lj(e){el?tl?tl.push(e):tl=[e]:el=e}function Ij(){if(el){var e=el,t=tl;if(tl=el=null,Sv(e),t)for(e=0;e<t.length;e++)Sv(t[e])}}function Oj(e,t){return e(t)}function $j(){}var xp=!1;function Dj(e,t,s){if(xp)return e(t,s);xp=!0;try{return Oj(e,t,s)}finally{xp=!1,(el!==null||tl!==null)&&($j(),Ij())}}function Eo(e,t){var s=e.stateNode;if(s===null)return null;var r=Ou(s);if(r===null)return null;s=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(s&&typeof s!="function")throw Error(be(231,t,typeof s));return s}var Sf=!1;if(Fr)try{var Jl={};Object.defineProperty(Jl,"passive",{get:function(){Sf=!0}}),window.addEventListener("test",Jl,Jl),window.removeEventListener("test",Jl,Jl)}catch{Sf=!1}function DN(e,t,s,r,i,a,l,c,d){var p=Array.prototype.slice.call(arguments,3);try{t.apply(s,p)}catch(g){this.onError(g)}}var ho=!1,Xd=null,Zd=!1,kf=null,_N={onError:function(e){ho=!0,Xd=e}};function FN(e,t,s,r,i,a,l,c,d){ho=!1,Xd=null,DN.apply(_N,arguments)}function UN(e,t,s,r,i,a,l,c,d){if(FN.apply(this,arguments),ho){if(ho){var p=Xd;ho=!1,Xd=null}else throw Error(be(198));Zd||(Zd=!0,kf=p)}}function oa(e){var t=e,s=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(s=t.return),e=t.return;while(e)}return t.tag===3?s:null}function _j(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function kv(e){if(oa(e)!==e)throw Error(be(188))}function BN(e){var t=e.alternate;if(!t){if(t=oa(e),t===null)throw Error(be(188));return t!==e?null:e}for(var s=e,r=t;;){var i=s.return;if(i===null)break;var a=i.alternate;if(a===null){if(r=i.return,r!==null){s=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===s)return kv(i),e;if(a===r)return kv(i),t;a=a.sibling}throw Error(be(188))}if(s.return!==r.return)s=i,r=a;else{for(var l=!1,c=i.child;c;){if(c===s){l=!0,s=i,r=a;break}if(c===r){l=!0,r=i,s=a;break}c=c.sibling}if(!l){for(c=a.child;c;){if(c===s){l=!0,s=a,r=i;break}if(c===r){l=!0,r=a,s=i;break}c=c.sibling}if(!l)throw Error(be(189))}}if(s.alternate!==r)throw Error(be(190))}if(s.tag!==3)throw Error(be(188));return s.stateNode.current===s?e:t}function Fj(e){return e=BN(e),e!==null?Uj(e):null}function Uj(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Uj(e);if(t!==null)return t;e=e.sibling}return null}var Bj=ws.unstable_scheduleCallback,Cv=ws.unstable_cancelCallback,zN=ws.unstable_shouldYield,WN=ws.unstable_requestPaint,Xt=ws.unstable_now,qN=ws.unstable_getCurrentPriorityLevel,Ph=ws.unstable_ImmediatePriority,zj=ws.unstable_UserBlockingPriority,eu=ws.unstable_NormalPriority,HN=ws.unstable_LowPriority,Wj=ws.unstable_IdlePriority,Mu=null,Sr=null;function VN(e){if(Sr&&typeof Sr.onCommitFiberRoot=="function")try{Sr.onCommitFiberRoot(Mu,e,void 0,(e.current.flags&128)===128)}catch{}}var sr=Math.clz32?Math.clz32:GN,KN=Math.log,QN=Math.LN2;function GN(e){return e>>>=0,e===0?32:31-(KN(e)/QN|0)|0}var sd=64,rd=4194304;function uo(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function tu(e,t){var s=e.pendingLanes;if(s===0)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,l=s&268435455;if(l!==0){var c=l&~i;c!==0?r=uo(c):(a&=l,a!==0&&(r=uo(a)))}else l=s&~i,l!==0?r=uo(l):a!==0&&(r=uo(a));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,a=t&-t,i>=a||i===16&&(a&4194240)!==0))return t;if(r&4&&(r|=s&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)s=31-sr(t),i=1<<s,r|=e[s],t&=~i;return r}function JN(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function YN(e,t){for(var s=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var l=31-sr(a),c=1<<l,d=i[l];d===-1?(!(c&s)||c&r)&&(i[l]=JN(c,t)):d<=t&&(e.expiredLanes|=c),a&=~c}}function Cf(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function qj(){var e=sd;return sd<<=1,!(sd&4194240)&&(sd=64),e}function yp(e){for(var t=[],s=0;31>s;s++)t.push(e);return t}function Zo(e,t,s){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-sr(t),e[t]=s}function XN(e,t){var s=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<s;){var i=31-sr(s),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,s&=~a}}function Lh(e,t){var s=e.entangledLanes|=t;for(e=e.entanglements;s;){var r=31-sr(s),i=1<<r;i&t|e[r]&t&&(e[r]|=t),s&=~i}}var kt=0;function Hj(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Vj,Ih,Kj,Qj,Gj,Af=!1,id=[],vi=null,xi=null,yi=null,To=new Map,Ro=new Map,di=[],ZN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Av(e,t){switch(e){case"focusin":case"focusout":vi=null;break;case"dragenter":case"dragleave":xi=null;break;case"mouseover":case"mouseout":yi=null;break;case"pointerover":case"pointerout":To.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ro.delete(t.pointerId)}}function Yl(e,t,s,r,i,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:s,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},t!==null&&(t=tc(t),t!==null&&Ih(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function eS(e,t,s,r,i){switch(t){case"focusin":return vi=Yl(vi,e,t,s,r,i),!0;case"dragenter":return xi=Yl(xi,e,t,s,r,i),!0;case"mouseover":return yi=Yl(yi,e,t,s,r,i),!0;case"pointerover":var a=i.pointerId;return To.set(a,Yl(To.get(a)||null,e,t,s,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Ro.set(a,Yl(Ro.get(a)||null,e,t,s,r,i)),!0}return!1}function Jj(e){var t=Ki(e.target);if(t!==null){var s=oa(t);if(s!==null){if(t=s.tag,t===13){if(t=_j(s),t!==null){e.blockedOn=t,Gj(e.priority,function(){Kj(s)});return}}else if(t===3&&s.stateNode.current.memoizedState.isDehydrated){e.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Pd(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var s=Ef(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(s===null){s=e.nativeEvent;var r=new s.constructor(s.type,s);wf=r,s.target.dispatchEvent(r),wf=null}else return t=tc(s),t!==null&&Ih(t),e.blockedOn=s,!1;t.shift()}return!0}function Ev(e,t,s){Pd(e)&&s.delete(t)}function tS(){Af=!1,vi!==null&&Pd(vi)&&(vi=null),xi!==null&&Pd(xi)&&(xi=null),yi!==null&&Pd(yi)&&(yi=null),To.forEach(Ev),Ro.forEach(Ev)}function Xl(e,t){e.blockedOn===t&&(e.blockedOn=null,Af||(Af=!0,ws.unstable_scheduleCallback(ws.unstable_NormalPriority,tS)))}function Mo(e){function t(i){return Xl(i,e)}if(0<id.length){Xl(id[0],e);for(var s=1;s<id.length;s++){var r=id[s];r.blockedOn===e&&(r.blockedOn=null)}}for(vi!==null&&Xl(vi,e),xi!==null&&Xl(xi,e),yi!==null&&Xl(yi,e),To.forEach(t),Ro.forEach(t),s=0;s<di.length;s++)r=di[s],r.blockedOn===e&&(r.blockedOn=null);for(;0<di.length&&(s=di[0],s.blockedOn===null);)Jj(s),s.blockedOn===null&&di.shift()}var nl=Hr.ReactCurrentBatchConfig,nu=!0;function nS(e,t,s,r){var i=kt,a=nl.transition;nl.transition=null;try{kt=1,Oh(e,t,s,r)}finally{kt=i,nl.transition=a}}function sS(e,t,s,r){var i=kt,a=nl.transition;nl.transition=null;try{kt=4,Oh(e,t,s,r)}finally{kt=i,nl.transition=a}}function Oh(e,t,s,r){if(nu){var i=Ef(e,t,s,r);if(i===null)Tp(e,t,r,su,s),Av(e,r);else if(eS(i,e,t,s,r))r.stopPropagation();else if(Av(e,r),t&4&&-1<ZN.indexOf(e)){for(;i!==null;){var a=tc(i);if(a!==null&&Vj(a),a=Ef(e,t,s,r),a===null&&Tp(e,t,r,su,s),a===i)break;i=a}i!==null&&r.stopPropagation()}else Tp(e,t,r,null,s)}}var su=null;function Ef(e,t,s,r){if(su=null,e=Mh(r),e=Ki(e),e!==null)if(t=oa(e),t===null)e=null;else if(s=t.tag,s===13){if(e=_j(t),e!==null)return e;e=null}else if(s===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return su=e,null}function Yj(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(qN()){case Ph:return 1;case zj:return 4;case eu:case HN:return 16;case Wj:return 536870912;default:return 16}default:return 16}}var pi=null,$h=null,Ld=null;function Xj(){if(Ld)return Ld;var e,t=$h,s=t.length,r,i="value"in pi?pi.value:pi.textContent,a=i.length;for(e=0;e<s&&t[e]===i[e];e++);var l=s-e;for(r=1;r<=l&&t[s-r]===i[a-r];r++);return Ld=i.slice(e,1<r?1-r:void 0)}function Id(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ad(){return!0}function Tv(){return!1}function Ss(e){function t(s,r,i,a,l){this._reactName=s,this._targetInst=i,this.type=r,this.nativeEvent=a,this.target=l,this.currentTarget=null;for(var c in e)e.hasOwnProperty(c)&&(s=e[c],this[c]=s?s(a):a[c]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?ad:Tv,this.isPropagationStopped=Tv,this}return Ht(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=ad)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=ad)},persist:function(){},isPersistent:ad}),t}var yl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Dh=Ss(yl),ec=Ht({},yl,{view:0,detail:0}),rS=Ss(ec),jp,bp,Zl,Pu=Ht({},ec,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_h,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Zl&&(Zl&&e.type==="mousemove"?(jp=e.screenX-Zl.screenX,bp=e.screenY-Zl.screenY):bp=jp=0,Zl=e),jp)},movementY:function(e){return"movementY"in e?e.movementY:bp}}),Rv=Ss(Pu),iS=Ht({},Pu,{dataTransfer:0}),aS=Ss(iS),lS=Ht({},ec,{relatedTarget:0}),wp=Ss(lS),oS=Ht({},yl,{animationName:0,elapsedTime:0,pseudoElement:0}),cS=Ss(oS),dS=Ht({},yl,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),uS=Ss(dS),mS=Ht({},yl,{data:0}),Mv=Ss(mS),pS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},fS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function gS(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=hS[e])?!!t[e]:!1}function _h(){return gS}var vS=Ht({},ec,{key:function(e){if(e.key){var t=pS[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Id(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?fS[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_h,charCode:function(e){return e.type==="keypress"?Id(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Id(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),xS=Ss(vS),yS=Ht({},Pu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Pv=Ss(yS),jS=Ht({},ec,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_h}),bS=Ss(jS),wS=Ht({},yl,{propertyName:0,elapsedTime:0,pseudoElement:0}),NS=Ss(wS),SS=Ht({},Pu,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),kS=Ss(SS),CS=[9,13,27,32],Fh=Fr&&"CompositionEvent"in window,go=null;Fr&&"documentMode"in document&&(go=document.documentMode);var AS=Fr&&"TextEvent"in window&&!go,Zj=Fr&&(!Fh||go&&8<go&&11>=go),Lv=String.fromCharCode(32),Iv=!1;function eb(e,t){switch(e){case"keyup":return CS.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function tb(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var za=!1;function ES(e,t){switch(e){case"compositionend":return tb(t);case"keypress":return t.which!==32?null:(Iv=!0,Lv);case"textInput":return e=t.data,e===Lv&&Iv?null:e;default:return null}}function TS(e,t){if(za)return e==="compositionend"||!Fh&&eb(e,t)?(e=Xj(),Ld=$h=pi=null,za=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Zj&&t.locale!=="ko"?null:t.data;default:return null}}var RS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ov(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!RS[e.type]:t==="textarea"}function nb(e,t,s,r){Lj(r),t=ru(t,"onChange"),0<t.length&&(s=new Dh("onChange","change",null,s,r),e.push({event:s,listeners:t}))}var vo=null,Po=null;function MS(e){pb(e,0)}function Lu(e){var t=Ha(e);if(Cj(t))return e}function PS(e,t){if(e==="change")return t}var sb=!1;if(Fr){var Np;if(Fr){var Sp="oninput"in document;if(!Sp){var $v=document.createElement("div");$v.setAttribute("oninput","return;"),Sp=typeof $v.oninput=="function"}Np=Sp}else Np=!1;sb=Np&&(!document.documentMode||9<document.documentMode)}function Dv(){vo&&(vo.detachEvent("onpropertychange",rb),Po=vo=null)}function rb(e){if(e.propertyName==="value"&&Lu(Po)){var t=[];nb(t,Po,e,Mh(e)),Dj(MS,t)}}function LS(e,t,s){e==="focusin"?(Dv(),vo=t,Po=s,vo.attachEvent("onpropertychange",rb)):e==="focusout"&&Dv()}function IS(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Lu(Po)}function OS(e,t){if(e==="click")return Lu(t)}function $S(e,t){if(e==="input"||e==="change")return Lu(t)}function DS(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ar=typeof Object.is=="function"?Object.is:DS;function Lo(e,t){if(ar(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var s=Object.keys(e),r=Object.keys(t);if(s.length!==r.length)return!1;for(r=0;r<s.length;r++){var i=s[r];if(!df.call(t,i)||!ar(e[i],t[i]))return!1}return!0}function _v(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Fv(e,t){var s=_v(e);e=0;for(var r;s;){if(s.nodeType===3){if(r=e+s.textContent.length,e<=t&&r>=t)return{node:s,offset:t-e};e=r}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=_v(s)}}function ib(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?ib(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function ab(){for(var e=window,t=Yd();t instanceof e.HTMLIFrameElement;){try{var s=typeof t.contentWindow.location.href=="string"}catch{s=!1}if(s)e=t.contentWindow;else break;t=Yd(e.document)}return t}function Uh(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function _S(e){var t=ab(),s=e.focusedElem,r=e.selectionRange;if(t!==s&&s&&s.ownerDocument&&ib(s.ownerDocument.documentElement,s)){if(r!==null&&Uh(s)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in s)s.selectionStart=t,s.selectionEnd=Math.min(e,s.value.length);else if(e=(t=s.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=s.textContent.length,a=Math.min(r.start,i);r=r.end===void 0?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=Fv(s,a);var l=Fv(s,r);i&&l&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==l.node||e.focusOffset!==l.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(l.node,l.offset)):(t.setEnd(l.node,l.offset),e.addRange(t)))}}for(t=[],e=s;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<t.length;s++)e=t[s],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var FS=Fr&&"documentMode"in document&&11>=document.documentMode,Wa=null,Tf=null,xo=null,Rf=!1;function Uv(e,t,s){var r=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;Rf||Wa==null||Wa!==Yd(r)||(r=Wa,"selectionStart"in r&&Uh(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),xo&&Lo(xo,r)||(xo=r,r=ru(Tf,"onSelect"),0<r.length&&(t=new Dh("onSelect","select",null,t,s),e.push({event:t,listeners:r}),t.target=Wa)))}function ld(e,t){var s={};return s[e.toLowerCase()]=t.toLowerCase(),s["Webkit"+e]="webkit"+t,s["Moz"+e]="moz"+t,s}var qa={animationend:ld("Animation","AnimationEnd"),animationiteration:ld("Animation","AnimationIteration"),animationstart:ld("Animation","AnimationStart"),transitionend:ld("Transition","TransitionEnd")},kp={},lb={};Fr&&(lb=document.createElement("div").style,"AnimationEvent"in window||(delete qa.animationend.animation,delete qa.animationiteration.animation,delete qa.animationstart.animation),"TransitionEvent"in window||delete qa.transitionend.transition);function Iu(e){if(kp[e])return kp[e];if(!qa[e])return e;var t=qa[e],s;for(s in t)if(t.hasOwnProperty(s)&&s in lb)return kp[e]=t[s];return e}var ob=Iu("animationend"),cb=Iu("animationiteration"),db=Iu("animationstart"),ub=Iu("transitionend"),mb=new Map,Bv="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ei(e,t){mb.set(e,t),la(t,[e])}for(var Cp=0;Cp<Bv.length;Cp++){var Ap=Bv[Cp],US=Ap.toLowerCase(),BS=Ap[0].toUpperCase()+Ap.slice(1);Ei(US,"on"+BS)}Ei(ob,"onAnimationEnd");Ei(cb,"onAnimationIteration");Ei(db,"onAnimationStart");Ei("dblclick","onDoubleClick");Ei("focusin","onFocus");Ei("focusout","onBlur");Ei(ub,"onTransitionEnd");ol("onMouseEnter",["mouseout","mouseover"]);ol("onMouseLeave",["mouseout","mouseover"]);ol("onPointerEnter",["pointerout","pointerover"]);ol("onPointerLeave",["pointerout","pointerover"]);la("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));la("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));la("onBeforeInput",["compositionend","keypress","textInput","paste"]);la("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));la("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));la("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var mo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),zS=new Set("cancel close invalid load scroll toggle".split(" ").concat(mo));function zv(e,t,s){var r=e.type||"unknown-event";e.currentTarget=s,UN(r,t,void 0,e),e.currentTarget=null}function pb(e,t){t=(t&4)!==0;for(var s=0;s<e.length;s++){var r=e[s],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var l=r.length-1;0<=l;l--){var c=r[l],d=c.instance,p=c.currentTarget;if(c=c.listener,d!==a&&i.isPropagationStopped())break e;zv(i,c,p),a=d}else for(l=0;l<r.length;l++){if(c=r[l],d=c.instance,p=c.currentTarget,c=c.listener,d!==a&&i.isPropagationStopped())break e;zv(i,c,p),a=d}}}if(Zd)throw e=kf,Zd=!1,kf=null,e}function Ot(e,t){var s=t[Of];s===void 0&&(s=t[Of]=new Set);var r=e+"__bubble";s.has(r)||(fb(t,e,2,!1),s.add(r))}function Ep(e,t,s){var r=0;t&&(r|=4),fb(s,e,r,t)}var od="_reactListening"+Math.random().toString(36).slice(2);function Io(e){if(!e[od]){e[od]=!0,bj.forEach(function(s){s!=="selectionchange"&&(zS.has(s)||Ep(s,!1,e),Ep(s,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[od]||(t[od]=!0,Ep("selectionchange",!1,t))}}function fb(e,t,s,r){switch(Yj(t)){case 1:var i=nS;break;case 4:i=sS;break;default:i=Oh}s=i.bind(null,t,s,e),i=void 0,!Sf||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,s,{capture:!0,passive:i}):e.addEventListener(t,s,!0):i!==void 0?e.addEventListener(t,s,{passive:i}):e.addEventListener(t,s,!1)}function Tp(e,t,s,r,i){var a=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var l=r.tag;if(l===3||l===4){var c=r.stateNode.containerInfo;if(c===i||c.nodeType===8&&c.parentNode===i)break;if(l===4)for(l=r.return;l!==null;){var d=l.tag;if((d===3||d===4)&&(d=l.stateNode.containerInfo,d===i||d.nodeType===8&&d.parentNode===i))return;l=l.return}for(;c!==null;){if(l=Ki(c),l===null)return;if(d=l.tag,d===5||d===6){r=a=l;continue e}c=c.parentNode}}r=r.return}Dj(function(){var p=a,g=Mh(s),v=[];e:{var S=mb.get(e);if(S!==void 0){var O=Dh,x=e;switch(e){case"keypress":if(Id(s)===0)break e;case"keydown":case"keyup":O=xS;break;case"focusin":x="focus",O=wp;break;case"focusout":x="blur",O=wp;break;case"beforeblur":case"afterblur":O=wp;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":O=Rv;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":O=aS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":O=bS;break;case ob:case cb:case db:O=cS;break;case ub:O=NS;break;case"scroll":O=rS;break;case"wheel":O=kS;break;case"copy":case"cut":case"paste":O=uS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":O=Pv}var y=(t&4)!==0,M=!y&&e==="scroll",k=y?S!==null?S+"Capture":null:S;y=[];for(var j=p,C;j!==null;){C=j;var E=C.stateNode;if(C.tag===5&&E!==null&&(C=E,k!==null&&(E=Eo(j,k),E!=null&&y.push(Oo(j,E,C)))),M)break;j=j.return}0<y.length&&(S=new O(S,x,null,s,g),v.push({event:S,listeners:y}))}}if(!(t&7)){e:{if(S=e==="mouseover"||e==="pointerover",O=e==="mouseout"||e==="pointerout",S&&s!==wf&&(x=s.relatedTarget||s.fromElement)&&(Ki(x)||x[Ur]))break e;if((O||S)&&(S=g.window===g?g:(S=g.ownerDocument)?S.defaultView||S.parentWindow:window,O?(x=s.relatedTarget||s.toElement,O=p,x=x?Ki(x):null,x!==null&&(M=oa(x),x!==M||x.tag!==5&&x.tag!==6)&&(x=null)):(O=null,x=p),O!==x)){if(y=Rv,E="onMouseLeave",k="onMouseEnter",j="mouse",(e==="pointerout"||e==="pointerover")&&(y=Pv,E="onPointerLeave",k="onPointerEnter",j="pointer"),M=O==null?S:Ha(O),C=x==null?S:Ha(x),S=new y(E,j+"leave",O,s,g),S.target=M,S.relatedTarget=C,E=null,Ki(g)===p&&(y=new y(k,j+"enter",x,s,g),y.target=C,y.relatedTarget=M,E=y),M=E,O&&x)t:{for(y=O,k=x,j=0,C=y;C;C=Pa(C))j++;for(C=0,E=k;E;E=Pa(E))C++;for(;0<j-C;)y=Pa(y),j--;for(;0<C-j;)k=Pa(k),C--;for(;j--;){if(y===k||k!==null&&y===k.alternate)break t;y=Pa(y),k=Pa(k)}y=null}else y=null;O!==null&&Wv(v,S,O,y,!1),x!==null&&M!==null&&Wv(v,M,x,y,!0)}}e:{if(S=p?Ha(p):window,O=S.nodeName&&S.nodeName.toLowerCase(),O==="select"||O==="input"&&S.type==="file")var B=PS;else if(Ov(S))if(sb)B=$S;else{B=IS;var _=LS}else(O=S.nodeName)&&O.toLowerCase()==="input"&&(S.type==="checkbox"||S.type==="radio")&&(B=OS);if(B&&(B=B(e,p))){nb(v,B,s,g);break e}_&&_(e,S,p),e==="focusout"&&(_=S._wrapperState)&&_.controlled&&S.type==="number"&&vf(S,"number",S.value)}switch(_=p?Ha(p):window,e){case"focusin":(Ov(_)||_.contentEditable==="true")&&(Wa=_,Tf=p,xo=null);break;case"focusout":xo=Tf=Wa=null;break;case"mousedown":Rf=!0;break;case"contextmenu":case"mouseup":case"dragend":Rf=!1,Uv(v,s,g);break;case"selectionchange":if(FS)break;case"keydown":case"keyup":Uv(v,s,g)}var F;if(Fh)e:{switch(e){case"compositionstart":var J="onCompositionStart";break e;case"compositionend":J="onCompositionEnd";break e;case"compositionupdate":J="onCompositionUpdate";break e}J=void 0}else za?eb(e,s)&&(J="onCompositionEnd"):e==="keydown"&&s.keyCode===229&&(J="onCompositionStart");J&&(Zj&&s.locale!=="ko"&&(za||J!=="onCompositionStart"?J==="onCompositionEnd"&&za&&(F=Xj()):(pi=g,$h="value"in pi?pi.value:pi.textContent,za=!0)),_=ru(p,J),0<_.length&&(J=new Mv(J,e,null,s,g),v.push({event:J,listeners:_}),F?J.data=F:(F=tb(s),F!==null&&(J.data=F)))),(F=AS?ES(e,s):TS(e,s))&&(p=ru(p,"onBeforeInput"),0<p.length&&(g=new Mv("onBeforeInput","beforeinput",null,s,g),v.push({event:g,listeners:p}),g.data=F))}pb(v,t)})}function Oo(e,t,s){return{instance:e,listener:t,currentTarget:s}}function ru(e,t){for(var s=t+"Capture",r=[];e!==null;){var i=e,a=i.stateNode;i.tag===5&&a!==null&&(i=a,a=Eo(e,s),a!=null&&r.unshift(Oo(e,a,i)),a=Eo(e,t),a!=null&&r.push(Oo(e,a,i))),e=e.return}return r}function Pa(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Wv(e,t,s,r,i){for(var a=t._reactName,l=[];s!==null&&s!==r;){var c=s,d=c.alternate,p=c.stateNode;if(d!==null&&d===r)break;c.tag===5&&p!==null&&(c=p,i?(d=Eo(s,a),d!=null&&l.unshift(Oo(s,d,c))):i||(d=Eo(s,a),d!=null&&l.push(Oo(s,d,c)))),s=s.return}l.length!==0&&e.push({event:t,listeners:l})}var WS=/\r\n?/g,qS=/\u0000|\uFFFD/g;function qv(e){return(typeof e=="string"?e:""+e).replace(WS,`
`).replace(qS,"")}function cd(e,t,s){if(t=qv(t),qv(e)!==t&&s)throw Error(be(425))}function iu(){}var Mf=null,Pf=null;function Lf(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var If=typeof setTimeout=="function"?setTimeout:void 0,HS=typeof clearTimeout=="function"?clearTimeout:void 0,Hv=typeof Promise=="function"?Promise:void 0,VS=typeof queueMicrotask=="function"?queueMicrotask:typeof Hv<"u"?function(e){return Hv.resolve(null).then(e).catch(KS)}:If;function KS(e){setTimeout(function(){throw e})}function Rp(e,t){var s=t,r=0;do{var i=s.nextSibling;if(e.removeChild(s),i&&i.nodeType===8)if(s=i.data,s==="/$"){if(r===0){e.removeChild(i),Mo(t);return}r--}else s!=="$"&&s!=="$?"&&s!=="$!"||r++;s=i}while(s);Mo(t)}function ji(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Vv(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="$"||s==="$!"||s==="$?"){if(t===0)return e;t--}else s==="/$"&&t++}e=e.previousSibling}return null}var jl=Math.random().toString(36).slice(2),wr="__reactFiber$"+jl,$o="__reactProps$"+jl,Ur="__reactContainer$"+jl,Of="__reactEvents$"+jl,QS="__reactListeners$"+jl,GS="__reactHandles$"+jl;function Ki(e){var t=e[wr];if(t)return t;for(var s=e.parentNode;s;){if(t=s[Ur]||s[wr]){if(s=t.alternate,t.child!==null||s!==null&&s.child!==null)for(e=Vv(e);e!==null;){if(s=e[wr])return s;e=Vv(e)}return t}e=s,s=e.parentNode}return null}function tc(e){return e=e[wr]||e[Ur],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Ha(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(be(33))}function Ou(e){return e[$o]||null}var $f=[],Va=-1;function Ti(e){return{current:e}}function $t(e){0>Va||(e.current=$f[Va],$f[Va]=null,Va--)}function It(e,t){Va++,$f[Va]=e.current,e.current=t}var Ci={},$n=Ti(Ci),Yn=Ti(!1),ta=Ci;function cl(e,t){var s=e.type.contextTypes;if(!s)return Ci;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in s)i[a]=t[a];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Xn(e){return e=e.childContextTypes,e!=null}function au(){$t(Yn),$t($n)}function Kv(e,t,s){if($n.current!==Ci)throw Error(be(168));It($n,t),It(Yn,s)}function hb(e,t,s){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return s;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(be(108,LN(e)||"Unknown",i));return Ht({},s,r)}function lu(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ci,ta=$n.current,It($n,e),It(Yn,Yn.current),!0}function Qv(e,t,s){var r=e.stateNode;if(!r)throw Error(be(169));s?(e=hb(e,t,ta),r.__reactInternalMemoizedMergedChildContext=e,$t(Yn),$t($n),It($n,e)):$t(Yn),It(Yn,s)}var Or=null,$u=!1,Mp=!1;function gb(e){Or===null?Or=[e]:Or.push(e)}function JS(e){$u=!0,gb(e)}function Ri(){if(!Mp&&Or!==null){Mp=!0;var e=0,t=kt;try{var s=Or;for(kt=1;e<s.length;e++){var r=s[e];do r=r(!0);while(r!==null)}Or=null,$u=!1}catch(i){throw Or!==null&&(Or=Or.slice(e+1)),Bj(Ph,Ri),i}finally{kt=t,Mp=!1}}return null}var Ka=[],Qa=0,ou=null,cu=0,Is=[],Os=0,na=null,$r=1,Dr="";function qi(e,t){Ka[Qa++]=cu,Ka[Qa++]=ou,ou=e,cu=t}function vb(e,t,s){Is[Os++]=$r,Is[Os++]=Dr,Is[Os++]=na,na=e;var r=$r;e=Dr;var i=32-sr(r)-1;r&=~(1<<i),s+=1;var a=32-sr(t)+i;if(30<a){var l=i-i%5;a=(r&(1<<l)-1).toString(32),r>>=l,i-=l,$r=1<<32-sr(t)+i|s<<i|r,Dr=a+e}else $r=1<<a|s<<i|r,Dr=e}function Bh(e){e.return!==null&&(qi(e,1),vb(e,1,0))}function zh(e){for(;e===ou;)ou=Ka[--Qa],Ka[Qa]=null,cu=Ka[--Qa],Ka[Qa]=null;for(;e===na;)na=Is[--Os],Is[Os]=null,Dr=Is[--Os],Is[Os]=null,$r=Is[--Os],Is[Os]=null}var js=null,ys=null,Ft=!1,nr=null;function xb(e,t){var s=Ds(5,null,null,0);s.elementType="DELETED",s.stateNode=t,s.return=e,t=e.deletions,t===null?(e.deletions=[s],e.flags|=16):t.push(s)}function Gv(e,t){switch(e.tag){case 5:var s=e.type;return t=t.nodeType!==1||s.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,js=e,ys=ji(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,js=e,ys=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(s=na!==null?{id:$r,overflow:Dr}:null,e.memoizedState={dehydrated:t,treeContext:s,retryLane:1073741824},s=Ds(18,null,null,0),s.stateNode=t,s.return=e,e.child=s,js=e,ys=null,!0):!1;default:return!1}}function Df(e){return(e.mode&1)!==0&&(e.flags&128)===0}function _f(e){if(Ft){var t=ys;if(t){var s=t;if(!Gv(e,t)){if(Df(e))throw Error(be(418));t=ji(s.nextSibling);var r=js;t&&Gv(e,t)?xb(r,s):(e.flags=e.flags&-4097|2,Ft=!1,js=e)}}else{if(Df(e))throw Error(be(418));e.flags=e.flags&-4097|2,Ft=!1,js=e}}}function Jv(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;js=e}function dd(e){if(e!==js)return!1;if(!Ft)return Jv(e),Ft=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Lf(e.type,e.memoizedProps)),t&&(t=ys)){if(Df(e))throw yb(),Error(be(418));for(;t;)xb(e,t),t=ji(t.nextSibling)}if(Jv(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(be(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var s=e.data;if(s==="/$"){if(t===0){ys=ji(e.nextSibling);break e}t--}else s!=="$"&&s!=="$!"&&s!=="$?"||t++}e=e.nextSibling}ys=null}}else ys=js?ji(e.stateNode.nextSibling):null;return!0}function yb(){for(var e=ys;e;)e=ji(e.nextSibling)}function dl(){ys=js=null,Ft=!1}function Wh(e){nr===null?nr=[e]:nr.push(e)}var YS=Hr.ReactCurrentBatchConfig;function er(e,t){if(e&&e.defaultProps){t=Ht({},t),e=e.defaultProps;for(var s in e)t[s]===void 0&&(t[s]=e[s]);return t}return t}var du=Ti(null),uu=null,Ga=null,qh=null;function Hh(){qh=Ga=uu=null}function Vh(e){var t=du.current;$t(du),e._currentValue=t}function Ff(e,t,s){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===s)break;e=e.return}}function sl(e,t){uu=e,qh=Ga=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Jn=!0),e.firstContext=null)}function Fs(e){var t=e._currentValue;if(qh!==e)if(e={context:e,memoizedValue:t,next:null},Ga===null){if(uu===null)throw Error(be(308));Ga=e,uu.dependencies={lanes:0,firstContext:e}}else Ga=Ga.next=e;return t}var Qi=null;function Kh(e){Qi===null?Qi=[e]:Qi.push(e)}function jb(e,t,s,r){var i=t.interleaved;return i===null?(s.next=s,Kh(t)):(s.next=i.next,i.next=s),t.interleaved=s,Br(e,r)}function Br(e,t){e.lanes|=t;var s=e.alternate;for(s!==null&&(s.lanes|=t),s=e,e=e.return;e!==null;)e.childLanes|=t,s=e.alternate,s!==null&&(s.childLanes|=t),s=e,e=e.return;return s.tag===3?s.stateNode:null}var li=!1;function Qh(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function bb(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function _r(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function bi(e,t,s){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,jt&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Br(e,s)}return i=r.interleaved,i===null?(t.next=t,Kh(r)):(t.next=i.next,i.next=t),r.interleaved=t,Br(e,s)}function Od(e,t,s){if(t=t.updateQueue,t!==null&&(t=t.shared,(s&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,s|=r,t.lanes=s,Lh(e,s)}}function Yv(e,t){var s=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,s===r)){var i=null,a=null;if(s=s.firstBaseUpdate,s!==null){do{var l={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};a===null?i=a=l:a=a.next=l,s=s.next}while(s!==null);a===null?i=a=t:a=a.next=t}else i=a=t;s={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},e.updateQueue=s;return}e=s.lastBaseUpdate,e===null?s.firstBaseUpdate=t:e.next=t,s.lastBaseUpdate=t}function mu(e,t,s,r){var i=e.updateQueue;li=!1;var a=i.firstBaseUpdate,l=i.lastBaseUpdate,c=i.shared.pending;if(c!==null){i.shared.pending=null;var d=c,p=d.next;d.next=null,l===null?a=p:l.next=p,l=d;var g=e.alternate;g!==null&&(g=g.updateQueue,c=g.lastBaseUpdate,c!==l&&(c===null?g.firstBaseUpdate=p:c.next=p,g.lastBaseUpdate=d))}if(a!==null){var v=i.baseState;l=0,g=p=d=null,c=a;do{var S=c.lane,O=c.eventTime;if((r&S)===S){g!==null&&(g=g.next={eventTime:O,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var x=e,y=c;switch(S=t,O=s,y.tag){case 1:if(x=y.payload,typeof x=="function"){v=x.call(O,v,S);break e}v=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=y.payload,S=typeof x=="function"?x.call(O,v,S):x,S==null)break e;v=Ht({},v,S);break e;case 2:li=!0}}c.callback!==null&&c.lane!==0&&(e.flags|=64,S=i.effects,S===null?i.effects=[c]:S.push(c))}else O={eventTime:O,lane:S,tag:c.tag,payload:c.payload,callback:c.callback,next:null},g===null?(p=g=O,d=v):g=g.next=O,l|=S;if(c=c.next,c===null){if(c=i.shared.pending,c===null)break;S=c,c=S.next,S.next=null,i.lastBaseUpdate=S,i.shared.pending=null}}while(1);if(g===null&&(d=v),i.baseState=d,i.firstBaseUpdate=p,i.lastBaseUpdate=g,t=i.shared.interleaved,t!==null){i=t;do l|=i.lane,i=i.next;while(i!==t)}else a===null&&(i.shared.lanes=0);ra|=l,e.lanes=l,e.memoizedState=v}}function Xv(e,t,s){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=s,typeof i!="function")throw Error(be(191,i));i.call(r)}}}var wb=new jj.Component().refs;function Uf(e,t,s,r){t=e.memoizedState,s=s(r,t),s=s==null?t:Ht({},t,s),e.memoizedState=s,e.lanes===0&&(e.updateQueue.baseState=s)}var Du={isMounted:function(e){return(e=e._reactInternals)?oa(e)===e:!1},enqueueSetState:function(e,t,s){e=e._reactInternals;var r=Un(),i=Ni(e),a=_r(r,i);a.payload=t,s!=null&&(a.callback=s),t=bi(e,a,i),t!==null&&(rr(t,e,i,r),Od(t,e,i))},enqueueReplaceState:function(e,t,s){e=e._reactInternals;var r=Un(),i=Ni(e),a=_r(r,i);a.tag=1,a.payload=t,s!=null&&(a.callback=s),t=bi(e,a,i),t!==null&&(rr(t,e,i,r),Od(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var s=Un(),r=Ni(e),i=_r(s,r);i.tag=2,t!=null&&(i.callback=t),t=bi(e,i,r),t!==null&&(rr(t,e,r,s),Od(t,e,r))}};function Zv(e,t,s,r,i,a,l){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,a,l):t.prototype&&t.prototype.isPureReactComponent?!Lo(s,r)||!Lo(i,a):!0}function Nb(e,t,s){var r=!1,i=Ci,a=t.contextType;return typeof a=="object"&&a!==null?a=Fs(a):(i=Xn(t)?ta:$n.current,r=t.contextTypes,a=(r=r!=null)?cl(e,i):Ci),t=new t(s,a),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Du,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function ex(e,t,s,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(s,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(s,r),t.state!==e&&Du.enqueueReplaceState(t,t.state,null)}function Bf(e,t,s,r){var i=e.stateNode;i.props=s,i.state=e.memoizedState,i.refs=wb,Qh(e);var a=t.contextType;typeof a=="object"&&a!==null?i.context=Fs(a):(a=Xn(t)?ta:$n.current,i.context=cl(e,a)),i.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(Uf(e,t,a,s),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&Du.enqueueReplaceState(i,i.state,null),mu(e,s,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function eo(e,t,s){if(e=s.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(be(309));var r=s.stateNode}if(!r)throw Error(be(147,e));var i=r,a=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===a?t.ref:(t=function(l){var c=i.refs;c===wb&&(c=i.refs={}),l===null?delete c[a]:c[a]=l},t._stringRef=a,t)}if(typeof e!="string")throw Error(be(284));if(!s._owner)throw Error(be(290,e))}return e}function ud(e,t){throw e=Object.prototype.toString.call(t),Error(be(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function tx(e){var t=e._init;return t(e._payload)}function Sb(e){function t(k,j){if(e){var C=k.deletions;C===null?(k.deletions=[j],k.flags|=16):C.push(j)}}function s(k,j){if(!e)return null;for(;j!==null;)t(k,j),j=j.sibling;return null}function r(k,j){for(k=new Map;j!==null;)j.key!==null?k.set(j.key,j):k.set(j.index,j),j=j.sibling;return k}function i(k,j){return k=Si(k,j),k.index=0,k.sibling=null,k}function a(k,j,C){return k.index=C,e?(C=k.alternate,C!==null?(C=C.index,C<j?(k.flags|=2,j):C):(k.flags|=2,j)):(k.flags|=1048576,j)}function l(k){return e&&k.alternate===null&&(k.flags|=2),k}function c(k,j,C,E){return j===null||j.tag!==6?(j=_p(C,k.mode,E),j.return=k,j):(j=i(j,C),j.return=k,j)}function d(k,j,C,E){var B=C.type;return B===Ba?g(k,j,C.props.children,E,C.key):j!==null&&(j.elementType===B||typeof B=="object"&&B!==null&&B.$$typeof===ai&&tx(B)===j.type)?(E=i(j,C.props),E.ref=eo(k,j,C),E.return=k,E):(E=Bd(C.type,C.key,C.props,null,k.mode,E),E.ref=eo(k,j,C),E.return=k,E)}function p(k,j,C,E){return j===null||j.tag!==4||j.stateNode.containerInfo!==C.containerInfo||j.stateNode.implementation!==C.implementation?(j=Fp(C,k.mode,E),j.return=k,j):(j=i(j,C.children||[]),j.return=k,j)}function g(k,j,C,E,B){return j===null||j.tag!==7?(j=Zi(C,k.mode,E,B),j.return=k,j):(j=i(j,C),j.return=k,j)}function v(k,j,C){if(typeof j=="string"&&j!==""||typeof j=="number")return j=_p(""+j,k.mode,C),j.return=k,j;if(typeof j=="object"&&j!==null){switch(j.$$typeof){case ed:return C=Bd(j.type,j.key,j.props,null,k.mode,C),C.ref=eo(k,null,j),C.return=k,C;case Ua:return j=Fp(j,k.mode,C),j.return=k,j;case ai:var E=j._init;return v(k,E(j._payload),C)}if(co(j)||Gl(j))return j=Zi(j,k.mode,C,null),j.return=k,j;ud(k,j)}return null}function S(k,j,C,E){var B=j!==null?j.key:null;if(typeof C=="string"&&C!==""||typeof C=="number")return B!==null?null:c(k,j,""+C,E);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case ed:return C.key===B?d(k,j,C,E):null;case Ua:return C.key===B?p(k,j,C,E):null;case ai:return B=C._init,S(k,j,B(C._payload),E)}if(co(C)||Gl(C))return B!==null?null:g(k,j,C,E,null);ud(k,C)}return null}function O(k,j,C,E,B){if(typeof E=="string"&&E!==""||typeof E=="number")return k=k.get(C)||null,c(j,k,""+E,B);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case ed:return k=k.get(E.key===null?C:E.key)||null,d(j,k,E,B);case Ua:return k=k.get(E.key===null?C:E.key)||null,p(j,k,E,B);case ai:var _=E._init;return O(k,j,C,_(E._payload),B)}if(co(E)||Gl(E))return k=k.get(C)||null,g(j,k,E,B,null);ud(j,E)}return null}function x(k,j,C,E){for(var B=null,_=null,F=j,J=j=0,ue=null;F!==null&&J<C.length;J++){F.index>J?(ue=F,F=null):ue=F.sibling;var Y=S(k,F,C[J],E);if(Y===null){F===null&&(F=ue);break}e&&F&&Y.alternate===null&&t(k,F),j=a(Y,j,J),_===null?B=Y:_.sibling=Y,_=Y,F=ue}if(J===C.length)return s(k,F),Ft&&qi(k,J),B;if(F===null){for(;J<C.length;J++)F=v(k,C[J],E),F!==null&&(j=a(F,j,J),_===null?B=F:_.sibling=F,_=F);return Ft&&qi(k,J),B}for(F=r(k,F);J<C.length;J++)ue=O(F,k,J,C[J],E),ue!==null&&(e&&ue.alternate!==null&&F.delete(ue.key===null?J:ue.key),j=a(ue,j,J),_===null?B=ue:_.sibling=ue,_=ue);return e&&F.forEach(function(xe){return t(k,xe)}),Ft&&qi(k,J),B}function y(k,j,C,E){var B=Gl(C);if(typeof B!="function")throw Error(be(150));if(C=B.call(C),C==null)throw Error(be(151));for(var _=B=null,F=j,J=j=0,ue=null,Y=C.next();F!==null&&!Y.done;J++,Y=C.next()){F.index>J?(ue=F,F=null):ue=F.sibling;var xe=S(k,F,Y.value,E);if(xe===null){F===null&&(F=ue);break}e&&F&&xe.alternate===null&&t(k,F),j=a(xe,j,J),_===null?B=xe:_.sibling=xe,_=xe,F=ue}if(Y.done)return s(k,F),Ft&&qi(k,J),B;if(F===null){for(;!Y.done;J++,Y=C.next())Y=v(k,Y.value,E),Y!==null&&(j=a(Y,j,J),_===null?B=Y:_.sibling=Y,_=Y);return Ft&&qi(k,J),B}for(F=r(k,F);!Y.done;J++,Y=C.next())Y=O(F,k,J,Y.value,E),Y!==null&&(e&&Y.alternate!==null&&F.delete(Y.key===null?J:Y.key),j=a(Y,j,J),_===null?B=Y:_.sibling=Y,_=Y);return e&&F.forEach(function(Ne){return t(k,Ne)}),Ft&&qi(k,J),B}function M(k,j,C,E){if(typeof C=="object"&&C!==null&&C.type===Ba&&C.key===null&&(C=C.props.children),typeof C=="object"&&C!==null){switch(C.$$typeof){case ed:e:{for(var B=C.key,_=j;_!==null;){if(_.key===B){if(B=C.type,B===Ba){if(_.tag===7){s(k,_.sibling),j=i(_,C.props.children),j.return=k,k=j;break e}}else if(_.elementType===B||typeof B=="object"&&B!==null&&B.$$typeof===ai&&tx(B)===_.type){s(k,_.sibling),j=i(_,C.props),j.ref=eo(k,_,C),j.return=k,k=j;break e}s(k,_);break}else t(k,_);_=_.sibling}C.type===Ba?(j=Zi(C.props.children,k.mode,E,C.key),j.return=k,k=j):(E=Bd(C.type,C.key,C.props,null,k.mode,E),E.ref=eo(k,j,C),E.return=k,k=E)}return l(k);case Ua:e:{for(_=C.key;j!==null;){if(j.key===_)if(j.tag===4&&j.stateNode.containerInfo===C.containerInfo&&j.stateNode.implementation===C.implementation){s(k,j.sibling),j=i(j,C.children||[]),j.return=k,k=j;break e}else{s(k,j);break}else t(k,j);j=j.sibling}j=Fp(C,k.mode,E),j.return=k,k=j}return l(k);case ai:return _=C._init,M(k,j,_(C._payload),E)}if(co(C))return x(k,j,C,E);if(Gl(C))return y(k,j,C,E);ud(k,C)}return typeof C=="string"&&C!==""||typeof C=="number"?(C=""+C,j!==null&&j.tag===6?(s(k,j.sibling),j=i(j,C),j.return=k,k=j):(s(k,j),j=_p(C,k.mode,E),j.return=k,k=j),l(k)):s(k,j)}return M}var ul=Sb(!0),kb=Sb(!1),nc={},kr=Ti(nc),Do=Ti(nc),_o=Ti(nc);function Gi(e){if(e===nc)throw Error(be(174));return e}function Gh(e,t){switch(It(_o,t),It(Do,e),It(kr,nc),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:yf(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=yf(t,e)}$t(kr),It(kr,t)}function ml(){$t(kr),$t(Do),$t(_o)}function Cb(e){Gi(_o.current);var t=Gi(kr.current),s=yf(t,e.type);t!==s&&(It(Do,e),It(kr,s))}function Jh(e){Do.current===e&&($t(kr),$t(Do))}var Wt=Ti(0);function pu(e){for(var t=e;t!==null;){if(t.tag===13){var s=t.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Pp=[];function Yh(){for(var e=0;e<Pp.length;e++)Pp[e]._workInProgressVersionPrimary=null;Pp.length=0}var $d=Hr.ReactCurrentDispatcher,Lp=Hr.ReactCurrentBatchConfig,sa=0,qt=null,pn=null,vn=null,fu=!1,yo=!1,Fo=0,XS=0;function Rn(){throw Error(be(321))}function Xh(e,t){if(t===null)return!1;for(var s=0;s<t.length&&s<e.length;s++)if(!ar(e[s],t[s]))return!1;return!0}function Zh(e,t,s,r,i,a){if(sa=a,qt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,$d.current=e===null||e.memoizedState===null?nk:sk,e=s(r,i),yo){a=0;do{if(yo=!1,Fo=0,25<=a)throw Error(be(301));a+=1,vn=pn=null,t.updateQueue=null,$d.current=rk,e=s(r,i)}while(yo)}if($d.current=hu,t=pn!==null&&pn.next!==null,sa=0,vn=pn=qt=null,fu=!1,t)throw Error(be(300));return e}function eg(){var e=Fo!==0;return Fo=0,e}function yr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return vn===null?qt.memoizedState=vn=e:vn=vn.next=e,vn}function Us(){if(pn===null){var e=qt.alternate;e=e!==null?e.memoizedState:null}else e=pn.next;var t=vn===null?qt.memoizedState:vn.next;if(t!==null)vn=t,pn=e;else{if(e===null)throw Error(be(310));pn=e,e={memoizedState:pn.memoizedState,baseState:pn.baseState,baseQueue:pn.baseQueue,queue:pn.queue,next:null},vn===null?qt.memoizedState=vn=e:vn=vn.next=e}return vn}function Uo(e,t){return typeof t=="function"?t(e):t}function Ip(e){var t=Us(),s=t.queue;if(s===null)throw Error(be(311));s.lastRenderedReducer=e;var r=pn,i=r.baseQueue,a=s.pending;if(a!==null){if(i!==null){var l=i.next;i.next=a.next,a.next=l}r.baseQueue=i=a,s.pending=null}if(i!==null){a=i.next,r=r.baseState;var c=l=null,d=null,p=a;do{var g=p.lane;if((sa&g)===g)d!==null&&(d=d.next={lane:0,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null}),r=p.hasEagerState?p.eagerState:e(r,p.action);else{var v={lane:g,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null};d===null?(c=d=v,l=r):d=d.next=v,qt.lanes|=g,ra|=g}p=p.next}while(p!==null&&p!==a);d===null?l=r:d.next=c,ar(r,t.memoizedState)||(Jn=!0),t.memoizedState=r,t.baseState=l,t.baseQueue=d,s.lastRenderedState=r}if(e=s.interleaved,e!==null){i=e;do a=i.lane,qt.lanes|=a,ra|=a,i=i.next;while(i!==e)}else i===null&&(s.lanes=0);return[t.memoizedState,s.dispatch]}function Op(e){var t=Us(),s=t.queue;if(s===null)throw Error(be(311));s.lastRenderedReducer=e;var r=s.dispatch,i=s.pending,a=t.memoizedState;if(i!==null){s.pending=null;var l=i=i.next;do a=e(a,l.action),l=l.next;while(l!==i);ar(a,t.memoizedState)||(Jn=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),s.lastRenderedState=a}return[a,r]}function Ab(){}function Eb(e,t){var s=qt,r=Us(),i=t(),a=!ar(r.memoizedState,i);if(a&&(r.memoizedState=i,Jn=!0),r=r.queue,tg(Mb.bind(null,s,r,e),[e]),r.getSnapshot!==t||a||vn!==null&&vn.memoizedState.tag&1){if(s.flags|=2048,Bo(9,Rb.bind(null,s,r,i,t),void 0,null),xn===null)throw Error(be(349));sa&30||Tb(s,t,i)}return i}function Tb(e,t,s){e.flags|=16384,e={getSnapshot:t,value:s},t=qt.updateQueue,t===null?(t={lastEffect:null,stores:null},qt.updateQueue=t,t.stores=[e]):(s=t.stores,s===null?t.stores=[e]:s.push(e))}function Rb(e,t,s,r){t.value=s,t.getSnapshot=r,Pb(t)&&Lb(e)}function Mb(e,t,s){return s(function(){Pb(t)&&Lb(e)})}function Pb(e){var t=e.getSnapshot;e=e.value;try{var s=t();return!ar(e,s)}catch{return!0}}function Lb(e){var t=Br(e,1);t!==null&&rr(t,e,1,-1)}function nx(e){var t=yr();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Uo,lastRenderedState:e},t.queue=e,e=e.dispatch=tk.bind(null,qt,e),[t.memoizedState,e]}function Bo(e,t,s,r){return e={tag:e,create:t,destroy:s,deps:r,next:null},t=qt.updateQueue,t===null?(t={lastEffect:null,stores:null},qt.updateQueue=t,t.lastEffect=e.next=e):(s=t.lastEffect,s===null?t.lastEffect=e.next=e:(r=s.next,s.next=e,e.next=r,t.lastEffect=e)),e}function Ib(){return Us().memoizedState}function Dd(e,t,s,r){var i=yr();qt.flags|=e,i.memoizedState=Bo(1|t,s,void 0,r===void 0?null:r)}function _u(e,t,s,r){var i=Us();r=r===void 0?null:r;var a=void 0;if(pn!==null){var l=pn.memoizedState;if(a=l.destroy,r!==null&&Xh(r,l.deps)){i.memoizedState=Bo(t,s,a,r);return}}qt.flags|=e,i.memoizedState=Bo(1|t,s,a,r)}function sx(e,t){return Dd(8390656,8,e,t)}function tg(e,t){return _u(2048,8,e,t)}function Ob(e,t){return _u(4,2,e,t)}function $b(e,t){return _u(4,4,e,t)}function Db(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function _b(e,t,s){return s=s!=null?s.concat([e]):null,_u(4,4,Db.bind(null,t,e),s)}function ng(){}function Fb(e,t){var s=Us();t=t===void 0?null:t;var r=s.memoizedState;return r!==null&&t!==null&&Xh(t,r[1])?r[0]:(s.memoizedState=[e,t],e)}function Ub(e,t){var s=Us();t=t===void 0?null:t;var r=s.memoizedState;return r!==null&&t!==null&&Xh(t,r[1])?r[0]:(e=e(),s.memoizedState=[e,t],e)}function Bb(e,t,s){return sa&21?(ar(s,t)||(s=qj(),qt.lanes|=s,ra|=s,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Jn=!0),e.memoizedState=s)}function ZS(e,t){var s=kt;kt=s!==0&&4>s?s:4,e(!0);var r=Lp.transition;Lp.transition={};try{e(!1),t()}finally{kt=s,Lp.transition=r}}function zb(){return Us().memoizedState}function ek(e,t,s){var r=Ni(e);if(s={lane:r,action:s,hasEagerState:!1,eagerState:null,next:null},Wb(e))qb(t,s);else if(s=jb(e,t,s,r),s!==null){var i=Un();rr(s,e,r,i),Hb(s,t,r)}}function tk(e,t,s){var r=Ni(e),i={lane:r,action:s,hasEagerState:!1,eagerState:null,next:null};if(Wb(e))qb(t,i);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var l=t.lastRenderedState,c=a(l,s);if(i.hasEagerState=!0,i.eagerState=c,ar(c,l)){var d=t.interleaved;d===null?(i.next=i,Kh(t)):(i.next=d.next,d.next=i),t.interleaved=i;return}}catch{}finally{}s=jb(e,t,i,r),s!==null&&(i=Un(),rr(s,e,r,i),Hb(s,t,r))}}function Wb(e){var t=e.alternate;return e===qt||t!==null&&t===qt}function qb(e,t){yo=fu=!0;var s=e.pending;s===null?t.next=t:(t.next=s.next,s.next=t),e.pending=t}function Hb(e,t,s){if(s&4194240){var r=t.lanes;r&=e.pendingLanes,s|=r,t.lanes=s,Lh(e,s)}}var hu={readContext:Fs,useCallback:Rn,useContext:Rn,useEffect:Rn,useImperativeHandle:Rn,useInsertionEffect:Rn,useLayoutEffect:Rn,useMemo:Rn,useReducer:Rn,useRef:Rn,useState:Rn,useDebugValue:Rn,useDeferredValue:Rn,useTransition:Rn,useMutableSource:Rn,useSyncExternalStore:Rn,useId:Rn,unstable_isNewReconciler:!1},nk={readContext:Fs,useCallback:function(e,t){return yr().memoizedState=[e,t===void 0?null:t],e},useContext:Fs,useEffect:sx,useImperativeHandle:function(e,t,s){return s=s!=null?s.concat([e]):null,Dd(4194308,4,Db.bind(null,t,e),s)},useLayoutEffect:function(e,t){return Dd(4194308,4,e,t)},useInsertionEffect:function(e,t){return Dd(4,2,e,t)},useMemo:function(e,t){var s=yr();return t=t===void 0?null:t,e=e(),s.memoizedState=[e,t],e},useReducer:function(e,t,s){var r=yr();return t=s!==void 0?s(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=ek.bind(null,qt,e),[r.memoizedState,e]},useRef:function(e){var t=yr();return e={current:e},t.memoizedState=e},useState:nx,useDebugValue:ng,useDeferredValue:function(e){return yr().memoizedState=e},useTransition:function(){var e=nx(!1),t=e[0];return e=ZS.bind(null,e[1]),yr().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,s){var r=qt,i=yr();if(Ft){if(s===void 0)throw Error(be(407));s=s()}else{if(s=t(),xn===null)throw Error(be(349));sa&30||Tb(r,t,s)}i.memoizedState=s;var a={value:s,getSnapshot:t};return i.queue=a,sx(Mb.bind(null,r,a,e),[e]),r.flags|=2048,Bo(9,Rb.bind(null,r,a,s,t),void 0,null),s},useId:function(){var e=yr(),t=xn.identifierPrefix;if(Ft){var s=Dr,r=$r;s=(r&~(1<<32-sr(r)-1)).toString(32)+s,t=":"+t+"R"+s,s=Fo++,0<s&&(t+="H"+s.toString(32)),t+=":"}else s=XS++,t=":"+t+"r"+s.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},sk={readContext:Fs,useCallback:Fb,useContext:Fs,useEffect:tg,useImperativeHandle:_b,useInsertionEffect:Ob,useLayoutEffect:$b,useMemo:Ub,useReducer:Ip,useRef:Ib,useState:function(){return Ip(Uo)},useDebugValue:ng,useDeferredValue:function(e){var t=Us();return Bb(t,pn.memoizedState,e)},useTransition:function(){var e=Ip(Uo)[0],t=Us().memoizedState;return[e,t]},useMutableSource:Ab,useSyncExternalStore:Eb,useId:zb,unstable_isNewReconciler:!1},rk={readContext:Fs,useCallback:Fb,useContext:Fs,useEffect:tg,useImperativeHandle:_b,useInsertionEffect:Ob,useLayoutEffect:$b,useMemo:Ub,useReducer:Op,useRef:Ib,useState:function(){return Op(Uo)},useDebugValue:ng,useDeferredValue:function(e){var t=Us();return pn===null?t.memoizedState=e:Bb(t,pn.memoizedState,e)},useTransition:function(){var e=Op(Uo)[0],t=Us().memoizedState;return[e,t]},useMutableSource:Ab,useSyncExternalStore:Eb,useId:zb,unstable_isNewReconciler:!1};function pl(e,t){try{var s="",r=t;do s+=PN(r),r=r.return;while(r);var i=s}catch(a){i=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:t,stack:i,digest:null}}function $p(e,t,s){return{value:e,source:null,stack:s??null,digest:t??null}}function zf(e,t){try{console.error(t.value)}catch(s){setTimeout(function(){throw s})}}var ik=typeof WeakMap=="function"?WeakMap:Map;function Vb(e,t,s){s=_r(-1,s),s.tag=3,s.payload={element:null};var r=t.value;return s.callback=function(){vu||(vu=!0,Xf=r),zf(e,t)},s}function Kb(e,t,s){s=_r(-1,s),s.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;s.payload=function(){return r(i)},s.callback=function(){zf(e,t)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(s.callback=function(){zf(e,t),typeof r!="function"&&(wi===null?wi=new Set([this]):wi.add(this));var l=t.stack;this.componentDidCatch(t.value,{componentStack:l!==null?l:""})}),s}function rx(e,t,s){var r=e.pingCache;if(r===null){r=e.pingCache=new ik;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(s)||(i.add(s),e=yk.bind(null,e,t,s),t.then(e,e))}function ix(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function ax(e,t,s,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(t=_r(-1,1),t.tag=2,bi(s,t,1))),s.lanes|=1),e)}var ak=Hr.ReactCurrentOwner,Jn=!1;function Fn(e,t,s,r){t.child=e===null?kb(t,null,s,r):ul(t,e.child,s,r)}function lx(e,t,s,r,i){s=s.render;var a=t.ref;return sl(t,i),r=Zh(e,t,s,r,a,i),s=eg(),e!==null&&!Jn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,zr(e,t,i)):(Ft&&s&&Bh(t),t.flags|=1,Fn(e,t,r,i),t.child)}function ox(e,t,s,r,i){if(e===null){var a=s.type;return typeof a=="function"&&!dg(a)&&a.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(t.tag=15,t.type=a,Qb(e,t,a,r,i)):(e=Bd(s.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!(e.lanes&i)){var l=a.memoizedProps;if(s=s.compare,s=s!==null?s:Lo,s(l,r)&&e.ref===t.ref)return zr(e,t,i)}return t.flags|=1,e=Si(a,r),e.ref=t.ref,e.return=t,t.child=e}function Qb(e,t,s,r,i){if(e!==null){var a=e.memoizedProps;if(Lo(a,r)&&e.ref===t.ref)if(Jn=!1,t.pendingProps=r=a,(e.lanes&i)!==0)e.flags&131072&&(Jn=!0);else return t.lanes=e.lanes,zr(e,t,i)}return Wf(e,t,s,r,i)}function Gb(e,t,s){var r=t.pendingProps,i=r.children,a=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},It(Ya,gs),gs|=s;else{if(!(s&1073741824))return e=a!==null?a.baseLanes|s:s,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,It(Ya,gs),gs|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=a!==null?a.baseLanes:s,It(Ya,gs),gs|=r}else a!==null?(r=a.baseLanes|s,t.memoizedState=null):r=s,It(Ya,gs),gs|=r;return Fn(e,t,i,s),t.child}function Jb(e,t){var s=t.ref;(e===null&&s!==null||e!==null&&e.ref!==s)&&(t.flags|=512,t.flags|=2097152)}function Wf(e,t,s,r,i){var a=Xn(s)?ta:$n.current;return a=cl(t,a),sl(t,i),s=Zh(e,t,s,r,a,i),r=eg(),e!==null&&!Jn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,zr(e,t,i)):(Ft&&r&&Bh(t),t.flags|=1,Fn(e,t,s,i),t.child)}function cx(e,t,s,r,i){if(Xn(s)){var a=!0;lu(t)}else a=!1;if(sl(t,i),t.stateNode===null)_d(e,t),Nb(t,s,r),Bf(t,s,r,i),r=!0;else if(e===null){var l=t.stateNode,c=t.memoizedProps;l.props=c;var d=l.context,p=s.contextType;typeof p=="object"&&p!==null?p=Fs(p):(p=Xn(s)?ta:$n.current,p=cl(t,p));var g=s.getDerivedStateFromProps,v=typeof g=="function"||typeof l.getSnapshotBeforeUpdate=="function";v||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(c!==r||d!==p)&&ex(t,l,r,p),li=!1;var S=t.memoizedState;l.state=S,mu(t,r,l,i),d=t.memoizedState,c!==r||S!==d||Yn.current||li?(typeof g=="function"&&(Uf(t,s,g,r),d=t.memoizedState),(c=li||Zv(t,s,c,r,S,d,p))?(v||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(t.flags|=4194308)):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=d),l.props=r,l.state=d,l.context=p,r=c):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{l=t.stateNode,bb(e,t),c=t.memoizedProps,p=t.type===t.elementType?c:er(t.type,c),l.props=p,v=t.pendingProps,S=l.context,d=s.contextType,typeof d=="object"&&d!==null?d=Fs(d):(d=Xn(s)?ta:$n.current,d=cl(t,d));var O=s.getDerivedStateFromProps;(g=typeof O=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(c!==v||S!==d)&&ex(t,l,r,d),li=!1,S=t.memoizedState,l.state=S,mu(t,r,l,i);var x=t.memoizedState;c!==v||S!==x||Yn.current||li?(typeof O=="function"&&(Uf(t,s,O,r),x=t.memoizedState),(p=li||Zv(t,s,p,r,S,x,d)||!1)?(g||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(r,x,d),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(r,x,d)),typeof l.componentDidUpdate=="function"&&(t.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof l.componentDidUpdate!="function"||c===e.memoizedProps&&S===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&S===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=x),l.props=r,l.state=x,l.context=d,r=p):(typeof l.componentDidUpdate!="function"||c===e.memoizedProps&&S===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&S===e.memoizedState||(t.flags|=1024),r=!1)}return qf(e,t,s,r,a,i)}function qf(e,t,s,r,i,a){Jb(e,t);var l=(t.flags&128)!==0;if(!r&&!l)return i&&Qv(t,s,!1),zr(e,t,a);r=t.stateNode,ak.current=t;var c=l&&typeof s.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&l?(t.child=ul(t,e.child,null,a),t.child=ul(t,null,c,a)):Fn(e,t,c,a),t.memoizedState=r.state,i&&Qv(t,s,!0),t.child}function Yb(e){var t=e.stateNode;t.pendingContext?Kv(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Kv(e,t.context,!1),Gh(e,t.containerInfo)}function dx(e,t,s,r,i){return dl(),Wh(i),t.flags|=256,Fn(e,t,s,r),t.child}var Hf={dehydrated:null,treeContext:null,retryLane:0};function Vf(e){return{baseLanes:e,cachePool:null,transitions:null}}function Xb(e,t,s){var r=t.pendingProps,i=Wt.current,a=!1,l=(t.flags&128)!==0,c;if((c=l)||(c=e!==null&&e.memoizedState===null?!1:(i&2)!==0),c?(a=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),It(Wt,i&1),e===null)return _f(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(l=r.children,e=r.fallback,a?(r=t.mode,a=t.child,l={mode:"hidden",children:l},!(r&1)&&a!==null?(a.childLanes=0,a.pendingProps=l):a=Bu(l,r,0,null),e=Zi(e,r,s,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Vf(s),t.memoizedState=Hf,e):sg(t,l));if(i=e.memoizedState,i!==null&&(c=i.dehydrated,c!==null))return lk(e,t,l,r,c,i,s);if(a){a=r.fallback,l=t.mode,i=e.child,c=i.sibling;var d={mode:"hidden",children:r.children};return!(l&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=d,t.deletions=null):(r=Si(i,d),r.subtreeFlags=i.subtreeFlags&14680064),c!==null?a=Si(c,a):(a=Zi(a,l,s,null),a.flags|=2),a.return=t,r.return=t,r.sibling=a,t.child=r,r=a,a=t.child,l=e.child.memoizedState,l=l===null?Vf(s):{baseLanes:l.baseLanes|s,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=e.childLanes&~s,t.memoizedState=Hf,r}return a=e.child,e=a.sibling,r=Si(a,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=s),r.return=t,r.sibling=null,e!==null&&(s=t.deletions,s===null?(t.deletions=[e],t.flags|=16):s.push(e)),t.child=r,t.memoizedState=null,r}function sg(e,t){return t=Bu({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function md(e,t,s,r){return r!==null&&Wh(r),ul(t,e.child,null,s),e=sg(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function lk(e,t,s,r,i,a,l){if(s)return t.flags&256?(t.flags&=-257,r=$p(Error(be(422))),md(e,t,l,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(a=r.fallback,i=t.mode,r=Bu({mode:"visible",children:r.children},i,0,null),a=Zi(a,i,l,null),a.flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,t.mode&1&&ul(t,e.child,null,l),t.child.memoizedState=Vf(l),t.memoizedState=Hf,a);if(!(t.mode&1))return md(e,t,l,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var c=r.dgst;return r=c,a=Error(be(419)),r=$p(a,r,void 0),md(e,t,l,r)}if(c=(l&e.childLanes)!==0,Jn||c){if(r=xn,r!==null){switch(l&-l){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|l)?0:i,i!==0&&i!==a.retryLane&&(a.retryLane=i,Br(e,i),rr(r,e,i,-1))}return cg(),r=$p(Error(be(421))),md(e,t,l,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=jk.bind(null,e),i._reactRetry=t,null):(e=a.treeContext,ys=ji(i.nextSibling),js=t,Ft=!0,nr=null,e!==null&&(Is[Os++]=$r,Is[Os++]=Dr,Is[Os++]=na,$r=e.id,Dr=e.overflow,na=t),t=sg(t,r.children),t.flags|=4096,t)}function ux(e,t,s){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Ff(e.return,t,s)}function Dp(e,t,s,r,i){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:s,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=s,a.tailMode=i)}function Zb(e,t,s){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(Fn(e,t,r.children,s),r=Wt.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&ux(e,s,t);else if(e.tag===19)ux(e,s,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(It(Wt,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(s=t.child,i=null;s!==null;)e=s.alternate,e!==null&&pu(e)===null&&(i=s),s=s.sibling;s=i,s===null?(i=t.child,t.child=null):(i=s.sibling,s.sibling=null),Dp(t,!1,i,s,a);break;case"backwards":for(s=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&pu(e)===null){t.child=i;break}e=i.sibling,i.sibling=s,s=i,i=e}Dp(t,!0,s,null,a);break;case"together":Dp(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function _d(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function zr(e,t,s){if(e!==null&&(t.dependencies=e.dependencies),ra|=t.lanes,!(s&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(be(153));if(t.child!==null){for(e=t.child,s=Si(e,e.pendingProps),t.child=s,s.return=t;e.sibling!==null;)e=e.sibling,s=s.sibling=Si(e,e.pendingProps),s.return=t;s.sibling=null}return t.child}function ok(e,t,s){switch(t.tag){case 3:Yb(t),dl();break;case 5:Cb(t);break;case 1:Xn(t.type)&&lu(t);break;case 4:Gh(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;It(du,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(It(Wt,Wt.current&1),t.flags|=128,null):s&t.child.childLanes?Xb(e,t,s):(It(Wt,Wt.current&1),e=zr(e,t,s),e!==null?e.sibling:null);It(Wt,Wt.current&1);break;case 19:if(r=(s&t.childLanes)!==0,e.flags&128){if(r)return Zb(e,t,s);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),It(Wt,Wt.current),r)break;return null;case 22:case 23:return t.lanes=0,Gb(e,t,s)}return zr(e,t,s)}var e0,Kf,t0,n0;e0=function(e,t){for(var s=t.child;s!==null;){if(s.tag===5||s.tag===6)e.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return;s=s.return}s.sibling.return=s.return,s=s.sibling}};Kf=function(){};t0=function(e,t,s,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Gi(kr.current);var a=null;switch(s){case"input":i=hf(e,i),r=hf(e,r),a=[];break;case"select":i=Ht({},i,{value:void 0}),r=Ht({},r,{value:void 0}),a=[];break;case"textarea":i=xf(e,i),r=xf(e,r),a=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=iu)}jf(s,r);var l;s=null;for(p in i)if(!r.hasOwnProperty(p)&&i.hasOwnProperty(p)&&i[p]!=null)if(p==="style"){var c=i[p];for(l in c)c.hasOwnProperty(l)&&(s||(s={}),s[l]="")}else p!=="dangerouslySetInnerHTML"&&p!=="children"&&p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&p!=="autoFocus"&&(Co.hasOwnProperty(p)?a||(a=[]):(a=a||[]).push(p,null));for(p in r){var d=r[p];if(c=i!=null?i[p]:void 0,r.hasOwnProperty(p)&&d!==c&&(d!=null||c!=null))if(p==="style")if(c){for(l in c)!c.hasOwnProperty(l)||d&&d.hasOwnProperty(l)||(s||(s={}),s[l]="");for(l in d)d.hasOwnProperty(l)&&c[l]!==d[l]&&(s||(s={}),s[l]=d[l])}else s||(a||(a=[]),a.push(p,s)),s=d;else p==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,c=c?c.__html:void 0,d!=null&&c!==d&&(a=a||[]).push(p,d)):p==="children"?typeof d!="string"&&typeof d!="number"||(a=a||[]).push(p,""+d):p!=="suppressContentEditableWarning"&&p!=="suppressHydrationWarning"&&(Co.hasOwnProperty(p)?(d!=null&&p==="onScroll"&&Ot("scroll",e),a||c===d||(a=[])):(a=a||[]).push(p,d))}s&&(a=a||[]).push("style",s);var p=a;(t.updateQueue=p)&&(t.flags|=4)}};n0=function(e,t,s,r){s!==r&&(t.flags|=4)};function to(e,t){if(!Ft)switch(e.tailMode){case"hidden":t=e.tail;for(var s=null;t!==null;)t.alternate!==null&&(s=t),t=t.sibling;s===null?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var r=null;s!==null;)s.alternate!==null&&(r=s),s=s.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Mn(e){var t=e.alternate!==null&&e.alternate.child===e.child,s=0,r=0;if(t)for(var i=e.child;i!==null;)s|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)s|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=s,t}function ck(e,t,s){var r=t.pendingProps;switch(zh(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Mn(t),null;case 1:return Xn(t.type)&&au(),Mn(t),null;case 3:return r=t.stateNode,ml(),$t(Yn),$t($n),Yh(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(dd(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,nr!==null&&(th(nr),nr=null))),Kf(e,t),Mn(t),null;case 5:Jh(t);var i=Gi(_o.current);if(s=t.type,e!==null&&t.stateNode!=null)t0(e,t,s,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(be(166));return Mn(t),null}if(e=Gi(kr.current),dd(t)){r=t.stateNode,s=t.type;var a=t.memoizedProps;switch(r[wr]=t,r[$o]=a,e=(t.mode&1)!==0,s){case"dialog":Ot("cancel",r),Ot("close",r);break;case"iframe":case"object":case"embed":Ot("load",r);break;case"video":case"audio":for(i=0;i<mo.length;i++)Ot(mo[i],r);break;case"source":Ot("error",r);break;case"img":case"image":case"link":Ot("error",r),Ot("load",r);break;case"details":Ot("toggle",r);break;case"input":jv(r,a),Ot("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Ot("invalid",r);break;case"textarea":wv(r,a),Ot("invalid",r)}jf(s,a),i=null;for(var l in a)if(a.hasOwnProperty(l)){var c=a[l];l==="children"?typeof c=="string"?r.textContent!==c&&(a.suppressHydrationWarning!==!0&&cd(r.textContent,c,e),i=["children",c]):typeof c=="number"&&r.textContent!==""+c&&(a.suppressHydrationWarning!==!0&&cd(r.textContent,c,e),i=["children",""+c]):Co.hasOwnProperty(l)&&c!=null&&l==="onScroll"&&Ot("scroll",r)}switch(s){case"input":td(r),bv(r,a,!0);break;case"textarea":td(r),Nv(r);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(r.onclick=iu)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{l=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Tj(s)),e==="http://www.w3.org/1999/xhtml"?s==="script"?(e=l.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=l.createElement(s,{is:r.is}):(e=l.createElement(s),s==="select"&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,s),e[wr]=t,e[$o]=r,e0(e,t,!1,!1),t.stateNode=e;e:{switch(l=bf(s,r),s){case"dialog":Ot("cancel",e),Ot("close",e),i=r;break;case"iframe":case"object":case"embed":Ot("load",e),i=r;break;case"video":case"audio":for(i=0;i<mo.length;i++)Ot(mo[i],e);i=r;break;case"source":Ot("error",e),i=r;break;case"img":case"image":case"link":Ot("error",e),Ot("load",e),i=r;break;case"details":Ot("toggle",e),i=r;break;case"input":jv(e,r),i=hf(e,r),Ot("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=Ht({},r,{value:void 0}),Ot("invalid",e);break;case"textarea":wv(e,r),i=xf(e,r),Ot("invalid",e);break;default:i=r}jf(s,i),c=i;for(a in c)if(c.hasOwnProperty(a)){var d=c[a];a==="style"?Pj(e,d):a==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,d!=null&&Rj(e,d)):a==="children"?typeof d=="string"?(s!=="textarea"||d!=="")&&Ao(e,d):typeof d=="number"&&Ao(e,""+d):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(Co.hasOwnProperty(a)?d!=null&&a==="onScroll"&&Ot("scroll",e):d!=null&&Ah(e,a,d,l))}switch(s){case"input":td(e),bv(e,r,!1);break;case"textarea":td(e),Nv(e);break;case"option":r.value!=null&&e.setAttribute("value",""+ki(r.value));break;case"select":e.multiple=!!r.multiple,a=r.value,a!=null?Za(e,!!r.multiple,a,!1):r.defaultValue!=null&&Za(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=iu)}switch(s){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Mn(t),null;case 6:if(e&&t.stateNode!=null)n0(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(be(166));if(s=Gi(_o.current),Gi(kr.current),dd(t)){if(r=t.stateNode,s=t.memoizedProps,r[wr]=t,(a=r.nodeValue!==s)&&(e=js,e!==null))switch(e.tag){case 3:cd(r.nodeValue,s,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&cd(r.nodeValue,s,(e.mode&1)!==0)}a&&(t.flags|=4)}else r=(s.nodeType===9?s:s.ownerDocument).createTextNode(r),r[wr]=t,t.stateNode=r}return Mn(t),null;case 13:if($t(Wt),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ft&&ys!==null&&t.mode&1&&!(t.flags&128))yb(),dl(),t.flags|=98560,a=!1;else if(a=dd(t),r!==null&&r.dehydrated!==null){if(e===null){if(!a)throw Error(be(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(be(317));a[wr]=t}else dl(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Mn(t),a=!1}else nr!==null&&(th(nr),nr=null),a=!0;if(!a)return t.flags&65536?t:null}return t.flags&128?(t.lanes=s,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Wt.current&1?fn===0&&(fn=3):cg())),t.updateQueue!==null&&(t.flags|=4),Mn(t),null);case 4:return ml(),Kf(e,t),e===null&&Io(t.stateNode.containerInfo),Mn(t),null;case 10:return Vh(t.type._context),Mn(t),null;case 17:return Xn(t.type)&&au(),Mn(t),null;case 19:if($t(Wt),a=t.memoizedState,a===null)return Mn(t),null;if(r=(t.flags&128)!==0,l=a.rendering,l===null)if(r)to(a,!1);else{if(fn!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(l=pu(e),l!==null){for(t.flags|=128,to(a,!1),r=l.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=s,s=t.child;s!==null;)a=s,e=r,a.flags&=14680066,l=a.alternate,l===null?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,e=l.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),s=s.sibling;return It(Wt,Wt.current&1|2),t.child}e=e.sibling}a.tail!==null&&Xt()>fl&&(t.flags|=128,r=!0,to(a,!1),t.lanes=4194304)}else{if(!r)if(e=pu(l),e!==null){if(t.flags|=128,r=!0,s=e.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),to(a,!0),a.tail===null&&a.tailMode==="hidden"&&!l.alternate&&!Ft)return Mn(t),null}else 2*Xt()-a.renderingStartTime>fl&&s!==1073741824&&(t.flags|=128,r=!0,to(a,!1),t.lanes=4194304);a.isBackwards?(l.sibling=t.child,t.child=l):(s=a.last,s!==null?s.sibling=l:t.child=l,a.last=l)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Xt(),t.sibling=null,s=Wt.current,It(Wt,r?s&1|2:s&1),t):(Mn(t),null);case 22:case 23:return og(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?gs&1073741824&&(Mn(t),t.subtreeFlags&6&&(t.flags|=8192)):Mn(t),null;case 24:return null;case 25:return null}throw Error(be(156,t.tag))}function dk(e,t){switch(zh(t),t.tag){case 1:return Xn(t.type)&&au(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ml(),$t(Yn),$t($n),Yh(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Jh(t),null;case 13:if($t(Wt),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(be(340));dl()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return $t(Wt),null;case 4:return ml(),null;case 10:return Vh(t.type._context),null;case 22:case 23:return og(),null;case 24:return null;default:return null}}var pd=!1,Ln=!1,uk=typeof WeakSet=="function"?WeakSet:Set,Ue=null;function Ja(e,t){var s=e.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(r){Jt(e,t,r)}else s.current=null}function Qf(e,t,s){try{s()}catch(r){Jt(e,t,r)}}var mx=!1;function mk(e,t){if(Mf=nu,e=ab(),Uh(e)){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else e:{s=(s=e.ownerDocument)&&s.defaultView||window;var r=s.getSelection&&s.getSelection();if(r&&r.rangeCount!==0){s=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{s.nodeType,a.nodeType}catch{s=null;break e}var l=0,c=-1,d=-1,p=0,g=0,v=e,S=null;t:for(;;){for(var O;v!==s||i!==0&&v.nodeType!==3||(c=l+i),v!==a||r!==0&&v.nodeType!==3||(d=l+r),v.nodeType===3&&(l+=v.nodeValue.length),(O=v.firstChild)!==null;)S=v,v=O;for(;;){if(v===e)break t;if(S===s&&++p===i&&(c=l),S===a&&++g===r&&(d=l),(O=v.nextSibling)!==null)break;v=S,S=v.parentNode}v=O}s=c===-1||d===-1?null:{start:c,end:d}}else s=null}s=s||{start:0,end:0}}else s=null;for(Pf={focusedElem:e,selectionRange:s},nu=!1,Ue=t;Ue!==null;)if(t=Ue,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Ue=e;else for(;Ue!==null;){t=Ue;try{var x=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var y=x.memoizedProps,M=x.memoizedState,k=t.stateNode,j=k.getSnapshotBeforeUpdate(t.elementType===t.type?y:er(t.type,y),M);k.__reactInternalSnapshotBeforeUpdate=j}break;case 3:var C=t.stateNode.containerInfo;C.nodeType===1?C.textContent="":C.nodeType===9&&C.documentElement&&C.removeChild(C.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(be(163))}}catch(E){Jt(t,t.return,E)}if(e=t.sibling,e!==null){e.return=t.return,Ue=e;break}Ue=t.return}return x=mx,mx=!1,x}function jo(e,t,s){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,a!==void 0&&Qf(t,s,a)}i=i.next}while(i!==r)}}function Fu(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var s=t=t.next;do{if((s.tag&e)===e){var r=s.create;s.destroy=r()}s=s.next}while(s!==t)}}function Gf(e){var t=e.ref;if(t!==null){var s=e.stateNode;switch(e.tag){case 5:e=s;break;default:e=s}typeof t=="function"?t(e):t.current=e}}function s0(e){var t=e.alternate;t!==null&&(e.alternate=null,s0(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[wr],delete t[$o],delete t[Of],delete t[QS],delete t[GS])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function r0(e){return e.tag===5||e.tag===3||e.tag===4}function px(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||r0(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Jf(e,t,s){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?s.nodeType===8?s.parentNode.insertBefore(e,t):s.insertBefore(e,t):(s.nodeType===8?(t=s.parentNode,t.insertBefore(e,s)):(t=s,t.appendChild(e)),s=s._reactRootContainer,s!=null||t.onclick!==null||(t.onclick=iu));else if(r!==4&&(e=e.child,e!==null))for(Jf(e,t,s),e=e.sibling;e!==null;)Jf(e,t,s),e=e.sibling}function Yf(e,t,s){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?s.insertBefore(e,t):s.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Yf(e,t,s),e=e.sibling;e!==null;)Yf(e,t,s),e=e.sibling}var Nn=null,tr=!1;function ri(e,t,s){for(s=s.child;s!==null;)i0(e,t,s),s=s.sibling}function i0(e,t,s){if(Sr&&typeof Sr.onCommitFiberUnmount=="function")try{Sr.onCommitFiberUnmount(Mu,s)}catch{}switch(s.tag){case 5:Ln||Ja(s,t);case 6:var r=Nn,i=tr;Nn=null,ri(e,t,s),Nn=r,tr=i,Nn!==null&&(tr?(e=Nn,s=s.stateNode,e.nodeType===8?e.parentNode.removeChild(s):e.removeChild(s)):Nn.removeChild(s.stateNode));break;case 18:Nn!==null&&(tr?(e=Nn,s=s.stateNode,e.nodeType===8?Rp(e.parentNode,s):e.nodeType===1&&Rp(e,s),Mo(e)):Rp(Nn,s.stateNode));break;case 4:r=Nn,i=tr,Nn=s.stateNode.containerInfo,tr=!0,ri(e,t,s),Nn=r,tr=i;break;case 0:case 11:case 14:case 15:if(!Ln&&(r=s.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var a=i,l=a.destroy;a=a.tag,l!==void 0&&(a&2||a&4)&&Qf(s,t,l),i=i.next}while(i!==r)}ri(e,t,s);break;case 1:if(!Ln&&(Ja(s,t),r=s.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=s.memoizedProps,r.state=s.memoizedState,r.componentWillUnmount()}catch(c){Jt(s,t,c)}ri(e,t,s);break;case 21:ri(e,t,s);break;case 22:s.mode&1?(Ln=(r=Ln)||s.memoizedState!==null,ri(e,t,s),Ln=r):ri(e,t,s);break;default:ri(e,t,s)}}function fx(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var s=e.stateNode;s===null&&(s=e.stateNode=new uk),t.forEach(function(r){var i=bk.bind(null,e,r);s.has(r)||(s.add(r),r.then(i,i))})}}function Zs(e,t){var s=t.deletions;if(s!==null)for(var r=0;r<s.length;r++){var i=s[r];try{var a=e,l=t,c=l;e:for(;c!==null;){switch(c.tag){case 5:Nn=c.stateNode,tr=!1;break e;case 3:Nn=c.stateNode.containerInfo,tr=!0;break e;case 4:Nn=c.stateNode.containerInfo,tr=!0;break e}c=c.return}if(Nn===null)throw Error(be(160));i0(a,l,i),Nn=null,tr=!1;var d=i.alternate;d!==null&&(d.return=null),i.return=null}catch(p){Jt(i,t,p)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)a0(t,e),t=t.sibling}function a0(e,t){var s=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Zs(t,e),vr(e),r&4){try{jo(3,e,e.return),Fu(3,e)}catch(y){Jt(e,e.return,y)}try{jo(5,e,e.return)}catch(y){Jt(e,e.return,y)}}break;case 1:Zs(t,e),vr(e),r&512&&s!==null&&Ja(s,s.return);break;case 5:if(Zs(t,e),vr(e),r&512&&s!==null&&Ja(s,s.return),e.flags&32){var i=e.stateNode;try{Ao(i,"")}catch(y){Jt(e,e.return,y)}}if(r&4&&(i=e.stateNode,i!=null)){var a=e.memoizedProps,l=s!==null?s.memoizedProps:a,c=e.type,d=e.updateQueue;if(e.updateQueue=null,d!==null)try{c==="input"&&a.type==="radio"&&a.name!=null&&Aj(i,a),bf(c,l);var p=bf(c,a);for(l=0;l<d.length;l+=2){var g=d[l],v=d[l+1];g==="style"?Pj(i,v):g==="dangerouslySetInnerHTML"?Rj(i,v):g==="children"?Ao(i,v):Ah(i,g,v,p)}switch(c){case"input":gf(i,a);break;case"textarea":Ej(i,a);break;case"select":var S=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var O=a.value;O!=null?Za(i,!!a.multiple,O,!1):S!==!!a.multiple&&(a.defaultValue!=null?Za(i,!!a.multiple,a.defaultValue,!0):Za(i,!!a.multiple,a.multiple?[]:"",!1))}i[$o]=a}catch(y){Jt(e,e.return,y)}}break;case 6:if(Zs(t,e),vr(e),r&4){if(e.stateNode===null)throw Error(be(162));i=e.stateNode,a=e.memoizedProps;try{i.nodeValue=a}catch(y){Jt(e,e.return,y)}}break;case 3:if(Zs(t,e),vr(e),r&4&&s!==null&&s.memoizedState.isDehydrated)try{Mo(t.containerInfo)}catch(y){Jt(e,e.return,y)}break;case 4:Zs(t,e),vr(e);break;case 13:Zs(t,e),vr(e),i=e.child,i.flags&8192&&(a=i.memoizedState!==null,i.stateNode.isHidden=a,!a||i.alternate!==null&&i.alternate.memoizedState!==null||(ag=Xt())),r&4&&fx(e);break;case 22:if(g=s!==null&&s.memoizedState!==null,e.mode&1?(Ln=(p=Ln)||g,Zs(t,e),Ln=p):Zs(t,e),vr(e),r&8192){if(p=e.memoizedState!==null,(e.stateNode.isHidden=p)&&!g&&e.mode&1)for(Ue=e,g=e.child;g!==null;){for(v=Ue=g;Ue!==null;){switch(S=Ue,O=S.child,S.tag){case 0:case 11:case 14:case 15:jo(4,S,S.return);break;case 1:Ja(S,S.return);var x=S.stateNode;if(typeof x.componentWillUnmount=="function"){r=S,s=S.return;try{t=r,x.props=t.memoizedProps,x.state=t.memoizedState,x.componentWillUnmount()}catch(y){Jt(r,s,y)}}break;case 5:Ja(S,S.return);break;case 22:if(S.memoizedState!==null){gx(v);continue}}O!==null?(O.return=S,Ue=O):gx(v)}g=g.sibling}e:for(g=null,v=e;;){if(v.tag===5){if(g===null){g=v;try{i=v.stateNode,p?(a=i.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(c=v.stateNode,d=v.memoizedProps.style,l=d!=null&&d.hasOwnProperty("display")?d.display:null,c.style.display=Mj("display",l))}catch(y){Jt(e,e.return,y)}}}else if(v.tag===6){if(g===null)try{v.stateNode.nodeValue=p?"":v.memoizedProps}catch(y){Jt(e,e.return,y)}}else if((v.tag!==22&&v.tag!==23||v.memoizedState===null||v===e)&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===e)break e;for(;v.sibling===null;){if(v.return===null||v.return===e)break e;g===v&&(g=null),v=v.return}g===v&&(g=null),v.sibling.return=v.return,v=v.sibling}}break;case 19:Zs(t,e),vr(e),r&4&&fx(e);break;case 21:break;default:Zs(t,e),vr(e)}}function vr(e){var t=e.flags;if(t&2){try{e:{for(var s=e.return;s!==null;){if(r0(s)){var r=s;break e}s=s.return}throw Error(be(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Ao(i,""),r.flags&=-33);var a=px(e);Yf(e,a,i);break;case 3:case 4:var l=r.stateNode.containerInfo,c=px(e);Jf(e,c,l);break;default:throw Error(be(161))}}catch(d){Jt(e,e.return,d)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function pk(e,t,s){Ue=e,l0(e)}function l0(e,t,s){for(var r=(e.mode&1)!==0;Ue!==null;){var i=Ue,a=i.child;if(i.tag===22&&r){var l=i.memoizedState!==null||pd;if(!l){var c=i.alternate,d=c!==null&&c.memoizedState!==null||Ln;c=pd;var p=Ln;if(pd=l,(Ln=d)&&!p)for(Ue=i;Ue!==null;)l=Ue,d=l.child,l.tag===22&&l.memoizedState!==null?vx(i):d!==null?(d.return=l,Ue=d):vx(i);for(;a!==null;)Ue=a,l0(a),a=a.sibling;Ue=i,pd=c,Ln=p}hx(e)}else i.subtreeFlags&8772&&a!==null?(a.return=i,Ue=a):hx(e)}}function hx(e){for(;Ue!==null;){var t=Ue;if(t.flags&8772){var s=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Ln||Fu(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Ln)if(s===null)r.componentDidMount();else{var i=t.elementType===t.type?s.memoizedProps:er(t.type,s.memoizedProps);r.componentDidUpdate(i,s.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;a!==null&&Xv(t,a,r);break;case 3:var l=t.updateQueue;if(l!==null){if(s=null,t.child!==null)switch(t.child.tag){case 5:s=t.child.stateNode;break;case 1:s=t.child.stateNode}Xv(t,l,s)}break;case 5:var c=t.stateNode;if(s===null&&t.flags&4){s=c;var d=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":d.autoFocus&&s.focus();break;case"img":d.src&&(s.src=d.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var p=t.alternate;if(p!==null){var g=p.memoizedState;if(g!==null){var v=g.dehydrated;v!==null&&Mo(v)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(be(163))}Ln||t.flags&512&&Gf(t)}catch(S){Jt(t,t.return,S)}}if(t===e){Ue=null;break}if(s=t.sibling,s!==null){s.return=t.return,Ue=s;break}Ue=t.return}}function gx(e){for(;Ue!==null;){var t=Ue;if(t===e){Ue=null;break}var s=t.sibling;if(s!==null){s.return=t.return,Ue=s;break}Ue=t.return}}function vx(e){for(;Ue!==null;){var t=Ue;try{switch(t.tag){case 0:case 11:case 15:var s=t.return;try{Fu(4,t)}catch(d){Jt(t,s,d)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(d){Jt(t,i,d)}}var a=t.return;try{Gf(t)}catch(d){Jt(t,a,d)}break;case 5:var l=t.return;try{Gf(t)}catch(d){Jt(t,l,d)}}}catch(d){Jt(t,t.return,d)}if(t===e){Ue=null;break}var c=t.sibling;if(c!==null){c.return=t.return,Ue=c;break}Ue=t.return}}var fk=Math.ceil,gu=Hr.ReactCurrentDispatcher,rg=Hr.ReactCurrentOwner,_s=Hr.ReactCurrentBatchConfig,jt=0,xn=null,ln=null,kn=0,gs=0,Ya=Ti(0),fn=0,zo=null,ra=0,Uu=0,ig=0,bo=null,Gn=null,ag=0,fl=1/0,Lr=null,vu=!1,Xf=null,wi=null,fd=!1,fi=null,xu=0,wo=0,Zf=null,Fd=-1,Ud=0;function Un(){return jt&6?Xt():Fd!==-1?Fd:Fd=Xt()}function Ni(e){return e.mode&1?jt&2&&kn!==0?kn&-kn:YS.transition!==null?(Ud===0&&(Ud=qj()),Ud):(e=kt,e!==0||(e=window.event,e=e===void 0?16:Yj(e.type)),e):1}function rr(e,t,s,r){if(50<wo)throw wo=0,Zf=null,Error(be(185));Zo(e,s,r),(!(jt&2)||e!==xn)&&(e===xn&&(!(jt&2)&&(Uu|=s),fn===4&&ui(e,kn)),Zn(e,r),s===1&&jt===0&&!(t.mode&1)&&(fl=Xt()+500,$u&&Ri()))}function Zn(e,t){var s=e.callbackNode;YN(e,t);var r=tu(e,e===xn?kn:0);if(r===0)s!==null&&Cv(s),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(s!=null&&Cv(s),t===1)e.tag===0?JS(xx.bind(null,e)):gb(xx.bind(null,e)),VS(function(){!(jt&6)&&Ri()}),s=null;else{switch(Hj(r)){case 1:s=Ph;break;case 4:s=zj;break;case 16:s=eu;break;case 536870912:s=Wj;break;default:s=eu}s=h0(s,o0.bind(null,e))}e.callbackPriority=t,e.callbackNode=s}}function o0(e,t){if(Fd=-1,Ud=0,jt&6)throw Error(be(327));var s=e.callbackNode;if(rl()&&e.callbackNode!==s)return null;var r=tu(e,e===xn?kn:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=yu(e,r);else{t=r;var i=jt;jt|=2;var a=d0();(xn!==e||kn!==t)&&(Lr=null,fl=Xt()+500,Xi(e,t));do try{vk();break}catch(c){c0(e,c)}while(1);Hh(),gu.current=a,jt=i,ln!==null?t=0:(xn=null,kn=0,t=fn)}if(t!==0){if(t===2&&(i=Cf(e),i!==0&&(r=i,t=eh(e,i))),t===1)throw s=zo,Xi(e,0),ui(e,r),Zn(e,Xt()),s;if(t===6)ui(e,r);else{if(i=e.current.alternate,!(r&30)&&!hk(i)&&(t=yu(e,r),t===2&&(a=Cf(e),a!==0&&(r=a,t=eh(e,a))),t===1))throw s=zo,Xi(e,0),ui(e,r),Zn(e,Xt()),s;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(be(345));case 2:Hi(e,Gn,Lr);break;case 3:if(ui(e,r),(r&130023424)===r&&(t=ag+500-Xt(),10<t)){if(tu(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){Un(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=If(Hi.bind(null,e,Gn,Lr),t);break}Hi(e,Gn,Lr);break;case 4:if(ui(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var l=31-sr(r);a=1<<l,l=t[l],l>i&&(i=l),r&=~a}if(r=i,r=Xt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*fk(r/1960))-r,10<r){e.timeoutHandle=If(Hi.bind(null,e,Gn,Lr),r);break}Hi(e,Gn,Lr);break;case 5:Hi(e,Gn,Lr);break;default:throw Error(be(329))}}}return Zn(e,Xt()),e.callbackNode===s?o0.bind(null,e):null}function eh(e,t){var s=bo;return e.current.memoizedState.isDehydrated&&(Xi(e,t).flags|=256),e=yu(e,t),e!==2&&(t=Gn,Gn=s,t!==null&&th(t)),e}function th(e){Gn===null?Gn=e:Gn.push.apply(Gn,e)}function hk(e){for(var t=e;;){if(t.flags&16384){var s=t.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var r=0;r<s.length;r++){var i=s[r],a=i.getSnapshot;i=i.value;try{if(!ar(a(),i))return!1}catch{return!1}}}if(s=t.child,t.subtreeFlags&16384&&s!==null)s.return=t,t=s;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ui(e,t){for(t&=~ig,t&=~Uu,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var s=31-sr(t),r=1<<s;e[s]=-1,t&=~r}}function xx(e){if(jt&6)throw Error(be(327));rl();var t=tu(e,0);if(!(t&1))return Zn(e,Xt()),null;var s=yu(e,t);if(e.tag!==0&&s===2){var r=Cf(e);r!==0&&(t=r,s=eh(e,r))}if(s===1)throw s=zo,Xi(e,0),ui(e,t),Zn(e,Xt()),s;if(s===6)throw Error(be(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Hi(e,Gn,Lr),Zn(e,Xt()),null}function lg(e,t){var s=jt;jt|=1;try{return e(t)}finally{jt=s,jt===0&&(fl=Xt()+500,$u&&Ri())}}function ia(e){fi!==null&&fi.tag===0&&!(jt&6)&&rl();var t=jt;jt|=1;var s=_s.transition,r=kt;try{if(_s.transition=null,kt=1,e)return e()}finally{kt=r,_s.transition=s,jt=t,!(jt&6)&&Ri()}}function og(){gs=Ya.current,$t(Ya)}function Xi(e,t){e.finishedWork=null,e.finishedLanes=0;var s=e.timeoutHandle;if(s!==-1&&(e.timeoutHandle=-1,HS(s)),ln!==null)for(s=ln.return;s!==null;){var r=s;switch(zh(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&au();break;case 3:ml(),$t(Yn),$t($n),Yh();break;case 5:Jh(r);break;case 4:ml();break;case 13:$t(Wt);break;case 19:$t(Wt);break;case 10:Vh(r.type._context);break;case 22:case 23:og()}s=s.return}if(xn=e,ln=e=Si(e.current,null),kn=gs=t,fn=0,zo=null,ig=Uu=ra=0,Gn=bo=null,Qi!==null){for(t=0;t<Qi.length;t++)if(s=Qi[t],r=s.interleaved,r!==null){s.interleaved=null;var i=r.next,a=s.pending;if(a!==null){var l=a.next;a.next=i,r.next=l}s.pending=r}Qi=null}return e}function c0(e,t){do{var s=ln;try{if(Hh(),$d.current=hu,fu){for(var r=qt.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}fu=!1}if(sa=0,vn=pn=qt=null,yo=!1,Fo=0,rg.current=null,s===null||s.return===null){fn=1,zo=t,ln=null;break}e:{var a=e,l=s.return,c=s,d=t;if(t=kn,c.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){var p=d,g=c,v=g.tag;if(!(g.mode&1)&&(v===0||v===11||v===15)){var S=g.alternate;S?(g.updateQueue=S.updateQueue,g.memoizedState=S.memoizedState,g.lanes=S.lanes):(g.updateQueue=null,g.memoizedState=null)}var O=ix(l);if(O!==null){O.flags&=-257,ax(O,l,c,a,t),O.mode&1&&rx(a,p,t),t=O,d=p;var x=t.updateQueue;if(x===null){var y=new Set;y.add(d),t.updateQueue=y}else x.add(d);break e}else{if(!(t&1)){rx(a,p,t),cg();break e}d=Error(be(426))}}else if(Ft&&c.mode&1){var M=ix(l);if(M!==null){!(M.flags&65536)&&(M.flags|=256),ax(M,l,c,a,t),Wh(pl(d,c));break e}}a=d=pl(d,c),fn!==4&&(fn=2),bo===null?bo=[a]:bo.push(a),a=l;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t;var k=Vb(a,d,t);Yv(a,k);break e;case 1:c=d;var j=a.type,C=a.stateNode;if(!(a.flags&128)&&(typeof j.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(wi===null||!wi.has(C)))){a.flags|=65536,t&=-t,a.lanes|=t;var E=Kb(a,c,t);Yv(a,E);break e}}a=a.return}while(a!==null)}m0(s)}catch(B){t=B,ln===s&&s!==null&&(ln=s=s.return);continue}break}while(1)}function d0(){var e=gu.current;return gu.current=hu,e===null?hu:e}function cg(){(fn===0||fn===3||fn===2)&&(fn=4),xn===null||!(ra&268435455)&&!(Uu&268435455)||ui(xn,kn)}function yu(e,t){var s=jt;jt|=2;var r=d0();(xn!==e||kn!==t)&&(Lr=null,Xi(e,t));do try{gk();break}catch(i){c0(e,i)}while(1);if(Hh(),jt=s,gu.current=r,ln!==null)throw Error(be(261));return xn=null,kn=0,fn}function gk(){for(;ln!==null;)u0(ln)}function vk(){for(;ln!==null&&!zN();)u0(ln)}function u0(e){var t=f0(e.alternate,e,gs);e.memoizedProps=e.pendingProps,t===null?m0(e):ln=t,rg.current=null}function m0(e){var t=e;do{var s=t.alternate;if(e=t.return,t.flags&32768){if(s=dk(s,t),s!==null){s.flags&=32767,ln=s;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{fn=6,ln=null;return}}else if(s=ck(s,t,gs),s!==null){ln=s;return}if(t=t.sibling,t!==null){ln=t;return}ln=t=e}while(t!==null);fn===0&&(fn=5)}function Hi(e,t,s){var r=kt,i=_s.transition;try{_s.transition=null,kt=1,xk(e,t,s,r)}finally{_s.transition=i,kt=r}return null}function xk(e,t,s,r){do rl();while(fi!==null);if(jt&6)throw Error(be(327));s=e.finishedWork;var i=e.finishedLanes;if(s===null)return null;if(e.finishedWork=null,e.finishedLanes=0,s===e.current)throw Error(be(177));e.callbackNode=null,e.callbackPriority=0;var a=s.lanes|s.childLanes;if(XN(e,a),e===xn&&(ln=xn=null,kn=0),!(s.subtreeFlags&2064)&&!(s.flags&2064)||fd||(fd=!0,h0(eu,function(){return rl(),null})),a=(s.flags&15990)!==0,s.subtreeFlags&15990||a){a=_s.transition,_s.transition=null;var l=kt;kt=1;var c=jt;jt|=4,rg.current=null,mk(e,s),a0(s,e),_S(Pf),nu=!!Mf,Pf=Mf=null,e.current=s,pk(s),WN(),jt=c,kt=l,_s.transition=a}else e.current=s;if(fd&&(fd=!1,fi=e,xu=i),a=e.pendingLanes,a===0&&(wi=null),VN(s.stateNode),Zn(e,Xt()),t!==null)for(r=e.onRecoverableError,s=0;s<t.length;s++)i=t[s],r(i.value,{componentStack:i.stack,digest:i.digest});if(vu)throw vu=!1,e=Xf,Xf=null,e;return xu&1&&e.tag!==0&&rl(),a=e.pendingLanes,a&1?e===Zf?wo++:(wo=0,Zf=e):wo=0,Ri(),null}function rl(){if(fi!==null){var e=Hj(xu),t=_s.transition,s=kt;try{if(_s.transition=null,kt=16>e?16:e,fi===null)var r=!1;else{if(e=fi,fi=null,xu=0,jt&6)throw Error(be(331));var i=jt;for(jt|=4,Ue=e.current;Ue!==null;){var a=Ue,l=a.child;if(Ue.flags&16){var c=a.deletions;if(c!==null){for(var d=0;d<c.length;d++){var p=c[d];for(Ue=p;Ue!==null;){var g=Ue;switch(g.tag){case 0:case 11:case 15:jo(8,g,a)}var v=g.child;if(v!==null)v.return=g,Ue=v;else for(;Ue!==null;){g=Ue;var S=g.sibling,O=g.return;if(s0(g),g===p){Ue=null;break}if(S!==null){S.return=O,Ue=S;break}Ue=O}}}var x=a.alternate;if(x!==null){var y=x.child;if(y!==null){x.child=null;do{var M=y.sibling;y.sibling=null,y=M}while(y!==null)}}Ue=a}}if(a.subtreeFlags&2064&&l!==null)l.return=a,Ue=l;else e:for(;Ue!==null;){if(a=Ue,a.flags&2048)switch(a.tag){case 0:case 11:case 15:jo(9,a,a.return)}var k=a.sibling;if(k!==null){k.return=a.return,Ue=k;break e}Ue=a.return}}var j=e.current;for(Ue=j;Ue!==null;){l=Ue;var C=l.child;if(l.subtreeFlags&2064&&C!==null)C.return=l,Ue=C;else e:for(l=j;Ue!==null;){if(c=Ue,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:Fu(9,c)}}catch(B){Jt(c,c.return,B)}if(c===l){Ue=null;break e}var E=c.sibling;if(E!==null){E.return=c.return,Ue=E;break e}Ue=c.return}}if(jt=i,Ri(),Sr&&typeof Sr.onPostCommitFiberRoot=="function")try{Sr.onPostCommitFiberRoot(Mu,e)}catch{}r=!0}return r}finally{kt=s,_s.transition=t}}return!1}function yx(e,t,s){t=pl(s,t),t=Vb(e,t,1),e=bi(e,t,1),t=Un(),e!==null&&(Zo(e,1,t),Zn(e,t))}function Jt(e,t,s){if(e.tag===3)yx(e,e,s);else for(;t!==null;){if(t.tag===3){yx(t,e,s);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(wi===null||!wi.has(r))){e=pl(s,e),e=Kb(t,e,1),t=bi(t,e,1),e=Un(),t!==null&&(Zo(t,1,e),Zn(t,e));break}}t=t.return}}function yk(e,t,s){var r=e.pingCache;r!==null&&r.delete(t),t=Un(),e.pingedLanes|=e.suspendedLanes&s,xn===e&&(kn&s)===s&&(fn===4||fn===3&&(kn&130023424)===kn&&500>Xt()-ag?Xi(e,0):ig|=s),Zn(e,t)}function p0(e,t){t===0&&(e.mode&1?(t=rd,rd<<=1,!(rd&130023424)&&(rd=4194304)):t=1);var s=Un();e=Br(e,t),e!==null&&(Zo(e,t,s),Zn(e,s))}function jk(e){var t=e.memoizedState,s=0;t!==null&&(s=t.retryLane),p0(e,s)}function bk(e,t){var s=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(s=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(be(314))}r!==null&&r.delete(t),p0(e,s)}var f0;f0=function(e,t,s){if(e!==null)if(e.memoizedProps!==t.pendingProps||Yn.current)Jn=!0;else{if(!(e.lanes&s)&&!(t.flags&128))return Jn=!1,ok(e,t,s);Jn=!!(e.flags&131072)}else Jn=!1,Ft&&t.flags&1048576&&vb(t,cu,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;_d(e,t),e=t.pendingProps;var i=cl(t,$n.current);sl(t,s),i=Zh(null,t,r,e,i,s);var a=eg();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Xn(r)?(a=!0,lu(t)):a=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Qh(t),i.updater=Du,t.stateNode=i,i._reactInternals=t,Bf(t,r,e,s),t=qf(null,t,r,!0,a,s)):(t.tag=0,Ft&&a&&Bh(t),Fn(null,t,i,s),t=t.child),t;case 16:r=t.elementType;e:{switch(_d(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=Nk(r),e=er(r,e),i){case 0:t=Wf(null,t,r,e,s);break e;case 1:t=cx(null,t,r,e,s);break e;case 11:t=lx(null,t,r,e,s);break e;case 14:t=ox(null,t,r,er(r.type,e),s);break e}throw Error(be(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:er(r,i),Wf(e,t,r,i,s);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:er(r,i),cx(e,t,r,i,s);case 3:e:{if(Yb(t),e===null)throw Error(be(387));r=t.pendingProps,a=t.memoizedState,i=a.element,bb(e,t),mu(t,r,null,s);var l=t.memoizedState;if(r=l.element,a.isDehydrated)if(a={element:r,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){i=pl(Error(be(423)),t),t=dx(e,t,r,s,i);break e}else if(r!==i){i=pl(Error(be(424)),t),t=dx(e,t,r,s,i);break e}else for(ys=ji(t.stateNode.containerInfo.firstChild),js=t,Ft=!0,nr=null,s=kb(t,null,r,s),t.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(dl(),r===i){t=zr(e,t,s);break e}Fn(e,t,r,s)}t=t.child}return t;case 5:return Cb(t),e===null&&_f(t),r=t.type,i=t.pendingProps,a=e!==null?e.memoizedProps:null,l=i.children,Lf(r,i)?l=null:a!==null&&Lf(r,a)&&(t.flags|=32),Jb(e,t),Fn(e,t,l,s),t.child;case 6:return e===null&&_f(t),null;case 13:return Xb(e,t,s);case 4:return Gh(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=ul(t,null,r,s):Fn(e,t,r,s),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:er(r,i),lx(e,t,r,i,s);case 7:return Fn(e,t,t.pendingProps,s),t.child;case 8:return Fn(e,t,t.pendingProps.children,s),t.child;case 12:return Fn(e,t,t.pendingProps.children,s),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,a=t.memoizedProps,l=i.value,It(du,r._currentValue),r._currentValue=l,a!==null)if(ar(a.value,l)){if(a.children===i.children&&!Yn.current){t=zr(e,t,s);break e}}else for(a=t.child,a!==null&&(a.return=t);a!==null;){var c=a.dependencies;if(c!==null){l=a.child;for(var d=c.firstContext;d!==null;){if(d.context===r){if(a.tag===1){d=_r(-1,s&-s),d.tag=2;var p=a.updateQueue;if(p!==null){p=p.shared;var g=p.pending;g===null?d.next=d:(d.next=g.next,g.next=d),p.pending=d}}a.lanes|=s,d=a.alternate,d!==null&&(d.lanes|=s),Ff(a.return,s,t),c.lanes|=s;break}d=d.next}}else if(a.tag===10)l=a.type===t.type?null:a.child;else if(a.tag===18){if(l=a.return,l===null)throw Error(be(341));l.lanes|=s,c=l.alternate,c!==null&&(c.lanes|=s),Ff(l,s,t),l=a.sibling}else l=a.child;if(l!==null)l.return=a;else for(l=a;l!==null;){if(l===t){l=null;break}if(a=l.sibling,a!==null){a.return=l.return,l=a;break}l=l.return}a=l}Fn(e,t,i.children,s),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,sl(t,s),i=Fs(i),r=r(i),t.flags|=1,Fn(e,t,r,s),t.child;case 14:return r=t.type,i=er(r,t.pendingProps),i=er(r.type,i),ox(e,t,r,i,s);case 15:return Qb(e,t,t.type,t.pendingProps,s);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:er(r,i),_d(e,t),t.tag=1,Xn(r)?(e=!0,lu(t)):e=!1,sl(t,s),Nb(t,r,i),Bf(t,r,i,s),qf(null,t,r,!0,e,s);case 19:return Zb(e,t,s);case 22:return Gb(e,t,s)}throw Error(be(156,t.tag))};function h0(e,t){return Bj(e,t)}function wk(e,t,s,r){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ds(e,t,s,r){return new wk(e,t,s,r)}function dg(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Nk(e){if(typeof e=="function")return dg(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Th)return 11;if(e===Rh)return 14}return 2}function Si(e,t){var s=e.alternate;return s===null?(s=Ds(e.tag,t,e.key,e.mode),s.elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=t,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=e.flags&14680064,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,t=e.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s}function Bd(e,t,s,r,i,a){var l=2;if(r=e,typeof e=="function")dg(e)&&(l=1);else if(typeof e=="string")l=5;else e:switch(e){case Ba:return Zi(s.children,i,a,t);case Eh:l=8,i|=8;break;case uf:return e=Ds(12,s,t,i|2),e.elementType=uf,e.lanes=a,e;case mf:return e=Ds(13,s,t,i),e.elementType=mf,e.lanes=a,e;case pf:return e=Ds(19,s,t,i),e.elementType=pf,e.lanes=a,e;case Sj:return Bu(s,i,a,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case wj:l=10;break e;case Nj:l=9;break e;case Th:l=11;break e;case Rh:l=14;break e;case ai:l=16,r=null;break e}throw Error(be(130,e==null?e:typeof e,""))}return t=Ds(l,s,t,i),t.elementType=e,t.type=r,t.lanes=a,t}function Zi(e,t,s,r){return e=Ds(7,e,r,t),e.lanes=s,e}function Bu(e,t,s,r){return e=Ds(22,e,r,t),e.elementType=Sj,e.lanes=s,e.stateNode={isHidden:!1},e}function _p(e,t,s){return e=Ds(6,e,null,t),e.lanes=s,e}function Fp(e,t,s){return t=Ds(4,e.children!==null?e.children:[],e.key,t),t.lanes=s,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Sk(e,t,s,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=yp(0),this.expirationTimes=yp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yp(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function ug(e,t,s,r,i,a,l,c,d){return e=new Sk(e,t,s,c,d),t===1?(t=1,a===!0&&(t|=8)):t=0,a=Ds(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},Qh(a),e}function kk(e,t,s){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ua,key:r==null?null:""+r,children:e,containerInfo:t,implementation:s}}function g0(e){if(!e)return Ci;e=e._reactInternals;e:{if(oa(e)!==e||e.tag!==1)throw Error(be(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Xn(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(be(171))}if(e.tag===1){var s=e.type;if(Xn(s))return hb(e,s,t)}return t}function v0(e,t,s,r,i,a,l,c,d){return e=ug(s,r,!0,e,i,a,l,c,d),e.context=g0(null),s=e.current,r=Un(),i=Ni(s),a=_r(r,i),a.callback=t??null,bi(s,a,i),e.current.lanes=i,Zo(e,i,r),Zn(e,r),e}function zu(e,t,s,r){var i=t.current,a=Un(),l=Ni(i);return s=g0(s),t.context===null?t.context=s:t.pendingContext=s,t=_r(a,l),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=bi(i,t,l),e!==null&&(rr(e,i,l,a),Od(e,i,l)),l}function ju(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function jx(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var s=e.retryLane;e.retryLane=s!==0&&s<t?s:t}}function mg(e,t){jx(e,t),(e=e.alternate)&&jx(e,t)}function Ck(){return null}var x0=typeof reportError=="function"?reportError:function(e){console.error(e)};function pg(e){this._internalRoot=e}Wu.prototype.render=pg.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(be(409));zu(e,t,null,null)};Wu.prototype.unmount=pg.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;ia(function(){zu(null,e,null,null)}),t[Ur]=null}};function Wu(e){this._internalRoot=e}Wu.prototype.unstable_scheduleHydration=function(e){if(e){var t=Qj();e={blockedOn:null,target:e,priority:t};for(var s=0;s<di.length&&t!==0&&t<di[s].priority;s++);di.splice(s,0,e),s===0&&Jj(e)}};function fg(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function qu(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function bx(){}function Ak(e,t,s,r,i){if(i){if(typeof r=="function"){var a=r;r=function(){var p=ju(l);a.call(p)}}var l=v0(t,r,e,0,null,!1,!1,"",bx);return e._reactRootContainer=l,e[Ur]=l.current,Io(e.nodeType===8?e.parentNode:e),ia(),l}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var c=r;r=function(){var p=ju(d);c.call(p)}}var d=ug(e,0,!1,null,null,!1,!1,"",bx);return e._reactRootContainer=d,e[Ur]=d.current,Io(e.nodeType===8?e.parentNode:e),ia(function(){zu(t,d,s,r)}),d}function Hu(e,t,s,r,i){var a=s._reactRootContainer;if(a){var l=a;if(typeof i=="function"){var c=i;i=function(){var d=ju(l);c.call(d)}}zu(t,l,e,i)}else l=Ak(s,t,e,i,r);return ju(l)}Vj=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var s=uo(t.pendingLanes);s!==0&&(Lh(t,s|1),Zn(t,Xt()),!(jt&6)&&(fl=Xt()+500,Ri()))}break;case 13:ia(function(){var r=Br(e,1);if(r!==null){var i=Un();rr(r,e,1,i)}}),mg(e,1)}};Ih=function(e){if(e.tag===13){var t=Br(e,134217728);if(t!==null){var s=Un();rr(t,e,134217728,s)}mg(e,134217728)}};Kj=function(e){if(e.tag===13){var t=Ni(e),s=Br(e,t);if(s!==null){var r=Un();rr(s,e,t,r)}mg(e,t)}};Qj=function(){return kt};Gj=function(e,t){var s=kt;try{return kt=e,t()}finally{kt=s}};Nf=function(e,t,s){switch(t){case"input":if(gf(e,s),t=s.name,s.type==="radio"&&t!=null){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<s.length;t++){var r=s[t];if(r!==e&&r.form===e.form){var i=Ou(r);if(!i)throw Error(be(90));Cj(r),gf(r,i)}}}break;case"textarea":Ej(e,s);break;case"select":t=s.value,t!=null&&Za(e,!!s.multiple,t,!1)}};Oj=lg;$j=ia;var Ek={usingClientEntryPoint:!1,Events:[tc,Ha,Ou,Lj,Ij,lg]},no={findFiberByHostInstance:Ki,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},Tk={bundleType:no.bundleType,version:no.version,rendererPackageName:no.rendererPackageName,rendererConfig:no.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Hr.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Fj(e),e===null?null:e.stateNode},findFiberByHostInstance:no.findFiberByHostInstance||Ck,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var hd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!hd.isDisabled&&hd.supportsFiber)try{Mu=hd.inject(Tk),Sr=hd}catch{}}Ns.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ek;Ns.createPortal=function(e,t){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!fg(t))throw Error(be(200));return kk(e,t,null,s)};Ns.createRoot=function(e,t){if(!fg(e))throw Error(be(299));var s=!1,r="",i=x0;return t!=null&&(t.unstable_strictMode===!0&&(s=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=ug(e,1,!1,null,null,s,!1,r,i),e[Ur]=t.current,Io(e.nodeType===8?e.parentNode:e),new pg(t)};Ns.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(be(188)):(e=Object.keys(e).join(","),Error(be(268,e)));return e=Fj(t),e=e===null?null:e.stateNode,e};Ns.flushSync=function(e){return ia(e)};Ns.hydrate=function(e,t,s){if(!qu(t))throw Error(be(200));return Hu(null,e,t,!0,s)};Ns.hydrateRoot=function(e,t,s){if(!fg(e))throw Error(be(405));var r=s!=null&&s.hydratedSources||null,i=!1,a="",l=x0;if(s!=null&&(s.unstable_strictMode===!0&&(i=!0),s.identifierPrefix!==void 0&&(a=s.identifierPrefix),s.onRecoverableError!==void 0&&(l=s.onRecoverableError)),t=v0(t,null,e,1,s??null,i,!1,a,l),e[Ur]=t.current,Io(e),r)for(e=0;e<r.length;e++)s=r[e],i=s._getVersion,i=i(s._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[s,i]:t.mutableSourceEagerHydrationData.push(s,i);return new Wu(t)};Ns.render=function(e,t,s){if(!qu(t))throw Error(be(200));return Hu(null,e,t,!1,s)};Ns.unmountComponentAtNode=function(e){if(!qu(e))throw Error(be(40));return e._reactRootContainer?(ia(function(){Hu(null,null,e,!1,function(){e._reactRootContainer=null,e[Ur]=null})}),!0):!1};Ns.unstable_batchedUpdates=lg;Ns.unstable_renderSubtreeIntoContainer=function(e,t,s,r){if(!qu(s))throw Error(be(200));if(e==null||e._reactInternals===void 0)throw Error(be(38));return Hu(e,t,s,!1,r)};Ns.version="18.2.0-next-9e3b772b8-20220608";function y0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(y0)}catch(e){console.error(e)}}y0(),vj.exports=Ns;var Mi=vj.exports,j0,wx=Mi;j0=wx.createRoot,wx.hydrateRoot;/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Wo(){return Wo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e},Wo.apply(this,arguments)}var hi;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(hi||(hi={}));const Nx="popstate";function Rk(e){e===void 0&&(e={});function t(i,a){let{pathname:l="/",search:c="",hash:d=""}=ca(i.location.hash.substr(1));return!l.startsWith("/")&&!l.startsWith(".")&&(l="/"+l),nh("",{pathname:l,search:c,hash:d},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function s(i,a){let l=i.document.querySelector("base"),c="";if(l&&l.getAttribute("href")){let d=i.location.href,p=d.indexOf("#");c=p===-1?d:d.slice(0,p)}return c+"#"+(typeof a=="string"?a:b0(a))}function r(i,a){Vu(i.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(a)+")")}return Pk(t,s,r,e)}function on(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Vu(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Mk(){return Math.random().toString(36).substr(2,8)}function Sx(e,t){return{usr:e.state,key:e.key,idx:t}}function nh(e,t,s,r){return s===void 0&&(s=null),Wo({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?ca(t):t,{state:s,key:t&&t.key||r||Mk()})}function b0(e){let{pathname:t="/",search:s="",hash:r=""}=e;return s&&s!=="?"&&(t+=s.charAt(0)==="?"?s:"?"+s),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function ca(e){let t={};if(e){let s=e.indexOf("#");s>=0&&(t.hash=e.substr(s),e=e.substr(0,s));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function Pk(e,t,s,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:a=!1}=r,l=i.history,c=hi.Pop,d=null,p=g();p==null&&(p=0,l.replaceState(Wo({},l.state,{idx:p}),""));function g(){return(l.state||{idx:null}).idx}function v(){c=hi.Pop;let M=g(),k=M==null?null:M-p;p=M,d&&d({action:c,location:y.location,delta:k})}function S(M,k){c=hi.Push;let j=nh(y.location,M,k);s&&s(j,M),p=g()+1;let C=Sx(j,p),E=y.createHref(j);try{l.pushState(C,"",E)}catch(B){if(B instanceof DOMException&&B.name==="DataCloneError")throw B;i.location.assign(E)}a&&d&&d({action:c,location:y.location,delta:1})}function O(M,k){c=hi.Replace;let j=nh(y.location,M,k);s&&s(j,M),p=g();let C=Sx(j,p),E=y.createHref(j);l.replaceState(C,"",E),a&&d&&d({action:c,location:y.location,delta:0})}function x(M){let k=i.location.origin!=="null"?i.location.origin:i.location.href,j=typeof M=="string"?M:b0(M);return j=j.replace(/ $/,"%20"),on(k,"No window.location.(origin|href) available to create URL for href: "+j),new URL(j,k)}let y={get action(){return c},get location(){return e(i,l)},listen(M){if(d)throw new Error("A history only accepts one active listener");return i.addEventListener(Nx,v),d=M,()=>{i.removeEventListener(Nx,v),d=null}},createHref(M){return t(i,M)},createURL:x,encodeLocation(M){let k=x(M);return{pathname:k.pathname,search:k.search,hash:k.hash}},push:S,replace:O,go(M){return l.go(M)}};return y}var kx;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(kx||(kx={}));function Lk(e,t,s){return s===void 0&&(s="/"),Ik(e,t,s,!1)}function Ik(e,t,s,r){let i=typeof t=="string"?ca(t):t,a=S0(i.pathname||"/",s);if(a==null)return null;let l=w0(e);Ok(l);let c=null;for(let d=0;c==null&&d<l.length;++d){let p=Vk(a);c=qk(l[d],p,r)}return c}function w0(e,t,s,r){t===void 0&&(t=[]),s===void 0&&(s=[]),r===void 0&&(r="");let i=(a,l,c)=>{let d={relativePath:c===void 0?a.path||"":c,caseSensitive:a.caseSensitive===!0,childrenIndex:l,route:a};d.relativePath.startsWith("/")&&(on(d.relativePath.startsWith(r),'Absolute route path "'+d.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),d.relativePath=d.relativePath.slice(r.length));let p=ea([r,d.relativePath]),g=s.concat(d);a.children&&a.children.length>0&&(on(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+p+'".')),w0(a.children,t,g,p)),!(a.path==null&&!a.index)&&t.push({path:p,score:zk(p,a.index),routesMeta:g})};return e.forEach((a,l)=>{var c;if(a.path===""||!((c=a.path)!=null&&c.includes("?")))i(a,l);else for(let d of N0(a.path))i(a,l,d)}),t}function N0(e){let t=e.split("/");if(t.length===0)return[];let[s,...r]=t,i=s.endsWith("?"),a=s.replace(/\?$/,"");if(r.length===0)return i?[a,""]:[a];let l=N0(r.join("/")),c=[];return c.push(...l.map(d=>d===""?a:[a,d].join("/"))),i&&c.push(...l),c.map(d=>e.startsWith("/")&&d===""?"/":d)}function Ok(e){e.sort((t,s)=>t.score!==s.score?s.score-t.score:Wk(t.routesMeta.map(r=>r.childrenIndex),s.routesMeta.map(r=>r.childrenIndex)))}const $k=/^:[\w-]+$/,Dk=3,_k=2,Fk=1,Uk=10,Bk=-2,Cx=e=>e==="*";function zk(e,t){let s=e.split("/"),r=s.length;return s.some(Cx)&&(r+=Bk),t&&(r+=_k),s.filter(i=>!Cx(i)).reduce((i,a)=>i+($k.test(a)?Dk:a===""?Fk:Uk),r)}function Wk(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function qk(e,t,s){s===void 0&&(s=!1);let{routesMeta:r}=e,i={},a="/",l=[];for(let c=0;c<r.length;++c){let d=r[c],p=c===r.length-1,g=a==="/"?t:t.slice(a.length)||"/",v=Ax({path:d.relativePath,caseSensitive:d.caseSensitive,end:p},g),S=d.route;if(!v&&p&&s&&!r[r.length-1].route.index&&(v=Ax({path:d.relativePath,caseSensitive:d.caseSensitive,end:!1},g)),!v)return null;Object.assign(i,v.params),l.push({params:i,pathname:ea([a,v.pathname]),pathnameBase:Yk(ea([a,v.pathnameBase])),route:S}),v.pathnameBase!=="/"&&(a=ea([a,v.pathnameBase]))}return l}function Ax(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[s,r]=Hk(e.path,e.caseSensitive,e.end),i=t.match(s);if(!i)return null;let a=i[0],l=a.replace(/(.)\/+$/,"$1"),c=i.slice(1);return{params:r.reduce((p,g,v)=>{let{paramName:S,isOptional:O}=g;if(S==="*"){let y=c[v]||"";l=a.slice(0,a.length-y.length).replace(/(.)\/+$/,"$1")}const x=c[v];return O&&!x?p[S]=void 0:p[S]=(x||"").replace(/%2F/g,"/"),p},{}),pathname:a,pathnameBase:l,pattern:e}}function Hk(e,t,s){t===void 0&&(t=!1),s===void 0&&(s=!0),Vu(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,c,d)=>(r.push({paramName:c,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function Vk(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Vu(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function S0(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let s=t.endsWith("/")?t.length-1:t.length,r=e.charAt(s);return r&&r!=="/"?null:e.slice(s)||"/"}const Kk=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Qk=e=>Kk.test(e);function Gk(e,t){t===void 0&&(t="/");let{pathname:s,search:r="",hash:i=""}=typeof e=="string"?ca(e):e,a;if(s)if(Qk(s))a=s;else{if(s.includes("//")){let l=s;s=s.replace(/\/\/+/g,"/"),Vu(!1,"Pathnames cannot have embedded double slashes - normalizing "+(l+" -> "+s))}s.startsWith("/")?a=Ex(s.substring(1),"/"):a=Ex(s,t)}else a=t;return{pathname:a,search:Xk(r),hash:Zk(i)}}function Ex(e,t){let s=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?s.length>1&&s.pop():i!=="."&&s.push(i)}),s.length>1?s.join("/"):"/"}function Up(e,t,s,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+s+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Jk(e){return e.filter((t,s)=>s===0||t.route.path&&t.route.path.length>0)}function k0(e,t){let s=Jk(e);return t?s.map((r,i)=>i===s.length-1?r.pathname:r.pathnameBase):s.map(r=>r.pathnameBase)}function C0(e,t,s,r){r===void 0&&(r=!1);let i;typeof e=="string"?i=ca(e):(i=Wo({},e),on(!i.pathname||!i.pathname.includes("?"),Up("?","pathname","search",i)),on(!i.pathname||!i.pathname.includes("#"),Up("#","pathname","hash",i)),on(!i.search||!i.search.includes("#"),Up("#","search","hash",i)));let a=e===""||i.pathname==="",l=a?"/":i.pathname,c;if(l==null)c=s;else{let v=t.length-1;if(!r&&l.startsWith("..")){let S=l.split("/");for(;S[0]==="..";)S.shift(),v-=1;i.pathname=S.join("/")}c=v>=0?t[v]:"/"}let d=Gk(i,c),p=l&&l!=="/"&&l.endsWith("/"),g=(a||l===".")&&s.endsWith("/");return!d.pathname.endsWith("/")&&(p||g)&&(d.pathname+="/"),d}const ea=e=>e.join("/").replace(/\/\/+/g,"/"),Yk=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Xk=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Zk=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function eC(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const A0=["post","put","patch","delete"];new Set(A0);const tC=["get",...A0];new Set(tC);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function qo(){return qo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e},qo.apply(this,arguments)}const hg=u.createContext(null),nC=u.createContext(null),sc=u.createContext(null),Ku=u.createContext(null),Pi=u.createContext({outlet:null,matches:[],isDataRoute:!1}),E0=u.createContext(null);function rc(){return u.useContext(Ku)!=null}function lr(){return rc()||on(!1),u.useContext(Ku).location}function T0(e){u.useContext(sc).static||u.useLayoutEffect(e)}function Wn(){let{isDataRoute:e}=u.useContext(Pi);return e?hC():sC()}function sC(){rc()||on(!1);let e=u.useContext(hg),{basename:t,future:s,navigator:r}=u.useContext(sc),{matches:i}=u.useContext(Pi),{pathname:a}=lr(),l=JSON.stringify(k0(i,s.v7_relativeSplatPath)),c=u.useRef(!1);return T0(()=>{c.current=!0}),u.useCallback(function(p,g){if(g===void 0&&(g={}),!c.current)return;if(typeof p=="number"){r.go(p);return}let v=C0(p,JSON.parse(l),a,g.relative==="path");e==null&&t!=="/"&&(v.pathname=v.pathname==="/"?t:ea([t,v.pathname])),(g.replace?r.replace:r.push)(v,g.state,g)},[t,r,l,a,e])}function Qu(){let{matches:e}=u.useContext(Pi),t=e[e.length-1];return t?t.params:{}}function rC(e,t){return iC(e,t)}function iC(e,t,s,r){rc()||on(!1);let{navigator:i}=u.useContext(sc),{matches:a}=u.useContext(Pi),l=a[a.length-1],c=l?l.params:{};l&&l.pathname;let d=l?l.pathnameBase:"/";l&&l.route;let p=lr(),g;if(t){var v;let M=typeof t=="string"?ca(t):t;d==="/"||(v=M.pathname)!=null&&v.startsWith(d)||on(!1),g=M}else g=p;let S=g.pathname||"/",O=S;if(d!=="/"){let M=d.replace(/^\//,"").split("/");O="/"+S.replace(/^\//,"").split("/").slice(M.length).join("/")}let x=Lk(e,{pathname:O}),y=dC(x&&x.map(M=>Object.assign({},M,{params:Object.assign({},c,M.params),pathname:ea([d,i.encodeLocation?i.encodeLocation(M.pathname).pathname:M.pathname]),pathnameBase:M.pathnameBase==="/"?d:ea([d,i.encodeLocation?i.encodeLocation(M.pathnameBase).pathname:M.pathnameBase])})),a,s,r);return t&&y?u.createElement(Ku.Provider,{value:{location:qo({pathname:"/",search:"",hash:"",state:null,key:"default"},g),navigationType:hi.Pop}},y):y}function aC(){let e=fC(),t=eC(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),s=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},a=null;return u.createElement(u.Fragment,null,u.createElement("h2",null,"Unexpected Application Error!"),u.createElement("h3",{style:{fontStyle:"italic"}},t),s?u.createElement("pre",{style:i},s):null,a)}const lC=u.createElement(aC,null);class oC extends u.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,s){return s.location!==t.location||s.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:s.error,location:s.location,revalidation:t.revalidation||s.revalidation}}componentDidCatch(t,s){console.error("React Router caught the following error during render",t,s)}render(){return this.state.error!==void 0?u.createElement(Pi.Provider,{value:this.props.routeContext},u.createElement(E0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function cC(e){let{routeContext:t,match:s,children:r}=e,i=u.useContext(hg);return i&&i.static&&i.staticContext&&(s.route.errorElement||s.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=s.route.id),u.createElement(Pi.Provider,{value:t},r)}function dC(e,t,s,r){var i;if(t===void 0&&(t=[]),s===void 0&&(s=null),r===void 0&&(r=null),e==null){var a;if(!s)return null;if(s.errors)e=s.matches;else if((a=r)!=null&&a.v7_partialHydration&&t.length===0&&!s.initialized&&s.matches.length>0)e=s.matches;else return null}let l=e,c=(i=s)==null?void 0:i.errors;if(c!=null){let g=l.findIndex(v=>v.route.id&&(c==null?void 0:c[v.route.id])!==void 0);g>=0||on(!1),l=l.slice(0,Math.min(l.length,g+1))}let d=!1,p=-1;if(s&&r&&r.v7_partialHydration)for(let g=0;g<l.length;g++){let v=l[g];if((v.route.HydrateFallback||v.route.hydrateFallbackElement)&&(p=g),v.route.id){let{loaderData:S,errors:O}=s,x=v.route.loader&&S[v.route.id]===void 0&&(!O||O[v.route.id]===void 0);if(v.route.lazy||x){d=!0,p>=0?l=l.slice(0,p+1):l=[l[0]];break}}}return l.reduceRight((g,v,S)=>{let O,x=!1,y=null,M=null;s&&(O=c&&v.route.id?c[v.route.id]:void 0,y=v.route.errorElement||lC,d&&(p<0&&S===0?(gC("route-fallback",!1),x=!0,M=null):p===S&&(x=!0,M=v.route.hydrateFallbackElement||null)));let k=t.concat(l.slice(0,S+1)),j=()=>{let C;return O?C=y:x?C=M:v.route.Component?C=u.createElement(v.route.Component,null):v.route.element?C=v.route.element:C=g,u.createElement(cC,{match:v,routeContext:{outlet:g,matches:k,isDataRoute:s!=null},children:C})};return s&&(v.route.ErrorBoundary||v.route.errorElement||S===0)?u.createElement(oC,{location:s.location,revalidation:s.revalidation,component:y,error:O,children:j(),routeContext:{outlet:null,matches:k,isDataRoute:!0}}):j()},null)}var R0=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(R0||{}),bu=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(bu||{});function uC(e){let t=u.useContext(hg);return t||on(!1),t}function mC(e){let t=u.useContext(nC);return t||on(!1),t}function pC(e){let t=u.useContext(Pi);return t||on(!1),t}function M0(e){let t=pC(),s=t.matches[t.matches.length-1];return s.route.id||on(!1),s.route.id}function fC(){var e;let t=u.useContext(E0),s=mC(bu.UseRouteError),r=M0(bu.UseRouteError);return t!==void 0?t:(e=s.errors)==null?void 0:e[r]}function hC(){let{router:e}=uC(R0.UseNavigateStable),t=M0(bu.UseNavigateStable),s=u.useRef(!1);return T0(()=>{s.current=!0}),u.useCallback(function(i,a){a===void 0&&(a={}),s.current&&(typeof i=="number"?e.navigate(i):e.navigate(i,qo({fromRouteId:t},a)))},[e,t])}const Tx={};function gC(e,t,s){!t&&!Tx[e]&&(Tx[e]=!0)}function vC(e,t){e==null||e.v7_startTransition,(e==null?void 0:e.v7_relativeSplatPath)===void 0&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}function sh(e){let{to:t,replace:s,state:r,relative:i}=e;rc()||on(!1);let{future:a,static:l}=u.useContext(sc),{matches:c}=u.useContext(Pi),{pathname:d}=lr(),p=Wn(),g=C0(t,k0(c,a.v7_relativeSplatPath),d,i==="path"),v=JSON.stringify(g);return u.useEffect(()=>p(JSON.parse(v),{replace:s,state:r,relative:i}),[p,v,i,s,r]),null}function Lt(e){on(!1)}function xC(e){let{basename:t="/",children:s=null,location:r,navigationType:i=hi.Pop,navigator:a,static:l=!1,future:c}=e;rc()&&on(!1);let d=t.replace(/^\/*/,"/"),p=u.useMemo(()=>({basename:d,navigator:a,static:l,future:qo({v7_relativeSplatPath:!1},c)}),[d,c,a,l]);typeof r=="string"&&(r=ca(r));let{pathname:g="/",search:v="",hash:S="",state:O=null,key:x="default"}=r,y=u.useMemo(()=>{let M=S0(g,d);return M==null?null:{location:{pathname:M,search:v,hash:S,state:O,key:x},navigationType:i}},[d,g,v,S,O,x,i]);return y==null?null:u.createElement(sc.Provider,{value:p},u.createElement(Ku.Provider,{children:s,value:y}))}function P0(e){let{children:t,location:s}=e;return rC(rh(t),s)}new Promise(()=>{});function rh(e,t){t===void 0&&(t=[]);let s=[];return u.Children.forEach(e,(r,i)=>{if(!u.isValidElement(r))return;let a=[...t,i];if(r.type===u.Fragment){s.push.apply(s,rh(r.props.children,a));return}r.type!==Lt&&on(!1),!r.props.index||!r.props.children||on(!1);let l={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(l.children=rh(r.props.children,a)),s.push(l)}),s}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ih(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,s)=>{let r=e[s];return t.concat(Array.isArray(r)?r.map(i=>[s,i]):[[s,r]])},[]))}function yC(e,t){let s=ih(e);return t&&t.forEach((r,i)=>{s.has(i)||t.getAll(i).forEach(a=>{s.append(i,a)})}),s}const jC="6";try{window.__reactRouterVersion=jC}catch{}const bC="startTransition",Rx=cf[bC];function wC(e){let{basename:t,children:s,future:r,window:i}=e,a=u.useRef();a.current==null&&(a.current=Rk({window:i,v5Compat:!0}));let l=a.current,[c,d]=u.useState({action:l.action,location:l.location}),{v7_startTransition:p}=r||{},g=u.useCallback(v=>{p&&Rx?Rx(()=>d(v)):d(v)},[d,p]);return u.useLayoutEffect(()=>l.listen(g),[l,g]),u.useEffect(()=>vC(r),[r]),u.createElement(xC,{basename:t,children:s,location:c.location,navigationType:c.action,navigator:l,future:r})}var Mx;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Mx||(Mx={}));var Px;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Px||(Px={}));function NC(e){let t=u.useRef(ih(e)),s=u.useRef(!1),r=lr(),i=u.useMemo(()=>yC(r.search,s.current?null:t.current),[r.search]),a=Wn(),l=u.useCallback((c,d)=>{const p=ih(typeof c=="function"?c(i):c);s.current=!0,a("?"+p,d)},[a,i]);return[i,l]}const SC={black:"#000",white:"#fff"},Ho=SC,kC={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},La=kC,CC={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},Ia=CC,AC={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},Oa=AC,EC={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},$a=EC,TC={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},Da=TC,RC={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},so=RC,MC={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},PC=MC;function Vo(e){let t="https://mui.com/production-error/?code="+e;for(let s=1;s<arguments.length;s+=1)t+="&args[]="+encodeURIComponent(arguments[s]);return"Minified MUI error #"+e+"; visit "+t+" for the full message."}const LC=Object.freeze(Object.defineProperty({__proto__:null,default:Vo},Symbol.toStringTag,{value:"Module"})),gg="$$material";function tt(){return tt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var r in s)({}).hasOwnProperty.call(s,r)&&(e[r]=s[r])}return e},tt.apply(null,arguments)}function ks(e,t){if(e==null)return{};var s={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;s[r]=e[r]}return s}var IC=!1;function OC(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function $C(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var DC=function(){function e(s){var r=this;this._insertTag=function(i){var a;r.tags.length===0?r.insertionPoint?a=r.insertionPoint.nextSibling:r.prepend?a=r.container.firstChild:a=r.before:a=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(i,a),r.tags.push(i)},this.isSpeedy=s.speedy===void 0?!IC:s.speedy,this.tags=[],this.ctr=0,this.nonce=s.nonce,this.key=s.key,this.container=s.container,this.prepend=s.prepend,this.insertionPoint=s.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(r){r.forEach(this._insertTag)},t.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag($C(this));var i=this.tags[this.tags.length-1];if(this.isSpeedy){var a=OC(i);try{a.insertRule(r,a.cssRules.length)}catch{}}else i.appendChild(document.createTextNode(r));this.ctr++},t.flush=function(){this.tags.forEach(function(r){var i;return(i=r.parentNode)==null?void 0:i.removeChild(r)}),this.tags=[],this.ctr=0},e}(),Pn="-ms-",wu="-moz-",wt="-webkit-",L0="comm",vg="rule",xg="decl",_C="@import",I0="@keyframes",FC="@layer",UC=Math.abs,Gu=String.fromCharCode,BC=Object.assign;function zC(e,t){return Sn(e,0)^45?(((t<<2^Sn(e,0))<<2^Sn(e,1))<<2^Sn(e,2))<<2^Sn(e,3):0}function O0(e){return e.trim()}function WC(e,t){return(e=t.exec(e))?e[0]:e}function Nt(e,t,s){return e.replace(t,s)}function ah(e,t){return e.indexOf(t)}function Sn(e,t){return e.charCodeAt(t)|0}function Ko(e,t,s){return e.slice(t,s)}function jr(e){return e.length}function yg(e){return e.length}function gd(e,t){return t.push(e),e}function qC(e,t){return e.map(t).join("")}var Ju=1,hl=1,$0=0,ns=0,an=0,bl="";function Yu(e,t,s,r,i,a,l){return{value:e,root:t,parent:s,type:r,props:i,children:a,line:Ju,column:hl,length:l,return:""}}function ro(e,t){return BC(Yu("",null,null,"",null,null,0),e,{length:-e.length},t)}function HC(){return an}function VC(){return an=ns>0?Sn(bl,--ns):0,hl--,an===10&&(hl=1,Ju--),an}function bs(){return an=ns<$0?Sn(bl,ns++):0,hl++,an===10&&(hl=1,Ju++),an}function Cr(){return Sn(bl,ns)}function zd(){return ns}function ic(e,t){return Ko(bl,e,t)}function Qo(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function D0(e){return Ju=hl=1,$0=jr(bl=e),ns=0,[]}function _0(e){return bl="",e}function Wd(e){return O0(ic(ns-1,lh(e===91?e+2:e===40?e+1:e)))}function KC(e){for(;(an=Cr())&&an<33;)bs();return Qo(e)>2||Qo(an)>3?"":" "}function QC(e,t){for(;--t&&bs()&&!(an<48||an>102||an>57&&an<65||an>70&&an<97););return ic(e,zd()+(t<6&&Cr()==32&&bs()==32))}function lh(e){for(;bs();)switch(an){case e:return ns;case 34:case 39:e!==34&&e!==39&&lh(an);break;case 40:e===41&&lh(e);break;case 92:bs();break}return ns}function GC(e,t){for(;bs()&&e+an!==47+10;)if(e+an===42+42&&Cr()===47)break;return"/*"+ic(t,ns-1)+"*"+Gu(e===47?e:bs())}function JC(e){for(;!Qo(Cr());)bs();return ic(e,ns)}function YC(e){return _0(qd("",null,null,null,[""],e=D0(e),0,[0],e))}function qd(e,t,s,r,i,a,l,c,d){for(var p=0,g=0,v=l,S=0,O=0,x=0,y=1,M=1,k=1,j=0,C="",E=i,B=a,_=r,F=C;M;)switch(x=j,j=bs()){case 40:if(x!=108&&Sn(F,v-1)==58){ah(F+=Nt(Wd(j),"&","&\f"),"&\f")!=-1&&(k=-1);break}case 34:case 39:case 91:F+=Wd(j);break;case 9:case 10:case 13:case 32:F+=KC(x);break;case 92:F+=QC(zd()-1,7);continue;case 47:switch(Cr()){case 42:case 47:gd(XC(GC(bs(),zd()),t,s),d);break;default:F+="/"}break;case 123*y:c[p++]=jr(F)*k;case 125*y:case 59:case 0:switch(j){case 0:case 125:M=0;case 59+g:k==-1&&(F=Nt(F,/\f/g,"")),O>0&&jr(F)-v&&gd(O>32?Ix(F+";",r,s,v-1):Ix(Nt(F," ","")+";",r,s,v-2),d);break;case 59:F+=";";default:if(gd(_=Lx(F,t,s,p,g,i,c,C,E=[],B=[],v),a),j===123)if(g===0)qd(F,t,_,_,E,a,v,c,B);else switch(S===99&&Sn(F,3)===110?100:S){case 100:case 108:case 109:case 115:qd(e,_,_,r&&gd(Lx(e,_,_,0,0,i,c,C,i,E=[],v),B),i,B,v,c,r?E:B);break;default:qd(F,_,_,_,[""],B,0,c,B)}}p=g=O=0,y=k=1,C=F="",v=l;break;case 58:v=1+jr(F),O=x;default:if(y<1){if(j==123)--y;else if(j==125&&y++==0&&VC()==125)continue}switch(F+=Gu(j),j*y){case 38:k=g>0?1:(F+="\f",-1);break;case 44:c[p++]=(jr(F)-1)*k,k=1;break;case 64:Cr()===45&&(F+=Wd(bs())),S=Cr(),g=v=jr(C=F+=JC(zd())),j++;break;case 45:x===45&&jr(F)==2&&(y=0)}}return a}function Lx(e,t,s,r,i,a,l,c,d,p,g){for(var v=i-1,S=i===0?a:[""],O=yg(S),x=0,y=0,M=0;x<r;++x)for(var k=0,j=Ko(e,v+1,v=UC(y=l[x])),C=e;k<O;++k)(C=O0(y>0?S[k]+" "+j:Nt(j,/&\f/g,S[k])))&&(d[M++]=C);return Yu(e,t,s,i===0?vg:c,d,p,g)}function XC(e,t,s){return Yu(e,t,s,L0,Gu(HC()),Ko(e,2,-2),0)}function Ix(e,t,s,r){return Yu(e,t,s,xg,Ko(e,0,r),Ko(e,r+1,-1),r)}function il(e,t){for(var s="",r=yg(e),i=0;i<r;i++)s+=t(e[i],i,e,t)||"";return s}function ZC(e,t,s,r){switch(e.type){case FC:if(e.children.length)break;case _C:case xg:return e.return=e.return||e.value;case L0:return"";case I0:return e.return=e.value+"{"+il(e.children,r)+"}";case vg:e.value=e.props.join(",")}return jr(s=il(e.children,r))?e.return=e.value+"{"+s+"}":""}function eA(e){var t=yg(e);return function(s,r,i,a){for(var l="",c=0;c<t;c++)l+=e[c](s,r,i,a)||"";return l}}function tA(e){return function(t){t.root||(t=t.return)&&e(t)}}function F0(e){var t=Object.create(null);return function(s){return t[s]===void 0&&(t[s]=e(s)),t[s]}}var nA=function(t,s,r){for(var i=0,a=0;i=a,a=Cr(),i===38&&a===12&&(s[r]=1),!Qo(a);)bs();return ic(t,ns)},sA=function(t,s){var r=-1,i=44;do switch(Qo(i)){case 0:i===38&&Cr()===12&&(s[r]=1),t[r]+=nA(ns-1,s,r);break;case 2:t[r]+=Wd(i);break;case 4:if(i===44){t[++r]=Cr()===58?"&\f":"",s[r]=t[r].length;break}default:t[r]+=Gu(i)}while(i=bs());return t},rA=function(t,s){return _0(sA(D0(t),s))},Ox=new WeakMap,iA=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var s=t.value,r=t.parent,i=t.column===r.column&&t.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(t.props.length===1&&s.charCodeAt(0)!==58&&!Ox.get(r))&&!i){Ox.set(t,!0);for(var a=[],l=rA(s,a),c=r.props,d=0,p=0;d<l.length;d++)for(var g=0;g<c.length;g++,p++)t.props[p]=a[d]?l[d].replace(/&\f/g,c[g]):c[g]+" "+l[d]}}},aA=function(t){if(t.type==="decl"){var s=t.value;s.charCodeAt(0)===108&&s.charCodeAt(2)===98&&(t.return="",t.value="")}};function U0(e,t){switch(zC(e,t)){case 5103:return wt+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return wt+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return wt+e+wu+e+Pn+e+e;case 6828:case 4268:return wt+e+Pn+e+e;case 6165:return wt+e+Pn+"flex-"+e+e;case 5187:return wt+e+Nt(e,/(\w+).+(:[^]+)/,wt+"box-$1$2"+Pn+"flex-$1$2")+e;case 5443:return wt+e+Pn+"flex-item-"+Nt(e,/flex-|-self/,"")+e;case 4675:return wt+e+Pn+"flex-line-pack"+Nt(e,/align-content|flex-|-self/,"")+e;case 5548:return wt+e+Pn+Nt(e,"shrink","negative")+e;case 5292:return wt+e+Pn+Nt(e,"basis","preferred-size")+e;case 6060:return wt+"box-"+Nt(e,"-grow","")+wt+e+Pn+Nt(e,"grow","positive")+e;case 4554:return wt+Nt(e,/([^-])(transform)/g,"$1"+wt+"$2")+e;case 6187:return Nt(Nt(Nt(e,/(zoom-|grab)/,wt+"$1"),/(image-set)/,wt+"$1"),e,"")+e;case 5495:case 3959:return Nt(e,/(image-set\([^]*)/,wt+"$1$`$1");case 4968:return Nt(Nt(e,/(.+:)(flex-)?(.*)/,wt+"box-pack:$3"+Pn+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+wt+e+e;case 4095:case 3583:case 4068:case 2532:return Nt(e,/(.+)-inline(.+)/,wt+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(jr(e)-1-t>6)switch(Sn(e,t+1)){case 109:if(Sn(e,t+4)!==45)break;case 102:return Nt(e,/(.+:)(.+)-([^]+)/,"$1"+wt+"$2-$3$1"+wu+(Sn(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~ah(e,"stretch")?U0(Nt(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(Sn(e,t+1)!==115)break;case 6444:switch(Sn(e,jr(e)-3-(~ah(e,"!important")&&10))){case 107:return Nt(e,":",":"+wt)+e;case 101:return Nt(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+wt+(Sn(e,14)===45?"inline-":"")+"box$3$1"+wt+"$2$3$1"+Pn+"$2box$3")+e}break;case 5936:switch(Sn(e,t+11)){case 114:return wt+e+Pn+Nt(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return wt+e+Pn+Nt(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return wt+e+Pn+Nt(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return wt+e+Pn+e+e}return e}var lA=function(t,s,r,i){if(t.length>-1&&!t.return)switch(t.type){case xg:t.return=U0(t.value,t.length);break;case I0:return il([ro(t,{value:Nt(t.value,"@","@"+wt)})],i);case vg:if(t.length)return qC(t.props,function(a){switch(WC(a,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return il([ro(t,{props:[Nt(a,/:(read-\w+)/,":"+wu+"$1")]})],i);case"::placeholder":return il([ro(t,{props:[Nt(a,/:(plac\w+)/,":"+wt+"input-$1")]}),ro(t,{props:[Nt(a,/:(plac\w+)/,":"+wu+"$1")]}),ro(t,{props:[Nt(a,/:(plac\w+)/,Pn+"input-$1")]})],i)}return""})}},oA=[lA],B0=function(t){var s=t.key;if(s==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(y){var M=y.getAttribute("data-emotion");M.indexOf(" ")!==-1&&(document.head.appendChild(y),y.setAttribute("data-s",""))})}var i=t.stylisPlugins||oA,a={},l,c=[];l=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+s+' "]'),function(y){for(var M=y.getAttribute("data-emotion").split(" "),k=1;k<M.length;k++)a[M[k]]=!0;c.push(y)});var d,p=[iA,aA];{var g,v=[ZC,tA(function(y){g.insert(y)})],S=eA(p.concat(i,v)),O=function(M){return il(YC(M),S)};d=function(M,k,j,C){g=j,O(M?M+"{"+k.styles+"}":k.styles),C&&(x.inserted[k.name]=!0)}}var x={key:s,sheet:new DC({key:s,container:l,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:a,registered:{},insert:d};return x.sheet.hydrate(c),x},z0={exports:{}},Ct={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yn=typeof Symbol=="function"&&Symbol.for,jg=yn?Symbol.for("react.element"):60103,bg=yn?Symbol.for("react.portal"):60106,Xu=yn?Symbol.for("react.fragment"):60107,Zu=yn?Symbol.for("react.strict_mode"):60108,em=yn?Symbol.for("react.profiler"):60114,tm=yn?Symbol.for("react.provider"):60109,nm=yn?Symbol.for("react.context"):60110,wg=yn?Symbol.for("react.async_mode"):60111,sm=yn?Symbol.for("react.concurrent_mode"):60111,rm=yn?Symbol.for("react.forward_ref"):60112,im=yn?Symbol.for("react.suspense"):60113,cA=yn?Symbol.for("react.suspense_list"):60120,am=yn?Symbol.for("react.memo"):60115,lm=yn?Symbol.for("react.lazy"):60116,dA=yn?Symbol.for("react.block"):60121,uA=yn?Symbol.for("react.fundamental"):60117,mA=yn?Symbol.for("react.responder"):60118,pA=yn?Symbol.for("react.scope"):60119;function Cs(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case jg:switch(e=e.type,e){case wg:case sm:case Xu:case em:case Zu:case im:return e;default:switch(e=e&&e.$$typeof,e){case nm:case rm:case lm:case am:case tm:return e;default:return t}}case bg:return t}}}function W0(e){return Cs(e)===sm}Ct.AsyncMode=wg;Ct.ConcurrentMode=sm;Ct.ContextConsumer=nm;Ct.ContextProvider=tm;Ct.Element=jg;Ct.ForwardRef=rm;Ct.Fragment=Xu;Ct.Lazy=lm;Ct.Memo=am;Ct.Portal=bg;Ct.Profiler=em;Ct.StrictMode=Zu;Ct.Suspense=im;Ct.isAsyncMode=function(e){return W0(e)||Cs(e)===wg};Ct.isConcurrentMode=W0;Ct.isContextConsumer=function(e){return Cs(e)===nm};Ct.isContextProvider=function(e){return Cs(e)===tm};Ct.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===jg};Ct.isForwardRef=function(e){return Cs(e)===rm};Ct.isFragment=function(e){return Cs(e)===Xu};Ct.isLazy=function(e){return Cs(e)===lm};Ct.isMemo=function(e){return Cs(e)===am};Ct.isPortal=function(e){return Cs(e)===bg};Ct.isProfiler=function(e){return Cs(e)===em};Ct.isStrictMode=function(e){return Cs(e)===Zu};Ct.isSuspense=function(e){return Cs(e)===im};Ct.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Xu||e===sm||e===em||e===Zu||e===im||e===cA||typeof e=="object"&&e!==null&&(e.$$typeof===lm||e.$$typeof===am||e.$$typeof===tm||e.$$typeof===nm||e.$$typeof===rm||e.$$typeof===uA||e.$$typeof===mA||e.$$typeof===pA||e.$$typeof===dA)};Ct.typeOf=Cs;z0.exports=Ct;var fA=z0.exports,q0=fA,hA={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},gA={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},H0={};H0[q0.ForwardRef]=hA;H0[q0.Memo]=gA;var vA=!0;function V0(e,t,s){var r="";return s.split(" ").forEach(function(i){e[i]!==void 0?t.push(e[i]+";"):i&&(r+=i+" ")}),r}var Ng=function(t,s,r){var i=t.key+"-"+s.name;(r===!1||vA===!1)&&t.registered[i]===void 0&&(t.registered[i]=s.styles)},Sg=function(t,s,r){Ng(t,s,r);var i=t.key+"-"+s.name;if(t.inserted[s.name]===void 0){var a=s;do t.insert(s===a?"."+i:"",a,t.sheet,!0),a=a.next;while(a!==void 0)}};function xA(e){for(var t=0,s,r=0,i=e.length;i>=4;++r,i-=4)s=e.charCodeAt(r)&255|(e.charCodeAt(++r)&255)<<8|(e.charCodeAt(++r)&255)<<16|(e.charCodeAt(++r)&255)<<24,s=(s&65535)*1540483477+((s>>>16)*59797<<16),s^=s>>>24,t=(s&65535)*1540483477+((s>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(i){case 3:t^=(e.charCodeAt(r+2)&255)<<16;case 2:t^=(e.charCodeAt(r+1)&255)<<8;case 1:t^=e.charCodeAt(r)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var yA={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},jA=!1,bA=/[A-Z]|^ms/g,wA=/_EMO_([^_]+?)_([^]*?)_EMO_/g,K0=function(t){return t.charCodeAt(1)===45},$x=function(t){return t!=null&&typeof t!="boolean"},Bp=F0(function(e){return K0(e)?e:e.replace(bA,"-$&").toLowerCase()}),Dx=function(t,s){switch(t){case"animation":case"animationName":if(typeof s=="string")return s.replace(wA,function(r,i,a){return br={name:i,styles:a,next:br},i})}return yA[t]!==1&&!K0(t)&&typeof s=="number"&&s!==0?s+"px":s},NA="Component selectors can only be used in conjunction with @emotion/babel-plugin, the swc Emotion plugin, or another Emotion-aware compiler transform.";function Go(e,t,s){if(s==null)return"";var r=s;if(r.__emotion_styles!==void 0)return r;switch(typeof s){case"boolean":return"";case"object":{var i=s;if(i.anim===1)return br={name:i.name,styles:i.styles,next:br},i.name;var a=s;if(a.styles!==void 0){var l=a.next;if(l!==void 0)for(;l!==void 0;)br={name:l.name,styles:l.styles,next:br},l=l.next;var c=a.styles+";";return c}return SA(e,t,s)}case"function":{if(e!==void 0){var d=br,p=s(e);return br=d,Go(e,t,p)}break}}var g=s;if(t==null)return g;var v=t[g];return v!==void 0?v:g}function SA(e,t,s){var r="";if(Array.isArray(s))for(var i=0;i<s.length;i++)r+=Go(e,t,s[i])+";";else for(var a in s){var l=s[a];if(typeof l!="object"){var c=l;t!=null&&t[c]!==void 0?r+=a+"{"+t[c]+"}":$x(c)&&(r+=Bp(a)+":"+Dx(a,c)+";")}else{if(a==="NO_COMPONENT_SELECTOR"&&jA)throw new Error(NA);if(Array.isArray(l)&&typeof l[0]=="string"&&(t==null||t[l[0]]===void 0))for(var d=0;d<l.length;d++)$x(l[d])&&(r+=Bp(a)+":"+Dx(a,l[d])+";");else{var p=Go(e,t,l);switch(a){case"animation":case"animationName":{r+=Bp(a)+":"+p+";";break}default:r+=a+"{"+p+"}"}}}}return r}var _x=/label:\s*([^\s;{]+)\s*(;|$)/g,br;function ac(e,t,s){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var r=!0,i="";br=void 0;var a=e[0];if(a==null||a.raw===void 0)r=!1,i+=Go(s,t,a);else{var l=a;i+=l[0]}for(var c=1;c<e.length;c++)if(i+=Go(s,t,e[c]),r){var d=a;i+=d[c]}_x.lastIndex=0;for(var p="",g;(g=_x.exec(i))!==null;)p+="-"+g[1];var v=xA(i)+p;return{name:v,styles:i,next:br}}var kA=function(t){return t()},Q0=cf["useInsertionEffect"]?cf["useInsertionEffect"]:!1,G0=Q0||kA,Fx=Q0||u.useLayoutEffect,CA=!1,J0=u.createContext(typeof HTMLElement<"u"?B0({key:"css"}):null),AA=J0.Provider,kg=function(t){return u.forwardRef(function(s,r){var i=u.useContext(J0);return t(s,i,r)})},lc=u.createContext({}),Cg={}.hasOwnProperty,oh="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",EA=function(t,s){var r={};for(var i in s)Cg.call(s,i)&&(r[i]=s[i]);return r[oh]=t,r},TA=function(t){var s=t.cache,r=t.serialized,i=t.isStringTag;return Ng(s,r,i),G0(function(){return Sg(s,r,i)}),null},RA=kg(function(e,t,s){var r=e.css;typeof r=="string"&&t.registered[r]!==void 0&&(r=t.registered[r]);var i=e[oh],a=[r],l="";typeof e.className=="string"?l=V0(t.registered,a,e.className):e.className!=null&&(l=e.className+" ");var c=ac(a,void 0,u.useContext(lc));l+=t.key+"-"+c.name;var d={};for(var p in e)Cg.call(e,p)&&p!=="css"&&p!==oh&&!CA&&(d[p]=e[p]);return d.className=l,s&&(d.ref=s),u.createElement(u.Fragment,null,u.createElement(TA,{cache:t,serialized:c,isStringTag:typeof i=="string"}),u.createElement(i,d))}),MA=RA,zp={exports:{}},Ux;function Y0(){return Ux||(Ux=1,function(e){function t(){return e.exports=t=Object.assign?Object.assign.bind():function(s){for(var r=1;r<arguments.length;r++){var i=arguments[r];for(var a in i)({}).hasOwnProperty.call(i,a)&&(s[a]=i[a])}return s},e.exports.__esModule=!0,e.exports.default=e.exports,t.apply(null,arguments)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(zp)),zp.exports}Y0();var Bx=function(t,s){var r=arguments;if(s==null||!Cg.call(s,"css"))return u.createElement.apply(void 0,r);var i=r.length,a=new Array(i);a[0]=MA,a[1]=EA(t,s);for(var l=2;l<i;l++)a[l]=r[l];return u.createElement.apply(null,a)};(function(e){var t;t||(t=e.JSX||(e.JSX={}))})(Bx||(Bx={}));var PA=kg(function(e,t){var s=e.styles,r=ac([s],void 0,u.useContext(lc)),i=u.useRef();return Fx(function(){var a=t.key+"-global",l=new t.sheet.constructor({key:a,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),c=!1,d=document.querySelector('style[data-emotion="'+a+" "+r.name+'"]');return t.sheet.tags.length&&(l.before=t.sheet.tags[0]),d!==null&&(c=!0,d.setAttribute("data-emotion",a),l.hydrate([d])),i.current=[l,c],function(){l.flush()}},[t]),Fx(function(){var a=i.current,l=a[0],c=a[1];if(c){a[1]=!1;return}if(r.next!==void 0&&Sg(t,r.next,!0),l.tags.length){var d=l.tags[l.tags.length-1].nextElementSibling;l.before=d,l.flush()}t.insert("",r,l,!1)},[t,r.name]),null});function X0(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return ac(t)}function om(){var e=X0.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}var LA=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|popover|popoverTarget|popoverTargetAction|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,IA=F0(function(e){return LA.test(e)||e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)<91}),OA=!1,$A=IA,DA=function(t){return t!=="theme"},zx=function(t){return typeof t=="string"&&t.charCodeAt(0)>96?$A:DA},Wx=function(t,s,r){var i;if(s){var a=s.shouldForwardProp;i=t.__emotion_forwardProp&&a?function(l){return t.__emotion_forwardProp(l)&&a(l)}:a}return typeof i!="function"&&r&&(i=t.__emotion_forwardProp),i},_A=function(t){var s=t.cache,r=t.serialized,i=t.isStringTag;return Ng(s,r,i),G0(function(){return Sg(s,r,i)}),null},FA=function e(t,s){var r=t.__emotion_real===t,i=r&&t.__emotion_base||t,a,l;s!==void 0&&(a=s.label,l=s.target);var c=Wx(t,s,r),d=c||zx(i),p=!d("as");return function(){var g=arguments,v=r&&t.__emotion_styles!==void 0?t.__emotion_styles.slice(0):[];if(a!==void 0&&v.push("label:"+a+";"),g[0]==null||g[0].raw===void 0)v.push.apply(v,g);else{var S=g[0];v.push(S[0]);for(var O=g.length,x=1;x<O;x++)v.push(g[x],S[x])}var y=kg(function(M,k,j){var C=p&&M.as||i,E="",B=[],_=M;if(M.theme==null){_={};for(var F in M)_[F]=M[F];_.theme=u.useContext(lc)}typeof M.className=="string"?E=V0(k.registered,B,M.className):M.className!=null&&(E=M.className+" ");var J=ac(v.concat(B),k.registered,_);E+=k.key+"-"+J.name,l!==void 0&&(E+=" "+l);var ue=p&&c===void 0?zx(C):d,Y={};for(var xe in M)p&&xe==="as"||ue(xe)&&(Y[xe]=M[xe]);return Y.className=E,j&&(Y.ref=j),u.createElement(u.Fragment,null,u.createElement(_A,{cache:k,serialized:J,isStringTag:typeof C=="string"}),u.createElement(C,Y))});return y.displayName=a!==void 0?a:"Styled("+(typeof i=="string"?i:i.displayName||i.name||"Component")+")",y.defaultProps=t.defaultProps,y.__emotion_real=y,y.__emotion_base=i,y.__emotion_styles=v,y.__emotion_forwardProp=c,Object.defineProperty(y,"toString",{value:function(){return l===void 0&&OA?"NO_COMPONENT_SELECTOR":"."+l}}),y.withComponent=function(M,k){var j=e(M,tt({},s,k,{shouldForwardProp:Wx(y,k,!0)}));return j.apply(void 0,v)},y}},UA=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],ch=FA.bind(null);UA.forEach(function(e){ch[e]=ch(e)});function BA(e,t){const s=B0({key:"css",prepend:e});if(t){const r=s.insert;s.insert=(...i)=>(i[1].styles.match(/^@layer\s+[^{]*$/)||(i[1].styles=`@layer mui {${i[1].styles}}`),r(...i))}return s}const Wp=new Map;function zA(e){const{injectFirst:t,enableCssLayer:s,children:r}=e,i=u.useMemo(()=>{const a=`${t}-${s}`;if(typeof document=="object"&&Wp.has(a))return Wp.get(a);const l=BA(t,s);return Wp.set(a,l),l},[t,s]);return t||s?n.jsx(AA,{value:i,children:r}):r}function WA(e){return e==null||Object.keys(e).length===0}function Z0(e){const{styles:t,defaultTheme:s={}}=e,r=typeof t=="function"?i=>t(WA(i)?s:i):t;return n.jsx(PA,{styles:r})}/**
 * @mui/styled-engine v5.18.0
 *
 * @license MIT
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function ew(e,t){return ch(e,t)}const qA=(e,t)=>{Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))},qx=[];function tw(e){return qx[0]=e,ac(qx)}const HA=Object.freeze(Object.defineProperty({__proto__:null,GlobalStyles:Z0,StyledEngineProvider:zA,ThemeContext:lc,css:X0,default:ew,internal_processStyles:qA,internal_serializeStyles:tw,keyframes:om},Symbol.toStringTag,{value:"Module"}));function mi(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function nw(e){if(u.isValidElement(e)||!mi(e))return e;const t={};return Object.keys(e).forEach(s=>{t[s]=nw(e[s])}),t}function Ar(e,t,s={clone:!0}){const r=s.clone?tt({},e):e;return mi(e)&&mi(t)&&Object.keys(t).forEach(i=>{u.isValidElement(t[i])?r[i]=t[i]:mi(t[i])&&Object.prototype.hasOwnProperty.call(e,i)&&mi(e[i])?r[i]=Ar(e[i],t[i],s):s.clone?r[i]=mi(t[i])?nw(t[i]):t[i]:r[i]=t[i]}),r}const VA=Object.freeze(Object.defineProperty({__proto__:null,default:Ar,isPlainObject:mi},Symbol.toStringTag,{value:"Module"})),KA=["values","unit","step"],QA=e=>{const t=Object.keys(e).map(s=>({key:s,val:e[s]}))||[];return t.sort((s,r)=>s.val-r.val),t.reduce((s,r)=>tt({},s,{[r.key]:r.val}),{})};function sw(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:s="px",step:r=5}=e,i=ks(e,KA),a=QA(t),l=Object.keys(a);function c(S){return`@media (min-width:${typeof t[S]=="number"?t[S]:S}${s})`}function d(S){return`@media (max-width:${(typeof t[S]=="number"?t[S]:S)-r/100}${s})`}function p(S,O){const x=l.indexOf(O);return`@media (min-width:${typeof t[S]=="number"?t[S]:S}${s}) and (max-width:${(x!==-1&&typeof t[l[x]]=="number"?t[l[x]]:O)-r/100}${s})`}function g(S){return l.indexOf(S)+1<l.length?p(S,l[l.indexOf(S)+1]):c(S)}function v(S){const O=l.indexOf(S);return O===0?c(l[1]):O===l.length-1?d(l[O]):p(S,l[l.indexOf(S)+1]).replace("@media","@media not all and")}return tt({keys:l,values:a,up:c,down:d,between:p,only:g,not:v,unit:s},i)}const GA={borderRadius:4},JA=GA;function No(e,t){return t?Ar(e,t,{clone:!1}):e}const Ag={xs:0,sm:600,md:900,lg:1200,xl:1536},Hx={keys:["xs","sm","md","lg","xl"],up:e=>`@media (min-width:${Ag[e]}px)`};function Wr(e,t,s){const r=e.theme||{};if(Array.isArray(t)){const a=r.breakpoints||Hx;return t.reduce((l,c,d)=>(l[a.up(a.keys[d])]=s(t[d]),l),{})}if(typeof t=="object"){const a=r.breakpoints||Hx;return Object.keys(t).reduce((l,c)=>{if(Object.keys(a.values||Ag).indexOf(c)!==-1){const d=a.up(c);l[d]=s(t[c],c)}else{const d=c;l[d]=t[d]}return l},{})}return s(t)}function YA(e={}){var t;return((t=e.keys)==null?void 0:t.reduce((r,i)=>{const a=e.up(i);return r[a]={},r},{}))||{}}function Vx(e,t){return e.reduce((s,r)=>{const i=s[r];return(!i||Object.keys(i).length===0)&&delete s[r],s},t)}function In(e){if(typeof e!="string")throw new Error(Vo(7));return e.charAt(0).toUpperCase()+e.slice(1)}const XA=Object.freeze(Object.defineProperty({__proto__:null,default:In},Symbol.toStringTag,{value:"Module"}));function cm(e,t,s=!0){if(!t||typeof t!="string")return null;if(e&&e.vars&&s){const r=`vars.${t}`.split(".").reduce((i,a)=>i&&i[a]?i[a]:null,e);if(r!=null)return r}return t.split(".").reduce((r,i)=>r&&r[i]!=null?r[i]:null,e)}function Nu(e,t,s,r=s){let i;return typeof e=="function"?i=e(s):Array.isArray(e)?i=e[s]||r:i=cm(e,s)||r,t&&(i=t(i,r,e)),i}function Zt(e){const{prop:t,cssProperty:s=e.prop,themeKey:r,transform:i}=e,a=l=>{if(l[t]==null)return null;const c=l[t],d=l.theme,p=cm(d,r)||{};return Wr(l,c,v=>{let S=Nu(p,i,v);return v===S&&typeof v=="string"&&(S=Nu(p,i,`${t}${v==="default"?"":In(v)}`,v)),s===!1?S:{[s]:S}})};return a.propTypes={},a.filterProps=[t],a}function ZA(e){const t={};return s=>(t[s]===void 0&&(t[s]=e(s)),t[s])}const e2={m:"margin",p:"padding"},t2={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},Kx={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},n2=ZA(e=>{if(e.length>2)if(Kx[e])e=Kx[e];else return[e];const[t,s]=e.split(""),r=e2[t],i=t2[s]||"";return Array.isArray(i)?i.map(a=>r+a):[r+i]}),Eg=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],Tg=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...Eg,...Tg];function oc(e,t,s,r){var i;const a=(i=cm(e,t,!1))!=null?i:s;return typeof a=="number"?l=>typeof l=="string"?l:a*l:Array.isArray(a)?l=>typeof l=="string"?l:a[l]:typeof a=="function"?a:()=>{}}function rw(e){return oc(e,"spacing",8)}function cc(e,t){if(typeof t=="string"||t==null)return t;const s=Math.abs(t),r=e(s);return t>=0?r:typeof r=="number"?-r:`-${r}`}function s2(e,t){return s=>e.reduce((r,i)=>(r[i]=cc(t,s),r),{})}function r2(e,t,s,r){if(t.indexOf(s)===-1)return null;const i=n2(s),a=s2(i,r),l=e[s];return Wr(e,l,a)}function iw(e,t){const s=rw(e.theme);return Object.keys(e).map(r=>r2(e,t,r,s)).reduce(No,{})}function Qt(e){return iw(e,Eg)}Qt.propTypes={};Qt.filterProps=Eg;function Gt(e){return iw(e,Tg)}Gt.propTypes={};Gt.filterProps=Tg;function i2(e=8){if(e.mui)return e;const t=rw({spacing:e}),s=(...r)=>(r.length===0?[1]:r).map(a=>{const l=t(a);return typeof l=="number"?`${l}px`:l}).join(" ");return s.mui=!0,s}function dm(...e){const t=e.reduce((r,i)=>(i.filterProps.forEach(a=>{r[a]=i}),r),{}),s=r=>Object.keys(r).reduce((i,a)=>t[a]?No(i,t[a](r)):i,{});return s.propTypes={},s.filterProps=e.reduce((r,i)=>r.concat(i.filterProps),[]),s}function $s(e){return typeof e!="number"?e:`${e}px solid`}function zs(e,t){return Zt({prop:e,themeKey:"borders",transform:t})}const a2=zs("border",$s),l2=zs("borderTop",$s),o2=zs("borderRight",$s),c2=zs("borderBottom",$s),d2=zs("borderLeft",$s),u2=zs("borderColor"),m2=zs("borderTopColor"),p2=zs("borderRightColor"),f2=zs("borderBottomColor"),h2=zs("borderLeftColor"),g2=zs("outline",$s),v2=zs("outlineColor"),um=e=>{if(e.borderRadius!==void 0&&e.borderRadius!==null){const t=oc(e.theme,"shape.borderRadius",4),s=r=>({borderRadius:cc(t,r)});return Wr(e,e.borderRadius,s)}return null};um.propTypes={};um.filterProps=["borderRadius"];dm(a2,l2,o2,c2,d2,u2,m2,p2,f2,h2,um,g2,v2);const mm=e=>{if(e.gap!==void 0&&e.gap!==null){const t=oc(e.theme,"spacing",8),s=r=>({gap:cc(t,r)});return Wr(e,e.gap,s)}return null};mm.propTypes={};mm.filterProps=["gap"];const pm=e=>{if(e.columnGap!==void 0&&e.columnGap!==null){const t=oc(e.theme,"spacing",8),s=r=>({columnGap:cc(t,r)});return Wr(e,e.columnGap,s)}return null};pm.propTypes={};pm.filterProps=["columnGap"];const fm=e=>{if(e.rowGap!==void 0&&e.rowGap!==null){const t=oc(e.theme,"spacing",8),s=r=>({rowGap:cc(t,r)});return Wr(e,e.rowGap,s)}return null};fm.propTypes={};fm.filterProps=["rowGap"];const x2=Zt({prop:"gridColumn"}),y2=Zt({prop:"gridRow"}),j2=Zt({prop:"gridAutoFlow"}),b2=Zt({prop:"gridAutoColumns"}),w2=Zt({prop:"gridAutoRows"}),N2=Zt({prop:"gridTemplateColumns"}),S2=Zt({prop:"gridTemplateRows"}),k2=Zt({prop:"gridTemplateAreas"}),C2=Zt({prop:"gridArea"});dm(mm,pm,fm,x2,y2,j2,b2,w2,N2,S2,k2,C2);function al(e,t){return t==="grey"?t:e}const A2=Zt({prop:"color",themeKey:"palette",transform:al}),E2=Zt({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:al}),T2=Zt({prop:"backgroundColor",themeKey:"palette",transform:al});dm(A2,E2,T2);function xs(e){return e<=1&&e!==0?`${e*100}%`:e}const R2=Zt({prop:"width",transform:xs}),Rg=e=>{if(e.maxWidth!==void 0&&e.maxWidth!==null){const t=s=>{var r,i;const a=((r=e.theme)==null||(r=r.breakpoints)==null||(r=r.values)==null?void 0:r[s])||Ag[s];return a?((i=e.theme)==null||(i=i.breakpoints)==null?void 0:i.unit)!=="px"?{maxWidth:`${a}${e.theme.breakpoints.unit}`}:{maxWidth:a}:{maxWidth:xs(s)}};return Wr(e,e.maxWidth,t)}return null};Rg.filterProps=["maxWidth"];const M2=Zt({prop:"minWidth",transform:xs}),P2=Zt({prop:"height",transform:xs}),L2=Zt({prop:"maxHeight",transform:xs}),I2=Zt({prop:"minHeight",transform:xs});Zt({prop:"size",cssProperty:"width",transform:xs});Zt({prop:"size",cssProperty:"height",transform:xs});const O2=Zt({prop:"boxSizing"});dm(R2,Rg,M2,P2,L2,I2,O2);const $2={border:{themeKey:"borders",transform:$s},borderTop:{themeKey:"borders",transform:$s},borderRight:{themeKey:"borders",transform:$s},borderBottom:{themeKey:"borders",transform:$s},borderLeft:{themeKey:"borders",transform:$s},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:$s},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:um},color:{themeKey:"palette",transform:al},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:al},backgroundColor:{themeKey:"palette",transform:al},p:{style:Gt},pt:{style:Gt},pr:{style:Gt},pb:{style:Gt},pl:{style:Gt},px:{style:Gt},py:{style:Gt},padding:{style:Gt},paddingTop:{style:Gt},paddingRight:{style:Gt},paddingBottom:{style:Gt},paddingLeft:{style:Gt},paddingX:{style:Gt},paddingY:{style:Gt},paddingInline:{style:Gt},paddingInlineStart:{style:Gt},paddingInlineEnd:{style:Gt},paddingBlock:{style:Gt},paddingBlockStart:{style:Gt},paddingBlockEnd:{style:Gt},m:{style:Qt},mt:{style:Qt},mr:{style:Qt},mb:{style:Qt},ml:{style:Qt},mx:{style:Qt},my:{style:Qt},margin:{style:Qt},marginTop:{style:Qt},marginRight:{style:Qt},marginBottom:{style:Qt},marginLeft:{style:Qt},marginX:{style:Qt},marginY:{style:Qt},marginInline:{style:Qt},marginInlineStart:{style:Qt},marginInlineEnd:{style:Qt},marginBlock:{style:Qt},marginBlockStart:{style:Qt},marginBlockEnd:{style:Qt},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:mm},rowGap:{style:fm},columnGap:{style:pm},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:xs},maxWidth:{style:Rg},minWidth:{transform:xs},height:{transform:xs},maxHeight:{transform:xs},minHeight:{transform:xs},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}},dc=$2;function D2(...e){const t=e.reduce((r,i)=>r.concat(Object.keys(i)),[]),s=new Set(t);return e.every(r=>s.size===Object.keys(r).length)}function _2(e,t){return typeof e=="function"?e(t):e}function aw(){function e(s,r,i,a){const l={[s]:r,theme:i},c=a[s];if(!c)return{[s]:r};const{cssProperty:d=s,themeKey:p,transform:g,style:v}=c;if(r==null)return null;if(p==="typography"&&r==="inherit")return{[s]:r};const S=cm(i,p)||{};return v?v(l):Wr(l,r,x=>{let y=Nu(S,g,x);return x===y&&typeof x=="string"&&(y=Nu(S,g,`${s}${x==="default"?"":In(x)}`,x)),d===!1?y:{[d]:y}})}function t(s){var r;const{sx:i,theme:a={},nested:l}=s||{};if(!i)return null;const c=(r=a.unstable_sxConfig)!=null?r:dc;function d(p){let g=p;if(typeof p=="function")g=p(a);else if(typeof p!="object")return p;if(!g)return null;const v=YA(a.breakpoints),S=Object.keys(v);let O=v;return Object.keys(g).forEach(x=>{const y=_2(g[x],a);if(y!=null)if(typeof y=="object")if(c[x])O=No(O,e(x,y,a,c));else{const M=Wr({theme:a},y,k=>({[x]:k}));D2(M,y)?O[x]=t({sx:y,theme:a,nested:!0}):O=No(O,M)}else O=No(O,e(x,y,a,c))}),!l&&a.modularCssLayers?{"@layer sx":Vx(S,O)}:Vx(S,O)}return Array.isArray(i)?i.map(d):d(i)}return t}const lw=aw();lw.filterProps=["sx"];const hm=lw;function ow(e,t){const s=this;return s.vars&&typeof s.getColorSchemeSelector=="function"?{[s.getColorSchemeSelector(e).replace(/(\[[^\]]+\])/,"*:where($1)")]:t}:s.palette.mode===e?t:{}}const F2=["breakpoints","palette","spacing","shape"];function Mg(e={},...t){const{breakpoints:s={},palette:r={},spacing:i,shape:a={}}=e,l=ks(e,F2),c=sw(s),d=i2(i);let p=Ar({breakpoints:c,direction:"ltr",components:{},palette:tt({mode:"light"},r),spacing:d,shape:tt({},JA,a)},l);return p.applyStyles=ow,p=t.reduce((g,v)=>Ar(g,v),p),p.unstable_sxConfig=tt({},dc,l==null?void 0:l.unstable_sxConfig),p.unstable_sx=function(v){return hm({sx:v,theme:this})},p}const U2=Object.freeze(Object.defineProperty({__proto__:null,default:Mg,private_createBreakpoints:sw,unstable_applyStyles:ow},Symbol.toStringTag,{value:"Module"}));function B2(e){return Object.keys(e).length===0}function z2(e=null){const t=u.useContext(lc);return!t||B2(t)?e:t}const W2=Mg();function cw(e=W2){return z2(e)}function qp(e){const t=tw(e);return e!==t&&t.styles?(t.styles.match(/^@layer\s+[^{]*$/)||(t.styles=`@layer global{${t.styles}}`),t):e}function q2({styles:e,themeId:t,defaultTheme:s={}}){const r=cw(s),i=t&&r[t]||r;let a=typeof e=="function"?e(i):e;return i.modularCssLayers&&(Array.isArray(a)?a=a.map(l=>qp(typeof l=="function"?l(i):l)):a=qp(a)),n.jsx(Z0,{styles:a})}const H2=["sx"],V2=e=>{var t,s;const r={systemProps:{},otherProps:{}},i=(t=e==null||(s=e.theme)==null?void 0:s.unstable_sxConfig)!=null?t:dc;return Object.keys(e).forEach(a=>{i[a]?r.systemProps[a]=e[a]:r.otherProps[a]=e[a]}),r};function Pg(e){const{sx:t}=e,s=ks(e,H2),{systemProps:r,otherProps:i}=V2(s);let a;return Array.isArray(t)?a=[r,...t]:typeof t=="function"?a=(...l)=>{const c=t(...l);return mi(c)?tt({},r,c):r}:a=tt({},r,t),tt({},i,{sx:a})}const K2=Object.freeze(Object.defineProperty({__proto__:null,default:hm,extendSxProp:Pg,unstable_createStyleFunctionSx:aw,unstable_defaultSxConfig:dc},Symbol.toStringTag,{value:"Module"})),Qx=e=>e,Q2=()=>{let e=Qx;return{configure(t){e=t},generate(t){return e(t)},reset(){e=Qx}}},G2=Q2(),dw=G2;function uw(e){var t,s,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(s=uw(e[t]))&&(r&&(r+=" "),r+=s)}else for(s in e)e[s]&&(r&&(r+=" "),r+=s);return r}function Qn(){for(var e,t,s=0,r="",i=arguments.length;s<i;s++)(e=arguments[s])&&(t=uw(e))&&(r&&(r+=" "),r+=t);return r}const J2=["className","component"];function Y2(e={}){const{themeId:t,defaultTheme:s,defaultClassName:r="MuiBox-root",generateClassName:i}=e,a=ew("div",{shouldForwardProp:c=>c!=="theme"&&c!=="sx"&&c!=="as"})(hm);return u.forwardRef(function(d,p){const g=cw(s),v=Pg(d),{className:S,component:O="div"}=v,x=ks(v,J2);return n.jsx(a,tt({as:O,ref:p,className:Qn(S,i?i(r):r),theme:t&&g[t]||g},x))})}const X2={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function gm(e,t,s="Mui"){const r=X2[t];return r?`${s}-${r}`:`${dw.generate(e)}-${t}`}function uc(e,t,s="Mui"){const r={};return t.forEach(i=>{r[i]=gm(e,i,s)}),r}var mw={exports:{}},Rt={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lg=Symbol.for("react.transitional.element"),Ig=Symbol.for("react.portal"),vm=Symbol.for("react.fragment"),xm=Symbol.for("react.strict_mode"),ym=Symbol.for("react.profiler"),jm=Symbol.for("react.consumer"),bm=Symbol.for("react.context"),wm=Symbol.for("react.forward_ref"),Nm=Symbol.for("react.suspense"),Sm=Symbol.for("react.suspense_list"),km=Symbol.for("react.memo"),Cm=Symbol.for("react.lazy"),Z2=Symbol.for("react.view_transition"),eE=Symbol.for("react.client.reference");function Ws(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case Lg:switch(e=e.type,e){case vm:case ym:case xm:case Nm:case Sm:case Z2:return e;default:switch(e=e&&e.$$typeof,e){case bm:case wm:case Cm:case km:return e;case jm:return e;default:return t}}case Ig:return t}}}Rt.ContextConsumer=jm;Rt.ContextProvider=bm;Rt.Element=Lg;Rt.ForwardRef=wm;Rt.Fragment=vm;Rt.Lazy=Cm;Rt.Memo=km;Rt.Portal=Ig;Rt.Profiler=ym;Rt.StrictMode=xm;Rt.Suspense=Nm;Rt.SuspenseList=Sm;Rt.isContextConsumer=function(e){return Ws(e)===jm};Rt.isContextProvider=function(e){return Ws(e)===bm};Rt.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===Lg};Rt.isForwardRef=function(e){return Ws(e)===wm};Rt.isFragment=function(e){return Ws(e)===vm};Rt.isLazy=function(e){return Ws(e)===Cm};Rt.isMemo=function(e){return Ws(e)===km};Rt.isPortal=function(e){return Ws(e)===Ig};Rt.isProfiler=function(e){return Ws(e)===ym};Rt.isStrictMode=function(e){return Ws(e)===xm};Rt.isSuspense=function(e){return Ws(e)===Nm};Rt.isSuspenseList=function(e){return Ws(e)===Sm};Rt.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===vm||e===ym||e===xm||e===Nm||e===Sm||typeof e=="object"&&e!==null&&(e.$$typeof===Cm||e.$$typeof===km||e.$$typeof===bm||e.$$typeof===jm||e.$$typeof===wm||e.$$typeof===eE||e.getModuleId!==void 0)};Rt.typeOf=Ws;mw.exports=Rt;var Gx=mw.exports;const tE=/^\s*function(?:\s|\s*\/\*.*\*\/\s*)+([^(\s/]*)\s*/;function pw(e){const t=`${e}`.match(tE);return t&&t[1]||""}function fw(e,t=""){return e.displayName||e.name||pw(e)||t}function Jx(e,t,s){const r=fw(t);return e.displayName||(r!==""?`${s}(${r})`:s)}function nE(e){if(e!=null){if(typeof e=="string")return e;if(typeof e=="function")return fw(e,"Component");if(typeof e=="object")switch(e.$$typeof){case Gx.ForwardRef:return Jx(e,e.render,"ForwardRef");case Gx.Memo:return Jx(e,e.type,"memo");default:return}}}const sE=Object.freeze(Object.defineProperty({__proto__:null,default:nE,getFunctionName:pw},Symbol.toStringTag,{value:"Module"}));function Su(e,t){const s=tt({},t);return Object.keys(e).forEach(r=>{if(r.toString().match(/^(components|slots)$/))s[r]=tt({},e[r],s[r]);else if(r.toString().match(/^(componentsProps|slotProps)$/)){const i=e[r]||{},a=t[r];s[r]={},!a||!Object.keys(a)?s[r]=i:!i||!Object.keys(i)?s[r]=a:(s[r]=tt({},a),Object.keys(i).forEach(l=>{s[r][l]=Su(i[l],a[l])}))}else s[r]===void 0&&(s[r]=e[r])}),s}const rE=typeof window<"u"?u.useLayoutEffect:u.useEffect,iE=rE;function aE(e,t=Number.MIN_SAFE_INTEGER,s=Number.MAX_SAFE_INTEGER){return Math.max(t,Math.min(e,s))}const lE=Object.freeze(Object.defineProperty({__proto__:null,default:aE},Symbol.toStringTag,{value:"Module"}));function oE(e,t){typeof e=="function"?e(t):e&&(e.current=t)}function vd(e){const t=u.useRef(e);return iE(()=>{t.current=e}),u.useRef((...s)=>(0,t.current)(...s)).current}function Yx(...e){return u.useMemo(()=>e.every(t=>t==null)?null:t=>{e.forEach(s=>{oE(s,t)})},e)}const Xx={};function cE(e,t){const s=u.useRef(Xx);return s.current===Xx&&(s.current=e(t)),s}const dE=[];function uE(e){u.useEffect(e,dE)}class Am{constructor(){this.currentId=null,this.clear=()=>{this.currentId!==null&&(clearTimeout(this.currentId),this.currentId=null)},this.disposeEffect=()=>this.clear}static create(){return new Am}start(t,s){this.clear(),this.currentId=setTimeout(()=>{this.currentId=null,s()},t)}}function mE(){const e=cE(Am.create).current;return uE(e.disposeEffect),e}let Em=!0,dh=!1;const pE=new Am,fE={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function hE(e){const{type:t,tagName:s}=e;return!!(s==="INPUT"&&fE[t]&&!e.readOnly||s==="TEXTAREA"&&!e.readOnly||e.isContentEditable)}function gE(e){e.metaKey||e.altKey||e.ctrlKey||(Em=!0)}function Hp(){Em=!1}function vE(){this.visibilityState==="hidden"&&dh&&(Em=!0)}function xE(e){e.addEventListener("keydown",gE,!0),e.addEventListener("mousedown",Hp,!0),e.addEventListener("pointerdown",Hp,!0),e.addEventListener("touchstart",Hp,!0),e.addEventListener("visibilitychange",vE,!0)}function yE(e){const{target:t}=e;try{return t.matches(":focus-visible")}catch{}return Em||hE(t)}function jE(){const e=u.useCallback(i=>{i!=null&&xE(i.ownerDocument)},[]),t=u.useRef(!1);function s(){return t.current?(dh=!0,pE.start(100,()=>{dh=!1}),t.current=!1,!0):!1}function r(i){return yE(i)?(t.current=!0,!0):!1}return{isFocusVisibleRef:t,onFocus:r,onBlur:s,ref:e}}function Og(e,t,s=void 0){const r={};return Object.keys(e).forEach(i=>{r[i]=e[i].reduce((a,l)=>{if(l){const c=t(l);c!==""&&a.push(c),s&&s[l]&&a.push(s[l])}return a},[]).join(" ")}),r}const bE=u.createContext(void 0);function wE(e){const{theme:t,name:s,props:r}=e;if(!t||!t.components||!t.components[s])return r;const i=t.components[s];return i.defaultProps?Su(i.defaultProps,r):!i.styleOverrides&&!i.variants?Su(i,r):r}function NE({props:e,name:t}){const s=u.useContext(bE);return wE({props:e,name:t,theme:{components:s}})}function SE(e,t){return tt({toolbar:{minHeight:56,[e.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[e.up("sm")]:{minHeight:64}}},t)}var en={},hw={exports:{}};(function(e){function t(s){return s&&s.__esModule?s:{default:s}}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports})(hw);var gw=hw.exports;const kE=Ai(LC),CE=Ai(lE);var vw=gw;Object.defineProperty(en,"__esModule",{value:!0});var xd=en.alpha=bw;en.blend=FE;en.colorChannel=void 0;var AE=en.darken=Dg;en.decomposeColor=Bs;en.emphasize=ww;var EE=en.getContrastRatio=IE;en.getLuminance=ku;en.hexToRgb=xw;en.hslToRgb=jw;var TE=en.lighten=_g;en.private_safeAlpha=OE;en.private_safeColorChannel=void 0;en.private_safeDarken=$E;en.private_safeEmphasize=_E;en.private_safeLighten=DE;en.recomposeColor=wl;en.rgbToHex=LE;var Zx=vw(kE),RE=vw(CE);function $g(e,t=0,s=1){return(0,RE.default)(e,t,s)}function xw(e){e=e.slice(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let s=e.match(t);return s&&s[0].length===1&&(s=s.map(r=>r+r)),s?`rgb${s.length===4?"a":""}(${s.map((r,i)=>i<3?parseInt(r,16):Math.round(parseInt(r,16)/255*1e3)/1e3).join(", ")})`:""}function ME(e){const t=e.toString(16);return t.length===1?`0${t}`:t}function Bs(e){if(e.type)return e;if(e.charAt(0)==="#")return Bs(xw(e));const t=e.indexOf("("),s=e.substring(0,t);if(["rgb","rgba","hsl","hsla","color"].indexOf(s)===-1)throw new Error((0,Zx.default)(9,e));let r=e.substring(t+1,e.length-1),i;if(s==="color"){if(r=r.split(" "),i=r.shift(),r.length===4&&r[3].charAt(0)==="/"&&(r[3]=r[3].slice(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(i)===-1)throw new Error((0,Zx.default)(10,i))}else r=r.split(",");return r=r.map(a=>parseFloat(a)),{type:s,values:r,colorSpace:i}}const yw=e=>{const t=Bs(e);return t.values.slice(0,3).map((s,r)=>t.type.indexOf("hsl")!==-1&&r!==0?`${s}%`:s).join(" ")};en.colorChannel=yw;const PE=(e,t)=>{try{return yw(e)}catch{return e}};en.private_safeColorChannel=PE;function wl(e){const{type:t,colorSpace:s}=e;let{values:r}=e;return t.indexOf("rgb")!==-1?r=r.map((i,a)=>a<3?parseInt(i,10):i):t.indexOf("hsl")!==-1&&(r[1]=`${r[1]}%`,r[2]=`${r[2]}%`),t.indexOf("color")!==-1?r=`${s} ${r.join(" ")}`:r=`${r.join(", ")}`,`${t}(${r})`}function LE(e){if(e.indexOf("#")===0)return e;const{values:t}=Bs(e);return`#${t.map((s,r)=>ME(r===3?Math.round(255*s):s)).join("")}`}function jw(e){e=Bs(e);const{values:t}=e,s=t[0],r=t[1]/100,i=t[2]/100,a=r*Math.min(i,1-i),l=(p,g=(p+s/30)%12)=>i-a*Math.max(Math.min(g-3,9-g,1),-1);let c="rgb";const d=[Math.round(l(0)*255),Math.round(l(8)*255),Math.round(l(4)*255)];return e.type==="hsla"&&(c+="a",d.push(t[3])),wl({type:c,values:d})}function ku(e){e=Bs(e);let t=e.type==="hsl"||e.type==="hsla"?Bs(jw(e)).values:e.values;return t=t.map(s=>(e.type!=="color"&&(s/=255),s<=.03928?s/12.92:((s+.055)/1.055)**2.4)),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function IE(e,t){const s=ku(e),r=ku(t);return(Math.max(s,r)+.05)/(Math.min(s,r)+.05)}function bw(e,t){return e=Bs(e),t=$g(t),(e.type==="rgb"||e.type==="hsl")&&(e.type+="a"),e.type==="color"?e.values[3]=`/${t}`:e.values[3]=t,wl(e)}function OE(e,t,s){try{return bw(e,t)}catch{return e}}function Dg(e,t){if(e=Bs(e),t=$g(t),e.type.indexOf("hsl")!==-1)e.values[2]*=1-t;else if(e.type.indexOf("rgb")!==-1||e.type.indexOf("color")!==-1)for(let s=0;s<3;s+=1)e.values[s]*=1-t;return wl(e)}function $E(e,t,s){try{return Dg(e,t)}catch{return e}}function _g(e,t){if(e=Bs(e),t=$g(t),e.type.indexOf("hsl")!==-1)e.values[2]+=(100-e.values[2])*t;else if(e.type.indexOf("rgb")!==-1)for(let s=0;s<3;s+=1)e.values[s]+=(255-e.values[s])*t;else if(e.type.indexOf("color")!==-1)for(let s=0;s<3;s+=1)e.values[s]+=(1-e.values[s])*t;return wl(e)}function DE(e,t,s){try{return _g(e,t)}catch{return e}}function ww(e,t=.15){return ku(e)>.5?Dg(e,t):_g(e,t)}function _E(e,t,s){try{return ww(e,t)}catch{return e}}function FE(e,t,s,r=1){const i=(d,p)=>Math.round((d**(1/r)*(1-s)+p**(1/r)*s)**r),a=Bs(e),l=Bs(t),c=[i(a.values[0],l.values[0]),i(a.values[1],l.values[1]),i(a.values[2],l.values[2])];return wl({type:"rgb",values:c})}const UE=["mode","contrastThreshold","tonalOffset"],ey={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:Ho.white,default:Ho.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},Vp={text:{primary:Ho.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:Ho.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function ty(e,t,s,r){const i=r.light||r,a=r.dark||r*1.5;e[t]||(e.hasOwnProperty(s)?e[t]=e[s]:t==="light"?e.light=TE(e.main,i):t==="dark"&&(e.dark=AE(e.main,a)))}function BE(e="light"){return e==="dark"?{main:Oa[200],light:Oa[50],dark:Oa[400]}:{main:Oa[700],light:Oa[400],dark:Oa[800]}}function zE(e="light"){return e==="dark"?{main:Ia[200],light:Ia[50],dark:Ia[400]}:{main:Ia[500],light:Ia[300],dark:Ia[700]}}function WE(e="light"){return e==="dark"?{main:La[500],light:La[300],dark:La[700]}:{main:La[700],light:La[400],dark:La[800]}}function qE(e="light"){return e==="dark"?{main:$a[400],light:$a[300],dark:$a[700]}:{main:$a[700],light:$a[500],dark:$a[900]}}function HE(e="light"){return e==="dark"?{main:Da[400],light:Da[300],dark:Da[700]}:{main:Da[800],light:Da[500],dark:Da[900]}}function VE(e="light"){return e==="dark"?{main:so[400],light:so[300],dark:so[700]}:{main:"#ed6c02",light:so[500],dark:so[900]}}function KE(e){const{mode:t="light",contrastThreshold:s=3,tonalOffset:r=.2}=e,i=ks(e,UE),a=e.primary||BE(t),l=e.secondary||zE(t),c=e.error||WE(t),d=e.info||qE(t),p=e.success||HE(t),g=e.warning||VE(t);function v(y){return EE(y,Vp.text.primary)>=s?Vp.text.primary:ey.text.primary}const S=({color:y,name:M,mainShade:k=500,lightShade:j=300,darkShade:C=700})=>{if(y=tt({},y),!y.main&&y[k]&&(y.main=y[k]),!y.hasOwnProperty("main"))throw new Error(Vo(11,M?` (${M})`:"",k));if(typeof y.main!="string")throw new Error(Vo(12,M?` (${M})`:"",JSON.stringify(y.main)));return ty(y,"light",j,r),ty(y,"dark",C,r),y.contrastText||(y.contrastText=v(y.main)),y},O={dark:Vp,light:ey};return Ar(tt({common:tt({},Ho),mode:t,primary:S({color:a,name:"primary"}),secondary:S({color:l,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:S({color:c,name:"error"}),warning:S({color:g,name:"warning"}),info:S({color:d,name:"info"}),success:S({color:p,name:"success"}),grey:PC,contrastThreshold:s,getContrastText:v,augmentColor:S,tonalOffset:r},O[t]),i)}const QE=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];function GE(e){return Math.round(e*1e5)/1e5}const ny={textTransform:"uppercase"},sy='"Roboto", "Helvetica", "Arial", sans-serif';function JE(e,t){const s=typeof t=="function"?t(e):t,{fontFamily:r=sy,fontSize:i=14,fontWeightLight:a=300,fontWeightRegular:l=400,fontWeightMedium:c=500,fontWeightBold:d=700,htmlFontSize:p=16,allVariants:g,pxToRem:v}=s,S=ks(s,QE),O=i/14,x=v||(k=>`${k/p*O}rem`),y=(k,j,C,E,B)=>tt({fontFamily:r,fontWeight:k,fontSize:x(j),lineHeight:C},r===sy?{letterSpacing:`${GE(E/j)}em`}:{},B,g),M={h1:y(a,96,1.167,-1.5),h2:y(a,60,1.2,-.5),h3:y(l,48,1.167,0),h4:y(l,34,1.235,.25),h5:y(l,24,1.334,0),h6:y(c,20,1.6,.15),subtitle1:y(l,16,1.75,.15),subtitle2:y(c,14,1.57,.1),body1:y(l,16,1.5,.15),body2:y(l,14,1.43,.15),button:y(c,14,1.75,.4,ny),caption:y(l,12,1.66,.4),overline:y(l,12,2.66,1,ny),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return Ar(tt({htmlFontSize:p,pxToRem:x,fontFamily:r,fontSize:i,fontWeightLight:a,fontWeightRegular:l,fontWeightMedium:c,fontWeightBold:d},M),S,{clone:!1})}const YE=.2,XE=.14,ZE=.12;function _t(...e){return[`${e[0]}px ${e[1]}px ${e[2]}px ${e[3]}px rgba(0,0,0,${YE})`,`${e[4]}px ${e[5]}px ${e[6]}px ${e[7]}px rgba(0,0,0,${XE})`,`${e[8]}px ${e[9]}px ${e[10]}px ${e[11]}px rgba(0,0,0,${ZE})`].join(",")}const eT=["none",_t(0,2,1,-1,0,1,1,0,0,1,3,0),_t(0,3,1,-2,0,2,2,0,0,1,5,0),_t(0,3,3,-2,0,3,4,0,0,1,8,0),_t(0,2,4,-1,0,4,5,0,0,1,10,0),_t(0,3,5,-1,0,5,8,0,0,1,14,0),_t(0,3,5,-1,0,6,10,0,0,1,18,0),_t(0,4,5,-2,0,7,10,1,0,2,16,1),_t(0,5,5,-3,0,8,10,1,0,3,14,2),_t(0,5,6,-3,0,9,12,1,0,3,16,2),_t(0,6,6,-3,0,10,14,1,0,4,18,3),_t(0,6,7,-4,0,11,15,1,0,4,20,3),_t(0,7,8,-4,0,12,17,2,0,5,22,4),_t(0,7,8,-4,0,13,19,2,0,5,24,4),_t(0,7,9,-4,0,14,21,2,0,5,26,4),_t(0,8,9,-5,0,15,22,2,0,6,28,5),_t(0,8,10,-5,0,16,24,2,0,6,30,5),_t(0,8,11,-5,0,17,26,2,0,6,32,5),_t(0,9,11,-5,0,18,28,2,0,7,34,6),_t(0,9,12,-6,0,19,29,2,0,7,36,6),_t(0,10,13,-6,0,20,31,3,0,8,38,7),_t(0,10,13,-6,0,21,33,3,0,8,40,7),_t(0,10,14,-6,0,22,35,3,0,8,42,7),_t(0,11,14,-7,0,23,36,3,0,9,44,8),_t(0,11,15,-7,0,24,38,3,0,9,46,8)],tT=eT,nT=["duration","easing","delay"],sT={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},rT={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function ry(e){return`${Math.round(e)}ms`}function iT(e){if(!e)return 0;const t=e/36;return Math.round((4+15*t**.25+t/5)*10)}function aT(e){const t=tt({},sT,e.easing),s=tt({},rT,e.duration);return tt({getAutoHeightDuration:iT,create:(i=["all"],a={})=>{const{duration:l=s.standard,easing:c=t.easeInOut,delay:d=0}=a;return ks(a,nT),(Array.isArray(i)?i:[i]).map(p=>`${p} ${typeof l=="string"?l:ry(l)} ${c} ${typeof d=="string"?d:ry(d)}`).join(",")}},e,{easing:t,duration:s})}const lT={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},oT=lT,cT=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function Nw(e={},...t){const{mixins:s={},palette:r={},transitions:i={},typography:a={}}=e,l=ks(e,cT);if(e.vars&&e.generateCssVars===void 0)throw new Error(Vo(18));const c=KE(r),d=Mg(e);let p=Ar(d,{mixins:SE(d.breakpoints,s),palette:c,shadows:tT.slice(),typography:JE(c,a),transitions:aT(i),zIndex:tt({},oT)});return p=Ar(p,l),p=t.reduce((g,v)=>Ar(g,v),p),p.unstable_sxConfig=tt({},dc,l==null?void 0:l.unstable_sxConfig),p.unstable_sx=function(v){return hm({sx:v,theme:this})},p}const dT=Nw(),Sw=dT;var mc={},Kp={exports:{}},iy;function uT(){return iy||(iy=1,function(e){function t(s,r){if(s==null)return{};var i={};for(var a in s)if({}.hasOwnProperty.call(s,a)){if(r.indexOf(a)!==-1)continue;i[a]=s[a]}return i}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(Kp)),Kp.exports}const mT=Ai(HA),pT=Ai(VA),fT=Ai(XA),hT=Ai(sE),gT=Ai(U2),vT=Ai(K2);var Nl=gw;Object.defineProperty(mc,"__esModule",{value:!0});var xT=mc.default=MT;mc.shouldForwardProp=Hd;mc.systemDefaultTheme=void 0;var Ps=Nl(Y0()),uh=Nl(uT()),Cu=kT(mT),yT=pT;Nl(fT);Nl(hT);var jT=Nl(gT),bT=Nl(vT);const wT=["ownerState"],NT=["variants"],ST=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function kw(e){if(typeof WeakMap!="function")return null;var t=new WeakMap,s=new WeakMap;return(kw=function(r){return r?s:t})(e)}function kT(e,t){if(!t&&e&&e.__esModule)return e;if(e===null||typeof e!="object"&&typeof e!="function")return{default:e};var s=kw(t);if(s&&s.has(e))return s.get(e);var r={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(a!=="default"&&Object.prototype.hasOwnProperty.call(e,a)){var l=i?Object.getOwnPropertyDescriptor(e,a):null;l&&(l.get||l.set)?Object.defineProperty(r,a,l):r[a]=e[a]}return r.default=e,s&&s.set(e,r),r}function CT(e){return Object.keys(e).length===0}function AT(e){return typeof e=="string"&&e.charCodeAt(0)>96}function Hd(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}function ay(e,t){return t&&e&&typeof e=="object"&&e.styles&&!e.styles.startsWith("@layer")&&(e.styles=`@layer ${t}{${String(e.styles)}}`),e}const ET=mc.systemDefaultTheme=(0,jT.default)(),TT=e=>e&&e.charAt(0).toLowerCase()+e.slice(1);function yd({defaultTheme:e,theme:t,themeId:s}){return CT(t)?e:t[s]||t}function RT(e){return e?(t,s)=>s[e]:null}function Vd(e,t,s){let{ownerState:r}=t,i=(0,uh.default)(t,wT);const a=typeof e=="function"?e((0,Ps.default)({ownerState:r},i)):e;if(Array.isArray(a))return a.flatMap(l=>Vd(l,(0,Ps.default)({ownerState:r},i),s));if(a&&typeof a=="object"&&Array.isArray(a.variants)){const{variants:l=[]}=a;let d=(0,uh.default)(a,NT);return l.forEach(p=>{let g=!0;if(typeof p.props=="function"?g=p.props((0,Ps.default)({ownerState:r},i,r)):Object.keys(p.props).forEach(v=>{(r==null?void 0:r[v])!==p.props[v]&&i[v]!==p.props[v]&&(g=!1)}),g){Array.isArray(d)||(d=[d]);const v=typeof p.style=="function"?p.style((0,Ps.default)({ownerState:r},i,r)):p.style;d.push(s?ay((0,Cu.internal_serializeStyles)(v),s):v)}}),d}return s?ay((0,Cu.internal_serializeStyles)(a),s):a}function MT(e={}){const{themeId:t,defaultTheme:s=ET,rootShouldForwardProp:r=Hd,slotShouldForwardProp:i=Hd}=e,a=l=>(0,bT.default)((0,Ps.default)({},l,{theme:yd((0,Ps.default)({},l,{defaultTheme:s,themeId:t}))}));return a.__mui_systemSx=!0,(l,c={})=>{(0,Cu.internal_processStyles)(l,_=>_.filter(F=>!(F!=null&&F.__mui_systemSx)));const{name:d,slot:p,skipVariantsResolver:g,skipSx:v,overridesResolver:S=RT(TT(p))}=c,O=(0,uh.default)(c,ST),x=d&&d.startsWith("Mui")||p?"components":"custom",y=g!==void 0?g:p&&p!=="Root"&&p!=="root"||!1,M=v||!1;let k,j=Hd;p==="Root"||p==="root"?j=r:p?j=i:AT(l)&&(j=void 0);const C=(0,Cu.default)(l,(0,Ps.default)({shouldForwardProp:j,label:k},O)),E=_=>typeof _=="function"&&_.__emotion_real!==_||(0,yT.isPlainObject)(_)?F=>{const J=yd({theme:F.theme,defaultTheme:s,themeId:t});return Vd(_,(0,Ps.default)({},F,{theme:J}),J.modularCssLayers?x:void 0)}:_,B=(_,...F)=>{let J=E(_);const ue=F?F.map(E):[];d&&S&&ue.push(Ne=>{const Re=yd((0,Ps.default)({},Ne,{defaultTheme:s,themeId:t}));if(!Re.components||!Re.components[d]||!Re.components[d].styleOverrides)return null;const L=Re.components[d].styleOverrides,X={};return Object.entries(L).forEach(([ce,N])=>{X[ce]=Vd(N,(0,Ps.default)({},Ne,{theme:Re}),Re.modularCssLayers?"theme":void 0)}),S(Ne,X)}),d&&!y&&ue.push(Ne=>{var Re;const L=yd((0,Ps.default)({},Ne,{defaultTheme:s,themeId:t})),X=L==null||(Re=L.components)==null||(Re=Re[d])==null?void 0:Re.variants;return Vd({variants:X},(0,Ps.default)({},Ne,{theme:L}),L.modularCssLayers?"theme":void 0)}),M||ue.push(a);const Y=ue.length-F.length;if(Array.isArray(_)&&Y>0){const Ne=new Array(Y).fill("");J=[..._,...Ne],J.raw=[..._.raw,...Ne]}const xe=C(J,...ue);return l.muiName&&(xe.muiName=l.muiName),xe};return C.withConfig&&(B.withConfig=C.withConfig),B}}function PT(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}const LT=e=>PT(e)&&e!=="classes",Cw=LT,IT=xT({themeId:gg,defaultTheme:Sw,rootShouldForwardProp:Cw}),da=IT;function pc(e){return NE(e)}function mh(e,t){return mh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,r){return s.__proto__=r,s},mh(e,t)}function OT(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,mh(e,t)}const ly=oe.createContext(null);function $T(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Fg(e,t){var s=function(a){return t&&u.isValidElement(a)?t(a):a},r=Object.create(null);return e&&u.Children.map(e,function(i){return i}).forEach(function(i){r[i.key]=s(i)}),r}function DT(e,t){e=e||{},t=t||{};function s(g){return g in t?t[g]:e[g]}var r=Object.create(null),i=[];for(var a in e)a in t?i.length&&(r[a]=i,i=[]):i.push(a);var l,c={};for(var d in t){if(r[d])for(l=0;l<r[d].length;l++){var p=r[d][l];c[r[d][l]]=s(p)}c[d]=s(d)}for(l=0;l<i.length;l++)c[i[l]]=s(i[l]);return c}function Ji(e,t,s){return s[t]!=null?s[t]:e.props[t]}function _T(e,t){return Fg(e.children,function(s){return u.cloneElement(s,{onExited:t.bind(null,s),in:!0,appear:Ji(s,"appear",e),enter:Ji(s,"enter",e),exit:Ji(s,"exit",e)})})}function FT(e,t,s){var r=Fg(e.children),i=DT(t,r);return Object.keys(i).forEach(function(a){var l=i[a];if(u.isValidElement(l)){var c=a in t,d=a in r,p=t[a],g=u.isValidElement(p)&&!p.props.in;d&&(!c||g)?i[a]=u.cloneElement(l,{onExited:s.bind(null,l),in:!0,exit:Ji(l,"exit",e),enter:Ji(l,"enter",e)}):!d&&c&&!g?i[a]=u.cloneElement(l,{in:!1}):d&&c&&u.isValidElement(p)&&(i[a]=u.cloneElement(l,{onExited:s.bind(null,l),in:p.props.in,exit:Ji(l,"exit",e),enter:Ji(l,"enter",e)}))}}),i}var UT=Object.values||function(e){return Object.keys(e).map(function(t){return e[t]})},BT={component:"div",childFactory:function(t){return t}},Ug=function(e){OT(t,e);function t(r,i){var a;a=e.call(this,r,i)||this;var l=a.handleExited.bind($T(a));return a.state={contextValue:{isMounting:!0},handleExited:l,firstRender:!0},a}var s=t.prototype;return s.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},s.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(i,a){var l=a.children,c=a.handleExited,d=a.firstRender;return{children:d?_T(i,c):FT(i,l,c),firstRender:!1}},s.handleExited=function(i,a){var l=Fg(this.props.children);i.key in l||(i.props.onExited&&i.props.onExited(a),this.mounted&&this.setState(function(c){var d=tt({},c.children);return delete d[i.key],{children:d}}))},s.render=function(){var i=this.props,a=i.component,l=i.childFactory,c=ks(i,["component","childFactory"]),d=this.state.contextValue,p=UT(this.state.children).map(l);return delete c.appear,delete c.enter,delete c.exit,a===null?oe.createElement(ly.Provider,{value:d},p):oe.createElement(ly.Provider,{value:d},oe.createElement(a,c,p))},t}(oe.Component);Ug.propTypes={};Ug.defaultProps=BT;const zT=Ug;function WT(e){const{className:t,classes:s,pulsate:r=!1,rippleX:i,rippleY:a,rippleSize:l,in:c,onExited:d,timeout:p}=e,[g,v]=u.useState(!1),S=Qn(t,s.ripple,s.rippleVisible,r&&s.ripplePulsate),O={width:l,height:l,top:-(l/2)+a,left:-(l/2)+i},x=Qn(s.child,g&&s.childLeaving,r&&s.childPulsate);return!c&&!g&&v(!0),u.useEffect(()=>{if(!c&&d!=null){const y=setTimeout(d,p);return()=>{clearTimeout(y)}}},[d,c,p]),n.jsx("span",{className:S,style:O,children:n.jsx("span",{className:x})})}const qT=uc("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),Ls=qT,HT=["center","classes","className"];let Tm=e=>e,oy,cy,dy,uy;const ph=550,VT=80,KT=om(oy||(oy=Tm`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`)),QT=om(cy||(cy=Tm`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`)),GT=om(dy||(dy=Tm`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`)),JT=da("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),YT=da(WT,{name:"MuiTouchRipple",slot:"Ripple"})(uy||(uy=Tm`
  opacity: 0;
  position: absolute;

  &.${0} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  &.${0} {
    animation-duration: ${0}ms;
  }

  & .${0} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${0} {
    opacity: 0;
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  & .${0} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${0};
    animation-duration: 2500ms;
    animation-timing-function: ${0};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`),Ls.rippleVisible,KT,ph,({theme:e})=>e.transitions.easing.easeInOut,Ls.ripplePulsate,({theme:e})=>e.transitions.duration.shorter,Ls.child,Ls.childLeaving,QT,ph,({theme:e})=>e.transitions.easing.easeInOut,Ls.childPulsate,GT,({theme:e})=>e.transitions.easing.easeInOut),XT=u.forwardRef(function(t,s){const r=pc({props:t,name:"MuiTouchRipple"}),{center:i=!1,classes:a={},className:l}=r,c=ks(r,HT),[d,p]=u.useState([]),g=u.useRef(0),v=u.useRef(null);u.useEffect(()=>{v.current&&(v.current(),v.current=null)},[d]);const S=u.useRef(!1),O=mE(),x=u.useRef(null),y=u.useRef(null),M=u.useCallback(E=>{const{pulsate:B,rippleX:_,rippleY:F,rippleSize:J,cb:ue}=E;p(Y=>[...Y,n.jsx(YT,{classes:{ripple:Qn(a.ripple,Ls.ripple),rippleVisible:Qn(a.rippleVisible,Ls.rippleVisible),ripplePulsate:Qn(a.ripplePulsate,Ls.ripplePulsate),child:Qn(a.child,Ls.child),childLeaving:Qn(a.childLeaving,Ls.childLeaving),childPulsate:Qn(a.childPulsate,Ls.childPulsate)},timeout:ph,pulsate:B,rippleX:_,rippleY:F,rippleSize:J},g.current)]),g.current+=1,v.current=ue},[a]),k=u.useCallback((E={},B={},_=()=>{})=>{const{pulsate:F=!1,center:J=i||B.pulsate,fakeElement:ue=!1}=B;if((E==null?void 0:E.type)==="mousedown"&&S.current){S.current=!1;return}(E==null?void 0:E.type)==="touchstart"&&(S.current=!0);const Y=ue?null:y.current,xe=Y?Y.getBoundingClientRect():{width:0,height:0,left:0,top:0};let Ne,Re,L;if(J||E===void 0||E.clientX===0&&E.clientY===0||!E.clientX&&!E.touches)Ne=Math.round(xe.width/2),Re=Math.round(xe.height/2);else{const{clientX:X,clientY:ce}=E.touches&&E.touches.length>0?E.touches[0]:E;Ne=Math.round(X-xe.left),Re=Math.round(ce-xe.top)}if(J)L=Math.sqrt((2*xe.width**2+xe.height**2)/3),L%2===0&&(L+=1);else{const X=Math.max(Math.abs((Y?Y.clientWidth:0)-Ne),Ne)*2+2,ce=Math.max(Math.abs((Y?Y.clientHeight:0)-Re),Re)*2+2;L=Math.sqrt(X**2+ce**2)}E!=null&&E.touches?x.current===null&&(x.current=()=>{M({pulsate:F,rippleX:Ne,rippleY:Re,rippleSize:L,cb:_})},O.start(VT,()=>{x.current&&(x.current(),x.current=null)})):M({pulsate:F,rippleX:Ne,rippleY:Re,rippleSize:L,cb:_})},[i,M,O]),j=u.useCallback(()=>{k({},{pulsate:!0})},[k]),C=u.useCallback((E,B)=>{if(O.clear(),(E==null?void 0:E.type)==="touchend"&&x.current){x.current(),x.current=null,O.start(0,()=>{C(E,B)});return}x.current=null,p(_=>_.length>0?_.slice(1):_),v.current=B},[O]);return u.useImperativeHandle(s,()=>({pulsate:j,start:k,stop:C}),[j,k,C]),n.jsx(JT,tt({className:Qn(Ls.root,a.root,l),ref:y},c,{children:n.jsx(zT,{component:null,exit:!0,children:d})}))}),ZT=XT;function eR(e){return gm("MuiButtonBase",e)}const tR=uc("MuiButtonBase",["root","disabled","focusVisible"]),nR=tR,sR=["action","centerRipple","children","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","LinkComponent","onBlur","onClick","onContextMenu","onDragLeave","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","tabIndex","TouchRippleProps","touchRippleRef","type"],rR=e=>{const{disabled:t,focusVisible:s,focusVisibleClassName:r,classes:i}=e,l=Og({root:["root",t&&"disabled",s&&"focusVisible"]},eR,i);return s&&r&&(l.root+=` ${r}`),l},iR=da("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${nR.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),aR=u.forwardRef(function(t,s){const r=pc({props:t,name:"MuiButtonBase"}),{action:i,centerRipple:a=!1,children:l,className:c,component:d="button",disabled:p=!1,disableRipple:g=!1,disableTouchRipple:v=!1,focusRipple:S=!1,LinkComponent:O="a",onBlur:x,onClick:y,onContextMenu:M,onDragLeave:k,onFocus:j,onFocusVisible:C,onKeyDown:E,onKeyUp:B,onMouseDown:_,onMouseLeave:F,onMouseUp:J,onTouchEnd:ue,onTouchMove:Y,onTouchStart:xe,tabIndex:Ne=0,TouchRippleProps:Re,touchRippleRef:L,type:X}=r,ce=ks(r,sR),N=u.useRef(null),K=u.useRef(null),W=Yx(K,L),{isFocusVisibleRef:ne,onFocus:R,onBlur:Q,ref:je}=jE(),[se,ze]=u.useState(!1);p&&se&&ze(!1),u.useImperativeHandle(i,()=>({focusVisible:()=>{ze(!0),N.current.focus()}}),[]);const[Ze,ye]=u.useState(!1);u.useEffect(()=>{ye(!0)},[]);const lt=Ze&&!g&&!p;u.useEffect(()=>{se&&S&&!g&&Ze&&K.current.pulsate()},[g,S,se,Ze]);function We(qe,yt,St=v){return vd(hn=>(yt&&yt(hn),!St&&K.current&&K.current[qe](hn),!0))}const Fe=We("start",_),le=We("stop",M),Me=We("stop",k),G=We("stop",J),he=We("stop",qe=>{se&&qe.preventDefault(),F&&F(qe)}),we=We("start",xe),$=We("stop",ue),V=We("stop",Y),ve=We("stop",qe=>{Q(qe),ne.current===!1&&ze(!1),x&&x(qe)},!1),ge=vd(qe=>{N.current||(N.current=qe.currentTarget),R(qe),ne.current===!0&&(ze(!0),C&&C(qe)),j&&j(qe)}),Ve=()=>{const qe=N.current;return d&&d!=="button"&&!(qe.tagName==="A"&&qe.href)},Le=u.useRef(!1),H=vd(qe=>{S&&!Le.current&&se&&K.current&&qe.key===" "&&(Le.current=!0,K.current.stop(qe,()=>{K.current.start(qe)})),qe.target===qe.currentTarget&&Ve()&&qe.key===" "&&qe.preventDefault(),E&&E(qe),qe.target===qe.currentTarget&&Ve()&&qe.key==="Enter"&&!p&&(qe.preventDefault(),y&&y(qe))}),pe=vd(qe=>{S&&qe.key===" "&&K.current&&se&&!qe.defaultPrevented&&(Le.current=!1,K.current.stop(qe,()=>{K.current.pulsate(qe)})),B&&B(qe),y&&qe.target===qe.currentTarget&&Ve()&&qe.key===" "&&!qe.defaultPrevented&&y(qe)});let _e=d;_e==="button"&&(ce.href||ce.to)&&(_e=O);const Ye={};_e==="button"?(Ye.type=X===void 0?"button":X,Ye.disabled=p):(!ce.href&&!ce.to&&(Ye.role="button"),p&&(Ye["aria-disabled"]=p));const et=Yx(s,je,N),ct=tt({},r,{centerRipple:a,component:d,disabled:p,disableRipple:g,disableTouchRipple:v,focusRipple:S,tabIndex:Ne,focusVisible:se}),rt=rR(ct);return n.jsxs(iR,tt({as:_e,className:Qn(rt.root,c),ownerState:ct,onBlur:ve,onClick:y,onContextMenu:le,onFocus:ge,onKeyDown:H,onKeyUp:pe,onMouseDown:Fe,onMouseLeave:he,onMouseUp:G,onDragLeave:Me,onTouchEnd:$,onTouchMove:V,onTouchStart:we,ref:et,tabIndex:p?-1:Ne,type:X},Ye,ce,{children:[l,lt?n.jsx(ZT,tt({ref:W,center:a},Re)):null]}))}),lR=aR;function oR(e){return gm("MuiTypography",e)}uc("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const cR=["align","className","component","gutterBottom","noWrap","paragraph","variant","variantMapping"],dR=e=>{const{align:t,gutterBottom:s,noWrap:r,paragraph:i,variant:a,classes:l}=e,c={root:["root",a,e.align!=="inherit"&&`align${In(t)}`,s&&"gutterBottom",r&&"noWrap",i&&"paragraph"]};return Og(c,oR,l)},uR=da("span",{name:"MuiTypography",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:s}=e;return[t.root,s.variant&&t[s.variant],s.align!=="inherit"&&t[`align${In(s.align)}`],s.noWrap&&t.noWrap,s.gutterBottom&&t.gutterBottom,s.paragraph&&t.paragraph]}})(({theme:e,ownerState:t})=>tt({margin:0},t.variant==="inherit"&&{font:"inherit"},t.variant!=="inherit"&&e.typography[t.variant],t.align!=="inherit"&&{textAlign:t.align},t.noWrap&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},t.gutterBottom&&{marginBottom:"0.35em"},t.paragraph&&{marginBottom:16})),my={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},mR={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},pR=e=>mR[e]||e,fR=u.forwardRef(function(t,s){const r=pc({props:t,name:"MuiTypography"}),i=pR(r.color),a=Pg(tt({},r,{color:i})),{align:l="inherit",className:c,component:d,gutterBottom:p=!1,noWrap:g=!1,paragraph:v=!1,variant:S="body1",variantMapping:O=my}=a,x=ks(a,cR),y=tt({},a,{align:l,color:i,className:c,component:d,gutterBottom:p,noWrap:g,paragraph:v,variant:S,variantMapping:O}),M=d||(v?"p":O[S]||my[S])||"span",k=dR(y);return n.jsx(uR,tt({as:M,ref:s,ownerState:y,className:Qn(k.root,c)},x))}),py=fR;function hR(e){return n.jsx(q2,tt({},e,{defaultTheme:Sw,themeId:gg}))}const gR=uc("MuiBox",["root"]),vR=gR,xR=Nw(),yR=Y2({themeId:gg,defaultTheme:xR,defaultClassName:vR.root,generateClassName:dw.generate}),jR=yR;function bR(e){return gm("MuiButton",e)}const wR=uc("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","colorPrimary","colorSecondary","colorSuccess","colorError","colorInfo","colorWarning","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","icon","iconSizeSmall","iconSizeMedium","iconSizeLarge"]),jd=wR,NR=u.createContext({}),SR=NR,kR=u.createContext(void 0),CR=kR,AR=["children","color","component","className","disabled","disableElevation","disableFocusRipple","endIcon","focusVisibleClassName","fullWidth","size","startIcon","type","variant"],ER=e=>{const{color:t,disableElevation:s,fullWidth:r,size:i,variant:a,classes:l}=e,c={root:["root",a,`${a}${In(t)}`,`size${In(i)}`,`${a}Size${In(i)}`,`color${In(t)}`,s&&"disableElevation",r&&"fullWidth"],label:["label"],startIcon:["icon","startIcon",`iconSize${In(i)}`],endIcon:["icon","endIcon",`iconSize${In(i)}`]},d=Og(c,bR,l);return tt({},l,d)},Aw=e=>tt({},e.size==="small"&&{"& > *:nth-of-type(1)":{fontSize:18}},e.size==="medium"&&{"& > *:nth-of-type(1)":{fontSize:20}},e.size==="large"&&{"& > *:nth-of-type(1)":{fontSize:22}}),TR=da(lR,{shouldForwardProp:e=>Cw(e)||e==="classes",name:"MuiButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:s}=e;return[t.root,t[s.variant],t[`${s.variant}${In(s.color)}`],t[`size${In(s.size)}`],t[`${s.variant}Size${In(s.size)}`],s.color==="inherit"&&t.colorInherit,s.disableElevation&&t.disableElevation,s.fullWidth&&t.fullWidth]}})(({theme:e,ownerState:t})=>{var s,r;const i=e.palette.mode==="light"?e.palette.grey[300]:e.palette.grey[800],a=e.palette.mode==="light"?e.palette.grey.A100:e.palette.grey[700];return tt({},e.typography.button,{minWidth:64,padding:"6px 16px",borderRadius:(e.vars||e).shape.borderRadius,transition:e.transitions.create(["background-color","box-shadow","border-color","color"],{duration:e.transitions.duration.short}),"&:hover":tt({textDecoration:"none",backgroundColor:e.vars?`rgba(${e.vars.palette.text.primaryChannel} / ${e.vars.palette.action.hoverOpacity})`:xd(e.palette.text.primary,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},t.variant==="text"&&t.color!=="inherit"&&{backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:xd(e.palette[t.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},t.variant==="outlined"&&t.color!=="inherit"&&{border:`1px solid ${(e.vars||e).palette[t.color].main}`,backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:xd(e.palette[t.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},t.variant==="contained"&&{backgroundColor:e.vars?e.vars.palette.Button.inheritContainedHoverBg:a,boxShadow:(e.vars||e).shadows[4],"@media (hover: none)":{boxShadow:(e.vars||e).shadows[2],backgroundColor:(e.vars||e).palette.grey[300]}},t.variant==="contained"&&t.color!=="inherit"&&{backgroundColor:(e.vars||e).palette[t.color].dark,"@media (hover: none)":{backgroundColor:(e.vars||e).palette[t.color].main}}),"&:active":tt({},t.variant==="contained"&&{boxShadow:(e.vars||e).shadows[8]}),[`&.${jd.focusVisible}`]:tt({},t.variant==="contained"&&{boxShadow:(e.vars||e).shadows[6]}),[`&.${jd.disabled}`]:tt({color:(e.vars||e).palette.action.disabled},t.variant==="outlined"&&{border:`1px solid ${(e.vars||e).palette.action.disabledBackground}`},t.variant==="contained"&&{color:(e.vars||e).palette.action.disabled,boxShadow:(e.vars||e).shadows[0],backgroundColor:(e.vars||e).palette.action.disabledBackground})},t.variant==="text"&&{padding:"6px 8px"},t.variant==="text"&&t.color!=="inherit"&&{color:(e.vars||e).palette[t.color].main},t.variant==="outlined"&&{padding:"5px 15px",border:"1px solid currentColor"},t.variant==="outlined"&&t.color!=="inherit"&&{color:(e.vars||e).palette[t.color].main,border:e.vars?`1px solid rgba(${e.vars.palette[t.color].mainChannel} / 0.5)`:`1px solid ${xd(e.palette[t.color].main,.5)}`},t.variant==="contained"&&{color:e.vars?e.vars.palette.text.primary:(s=(r=e.palette).getContrastText)==null?void 0:s.call(r,e.palette.grey[300]),backgroundColor:e.vars?e.vars.palette.Button.inheritContainedBg:i,boxShadow:(e.vars||e).shadows[2]},t.variant==="contained"&&t.color!=="inherit"&&{color:(e.vars||e).palette[t.color].contrastText,backgroundColor:(e.vars||e).palette[t.color].main},t.color==="inherit"&&{color:"inherit",borderColor:"currentColor"},t.size==="small"&&t.variant==="text"&&{padding:"4px 5px",fontSize:e.typography.pxToRem(13)},t.size==="large"&&t.variant==="text"&&{padding:"8px 11px",fontSize:e.typography.pxToRem(15)},t.size==="small"&&t.variant==="outlined"&&{padding:"3px 9px",fontSize:e.typography.pxToRem(13)},t.size==="large"&&t.variant==="outlined"&&{padding:"7px 21px",fontSize:e.typography.pxToRem(15)},t.size==="small"&&t.variant==="contained"&&{padding:"4px 10px",fontSize:e.typography.pxToRem(13)},t.size==="large"&&t.variant==="contained"&&{padding:"8px 22px",fontSize:e.typography.pxToRem(15)},t.fullWidth&&{width:"100%"})},({ownerState:e})=>e.disableElevation&&{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${jd.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${jd.disabled}`]:{boxShadow:"none"}}),RR=da("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(e,t)=>{const{ownerState:s}=e;return[t.startIcon,t[`iconSize${In(s.size)}`]]}})(({ownerState:e})=>tt({display:"inherit",marginRight:8,marginLeft:-4},e.size==="small"&&{marginLeft:-2},Aw(e))),MR=da("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(e,t)=>{const{ownerState:s}=e;return[t.endIcon,t[`iconSize${In(s.size)}`]]}})(({ownerState:e})=>tt({display:"inherit",marginRight:-4,marginLeft:8},e.size==="small"&&{marginRight:-2},Aw(e))),PR=u.forwardRef(function(t,s){const r=u.useContext(SR),i=u.useContext(CR),a=Su(r,t),l=pc({props:a,name:"MuiButton"}),{children:c,color:d="primary",component:p="button",className:g,disabled:v=!1,disableElevation:S=!1,disableFocusRipple:O=!1,endIcon:x,focusVisibleClassName:y,fullWidth:M=!1,size:k="medium",startIcon:j,type:C,variant:E="text"}=l,B=ks(l,AR),_=tt({},l,{color:d,component:p,disabled:v,disableElevation:S,disableFocusRipple:O,fullWidth:M,size:k,type:C,variant:E}),F=ER(_),J=j&&n.jsx(RR,{className:F.startIcon,ownerState:_,children:j}),ue=x&&n.jsx(MR,{className:F.endIcon,ownerState:_,children:x}),Y=i||"";return n.jsxs(TR,tt({ownerState:_,className:Qn(r.className,F.root,g,Y),component:p,disabled:v,focusRipple:!O,focusVisibleClassName:Qn(F.focusVisible,y),ref:s,type:C},B,{classes:F,children:[J,c,ue]}))}),LR=PR,IR=(e,t)=>tt({WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",boxSizing:"border-box",WebkitTextSizeAdjust:"100%"},t&&!e.vars&&{colorScheme:e.palette.mode}),OR=e=>tt({color:(e.vars||e).palette.text.primary},e.typography.body1,{backgroundColor:(e.vars||e).palette.background.default,"@media print":{backgroundColor:(e.vars||e).palette.common.white}}),$R=(e,t=!1)=>{var s;const r={};t&&e.colorSchemes&&Object.entries(e.colorSchemes).forEach(([l,c])=>{var d;r[e.getColorSchemeSelector(l).replace(/\s*&/,"")]={colorScheme:(d=c.palette)==null?void 0:d.mode}});let i=tt({html:IR(e,t),"*, *::before, *::after":{boxSizing:"inherit"},"strong, b":{fontWeight:e.typography.fontWeightBold},body:tt({margin:0},OR(e),{"&::backdrop":{backgroundColor:(e.vars||e).palette.background.default}})},r);const a=(s=e.components)==null||(s=s.MuiCssBaseline)==null?void 0:s.styleOverrides;return a&&(i=[i,a]),i};function DR(e){const t=pc({props:e,name:"MuiCssBaseline"}),{children:s,enableColorScheme:r=!1}=t;return n.jsxs(u.Fragment,{children:[n.jsx(hR,{styles:i=>$R(i,r)}),s]})}const Ew=[{id:"dashboard",label:"Dashboard",icon:n.jsxs("svg",{className:"nav-svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[n.jsx("rect",{width:"7",height:"9",x:"3",y:"3",rx:"1"}),n.jsx("rect",{width:"7",height:"5",x:"14",y:"3",rx:"1"}),n.jsx("rect",{width:"7",height:"9",x:"14",y:"12",rx:"1"}),n.jsx("rect",{width:"7",height:"5",x:"3",y:"16",rx:"1"})]})},{id:"tickets",label:"Tickets",icon:n.jsxs("svg",{className:"nav-svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[n.jsx("path",{d:"M2 9a3 3 0 0 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 0 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z"}),n.jsx("path",{d:"m9.5 14.5 5-5"}),n.jsx("path",{d:"m9.5 9.5 5 5"})]})},{id:"assets",label:"Assets",icon:n.jsxs("svg",{className:"nav-svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[n.jsx("path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z"}),n.jsx("path",{d:"M12 22V12"}),n.jsx("polyline",{points:"3.29 7 12 12 20.71 7"}),n.jsx("path",{d:"m7.5 4.27 9 5.15"})]})},{id:"users",label:"Users",icon:n.jsxs("svg",{className:"nav-svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[n.jsx("path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"}),n.jsx("circle",{cx:"12",cy:"7",r:"4"})]})},{id:"suppliers",label:"Suppliers",icon:n.jsxs("svg",{className:"nav-svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[n.jsx("rect",{x:"1",y:"6",width:"13",height:"10",rx:"1"}),n.jsx("path",{d:"M14 9h4l3 3v4h-7z"}),n.jsx("circle",{cx:"6",cy:"18",r:"2"}),n.jsx("circle",{cx:"18",cy:"18",r:"2"})]})},{id:"accounts",label:"Accounts",icon:n.jsxs("svg",{className:"nav-svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[n.jsx("path",{d:"M8 2h8l4 4v16H8z"}),n.jsx("path",{d:"M16 2v4h4"}),n.jsx("rect",{x:"2",y:"3",width:"8",height:"10",rx:"1.5"}),n.jsx("path",{d:"M4 6h4"}),n.jsx("path",{d:"M4 9h1"}),n.jsx("path",{d:"M6 9h1"}),n.jsx("path",{d:"M4 11h1"}),n.jsx("path",{d:"M6 11h1"}),n.jsx("circle",{cx:"12",cy:"17",r:"2.5"}),n.jsx("path",{d:"M11 17h2"}),n.jsx("path",{d:"M12 15.5v3"}),n.jsx("path",{d:"M15.5 20.5 20 16"}),n.jsx("path",{d:"M19 17l1 1"})]})},{id:"reports",label:"Reports",icon:n.jsxs("svg",{className:"nav-svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[n.jsx("path",{d:"M4 19h16"}),n.jsx("rect",{x:"6",y:"10",width:"3",height:"6",rx:"1"}),n.jsx("rect",{x:"11",y:"6",width:"3",height:"10",rx:"1"}),n.jsx("rect",{x:"16",y:"12",width:"3",height:"4",rx:"1"})]})},{id:"admin",label:"Admin",icon:n.jsxs("svg",{className:"nav-svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[n.jsx("path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z"}),n.jsx("path",{d:"m9 12 2 2 4-4"})]})}],Tw=Ew.map(e=>({id:e.id,label:e.label}));function _R({activeNav:e,setActiveNav:t,role:s}){const r=Ew.filter(i=>s==="ADMIN"?["dashboard","tickets","assets","users","suppliers","accounts","reports","admin"].includes(i.id):s==="AGENT"?["dashboard","tickets","assets","suppliers","accounts","reports"].includes(i.id):s==="USER"?["tickets","reports"].includes(i.id):["tickets","reports"].includes(i.id));return n.jsxs("aside",{className:"primary-left-panel",children:[n.jsx("div",{className:"sidebar-header-text",children:"ITAM"}),n.jsx("nav",{className:"nav-items",children:r.map(i=>n.jsxs("button",{className:`nav-item ${e===i.id?"active":""}`,onClick:()=>t(i.id),title:i.label,children:[n.jsx("div",{className:"nav-icon-container",children:n.jsx("span",{className:"nav-icon",children:i.icon})}),n.jsx("span",{className:"nav-label",children:i.label})]},i.id))})]})}function Rw(e,t){return function(){return e.apply(t,arguments)}}const{toString:FR}=Object.prototype,{getPrototypeOf:Bg}=Object,{iterator:Rm,toStringTag:Mw}=Symbol,Mm=(e=>t=>{const s=FR.call(t);return e[s]||(e[s]=s.slice(8,-1).toLowerCase())})(Object.create(null)),or=e=>(e=e.toLowerCase(),t=>Mm(t)===e),Pm=e=>t=>typeof t===e,{isArray:Sl}=Array,gl=Pm("undefined");function fc(e){return e!==null&&!gl(e)&&e.constructor!==null&&!gl(e.constructor)&&es(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const Pw=or("ArrayBuffer");function UR(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&Pw(e.buffer),t}const BR=Pm("string"),es=Pm("function"),Lw=Pm("number"),hc=e=>e!==null&&typeof e=="object",zR=e=>e===!0||e===!1,Kd=e=>{if(Mm(e)!=="object")return!1;const t=Bg(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Mw in e)&&!(Rm in e)},WR=e=>{if(!hc(e)||fc(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},qR=or("Date"),HR=or("File"),VR=or("Blob"),KR=or("FileList"),QR=e=>hc(e)&&es(e.pipe),GR=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||es(e.append)&&((t=Mm(e))==="formdata"||t==="object"&&es(e.toString)&&e.toString()==="[object FormData]"))},JR=or("URLSearchParams"),[YR,XR,ZR,eM]=["ReadableStream","Request","Response","Headers"].map(or),tM=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function gc(e,t,{allOwnKeys:s=!1}={}){if(e===null||typeof e>"u")return;let r,i;if(typeof e!="object"&&(e=[e]),Sl(e))for(r=0,i=e.length;r<i;r++)t.call(null,e[r],r,e);else{if(fc(e))return;const a=s?Object.getOwnPropertyNames(e):Object.keys(e),l=a.length;let c;for(r=0;r<l;r++)c=a[r],t.call(null,e[c],c,e)}}function Iw(e,t){if(fc(e))return null;t=t.toLowerCase();const s=Object.keys(e);let r=s.length,i;for(;r-- >0;)if(i=s[r],t===i.toLowerCase())return i;return null}const Yi=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),Ow=e=>!gl(e)&&e!==Yi;function fh(){const{caseless:e,skipUndefined:t}=Ow(this)&&this||{},s={},r=(i,a)=>{const l=e&&Iw(s,a)||a;Kd(s[l])&&Kd(i)?s[l]=fh(s[l],i):Kd(i)?s[l]=fh({},i):Sl(i)?s[l]=i.slice():(!t||!gl(i))&&(s[l]=i)};for(let i=0,a=arguments.length;i<a;i++)arguments[i]&&gc(arguments[i],r);return s}const nM=(e,t,s,{allOwnKeys:r}={})=>(gc(t,(i,a)=>{s&&es(i)?Object.defineProperty(e,a,{value:Rw(i,s),writable:!0,enumerable:!0,configurable:!0}):Object.defineProperty(e,a,{value:i,writable:!0,enumerable:!0,configurable:!0})},{allOwnKeys:r}),e),sM=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),rM=(e,t,s,r)=>{e.prototype=Object.create(t.prototype,r),Object.defineProperty(e.prototype,"constructor",{value:e,writable:!0,enumerable:!1,configurable:!0}),Object.defineProperty(e,"super",{value:t.prototype}),s&&Object.assign(e.prototype,s)},iM=(e,t,s,r)=>{let i,a,l;const c={};if(t=t||{},e==null)return t;do{for(i=Object.getOwnPropertyNames(e),a=i.length;a-- >0;)l=i[a],(!r||r(l,e,t))&&!c[l]&&(t[l]=e[l],c[l]=!0);e=s!==!1&&Bg(e)}while(e&&(!s||s(e,t))&&e!==Object.prototype);return t},aM=(e,t,s)=>{e=String(e),(s===void 0||s>e.length)&&(s=e.length),s-=t.length;const r=e.indexOf(t,s);return r!==-1&&r===s},lM=e=>{if(!e)return null;if(Sl(e))return e;let t=e.length;if(!Lw(t))return null;const s=new Array(t);for(;t-- >0;)s[t]=e[t];return s},oM=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&Bg(Uint8Array)),cM=(e,t)=>{const r=(e&&e[Rm]).call(e);let i;for(;(i=r.next())&&!i.done;){const a=i.value;t.call(e,a[0],a[1])}},dM=(e,t)=>{let s;const r=[];for(;(s=e.exec(t))!==null;)r.push(s);return r},uM=or("HTMLFormElement"),mM=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(s,r,i){return r.toUpperCase()+i}),fy=(({hasOwnProperty:e})=>(t,s)=>e.call(t,s))(Object.prototype),pM=or("RegExp"),$w=(e,t)=>{const s=Object.getOwnPropertyDescriptors(e),r={};gc(s,(i,a)=>{let l;(l=t(i,a,e))!==!1&&(r[a]=l||i)}),Object.defineProperties(e,r)},fM=e=>{$w(e,(t,s)=>{if(es(e)&&["arguments","caller","callee"].indexOf(s)!==-1)return!1;const r=e[s];if(es(r)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+s+"'")})}})},hM=(e,t)=>{const s={},r=i=>{i.forEach(a=>{s[a]=!0})};return Sl(e)?r(e):r(String(e).split(t)),s},gM=()=>{},vM=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function xM(e){return!!(e&&es(e.append)&&e[Mw]==="FormData"&&e[Rm])}const yM=e=>{const t=new Array(10),s=(r,i)=>{if(hc(r)){if(t.indexOf(r)>=0)return;if(fc(r))return r;if(!("toJSON"in r)){t[i]=r;const a=Sl(r)?[]:{};return gc(r,(l,c)=>{const d=s(l,i+1);!gl(d)&&(a[c]=d)}),t[i]=void 0,a}}return r};return s(e,0)},jM=or("AsyncFunction"),bM=e=>e&&(hc(e)||es(e))&&es(e.then)&&es(e.catch),Dw=((e,t)=>e?setImmediate:t?((s,r)=>(Yi.addEventListener("message",({source:i,data:a})=>{i===Yi&&a===s&&r.length&&r.shift()()},!1),i=>{r.push(i),Yi.postMessage(s,"*")}))(`axios@${Math.random()}`,[]):s=>setTimeout(s))(typeof setImmediate=="function",es(Yi.postMessage)),wM=typeof queueMicrotask<"u"?queueMicrotask.bind(Yi):typeof process<"u"&&process.nextTick||Dw,NM=e=>e!=null&&es(e[Rm]),Z={isArray:Sl,isArrayBuffer:Pw,isBuffer:fc,isFormData:GR,isArrayBufferView:UR,isString:BR,isNumber:Lw,isBoolean:zR,isObject:hc,isPlainObject:Kd,isEmptyObject:WR,isReadableStream:YR,isRequest:XR,isResponse:ZR,isHeaders:eM,isUndefined:gl,isDate:qR,isFile:HR,isBlob:VR,isRegExp:pM,isFunction:es,isStream:QR,isURLSearchParams:JR,isTypedArray:oM,isFileList:KR,forEach:gc,merge:fh,extend:nM,trim:tM,stripBOM:sM,inherits:rM,toFlatObject:iM,kindOf:Mm,kindOfTest:or,endsWith:aM,toArray:lM,forEachEntry:cM,matchAll:dM,isHTMLForm:uM,hasOwnProperty:fy,hasOwnProp:fy,reduceDescriptors:$w,freezeMethods:fM,toObjectSet:hM,toCamelCase:mM,noop:gM,toFiniteNumber:vM,findKey:Iw,global:Yi,isContextDefined:Ow,isSpecCompliantForm:xM,toJSONObject:yM,isAsyncFn:jM,isThenable:bM,setImmediate:Dw,asap:wM,isIterable:NM};class qn extends Error{static from(t,s,r,i,a,l){const c=new qn(t.message,s||t.code,r,i,a);return c.cause=t,c.name=t.name,l&&Object.assign(c,l),c}constructor(t,s,r,i,a){super(t),this.name="AxiosError",this.isAxiosError=!0,s&&(this.code=s),r&&(this.config=r),i&&(this.request=i),a&&(this.response=a,this.status=a.status)}toJSON(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Z.toJSONObject(this.config),code:this.code,status:this.status}}}qn.ERR_BAD_OPTION_VALUE="ERR_BAD_OPTION_VALUE";qn.ERR_BAD_OPTION="ERR_BAD_OPTION";qn.ECONNABORTED="ECONNABORTED";qn.ETIMEDOUT="ETIMEDOUT";qn.ERR_NETWORK="ERR_NETWORK";qn.ERR_FR_TOO_MANY_REDIRECTS="ERR_FR_TOO_MANY_REDIRECTS";qn.ERR_DEPRECATED="ERR_DEPRECATED";qn.ERR_BAD_RESPONSE="ERR_BAD_RESPONSE";qn.ERR_BAD_REQUEST="ERR_BAD_REQUEST";qn.ERR_CANCELED="ERR_CANCELED";qn.ERR_NOT_SUPPORT="ERR_NOT_SUPPORT";qn.ERR_INVALID_URL="ERR_INVALID_URL";const ft=qn,SM=null;function hh(e){return Z.isPlainObject(e)||Z.isArray(e)}function _w(e){return Z.endsWith(e,"[]")?e.slice(0,-2):e}function hy(e,t,s){return e?e.concat(t).map(function(i,a){return i=_w(i),!s&&a?"["+i+"]":i}).join(s?".":""):t}function kM(e){return Z.isArray(e)&&!e.some(hh)}const CM=Z.toFlatObject(Z,{},null,function(t){return/^is[A-Z]/.test(t)});function Lm(e,t,s){if(!Z.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,s=Z.toFlatObject(s,{metaTokens:!0,dots:!1,indexes:!1},!1,function(y,M){return!Z.isUndefined(M[y])});const r=s.metaTokens,i=s.visitor||g,a=s.dots,l=s.indexes,d=(s.Blob||typeof Blob<"u"&&Blob)&&Z.isSpecCompliantForm(t);if(!Z.isFunction(i))throw new TypeError("visitor must be a function");function p(x){if(x===null)return"";if(Z.isDate(x))return x.toISOString();if(Z.isBoolean(x))return x.toString();if(!d&&Z.isBlob(x))throw new ft("Blob is not supported. Use a Buffer instead.");return Z.isArrayBuffer(x)||Z.isTypedArray(x)?d&&typeof Blob=="function"?new Blob([x]):Buffer.from(x):x}function g(x,y,M){let k=x;if(x&&!M&&typeof x=="object"){if(Z.endsWith(y,"{}"))y=r?y:y.slice(0,-2),x=JSON.stringify(x);else if(Z.isArray(x)&&kM(x)||(Z.isFileList(x)||Z.endsWith(y,"[]"))&&(k=Z.toArray(x)))return y=_w(y),k.forEach(function(C,E){!(Z.isUndefined(C)||C===null)&&t.append(l===!0?hy([y],E,a):l===null?y:y+"[]",p(C))}),!1}return hh(x)?!0:(t.append(hy(M,y,a),p(x)),!1)}const v=[],S=Object.assign(CM,{defaultVisitor:g,convertValue:p,isVisitable:hh});function O(x,y){if(!Z.isUndefined(x)){if(v.indexOf(x)!==-1)throw Error("Circular reference detected in "+y.join("."));v.push(x),Z.forEach(x,function(k,j){(!(Z.isUndefined(k)||k===null)&&i.call(t,k,Z.isString(j)?j.trim():j,y,S))===!0&&O(k,y?y.concat(j):[j])}),v.pop()}}if(!Z.isObject(e))throw new TypeError("data must be an object");return O(e),t}function gy(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(r){return t[r]})}function zg(e,t){this._pairs=[],e&&Lm(e,this,t)}const Fw=zg.prototype;Fw.append=function(t,s){this._pairs.push([t,s])};Fw.toString=function(t){const s=t?function(r){return t.call(this,r,gy)}:gy;return this._pairs.map(function(i){return s(i[0])+"="+s(i[1])},"").join("&")};function AM(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function Uw(e,t,s){if(!t)return e;const r=s&&s.encode||AM,i=Z.isFunction(s)?{serialize:s}:s,a=i&&i.serialize;let l;if(a?l=a(t,i):l=Z.isURLSearchParams(t)?t.toString():new zg(t,i).toString(r),l){const c=e.indexOf("#");c!==-1&&(e=e.slice(0,c)),e+=(e.indexOf("?")===-1?"?":"&")+l}return e}class EM{constructor(){this.handlers=[]}use(t,s,r){return this.handlers.push({fulfilled:t,rejected:s,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){Z.forEach(this.handlers,function(r){r!==null&&t(r)})}}const vy=EM,Bw={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},TM=typeof URLSearchParams<"u"?URLSearchParams:zg,RM=typeof FormData<"u"?FormData:null,MM=typeof Blob<"u"?Blob:null,PM={isBrowser:!0,classes:{URLSearchParams:TM,FormData:RM,Blob:MM},protocols:["http","https","file","blob","url","data"]},Wg=typeof window<"u"&&typeof document<"u",gh=typeof navigator=="object"&&navigator||void 0,LM=Wg&&(!gh||["ReactNative","NativeScript","NS"].indexOf(gh.product)<0),IM=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),OM=Wg&&window.location.href||"http://localhost",$M=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Wg,hasStandardBrowserEnv:LM,hasStandardBrowserWebWorkerEnv:IM,navigator:gh,origin:OM},Symbol.toStringTag,{value:"Module"})),On={...$M,...PM};function DM(e,t){return Lm(e,new On.classes.URLSearchParams,{visitor:function(s,r,i,a){return On.isNode&&Z.isBuffer(s)?(this.append(r,s.toString("base64")),!1):a.defaultVisitor.apply(this,arguments)},...t})}function _M(e){return Z.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function FM(e){const t={},s=Object.keys(e);let r;const i=s.length;let a;for(r=0;r<i;r++)a=s[r],t[a]=e[a];return t}function zw(e){function t(s,r,i,a){let l=s[a++];if(l==="__proto__")return!0;const c=Number.isFinite(+l),d=a>=s.length;return l=!l&&Z.isArray(i)?i.length:l,d?(Z.hasOwnProp(i,l)?i[l]=[i[l],r]:i[l]=r,!c):((!i[l]||!Z.isObject(i[l]))&&(i[l]=[]),t(s,r,i[l],a)&&Z.isArray(i[l])&&(i[l]=FM(i[l])),!c)}if(Z.isFormData(e)&&Z.isFunction(e.entries)){const s={};return Z.forEachEntry(e,(r,i)=>{t(_M(r),i,s,0)}),s}return null}function UM(e,t,s){if(Z.isString(e))try{return(t||JSON.parse)(e),Z.trim(e)}catch(r){if(r.name!=="SyntaxError")throw r}return(s||JSON.stringify)(e)}const qg={transitional:Bw,adapter:["xhr","http","fetch"],transformRequest:[function(t,s){const r=s.getContentType()||"",i=r.indexOf("application/json")>-1,a=Z.isObject(t);if(a&&Z.isHTMLForm(t)&&(t=new FormData(t)),Z.isFormData(t))return i?JSON.stringify(zw(t)):t;if(Z.isArrayBuffer(t)||Z.isBuffer(t)||Z.isStream(t)||Z.isFile(t)||Z.isBlob(t)||Z.isReadableStream(t))return t;if(Z.isArrayBufferView(t))return t.buffer;if(Z.isURLSearchParams(t))return s.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let c;if(a){if(r.indexOf("application/x-www-form-urlencoded")>-1)return DM(t,this.formSerializer).toString();if((c=Z.isFileList(t))||r.indexOf("multipart/form-data")>-1){const d=this.env&&this.env.FormData;return Lm(c?{"files[]":t}:t,d&&new d,this.formSerializer)}}return a||i?(s.setContentType("application/json",!1),UM(t)):t}],transformResponse:[function(t){const s=this.transitional||qg.transitional,r=s&&s.forcedJSONParsing,i=this.responseType==="json";if(Z.isResponse(t)||Z.isReadableStream(t))return t;if(t&&Z.isString(t)&&(r&&!this.responseType||i)){const l=!(s&&s.silentJSONParsing)&&i;try{return JSON.parse(t,this.parseReviver)}catch(c){if(l)throw c.name==="SyntaxError"?ft.from(c,ft.ERR_BAD_RESPONSE,this,null,this.response):c}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:On.classes.FormData,Blob:On.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Z.forEach(["delete","get","head","post","put","patch"],e=>{qg.headers[e]={}});const Hg=qg,BM=Z.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),zM=e=>{const t={};let s,r,i;return e&&e.split(`
`).forEach(function(l){i=l.indexOf(":"),s=l.substring(0,i).trim().toLowerCase(),r=l.substring(i+1).trim(),!(!s||t[s]&&BM[s])&&(s==="set-cookie"?t[s]?t[s].push(r):t[s]=[r]:t[s]=t[s]?t[s]+", "+r:r)}),t},xy=Symbol("internals");function io(e){return e&&String(e).trim().toLowerCase()}function Qd(e){return e===!1||e==null?e:Z.isArray(e)?e.map(Qd):String(e)}function WM(e){const t=Object.create(null),s=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=s.exec(e);)t[r[1]]=r[2];return t}const qM=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Qp(e,t,s,r,i){if(Z.isFunction(r))return r.call(this,t,s);if(i&&(t=s),!!Z.isString(t)){if(Z.isString(r))return t.indexOf(r)!==-1;if(Z.isRegExp(r))return r.test(t)}}function HM(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,s,r)=>s.toUpperCase()+r)}function VM(e,t){const s=Z.toCamelCase(" "+t);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+s,{value:function(i,a,l){return this[r].call(this,t,i,a,l)},configurable:!0})})}class Im{constructor(t){t&&this.set(t)}set(t,s,r){const i=this;function a(c,d,p){const g=io(d);if(!g)throw new Error("header name must be a non-empty string");const v=Z.findKey(i,g);(!v||i[v]===void 0||p===!0||p===void 0&&i[v]!==!1)&&(i[v||d]=Qd(c))}const l=(c,d)=>Z.forEach(c,(p,g)=>a(p,g,d));if(Z.isPlainObject(t)||t instanceof this.constructor)l(t,s);else if(Z.isString(t)&&(t=t.trim())&&!qM(t))l(zM(t),s);else if(Z.isObject(t)&&Z.isIterable(t)){let c={},d,p;for(const g of t){if(!Z.isArray(g))throw TypeError("Object iterator must return a key-value pair");c[p=g[0]]=(d=c[p])?Z.isArray(d)?[...d,g[1]]:[d,g[1]]:g[1]}l(c,s)}else t!=null&&a(s,t,r);return this}get(t,s){if(t=io(t),t){const r=Z.findKey(this,t);if(r){const i=this[r];if(!s)return i;if(s===!0)return WM(i);if(Z.isFunction(s))return s.call(this,i,r);if(Z.isRegExp(s))return s.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,s){if(t=io(t),t){const r=Z.findKey(this,t);return!!(r&&this[r]!==void 0&&(!s||Qp(this,this[r],r,s)))}return!1}delete(t,s){const r=this;let i=!1;function a(l){if(l=io(l),l){const c=Z.findKey(r,l);c&&(!s||Qp(r,r[c],c,s))&&(delete r[c],i=!0)}}return Z.isArray(t)?t.forEach(a):a(t),i}clear(t){const s=Object.keys(this);let r=s.length,i=!1;for(;r--;){const a=s[r];(!t||Qp(this,this[a],a,t,!0))&&(delete this[a],i=!0)}return i}normalize(t){const s=this,r={};return Z.forEach(this,(i,a)=>{const l=Z.findKey(r,a);if(l){s[l]=Qd(i),delete s[a];return}const c=t?HM(a):String(a).trim();c!==a&&delete s[a],s[c]=Qd(i),r[c]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const s=Object.create(null);return Z.forEach(this,(r,i)=>{r!=null&&r!==!1&&(s[i]=t&&Z.isArray(r)?r.join(", "):r)}),s}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,s])=>t+": "+s).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...s){const r=new this(t);return s.forEach(i=>r.set(i)),r}static accessor(t){const r=(this[xy]=this[xy]={accessors:{}}).accessors,i=this.prototype;function a(l){const c=io(l);r[c]||(VM(i,l),r[c]=!0)}return Z.isArray(t)?t.forEach(a):a(t),this}}Im.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Z.reduceDescriptors(Im.prototype,({value:e},t)=>{let s=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(r){this[s]=r}}});Z.freezeMethods(Im);const ir=Im;function Gp(e,t){const s=this||Hg,r=t||s,i=ir.from(r.headers);let a=r.data;return Z.forEach(e,function(c){a=c.call(s,a,i.normalize(),t?t.status:void 0)}),i.normalize(),a}function Ww(e){return!!(e&&e.__CANCEL__)}class KM extends ft{constructor(t,s,r){super(t??"canceled",ft.ERR_CANCELED,s,r),this.name="CanceledError",this.__CANCEL__=!0}}const vc=KM;function qw(e,t,s){const r=s.config.validateStatus;!s.status||!r||r(s.status)?e(s):t(new ft("Request failed with status code "+s.status,[ft.ERR_BAD_REQUEST,ft.ERR_BAD_RESPONSE][Math.floor(s.status/100)-4],s.config,s.request,s))}function QM(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function GM(e,t){e=e||10;const s=new Array(e),r=new Array(e);let i=0,a=0,l;return t=t!==void 0?t:1e3,function(d){const p=Date.now(),g=r[a];l||(l=p),s[i]=d,r[i]=p;let v=a,S=0;for(;v!==i;)S+=s[v++],v=v%e;if(i=(i+1)%e,i===a&&(a=(a+1)%e),p-l<t)return;const O=g&&p-g;return O?Math.round(S*1e3/O):void 0}}function JM(e,t){let s=0,r=1e3/t,i,a;const l=(p,g=Date.now())=>{s=g,i=null,a&&(clearTimeout(a),a=null),e(...p)};return[(...p)=>{const g=Date.now(),v=g-s;v>=r?l(p,g):(i=p,a||(a=setTimeout(()=>{a=null,l(i)},r-v)))},()=>i&&l(i)]}const Au=(e,t,s=3)=>{let r=0;const i=GM(50,250);return JM(a=>{const l=a.loaded,c=a.lengthComputable?a.total:void 0,d=l-r,p=i(d),g=l<=c;r=l;const v={loaded:l,total:c,progress:c?l/c:void 0,bytes:d,rate:p||void 0,estimated:p&&c&&g?(c-l)/p:void 0,event:a,lengthComputable:c!=null,[t?"download":"upload"]:!0};e(v)},s)},yy=(e,t)=>{const s=e!=null;return[r=>t[0]({lengthComputable:s,total:e,loaded:r}),t[1]]},jy=e=>(...t)=>Z.asap(()=>e(...t)),YM=On.hasStandardBrowserEnv?((e,t)=>s=>(s=new URL(s,On.origin),e.protocol===s.protocol&&e.host===s.host&&(t||e.port===s.port)))(new URL(On.origin),On.navigator&&/(msie|trident)/i.test(On.navigator.userAgent)):()=>!0,XM=On.hasStandardBrowserEnv?{write(e,t,s,r,i,a,l){if(typeof document>"u")return;const c=[`${e}=${encodeURIComponent(t)}`];Z.isNumber(s)&&c.push(`expires=${new Date(s).toUTCString()}`),Z.isString(r)&&c.push(`path=${r}`),Z.isString(i)&&c.push(`domain=${i}`),a===!0&&c.push("secure"),Z.isString(l)&&c.push(`SameSite=${l}`),document.cookie=c.join("; ")},read(e){if(typeof document>"u")return null;const t=document.cookie.match(new RegExp("(?:^|; )"+e+"=([^;]*)"));return t?decodeURIComponent(t[1]):null},remove(e){this.write(e,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function ZM(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function eP(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function Hw(e,t,s){let r=!ZM(t);return e&&(r||s==!1)?eP(e,t):t}const by=e=>e instanceof ir?{...e}:e;function aa(e,t){t=t||{};const s={};function r(p,g,v,S){return Z.isPlainObject(p)&&Z.isPlainObject(g)?Z.merge.call({caseless:S},p,g):Z.isPlainObject(g)?Z.merge({},g):Z.isArray(g)?g.slice():g}function i(p,g,v,S){if(Z.isUndefined(g)){if(!Z.isUndefined(p))return r(void 0,p,v,S)}else return r(p,g,v,S)}function a(p,g){if(!Z.isUndefined(g))return r(void 0,g)}function l(p,g){if(Z.isUndefined(g)){if(!Z.isUndefined(p))return r(void 0,p)}else return r(void 0,g)}function c(p,g,v){if(v in t)return r(p,g);if(v in e)return r(void 0,p)}const d={url:a,method:a,data:a,baseURL:l,transformRequest:l,transformResponse:l,paramsSerializer:l,timeout:l,timeoutMessage:l,withCredentials:l,withXSRFToken:l,adapter:l,responseType:l,xsrfCookieName:l,xsrfHeaderName:l,onUploadProgress:l,onDownloadProgress:l,decompress:l,maxContentLength:l,maxBodyLength:l,beforeRedirect:l,transport:l,httpAgent:l,httpsAgent:l,cancelToken:l,socketPath:l,responseEncoding:l,validateStatus:c,headers:(p,g,v)=>i(by(p),by(g),v,!0)};return Z.forEach(Object.keys({...e,...t}),function(g){const v=d[g]||i,S=v(e[g],t[g],g);Z.isUndefined(S)&&v!==c||(s[g]=S)}),s}const Vw=e=>{const t=aa({},e);let{data:s,withXSRFToken:r,xsrfHeaderName:i,xsrfCookieName:a,headers:l,auth:c}=t;if(t.headers=l=ir.from(l),t.url=Uw(Hw(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),c&&l.set("Authorization","Basic "+btoa((c.username||"")+":"+(c.password?unescape(encodeURIComponent(c.password)):""))),Z.isFormData(s)){if(On.hasStandardBrowserEnv||On.hasStandardBrowserWebWorkerEnv)l.setContentType(void 0);else if(Z.isFunction(s.getHeaders)){const d=s.getHeaders(),p=["content-type","content-length"];Object.entries(d).forEach(([g,v])=>{p.includes(g.toLowerCase())&&l.set(g,v)})}}if(On.hasStandardBrowserEnv&&(r&&Z.isFunction(r)&&(r=r(t)),r||r!==!1&&YM(t.url))){const d=i&&a&&XM.read(a);d&&l.set(i,d)}return t},tP=typeof XMLHttpRequest<"u",nP=tP&&function(e){return new Promise(function(s,r){const i=Vw(e);let a=i.data;const l=ir.from(i.headers).normalize();let{responseType:c,onUploadProgress:d,onDownloadProgress:p}=i,g,v,S,O,x;function y(){O&&O(),x&&x(),i.cancelToken&&i.cancelToken.unsubscribe(g),i.signal&&i.signal.removeEventListener("abort",g)}let M=new XMLHttpRequest;M.open(i.method.toUpperCase(),i.url,!0),M.timeout=i.timeout;function k(){if(!M)return;const C=ir.from("getAllResponseHeaders"in M&&M.getAllResponseHeaders()),B={data:!c||c==="text"||c==="json"?M.responseText:M.response,status:M.status,statusText:M.statusText,headers:C,config:e,request:M};qw(function(F){s(F),y()},function(F){r(F),y()},B),M=null}"onloadend"in M?M.onloadend=k:M.onreadystatechange=function(){!M||M.readyState!==4||M.status===0&&!(M.responseURL&&M.responseURL.indexOf("file:")===0)||setTimeout(k)},M.onabort=function(){M&&(r(new ft("Request aborted",ft.ECONNABORTED,e,M)),M=null)},M.onerror=function(E){const B=E&&E.message?E.message:"Network Error",_=new ft(B,ft.ERR_NETWORK,e,M);_.event=E||null,r(_),M=null},M.ontimeout=function(){let E=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const B=i.transitional||Bw;i.timeoutErrorMessage&&(E=i.timeoutErrorMessage),r(new ft(E,B.clarifyTimeoutError?ft.ETIMEDOUT:ft.ECONNABORTED,e,M)),M=null},a===void 0&&l.setContentType(null),"setRequestHeader"in M&&Z.forEach(l.toJSON(),function(E,B){M.setRequestHeader(B,E)}),Z.isUndefined(i.withCredentials)||(M.withCredentials=!!i.withCredentials),c&&c!=="json"&&(M.responseType=i.responseType),p&&([S,x]=Au(p,!0),M.addEventListener("progress",S)),d&&M.upload&&([v,O]=Au(d),M.upload.addEventListener("progress",v),M.upload.addEventListener("loadend",O)),(i.cancelToken||i.signal)&&(g=C=>{M&&(r(!C||C.type?new vc(null,e,M):C),M.abort(),M=null)},i.cancelToken&&i.cancelToken.subscribe(g),i.signal&&(i.signal.aborted?g():i.signal.addEventListener("abort",g)));const j=QM(i.url);if(j&&On.protocols.indexOf(j)===-1){r(new ft("Unsupported protocol "+j+":",ft.ERR_BAD_REQUEST,e));return}M.send(a||null)})},sP=(e,t)=>{const{length:s}=e=e?e.filter(Boolean):[];if(t||s){let r=new AbortController,i;const a=function(p){if(!i){i=!0,c();const g=p instanceof Error?p:this.reason;r.abort(g instanceof ft?g:new vc(g instanceof Error?g.message:g))}};let l=t&&setTimeout(()=>{l=null,a(new ft(`timeout of ${t}ms exceeded`,ft.ETIMEDOUT))},t);const c=()=>{e&&(l&&clearTimeout(l),l=null,e.forEach(p=>{p.unsubscribe?p.unsubscribe(a):p.removeEventListener("abort",a)}),e=null)};e.forEach(p=>p.addEventListener("abort",a));const{signal:d}=r;return d.unsubscribe=()=>Z.asap(c),d}},rP=sP,iP=function*(e,t){let s=e.byteLength;if(!t||s<t){yield e;return}let r=0,i;for(;r<s;)i=r+t,yield e.slice(r,i),r=i},aP=async function*(e,t){for await(const s of lP(e))yield*iP(s,t)},lP=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:s,value:r}=await t.read();if(s)break;yield r}}finally{await t.cancel()}},wy=(e,t,s,r)=>{const i=aP(e,t);let a=0,l,c=d=>{l||(l=!0,r&&r(d))};return new ReadableStream({async pull(d){try{const{done:p,value:g}=await i.next();if(p){c(),d.close();return}let v=g.byteLength;if(s){let S=a+=v;s(S)}d.enqueue(new Uint8Array(g))}catch(p){throw c(p),p}},cancel(d){return c(d),i.return()}},{highWaterMark:2})},Ny=64*1024,{isFunction:bd}=Z,oP=(({Request:e,Response:t})=>({Request:e,Response:t}))(Z.global),{ReadableStream:Sy,TextEncoder:ky}=Z.global,Cy=(e,...t)=>{try{return!!e(...t)}catch{return!1}},cP=e=>{e=Z.merge.call({skipUndefined:!0},oP,e);const{fetch:t,Request:s,Response:r}=e,i=t?bd(t):typeof fetch=="function",a=bd(s),l=bd(r);if(!i)return!1;const c=i&&bd(Sy),d=i&&(typeof ky=="function"?(x=>y=>x.encode(y))(new ky):async x=>new Uint8Array(await new s(x).arrayBuffer())),p=a&&c&&Cy(()=>{let x=!1;const y=new s(On.origin,{body:new Sy,method:"POST",get duplex(){return x=!0,"half"}}).headers.has("Content-Type");return x&&!y}),g=l&&c&&Cy(()=>Z.isReadableStream(new r("").body)),v={stream:g&&(x=>x.body)};i&&["text","arrayBuffer","blob","formData","stream"].forEach(x=>{!v[x]&&(v[x]=(y,M)=>{let k=y&&y[x];if(k)return k.call(y);throw new ft(`Response type '${x}' is not supported`,ft.ERR_NOT_SUPPORT,M)})});const S=async x=>{if(x==null)return 0;if(Z.isBlob(x))return x.size;if(Z.isSpecCompliantForm(x))return(await new s(On.origin,{method:"POST",body:x}).arrayBuffer()).byteLength;if(Z.isArrayBufferView(x)||Z.isArrayBuffer(x))return x.byteLength;if(Z.isURLSearchParams(x)&&(x=x+""),Z.isString(x))return(await d(x)).byteLength},O=async(x,y)=>{const M=Z.toFiniteNumber(x.getContentLength());return M??S(y)};return async x=>{let{url:y,method:M,data:k,signal:j,cancelToken:C,timeout:E,onDownloadProgress:B,onUploadProgress:_,responseType:F,headers:J,withCredentials:ue="same-origin",fetchOptions:Y}=Vw(x),xe=t||fetch;F=F?(F+"").toLowerCase():"text";let Ne=rP([j,C&&C.toAbortSignal()],E),Re=null;const L=Ne&&Ne.unsubscribe&&(()=>{Ne.unsubscribe()});let X;try{if(_&&p&&M!=="get"&&M!=="head"&&(X=await O(J,k))!==0){let R=new s(y,{method:"POST",body:k,duplex:"half"}),Q;if(Z.isFormData(k)&&(Q=R.headers.get("content-type"))&&J.setContentType(Q),R.body){const[je,se]=yy(X,Au(jy(_)));k=wy(R.body,Ny,je,se)}}Z.isString(ue)||(ue=ue?"include":"omit");const ce=a&&"credentials"in s.prototype,N={...Y,signal:Ne,method:M.toUpperCase(),headers:J.normalize().toJSON(),body:k,duplex:"half",credentials:ce?ue:void 0};Re=a&&new s(y,N);let K=await(a?xe(Re,Y):xe(y,N));const W=g&&(F==="stream"||F==="response");if(g&&(B||W&&L)){const R={};["status","statusText","headers"].forEach(ze=>{R[ze]=K[ze]});const Q=Z.toFiniteNumber(K.headers.get("content-length")),[je,se]=B&&yy(Q,Au(jy(B),!0))||[];K=new r(wy(K.body,Ny,je,()=>{se&&se(),L&&L()}),R)}F=F||"text";let ne=await v[Z.findKey(v,F)||"text"](K,x);return!W&&L&&L(),await new Promise((R,Q)=>{qw(R,Q,{data:ne,headers:ir.from(K.headers),status:K.status,statusText:K.statusText,config:x,request:Re})})}catch(ce){throw L&&L(),ce&&ce.name==="TypeError"&&/Load failed|fetch/i.test(ce.message)?Object.assign(new ft("Network Error",ft.ERR_NETWORK,x,Re),{cause:ce.cause||ce}):ft.from(ce,ce&&ce.code,x,Re)}}},dP=new Map,Kw=e=>{let t=e&&e.env||{};const{fetch:s,Request:r,Response:i}=t,a=[r,i,s];let l=a.length,c=l,d,p,g=dP;for(;c--;)d=a[c],p=g.get(d),p===void 0&&g.set(d,p=c?new Map:cP(t)),g=p;return p};Kw();const Vg={http:SM,xhr:nP,fetch:{get:Kw}};Z.forEach(Vg,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const Ay=e=>`- ${e}`,uP=e=>Z.isFunction(e)||e===null||e===!1;function mP(e,t){e=Z.isArray(e)?e:[e];const{length:s}=e;let r,i;const a={};for(let l=0;l<s;l++){r=e[l];let c;if(i=r,!uP(r)&&(i=Vg[(c=String(r)).toLowerCase()],i===void 0))throw new ft(`Unknown adapter '${c}'`);if(i&&(Z.isFunction(i)||(i=i.get(t))))break;a[c||"#"+l]=i}if(!i){const l=Object.entries(a).map(([d,p])=>`adapter ${d} `+(p===!1?"is not supported by the environment":"is not available in the build"));let c=s?l.length>1?`since :
`+l.map(Ay).join(`
`):" "+Ay(l[0]):"as no adapter specified";throw new ft("There is no suitable adapter to dispatch the request "+c,"ERR_NOT_SUPPORT")}return i}const Qw={getAdapter:mP,adapters:Vg};function Jp(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new vc(null,e)}function Ey(e){return Jp(e),e.headers=ir.from(e.headers),e.data=Gp.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),Qw.getAdapter(e.adapter||Hg.adapter,e)(e).then(function(r){return Jp(e),r.data=Gp.call(e,e.transformResponse,r),r.headers=ir.from(r.headers),r},function(r){return Ww(r)||(Jp(e),r&&r.response&&(r.response.data=Gp.call(e,e.transformResponse,r.response),r.response.headers=ir.from(r.response.headers))),Promise.reject(r)})}const Gw="1.13.4",Om={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Om[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});const Ty={};Om.transitional=function(t,s,r){function i(a,l){return"[Axios v"+Gw+"] Transitional option '"+a+"'"+l+(r?". "+r:"")}return(a,l,c)=>{if(t===!1)throw new ft(i(l," has been removed"+(s?" in "+s:"")),ft.ERR_DEPRECATED);return s&&!Ty[l]&&(Ty[l]=!0,console.warn(i(l," has been deprecated since v"+s+" and will be removed in the near future"))),t?t(a,l,c):!0}};Om.spelling=function(t){return(s,r)=>(console.warn(`${r} is likely a misspelling of ${t}`),!0)};function pP(e,t,s){if(typeof e!="object")throw new ft("options must be an object",ft.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let i=r.length;for(;i-- >0;){const a=r[i],l=t[a];if(l){const c=e[a],d=c===void 0||l(c,a,e);if(d!==!0)throw new ft("option "+a+" must be "+d,ft.ERR_BAD_OPTION_VALUE);continue}if(s!==!0)throw new ft("Unknown option "+a,ft.ERR_BAD_OPTION)}}const Gd={assertOptions:pP,validators:Om},xr=Gd.validators;class Eu{constructor(t){this.defaults=t||{},this.interceptors={request:new vy,response:new vy}}async request(t,s){try{return await this._request(t,s)}catch(r){if(r instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const a=i.stack?i.stack.replace(/^.+\n/,""):"";try{r.stack?a&&!String(r.stack).endsWith(a.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+a):r.stack=a}catch{}}throw r}}_request(t,s){typeof t=="string"?(s=s||{},s.url=t):s=t||{},s=aa(this.defaults,s);const{transitional:r,paramsSerializer:i,headers:a}=s;r!==void 0&&Gd.assertOptions(r,{silentJSONParsing:xr.transitional(xr.boolean),forcedJSONParsing:xr.transitional(xr.boolean),clarifyTimeoutError:xr.transitional(xr.boolean)},!1),i!=null&&(Z.isFunction(i)?s.paramsSerializer={serialize:i}:Gd.assertOptions(i,{encode:xr.function,serialize:xr.function},!0)),s.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?s.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:s.allowAbsoluteUrls=!0),Gd.assertOptions(s,{baseUrl:xr.spelling("baseURL"),withXsrfToken:xr.spelling("withXSRFToken")},!0),s.method=(s.method||this.defaults.method||"get").toLowerCase();let l=a&&Z.merge(a.common,a[s.method]);a&&Z.forEach(["delete","get","head","post","put","patch","common"],x=>{delete a[x]}),s.headers=ir.concat(l,a);const c=[];let d=!0;this.interceptors.request.forEach(function(y){typeof y.runWhen=="function"&&y.runWhen(s)===!1||(d=d&&y.synchronous,c.unshift(y.fulfilled,y.rejected))});const p=[];this.interceptors.response.forEach(function(y){p.push(y.fulfilled,y.rejected)});let g,v=0,S;if(!d){const x=[Ey.bind(this),void 0];for(x.unshift(...c),x.push(...p),S=x.length,g=Promise.resolve(s);v<S;)g=g.then(x[v++],x[v++]);return g}S=c.length;let O=s;for(;v<S;){const x=c[v++],y=c[v++];try{O=x(O)}catch(M){y.call(this,M);break}}try{g=Ey.call(this,O)}catch(x){return Promise.reject(x)}for(v=0,S=p.length;v<S;)g=g.then(p[v++],p[v++]);return g}getUri(t){t=aa(this.defaults,t);const s=Hw(t.baseURL,t.url,t.allowAbsoluteUrls);return Uw(s,t.params,t.paramsSerializer)}}Z.forEach(["delete","get","head","options"],function(t){Eu.prototype[t]=function(s,r){return this.request(aa(r||{},{method:t,url:s,data:(r||{}).data}))}});Z.forEach(["post","put","patch"],function(t){function s(r){return function(a,l,c){return this.request(aa(c||{},{method:t,headers:r?{"Content-Type":"multipart/form-data"}:{},url:a,data:l}))}}Eu.prototype[t]=s(),Eu.prototype[t+"Form"]=s(!0)});const Jd=Eu;class Kg{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let s;this.promise=new Promise(function(a){s=a});const r=this;this.promise.then(i=>{if(!r._listeners)return;let a=r._listeners.length;for(;a-- >0;)r._listeners[a](i);r._listeners=null}),this.promise.then=i=>{let a;const l=new Promise(c=>{r.subscribe(c),a=c}).then(i);return l.cancel=function(){r.unsubscribe(a)},l},t(function(a,l,c){r.reason||(r.reason=new vc(a,l,c),s(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const s=this._listeners.indexOf(t);s!==-1&&this._listeners.splice(s,1)}toAbortSignal(){const t=new AbortController,s=r=>{t.abort(r)};return this.subscribe(s),t.signal.unsubscribe=()=>this.unsubscribe(s),t.signal}static source(){let t;return{token:new Kg(function(i){t=i}),cancel:t}}}const fP=Kg;function hP(e){return function(s){return e.apply(null,s)}}function gP(e){return Z.isObject(e)&&e.isAxiosError===!0}const vh={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(vh).forEach(([e,t])=>{vh[t]=e});const vP=vh;function Jw(e){const t=new Jd(e),s=Rw(Jd.prototype.request,t);return Z.extend(s,Jd.prototype,t,{allOwnKeys:!0}),Z.extend(s,t,null,{allOwnKeys:!0}),s.create=function(i){return Jw(aa(e,i))},s}const cn=Jw(Hg);cn.Axios=Jd;cn.CanceledError=vc;cn.CancelToken=fP;cn.isCancel=Ww;cn.VERSION=Gw;cn.toFormData=Lm;cn.AxiosError=ft;cn.Cancel=cn.CanceledError;cn.all=function(t){return Promise.all(t)};cn.spread=hP;cn.isAxiosError=gP;cn.mergeConfig=aa;cn.AxiosHeaders=ir;cn.formToJSON=e=>zw(Z.isHTMLForm(e)?new FormData(e):e);cn.getAdapter=Qw.getAdapter;cn.HttpStatusCode=vP;cn.default=cn;const xP=cn,yP="/api",De=xP.create({baseURL:yP,headers:{"Content-Type":"application/json"},withCredentials:!0});function jP(){return localStorage.getItem("accessToken")||sessionStorage.getItem("accessToken")}function Yw(e){return e.includes("/auth/login")||e.includes("/auth/google")||e.includes("/auth/google/config")||e.includes("/auth/sso/config")||e.includes("/auth/forgot-password")||e.includes("/auth/reset-password")||e.includes("/auth/mfa/verify")||e.includes("/auth/refresh")}async function bP(){const e=localStorage.getItem("refreshToken"),t=sessionStorage.getItem("refreshToken"),s=e||t;if(!s)throw new Error("No refresh token");const i=(await De.post("/auth/refresh",{refreshToken:s})).data;if(i.accessToken)return e?localStorage.setItem("accessToken",i.accessToken):sessionStorage.setItem("accessToken",i.accessToken),i.accessToken;throw new Error("Failed refresh")}De.interceptors.request.use(e=>{const t=jP(),s=String(e.url||"");if(t&&e.headers)return e.headers.Authorization=`Bearer ${t}`,e;if(!Yw(s)){const r=typeof window<"u"&&(window.location.pathname==="/login"||window.location.pathname==="/portal/login");return typeof window<"u"&&!r&&(window.location.href="/login"),Promise.reject(new Error("Missing access token"))}return e});De.interceptors.response.use(e=>e,async e=>{const t=e.config;if(e.response&&e.response.status===401&&!t._retry&&t.url&&!t.url.includes("/auth/login")&&!t.url.includes("/auth/refresh")&&!Yw(String(t.url||""))){t._retry=!0;try{const s=await bP();return t.headers.Authorization=`Bearer ${s}`,De(t)}catch(s){return localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),sessionStorage.removeItem("accessToken"),sessionStorage.removeItem("refreshToken"),typeof window<"u"&&(window.location.pathname==="/login"||window.location.pathname==="/portal/login")||(window.location.href="/login"),Promise.reject(s)}}return Promise.reject(e)});function Xw(){localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),sessionStorage.removeItem("accessToken"),sessionStorage.removeItem("refreshToken")}function $m(e,t=!0){Xw();const s=t?localStorage:sessionStorage;e!=null&&e.accessToken&&s.setItem("accessToken",e.accessToken),e!=null&&e.refreshToken&&s.setItem("refreshToken",e.refreshToken)}function wP(e,t,s=!0){$m({accessToken:e,refreshToken:t},s)}async function NP(e,t,s=!0){const i=(await De.post("/auth/login",{email:e,password:t})).data;return $m(i,s),i}async function SP(e,t=!0){const r=(await De.post("/auth/google",{idToken:e})).data;return $m(r,t),r}async function kP(){return(await De.get("/auth/google/config")).data}async function CP(){return(await De.get("/auth/sso/config")).data}async function AP(e){return(await De.post("/auth/forgot-password",{email:e})).data}async function EP(e,t){return(await De.post("/auth/reset-password",{token:e,password:t})).data}async function TP(e,t,s=!0){const i=(await De.post("/auth/mfa/verify",{challengeToken:e,code:t})).data;return $m(i,s),i}async function RP(e,t){return(await De.post("/auth/change-password",{currentPassword:e,newPassword:t})).data}function Zw(){Xw(),window.location.href="/login"}function Ry(){try{const e=localStorage.getItem("accessToken")||sessionStorage.getItem("accessToken");if(!e)return null;const t=JSON.parse(atob(e.split(".")[1]));return{id:t.sub,role:t.role,name:t.name,email:t.email}}catch{return null}}const e1=u.createContext(void 0),MP=({children:e})=>{const[t,s]=u.useState(()=>Ry()),r=()=>{s(Ry())};return u.useEffect(()=>{r()},[]),n.jsx(e1.Provider,{value:{user:t,refreshUser:r,logout:()=>{Zw(),s(null)}},children:e})};function An(){const e=u.useContext(e1);if(!e)throw new Error("useAuth must be used within AuthProvider");return e}async function ua(e={}){return(await De.get("/users",{params:e})).data}async function PP(e){return(await De.post("/users",e)).data}async function ll(e,t){return(await De.patch(`/users/${e}`,t)).data}async function LP(e){return(await De.delete(`/users/${e}`)).data}function My(){const{user:e}=An(),[t,s]=u.useState([]),[r,i]=u.useState([]),[a,l]=u.useState([]),[c,d]=u.useState(!0),[p,g]=u.useState(""),[v,S]=u.useState(!1),[O,x]=u.useState({kpi:!0,statusBreakdown:!0,criticalOverdue:!0,priorityMix:!0,topAgents:!0});u.useEffect(()=>{(async()=>{try{d(!0);const ue=(await De.get("/tickets?pageSize=500")).data.items||[];if(s(ue),(e==null?void 0:e.role)!=="USER")try{const Ne=(await De.get("/assets?pageSize=500")).data.items||[];i(Ne)}catch{i([])}else i([]);try{const Y=await ua({limit:500});l(Array.isArray(Y)?Y:[])}catch{l([])}g("")}catch(F){console.error("Failed to fetch dashboard data:",F),g("Failed to load dashboard data")}finally{d(!1)}})()},[e==null?void 0:e.role]);const y=u.useMemo(()=>{const _=t.length,F={},J={};let ue=0,Y=0,xe=0;t.forEach(ce=>{const N=String(ce.status||"Unknown");F[N]=(F[N]||0)+1;const K=String(ce.priority||"Unspecified");J[K]=(J[K]||0)+1;const W=String(ce.status||"").toLowerCase();W.includes("pending")&&(ue+=1),W.includes("due")&&(Y+=1),(W.includes("overdue")||W.includes("breach"))&&(xe+=1)});const Ne=t.filter(ce=>{const N=String(ce.status||"").toLowerCase();return N!=="closed"&&N!=="resolved"}).length,Re=t.filter(ce=>String(ce.status||"").toLowerCase().includes("supplier")).length,L=t.filter(ce=>{const N=String(ce.priority||"").toLowerCase();return N.includes("critical")||N==="p1"}).length,X=t.filter(ce=>!ce.assigneeId).length;return{total:_,open:Ne,withSupplier:Re,byStatus:F,byPriority:J,pending:ue,dueToday:Y,overdue:xe,critical:L,unassigned:X}},[t]),M=u.useMemo(()=>{const _=r.length,F=r.filter(J=>{const ue=String(J.status||"").toLowerCase();return ue.includes("fault")||ue.includes("repair")}).length;return{total:_,faulty:F}},[r]),k=u.useMemo(()=>({total:a.length}),[a]),j=u.useMemo(()=>t.filter(_=>{const F=String(_.priority||"").toLowerCase(),J=String(_.status||"").toLowerCase();return F.includes("critical")||F==="p1"||J.includes("overdue")||J.includes("breach")}).slice(0,8),[t]),C=u.useMemo(()=>{const _={};return t.forEach(F=>{var ue,Y;const J=String(((ue=F==null?void 0:F.assignee)==null?void 0:ue.name)||((Y=F==null?void 0:F.assignee)==null?void 0:Y.email)||(F==null?void 0:F.assigneeId)||"Unassigned");_[J]=(_[J]||0)+1}),Object.entries(_).sort((F,J)=>J[1]-F[1]).slice(0,6)},[t]),E=_=>{x(F=>({...F,[_]:!F[_]}))},B=async()=>{const _=document.documentElement;!document.fullscreenElement&&(_!=null&&_.requestFullscreen)?await _.requestFullscreen():document.fullscreenElement&&document.exitFullscreen&&await document.exitFullscreen()};return c?n.jsxs("div",{className:"dashboard-container",children:[n.jsx("div",{className:"dashboard-header",children:n.jsx("h1",{children:"Dashboard"})}),n.jsx("div",{className:"dashboard-content",children:n.jsx("p",{children:"Loading..."})})]}):n.jsxs("div",{className:"dashboard-container grafana",children:[n.jsxs("div",{className:"dashboard-header grafana-header",children:[n.jsxs("div",{children:[n.jsx("h1",{children:"Overview"}),n.jsx("div",{className:"dashboard-subtitle",children:"Current status across tickets and assets"})]}),n.jsxs("div",{className:"dashboard-actions",children:[n.jsx("button",{className:"dash-ghost",onClick:B,children:"Enter full screen"}),n.jsxs("div",{className:"dash-widget-menu-wrap",children:[n.jsx("button",{className:"dash-ghost",onClick:()=>S(_=>!_),children:"Edit widgets"}),v&&n.jsx("div",{className:"dash-widget-menu",children:Object.entries({kpi:"KPI cards",statusBreakdown:"Status breakdown",criticalOverdue:"Critical/Overdue list",priorityMix:"Priority mix",topAgents:"Top agents"}).map(([_,F])=>n.jsxs("label",{children:[n.jsx("input",{type:"checkbox",checked:!!O[_],onChange:()=>E(_)}),n.jsx("span",{children:F})]},_))})]})]})]}),n.jsxs("div",{className:"dashboard-content",children:[p&&n.jsx("p",{className:"error-message",children:p}),n.jsxs("div",{className:"dashboard-status-strip",children:[n.jsxs("div",{className:"dashboard-status-card",children:[n.jsx("div",{className:"dashboard-status-title",children:"Ticket status"}),n.jsxs("div",{className:"dashboard-status-items",children:[n.jsxs("span",{children:[n.jsx("strong",{children:y.open})," Open"]}),n.jsxs("span",{children:[n.jsx("strong",{children:y.pending})," Pending"]}),n.jsxs("span",{children:[n.jsx("strong",{children:y.dueToday})," Due today"]}),n.jsxs("span",{children:[n.jsx("strong",{children:y.overdue})," Overdue"]})]})]}),n.jsxs("div",{className:"dashboard-status-card",children:[n.jsx("div",{className:"dashboard-status-title",children:"Alert status"}),n.jsxs("div",{className:"dashboard-status-items",children:[n.jsxs("span",{children:[n.jsx("strong",{children:y.critical})," Critical"]}),n.jsxs("span",{children:[n.jsx("strong",{children:y.unassigned})," Unassigned"]})]})]})]}),O.kpi&&n.jsxs("div",{className:"dash-top-cards",children:[n.jsxs("div",{className:"dash-metric",children:[n.jsx("div",{className:"metric-label",children:"Total Tickets"}),n.jsx("div",{className:"metric-value",children:y.total}),n.jsx("div",{className:"metric-sub",children:"All tickets"})]}),n.jsxs("div",{className:"dash-metric",children:[n.jsx("div",{className:"metric-label",children:"Open Tickets"}),n.jsx("div",{className:"metric-value",children:y.open}),n.jsx("div",{className:"metric-sub",children:"Unresolved"})]}),n.jsxs("div",{className:"dash-metric",children:[n.jsx("div",{className:"metric-label",children:"With Supplier"}),n.jsx("div",{className:"metric-value",children:y.withSupplier}),n.jsx("div",{className:"metric-sub",children:"External"})]}),n.jsxs("div",{className:"dash-metric",children:[n.jsx("div",{className:"metric-label",children:"Total Assets"}),n.jsx("div",{className:"metric-value",children:M.total}),n.jsx("div",{className:"metric-sub",children:"Tracked items"})]}),n.jsxs("div",{className:"dash-metric",children:[n.jsx("div",{className:"metric-label",children:"Faulty Assets"}),n.jsx("div",{className:"metric-value",children:M.faulty}),n.jsx("div",{className:"metric-sub",children:"Needs attention"})]}),n.jsxs("div",{className:"dash-metric",children:[n.jsx("div",{className:"metric-label",children:"Total Users"}),n.jsx("div",{className:"metric-value",children:k.total}),n.jsx("div",{className:"metric-sub",children:"Active directory"})]})]}),n.jsxs("div",{className:"dash-panels",children:[O.statusBreakdown&&n.jsxs("div",{className:"dash-panel",children:[n.jsxs("div",{className:"panel-head",children:[n.jsx("h2",{children:"Ticket Status Breakdown"}),n.jsxs("span",{className:"dash-pill",children:["Total ",y.total]})]}),n.jsx("div",{className:"dash-chart",children:n.jsxs("div",{className:"stat-list",children:[Object.entries(y.byStatus).map(([_,F])=>n.jsxs("div",{className:"stat-row",children:[n.jsx("span",{children:_}),n.jsx("span",{children:F})]},_)),Object.keys(y.byStatus).length===0&&n.jsx("div",{className:"activity-empty",children:"No ticket data"})]})})]}),O.criticalOverdue&&n.jsxs("div",{className:"dash-panel",children:[n.jsxs("div",{className:"panel-head",children:[n.jsx("h2",{children:"Critical and overdue tickets"}),n.jsxs("span",{className:"dash-pill",children:[j.length," items"]})]}),n.jsx("div",{className:"dash-chart",children:n.jsx("div",{className:"stat-list",children:j.length===0?n.jsx("div",{className:"activity-empty",children:"No critical or overdue tickets"}):j.map(_=>n.jsxs("div",{className:"stat-row",children:[n.jsx("span",{children:String(_.subject||_.ticketId||"Untitled")}),n.jsx("span",{children:String(_.priority||_.status||"-")})]},String(_.id||_.ticketId)))})})]}),O.priorityMix&&n.jsxs("div",{className:"dash-panel",children:[n.jsxs("div",{className:"panel-head",children:[n.jsx("h2",{children:"Tickets by Priority"}),n.jsxs("span",{className:"dash-pill",children:[Object.keys(y.byPriority).length," groups"]})]}),n.jsx("div",{className:"dash-chart",children:n.jsx("div",{className:"priority-grid",children:Object.entries(y.byPriority).map(([_,F])=>n.jsxs("div",{className:"priority-row",children:[n.jsx("span",{children:_}),n.jsx("div",{className:"priority-bar",children:n.jsx("span",{style:{width:`${Math.min(100,F/Math.max(1,y.total)*100)}%`}})}),n.jsx("strong",{children:F})]},_))})})]}),O.topAgents&&n.jsxs("div",{className:"dash-panel",children:[n.jsxs("div",{className:"panel-head",children:[n.jsx("h2",{children:"Support Leaderboard"}),n.jsxs("span",{className:"dash-pill",children:["Top ",C.length]})]}),n.jsx("div",{className:"dash-chart",children:n.jsx("div",{className:"stat-list",children:C.length===0?n.jsx("div",{className:"activity-empty",children:"No assignee data"}):C.map(([_,F])=>n.jsxs("div",{className:"stat-row",children:[n.jsx("span",{children:_}),n.jsx("span",{children:F})]},_))})})]})]})]})]})}async function Jo(e={}){return(await De.get("/assets",{params:e})).data}async function IP(e={}){return(await De.get("/assets/my",{params:e})).data}async function Yp(e){return(await De.get(`/assets/${e}`)).data}async function OP(e){return(await De.post("/assets",e)).data}async function xh(e,t){return(await De.patch(`/assets/${e}`,t)).data}async function $P(e){return(await De.delete(`/assets/${e}`)).data}async function Dm(e={}){return(await De.get("/tickets",{params:e})).data}async function _a(e,t){return(await De.post(`/tickets/${encodeURIComponent(e)}/transition`,{to:t})).data}async function DP(e){return(await De.post(`/tickets/${encodeURIComponent(e)}/mark-responded`)).data}async function wI(e,t){return(await De.post(`/tickets/${encodeURIComponent(e)}/history`,t)).data}async function Tu(e){return(await De.post("/tickets",e)).data}async function wd(e){return(await De.get(`/tickets/${encodeURIComponent(e)}`)).data}async function Xp(e,t){return(await De.post(`/tickets/${encodeURIComponent(e)}/respond`,t)).data}async function Nd(e,t){return(await De.post(`/tickets/${encodeURIComponent(e)}/private-note`,t)).data}async function _P(e,t){return(await De.post(`/tickets/${encodeURIComponent(e)}/attachments`,t)).data}async function FP(e,t){return(await De.post(`/tickets/${encodeURIComponent(e)}/resolve`,t)).data}async function Sd(e,t){return(await De.patch(`/tickets/${encodeURIComponent(e)}`,t)).data}async function NI(e){return(await De.delete(`/tickets/${encodeURIComponent(e)}`)).data}async function SI(e,t){return(await De.post(`/tickets/${encodeURIComponent(e)}/asset`,{assetId:t})).data}async function kI(e){return(await De.delete(`/tickets/${encodeURIComponent(e)}/asset`)).data}async function UP(e={}){return(await De.get("/changes",{params:e})).data}async function BP(e={}){return(await De.get("/problems",{params:e})).data}async function zP(e={}){return(await De.get("/services",{params:e})).data}const WP=50;function _m(){return WP}const t1="itsm_left_panel_config_v1",vs={ticketsMyLists:[{id:"t-all",label:"All Tickets",field:"status",value:"all"},{id:"t-open",label:"Open Tickets",field:"status",value:"open"},{id:"t-sla-hold",label:"SLA Hold",field:"sla",value:"hold"}],users:[{id:"u-active",label:"Active",field:"status",value:"active"},{id:"u-inactive",label:"Inactive",field:"status",value:"inactive"},{id:"u-onsite",label:"Onsite",field:"workMode",value:"onsite"},{id:"u-remote",label:"Remote",field:"workMode",value:"remote"}],assets:[{id:"a-owned",label:"Owned",field:"assigned",value:"assigned"},{id:"a-unassigned",label:"Unassigned",field:"assigned",value:"unassigned"},{id:"a-inuse",label:"In Use",field:"status",value:"in use"},{id:"a-available",label:"Available",field:"status",value:"available"},{id:"a-retired",label:"Retired",field:"status",value:"retired"}],suppliers:[],ticketQueues:[],assetCategories:[]};function qP(e){if(!Array.isArray(e)||e.length===0)return vs.ticketsMyLists;const t=["t-open","t-closed","t-sla"],s=e.map(i=>String((i==null?void 0:i.id)||""));return s.length===t.length&&t.every(i=>s.includes(i))?vs.ticketsMyLists:e}function HP(e){if(!Array.isArray(e)||e.length===0)return vs.assets;const t=e.filter(s=>{const r=String((s==null?void 0:s.label)||"").toLowerCase();return!r.includes("my list")&&!r.includes("bookmark")&&r!=="all assets"}).map(s=>String((s==null?void 0:s.label)||"").toLowerCase().includes("stock location")?{id:"a-owned",label:"Assets by Ownership",field:"assigned",value:"assigned"}:s);return t.length===0?vs.assets:t}function VP(e){if(!e)return vs;try{const t=JSON.parse(e);return{ticketsMyLists:qP(Array.isArray(t==null?void 0:t.ticketsMyLists)?t.ticketsMyLists:vs.ticketsMyLists),users:Array.isArray(t==null?void 0:t.users)?t.users:vs.users,assets:HP(Array.isArray(t==null?void 0:t.assets)?t.assets:vs.assets),suppliers:Array.isArray(t==null?void 0:t.suppliers)?t.suppliers:vs.suppliers,ticketQueues:Array.isArray(t==null?void 0:t.ticketQueues)?t.ticketQueues.map(s=>({id:String((s==null?void 0:s.id)||`q-${Date.now()}`),label:String((s==null?void 0:s.label)||"").trim(),serviceAccount:String((s==null?void 0:s.serviceAccount)||"").trim(),visibilityRoles:Array.isArray(s==null?void 0:s.visibilityRoles)&&s.visibilityRoles.length?s.visibilityRoles.map(r=>String(r||"").toUpperCase()).filter(Boolean):["ADMIN","AGENT"]})).filter(s=>s.label):vs.ticketQueues,assetCategories:Array.isArray(t==null?void 0:t.assetCategories)?t.assetCategories.map(s=>({id:String((s==null?void 0:s.id)||`ac-${Date.now()}`),label:String((s==null?void 0:s.label)||"").trim(),subcategories:Array.isArray(s==null?void 0:s.subcategories)?s.subcategories.map(r=>String(r||"").trim()).filter(Boolean):[],visibilityRoles:Array.isArray(s==null?void 0:s.visibilityRoles)&&s.visibilityRoles.length?s.visibilityRoles.map(r=>String(r||"").toUpperCase()).filter(Boolean):["ADMIN","AGENT"]})).filter(s=>s.label):vs.assetCategories}}catch{return vs}}function ts(){return typeof window>"u"?vs:VP(window.localStorage.getItem(t1))}function KP(e){typeof window>"u"||(window.localStorage.setItem(t1,JSON.stringify(e)),window.dispatchEvent(new CustomEvent("left-panel-config-updated")))}const kd={assetId:"",name:"",assetType:"Laptop",category:"",subcategory:"",ciType:"Hardware",serial:"",assetTag:"",barcode:"",assignedToId:"",assignedUserEmail:"",department:"",location:"",site:"",costCentre:"",manager:"",assetOwner:"",manufacturer:"",model:"",cpu:"",ram:"",storage:"",macAddress:"",ipAddress:"",biosVersion:"",firmware:"",os:"",osVersion:"",licenseKey:"",installedSoftwareText:"",antivirus:"",patchStatus:"",encryption:"",purchaseDate:"",supplier:"",poNumber:"",invoiceNumber:"",purchaseCost:"",warrantyStart:"",warrantyUntil:"",amcSupport:"",depreciationEnd:"",status:"In Use",lifecycleStage:"Active",condition:"Good",deploymentDate:"",lastAuditDate:"",endOfLife:"",disposalDate:"",disposalMethod:"",securityClassification:"Corporate",dataSensitivity:"Internal",mdmEnrolled:"no",complianceStatus:"Compliant",riskLevel:"Low",lastSecurityScan:"",parentAssetId:"",notes:"",linkedTicketIds:[],changeIds:[],problemIds:[],serviceIds:[]},QP=[{id:"identification",label:"Identification"},{id:"ownership",label:"Ownership"},{id:"hardware",label:"Hardware"},{id:"software",label:"OS & Software"},{id:"financial",label:"Financial"},{id:"relationships",label:"Relationships"},{id:"notes",label:"Notes"}];function GP({toolbarSearch:e="",controlledPage:t,onPageChange:s,onPaginationMetaChange:r}){const{user:i}=An(),a=lr(),l=Wn(),c=typeof document<"u"?document.getElementById("ticket-left-panel"):null,[d,p]=u.useState([]),[g,v]=u.useState([]),[S,O]=u.useState([]),[x,y]=u.useState([]),[M,k]=u.useState([]),[j,C]=u.useState([]),[E,B]=u.useState([]),[_,F]=u.useState(e),[J,ue]=u.useState(!1),[Y,xe]=u.useState(!1),[Ne,Re]=u.useState(null),[L,X]=u.useState({...kd}),[ce,N]=u.useState("identification"),[K,W]=u.useState(()=>typeof window>"u"?!1:window.innerWidth<=1100),[ne,R]=u.useState(()=>ts().assets),[Q,je]=u.useState(()=>ts().assetCategories),[se,ze]=u.useState("assetGroup"),[Ze,ye]=u.useState(!1),[lt,We]=u.useState(0),[Fe,le]=u.useState({type:"all"}),[Me,G]=u.useState([]),[he,we]=u.useState({name:"",serial:"",category:"",status:"",model:"",assigned:"",purchase:""}),[$,V]=u.useState(1),ve=_m(),[ge,Ve]=u.useState(0),Le=t??$,H=w=>{const ee=typeof w=="function"?w(Le):w;if(typeof t=="number"){s==null||s(ee);return}V(ee)},pe=Math.max(1,Math.ceil(ge/ve)),_e=async()=>{try{const w=await Jo({page:Le,pageSize:ve,q:_}),ee=Array.isArray(w)?w:(w==null?void 0:w.items)||[];p(ee),v(ee),Ve(Number((w==null?void 0:w.total)||ee.length||0))}catch(w){console.warn("Failed to fetch assets",w)}};u.useEffect(()=>{_e()},[Le,_,lt]),u.useEffect(()=>{F(e)},[e]),u.useEffect(()=>{const w="assets-queue-expanded",ee="assets-queue-collapsed";return K?(document.body.classList.remove(w),document.body.classList.add(ee)):(document.body.classList.add(w),document.body.classList.remove(ee)),()=>{document.body.classList.remove(w),document.body.classList.remove(ee)}},[K]),u.useEffect(()=>(document.body.classList.add("assets-view-active"),()=>document.body.classList.remove("assets-view-active")),[]),u.useEffect(()=>{const w=()=>{const ee=ts();R(ee.assets),je(ee.assetCategories)};return window.addEventListener("left-panel-config-updated",w),()=>window.removeEventListener("left-panel-config-updated",w)},[]),u.useEffect(()=>{const w=ee=>{const de=ee.detail;!de||de.target!=="assets"||(de.action==="new"&&(Re(null),X({...kd}),ue(!0)),de.action!=="filter"&&de.action==="refresh"&&We($e=>$e+1))};return window.addEventListener("shared-toolbar-action",w),()=>window.removeEventListener("shared-toolbar-action",w)},[]),u.useEffect(()=>{const w=ee=>{const de=ee.detail;!de||de.target!=="assets"||de.action==="toggle-left-panel"&&W($e=>!$e)};return window.addEventListener("shared-toolbar-action",w),()=>window.removeEventListener("shared-toolbar-action",w)},[]),u.useEffect(()=>{Le>pe&&H(pe)},[Le,pe]),u.useEffect(()=>{const w=ge===0?0:(Le-1)*ve+1,ee=Math.min(Le*ve,ge);r==null||r({page:Le,totalPages:pe,totalRows:ge,rangeStart:w,rangeEnd:ee})},[Le,ge,ve,pe,r]);const Ye=async(w="")=>{try{const ee=await ua({q:w,limit:50});O(Array.isArray(ee)?ee:[])}catch(ee){console.warn("Failed to fetch users",ee)}},et=async()=>{try{const w=await Dm({page:1,pageSize:100});y(Array.isArray(w)?w:(w==null?void 0:w.items)||[])}catch{}try{const w=await UP();k(Array.isArray(w)?w:[])}catch{}try{const w=await BP();C(Array.isArray(w)?w:[])}catch{}try{const w=await zP();B(Array.isArray(w)?w:[])}catch{}},ct=w=>String(w||"").trim().toLowerCase(),rt=w=>String(w.assetType||w.category||"Unknown").trim(),qe=u.useMemo(()=>{const w=Q.filter(ee=>!Array.isArray(ee.visibilityRoles)||ee.visibilityRoles.length===0?!0:ee.visibilityRoles.map(de=>String(de||"").toUpperCase()).includes(String((i==null?void 0:i.role)||"").toUpperCase()));return w.length?Object.fromEntries(w.map(ee=>[ee.label,Array.from(new Set((ee.subcategories||[]).map(de=>String(de||"").trim()).filter(Boolean))).sort((de,$e)=>de.localeCompare($e))])):{}},[Q,i==null?void 0:i.role]),yt=u.useMemo(()=>{if(Object.keys(qe).length>0)return qe;const w=new Map;for(const ee of d){const de=String(ee.category||"").trim()||"Uncategorized",$e=rt(ee);w.has(de)||w.set(de,new Set),w.get(de).add($e)}return Object.fromEntries(Array.from(w.entries()).sort(([ee],[de])=>ee.localeCompare(de)).map(([ee,de])=>[ee,Array.from(de).sort(($e,re)=>$e.localeCompare(re))]))},[d,qe]),St=u.useMemo(()=>Array.from(new Set(d.map(w=>rt(w)))).sort((w,ee)=>w.localeCompare(ee)),[d]);u.useEffect(()=>{const w=new Set(Object.keys(yt));G(ee=>ee.filter(de=>w.has(de)))},[yt]);const hn=u.useMemo(()=>{const w=(ee,de)=>String(ee||"").toLowerCase().includes(de.toLowerCase());return d.filter(ee=>{if(Fe.type==="assetType"){if(ct(rt(ee))!==ct(String(Fe.value||"")))return!1}else if(Fe.type==="assetGroup"){if(!(yt[String(Fe.value||"")]||[]).some($e=>ct($e)===ct(rt(ee))))return!1}else if(Fe.type==="rule"){const de=ne.find($e=>$e.id===Fe.value);if(de){const $e=String(ee.status||"").toLowerCase();if(de.field==="assigned"&&de.value==="unassigned"&&(ee.assignedTo||ee.assignedToId)||de.field==="assigned"&&de.value==="assigned"&&!(ee.assignedTo||ee.assignedToId)||de.field==="status"&&$e!==String(de.value||"").toLowerCase()||de.field==="category"&&String(ee.category||"").toLowerCase()!==String(de.value||"").toLowerCase())return!1;de.field==="status"&&String(de.value||"").toLowerCase()}}if(he.name&&!w(`${ee.name} ${ee.assetId||""}`,he.name)||he.serial&&!w(ee.serial,he.serial)||he.category&&!w(ee.category,he.category)||he.status&&!w(ee.status,he.status)||he.model&&!w(ee.model,he.model))return!1;if(he.assigned){const de=ee.assignedTo?ee.assignedTo.name||ee.assignedTo.email:ee.assignedToId?`User #${ee.assignedToId}`:"Unassigned";if(!w(de,he.assigned))return!1}return!(he.purchase&&!w(ee.purchaseDate?ee.purchaseDate.slice(0,10):"",he.purchase))})},[d,Fe,he,ne]);u.useMemo(()=>{const w=d.length,ee=d.filter(xt=>String(xt.status||"").toLowerCase()==="in use").length,de=d.filter(xt=>String(xt.status||"").toLowerCase()==="available").length,$e=d.filter(xt=>String(xt.status||"").toLowerCase()==="retired").length,re=d.reduce((xt,jn)=>{const Mt=jn.category||"Unknown";return xt[Mt]=(xt[Mt]||0)+1,xt},{}),Dt=Object.entries(re).sort((xt,jn)=>jn[1]-xt[1]).slice(0,4);return{totalCount:w,inUse:ee,available:de,retired:$e,topCategories:Dt}},[d]);const tn=()=>{Re(null),X({...kd}),N("identification"),Ye(),et(),ue(!0)},fe=w=>{Re(w),X({...kd,assetId:w.assetId||"",name:w.name||"",assetType:w.assetType||"Laptop",category:w.category||"",subcategory:w.subcategory||"",status:w.status||"In Use",serial:w.serial||"",model:w.model||"",assignedToId:w.assignedToId?String(w.assignedToId):"",purchaseDate:w.purchaseDate?w.purchaseDate.slice(0,10):""}),N("identification"),Ye(),et(),ue(!0)},gt=w=>{const ee=Number(w.id);!Number.isFinite(ee)||ee<=0||l(`/assets/${ee}`)};u.useEffect(()=>{const w=new URLSearchParams(a.search),ee=String(w.get("edit")||"").trim();if(!ee)return;const de=Number(ee);if(!Number.isFinite(de)||de<=0)return;const $e=d.find(Dt=>Number(Dt.id)===de);if(!$e)return;fe($e),w.delete("edit");const re=w.toString();l(re?`/assets?${re}`:"/assets",{replace:!0})},[a.search,d]);const He=w=>w?new Date(w).toISOString():null,At=async()=>{var ee,de;if(!L.assetId.trim()||!L.name.trim()||!L.assetType.trim()||!L.category.trim()||!L.status.trim()){alert("Asset ID, Name, Asset Type, Category, and Status are required.");return}xe(!0);const w={assetId:L.assetId.trim(),name:L.name.trim(),assetType:L.assetType.trim(),category:L.category.trim(),subcategory:L.subcategory.trim()||null,ciType:L.ciType.trim()||null,serial:L.serial.trim()||null,assetTag:L.assetTag.trim()||null,barcode:L.barcode.trim()||null,assignedToId:L.assignedToId?Number(L.assignedToId):null,assignedUserEmail:L.assignedUserEmail.trim()||null,department:L.department.trim()||null,location:L.location.trim()||null,site:L.site.trim()||null,costCentre:L.costCentre.trim()||null,manager:L.manager.trim()||null,assetOwner:L.assetOwner.trim()||null,manufacturer:L.manufacturer.trim()||null,model:L.model.trim()||null,cpu:L.cpu.trim()||null,ram:L.ram.trim()||null,storage:L.storage.trim()||null,macAddress:L.macAddress.trim()||null,ipAddress:L.ipAddress.trim()||null,biosVersion:L.biosVersion.trim()||null,firmware:L.firmware.trim()||null,os:L.os.trim()||null,osVersion:L.osVersion.trim()||null,licenseKey:L.licenseKey.trim()||null,installedSoftware:L.installedSoftwareText?L.installedSoftwareText.split(",").map($e=>$e.trim()).filter(Boolean):[],antivirus:L.antivirus.trim()||null,patchStatus:L.patchStatus.trim()||null,encryption:L.encryption.trim()||null,purchaseDate:He(L.purchaseDate),supplier:L.supplier.trim()||null,poNumber:L.poNumber.trim()||null,invoiceNumber:L.invoiceNumber.trim()||null,purchaseCost:L.purchaseCost?Number(L.purchaseCost):null,warrantyStart:He(L.warrantyStart),warrantyUntil:He(L.warrantyUntil),amcSupport:L.amcSupport.trim()||null,depreciationEnd:He(L.depreciationEnd),status:L.status.trim(),lifecycleStage:L.lifecycleStage.trim()||null,condition:L.condition.trim()||null,deploymentDate:He(L.deploymentDate),lastAuditDate:He(L.lastAuditDate),endOfLife:He(L.endOfLife),disposalDate:He(L.disposalDate),disposalMethod:L.disposalMethod.trim()||null,securityClassification:L.securityClassification.trim()||null,dataSensitivity:L.dataSensitivity.trim()||null,mdmEnrolled:L.mdmEnrolled==="yes",complianceStatus:L.complianceStatus.trim()||null,riskLevel:L.riskLevel.trim()||null,lastSecurityScan:He(L.lastSecurityScan),parentAssetId:L.parentAssetId?Number(L.parentAssetId):null,notes:L.notes.trim()||null,linkedTicketIds:L.linkedTicketIds,changeIds:L.changeIds,problemIds:L.problemIds,serviceIds:L.serviceIds};try{Ne?await xh(Ne.id,w):await OP(w),ue(!1),Re(null),await _e()}catch($e){alert(((de=(ee=$e==null?void 0:$e.response)==null?void 0:ee.data)==null?void 0:de.error)||($e==null?void 0:$e.message)||"Failed to save asset")}finally{xe(!1)}},mt=w=>w.field==="assigned"&&w.value==="assigned"?d.filter(ee=>!!(ee.assignedTo||ee.assignedToId)).length:w.field==="assigned"&&w.value==="unassigned"?d.filter(ee=>!ee.assignedTo&&!ee.assignedToId).length:w.field==="status"&&String(w.value||"").toLowerCase()==="all"?d.length:w.field==="status"?d.filter(ee=>String(ee.status||"").toLowerCase()===String(w.value||"").toLowerCase()).length:w.field==="category"?d.filter(ee=>String(ee.category||"").toLowerCase()===String(w.value||"").toLowerCase()).length:0,Ut=w=>d.filter(ee=>ct(rt(ee))===ct(w)).length,T=w=>{const ee=yt[w]||[];return d.filter(de=>ee.some($e=>ct($e)===ct(rt(de)))).length},Se=w=>{const ee=ct(w),de={width:13,height:13,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2};return ee.includes("server")||ee.includes("database")?n.jsxs("svg",{...de,children:[n.jsx("rect",{x:"4",y:"4",width:"16",height:"6",rx:"1.5"}),n.jsx("rect",{x:"4",y:"14",width:"16",height:"6",rx:"1.5"}),n.jsx("circle",{cx:"8",cy:"7",r:"0.8",fill:"currentColor"}),n.jsx("circle",{cx:"8",cy:"17",r:"0.8",fill:"currentColor"})]}):ee.includes("laptop")||ee.includes("workstation")?n.jsxs("svg",{...de,children:[n.jsx("rect",{x:"5",y:"5",width:"14",height:"10",rx:"1.5"}),n.jsx("path",{d:"M3 19h18"})]}):ee.includes("mobile")||ee.includes("tablet")?n.jsxs("svg",{...de,children:[n.jsx("rect",{x:"8",y:"3",width:"8",height:"18",rx:"2"}),n.jsx("circle",{cx:"12",cy:"17.5",r:"0.8",fill:"currentColor"})]}):ee.includes("monitor")?n.jsxs("svg",{...de,children:[n.jsx("rect",{x:"4",y:"5",width:"16",height:"11",rx:"1.5"}),n.jsx("path",{d:"M10 19h4"})]}):ee.includes("printer")?n.jsxs("svg",{...de,children:[n.jsx("rect",{x:"7",y:"3",width:"10",height:"5",rx:"1"}),n.jsx("rect",{x:"5",y:"9",width:"14",height:"8",rx:"1.5"}),n.jsx("rect",{x:"8",y:"14",width:"8",height:"6",rx:"1"})]}):ee.includes("router")?n.jsxs("svg",{...de,children:[n.jsx("rect",{x:"4",y:"12",width:"16",height:"6",rx:"2"}),n.jsx("path",{d:"M9 12a3 3 0 0 1 6 0"}),n.jsx("circle",{cx:"9",cy:"15",r:"0.8",fill:"currentColor"}),n.jsx("circle",{cx:"12",cy:"15",r:"0.8",fill:"currentColor"}),n.jsx("circle",{cx:"15",cy:"15",r:"0.8",fill:"currentColor"})]}):ee.includes("application")||ee.includes("business")?n.jsxs("svg",{...de,children:[n.jsx("rect",{x:"4",y:"4",width:"16",height:"16",rx:"2"}),n.jsx("path",{d:"M8 8h8M8 12h8M8 16h5"})]}):n.jsxs("svg",{...de,children:[n.jsx("circle",{cx:"12",cy:"12",r:"8"}),n.jsx("path",{d:"M12 8v8M8 12h8"})]})},ke=hn,Pe=[{key:"assetType",label:"Assets by Asset Type",icon:"AT"},{key:"assetGroup",label:"Assets by Asset Group",icon:"AG"},{key:"ownership",label:"Assets by Ownership",icon:"OW"},{key:"allAssets",label:"All Assets",icon:"AL"}],Xe=Pe.find(w=>w.key===se)||Pe[0],dt=!K&&c?Mi.createPortal(n.jsxs("aside",{className:"asset-left-panel",children:[n.jsxs("div",{className:"queue-header",children:[n.jsx("div",{className:"queue-title-icon","aria-hidden":"true",children:n.jsx("svg",{viewBox:"0 0 24 24",width:"18",height:"18",fill:"none",stroke:"currentColor",strokeWidth:"2",children:n.jsx("path",{d:"M3 7a2 2 0 0 1 2-2h5l2 2h7a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V7z"})})}),n.jsx("div",{className:"queue-title",children:n.jsxs("div",{className:"queue-title-top",children:[n.jsx("button",{className:"queue-title-btn",onClick:()=>ye(!0),title:"Select asset view",children:n.jsx("div",{className:"queue-title-text",children:Xe.label})}),n.jsx("button",{className:"queue-edit-btn",onClick:()=>ye(!0),title:"Change asset queue view",children:n.jsxs("svg",{viewBox:"0 0 24 24",width:"13",height:"13",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[n.jsx("path",{d:"M12 20h9"}),n.jsx("path",{d:"M16.5 3.5a2.1 2.1 0 0 1 3 3L7 19l-4 1 1-4Z"})]})})]})}),n.jsx("button",{className:"queue-collapse-btn",title:"Hide Menu",onClick:()=>W(!0),children:n.jsxs("svg",{viewBox:"0 0 24 24",width:"14",height:"14",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[n.jsx("polyline",{points:"13 18 7 12 13 6"}),n.jsx("polyline",{points:"19 18 13 12 19 6"})]})})]}),n.jsx("div",{className:"queue-list",children:Ze?n.jsx(n.Fragment,{children:Pe.map(w=>n.jsxs("div",{className:`queue-item${se===w.key?" queue-item-active":""}`,onClick:()=>{ze(w.key),le({type:"all"}),ye(!1)},children:[n.jsx("div",{className:"queue-avatar",children:w.icon}),n.jsx("div",{className:"queue-name",children:w.label})]},w.key))}):se==="assetType"?n.jsx(n.Fragment,{children:St.length===0?n.jsxs("div",{className:"queue-item",children:[n.jsx("div",{className:"queue-avatar",children:"i"}),n.jsx("div",{className:"queue-name",children:"No asset types"})]}):St.map(w=>n.jsxs("div",{className:`queue-item${Fe.type==="assetType"&&Fe.value===w?" queue-item-active":""}`,onClick:()=>le(ee=>ee.type==="assetType"&&ee.value===w?{type:"all"}:{type:"assetType",value:w}),children:[n.jsx("div",{className:"queue-avatar",children:Se(w)}),n.jsx("div",{className:"queue-name",children:w}),n.jsx("div",{className:"queue-count",children:Ut(w)})]},w))}):se==="assetGroup"?n.jsx(n.Fragment,{children:Object.keys(yt).length===0?n.jsxs("div",{className:"queue-item",children:[n.jsx("div",{className:"queue-avatar",children:"i"}),n.jsx("div",{className:"queue-name",children:"No asset groups"})]}):Object.entries(yt).map(([w,ee])=>{const de=Me.includes(w);return n.jsxs(oe.Fragment,{children:[n.jsxs("div",{className:`queue-item queue-item-group${Fe.type==="assetGroup"&&Fe.value===w?" queue-item-active":""}`,onClick:()=>{G($e=>$e.includes(w)?$e.filter(re=>re!==w):[...$e,w]),le($e=>$e.type==="assetGroup"&&$e.value===w?{type:"all"}:{type:"assetGroup",value:w})},children:[n.jsx("div",{className:"queue-avatar",children:n.jsx("span",{className:`queue-caret${de?" queue-caret-down":""}`,children:">"})}),n.jsx("div",{className:"queue-name",children:w}),n.jsx("div",{className:"queue-count",children:T(w)})]}),de&&ee.map($e=>n.jsxs("div",{className:`queue-item queue-item-child${Fe.type==="assetType"&&Fe.value===$e?" queue-item-active":""}`,onClick:()=>le(re=>re.type==="assetType"&&re.value===$e?{type:"all"}:{type:"assetType",value:$e}),children:[n.jsx("div",{className:"queue-avatar",children:Se($e)}),n.jsx("div",{className:"queue-name",children:$e}),n.jsx("div",{className:"queue-count",children:Ut($e)})]},`${w}-${$e}`))]},w)})}):se==="ownership"?n.jsx(n.Fragment,{children:ne.filter(w=>w.field==="assigned").map(w=>{var ee;return n.jsxs("div",{className:`queue-item${Fe.type==="rule"&&Fe.value===w.id?" queue-item-active":""}`,onClick:()=>le(de=>de.type==="rule"&&de.value===w.id?{type:"all"}:{type:"rule",value:w.id}),children:[n.jsx("div",{className:"queue-avatar",children:((ee=w.label.trim()[0])==null?void 0:ee.toUpperCase())||"A"}),n.jsx("div",{className:"queue-name",children:w.label}),n.jsx("div",{className:"queue-count",children:mt(w)})]},w.id)})}):n.jsxs("div",{className:`queue-item${Fe.type==="all"?" queue-item-active":""}`,onClick:()=>le({type:"all"}),children:[n.jsx("div",{className:"queue-avatar",children:Xe.icon}),n.jsx("div",{className:"queue-name",children:"All Assets"}),n.jsx("div",{className:"queue-count",children:d.length})]})})]}),c):null;return n.jsxs(n.Fragment,{children:[dt,n.jsxs("div",{className:"assets-view",children:[n.jsxs("div",{className:"assets-header",children:[n.jsxs("div",{className:"assets-title",children:[n.jsx("h2",{children:"Assets"}),n.jsx("p",{children:"Track hardware and lifecycle status"})]}),n.jsxs("div",{className:"assets-actions",children:[n.jsx("input",{className:"assets-search",placeholder:"Search assets...",value:_,onChange:w=>{F(w.target.value),H(1)}}),n.jsx("button",{className:"assets-primary-btn",onClick:tn,children:"+ New Asset"})]})]}),ke.length?n.jsx("div",{className:"assets-list-detail-layout",children:n.jsxs("section",{className:"asset-table-panel",children:[n.jsxs("div",{className:"asset-table-header-row",children:[n.jsx("div",{children:"Asset ID"}),n.jsx("div",{children:"Name"}),n.jsx("div",{children:"Category"}),n.jsx("div",{children:"Status"})]}),ke.map(w=>n.jsxs("button",{type:"button",className:"asset-table-row",onClick:()=>gt(w),children:[n.jsx("div",{className:"asset-table-cell",children:w.assetId||`AST-${w.id}`}),n.jsx("div",{className:"asset-table-cell",children:w.name}),n.jsx("div",{className:"asset-table-cell",children:w.category||"-"}),n.jsx("div",{className:"asset-table-cell",children:n.jsx("span",{className:`asset-status ${String(w.status||"").toLowerCase().replace(/\s+/g,"-")}`,children:w.status||"Active"})})]},w.id))]})}):n.jsx("div",{className:"assets-empty",children:"No assets found."}),J&&n.jsx("div",{className:"modal-overlay",onClick:()=>ue(!1),children:n.jsxs("div",{className:"modal-content asset-modal",onClick:w=>w.stopPropagation(),children:[n.jsxs("div",{className:"modal-header",children:[n.jsx("h2",{children:Ne?"Edit Asset":"New Asset"}),n.jsx("button",{className:"modal-close",onClick:()=>ue(!1),children:""})]}),n.jsxs("div",{className:"modal-body",children:[n.jsx("div",{className:"asset-tabs",children:QP.map(w=>n.jsx("button",{className:`asset-tab ${ce===w.id?"active":""}`,onClick:()=>N(w.id),children:w.label},w.id))}),ce==="identification"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"form-row",children:[n.jsxs("div",{className:"form-section",children:[n.jsx("label",{className:"form-label",children:"Asset ID *"}),n.jsx("input",{className:"form-input",value:L.assetId,onChange:w=>X({...L,assetId:w.target.value})})]}),n.jsxs("div",{className:"form-section",children:[n.jsx("label",{className:"form-label",children:"Asset Name *"}),n.jsx("input",{className:"form-input",value:L.name,onChange:w=>X({...L,name:w.target.value})})]})]}),n.jsxs("div",{className:"form-row",children:[n.jsxs("div",{className:"form-section",children:[n.jsx("label",{className:"form-label",children:"Asset Type *"}),n.jsx("input",{className:"form-input",value:L.assetType,onChange:w=>X({...L,assetType:w.target.value})})]}),n.jsxs("div",{className:"form-section",children:[n.jsx("label",{className:"form-label",children:"Category *"}),n.jsx("input",{className:"form-input",value:L.category,onChange:w=>X({...L,category:w.target.value})})]})]}),n.jsxs("div",{className:"form-row",children:[n.jsxs("div",{className:"form-section",children:[n.jsx("label",{className:"form-label",children:"Sub-Category"}),n.jsx("input",{className:"form-input",value:L.subcategory,onChange:w=>X({...L,subcategory:w.target.value})})]}),n.jsxs("div",{className:"form-section",children:[n.jsx("label",{className:"form-label",children:"CI Type"}),n.jsx("input",{className:"form-input",value:L.ciType,onChange:w=>X({...L,ciType:w.target.value})})]})]}),n.jsxs("div",{className:"form-row",children:[n.jsxs("div",{className:"form-section",children:[n.jsx("label",{className:"form-label",children:"Serial Number"}),n.jsx("input",{className:"form-input",value:L.serial,onChange:w=>X({...L,serial:w.target.value})})]}),n.jsxs("div",{className:"form-section",children:[n.jsx("label",{className:"form-label",children:"Asset Tag"}),n.jsx("input",{className:"form-input",value:L.assetTag,onChange:w=>X({...L,assetTag:w.target.value})})]})]}),n.jsxs("div",{className:"form-row",children:[n.jsxs("div",{className:"form-section",children:[n.jsx("label",{className:"form-label",children:"Barcode / QR"}),n.jsx("input",{className:"form-input",value:L.barcode,onChange:w=>X({...L,barcode:w.target.value})})]}),n.jsxs("div",{className:"form-section",children:[n.jsx("label",{className:"form-label",children:"Status *"}),n.jsxs("select",{className:"form-select",value:L.status,onChange:w=>X({...L,status:w.target.value}),children:[n.jsx("option",{children:"In Use"}),n.jsx("option",{children:"Available"}),n.jsx("option",{children:"In Repair"}),n.jsx("option",{children:"Retired"}),n.jsx("option",{children:"Disposed"})]})]})]})]}),ce==="ownership"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"form-row",children:[n.jsxs("div",{className:"form-section",children:[n.jsx("label",{className:"form-label",children:"Assigned User"}),n.jsx("input",{className:"form-input",placeholder:"Search users...",onChange:w=>Ye(w.target.value)}),n.jsxs("select",{className:"form-select",value:L.assignedToId,onChange:w=>X({...L,assignedToId:w.target.value}),children:[n.jsx("option",{value:"",children:"Unassigned"}),S.map(w=>n.jsxs("option",{value:w.id,children:[w.name||w.email," (",w.email,")"]},w.id))]})]}),n.jsxs("div",{className:"form-section",children:[n.jsx("label",{className:"form-label",children:"User Email"}),n.jsx("input",{className:"form-input",value:L.assignedUserEmail,onChange:w=>X({...L,assignedUserEmail:w.target.value})})]})]}),n.jsxs("div",{className:"form-row",children:[n.jsxs("div",{className:"form-section",children:[n.jsx("label",{className:"form-label",children:"Department"}),n.jsx("input",{className:"form-input",value:L.department,onChange:w=>X({...L,department:w.target.value})})]}),n.jsxs("div",{className:"form-section",children:[n.jsx("label",{className:"form-label",children:"Location"}),n.jsx("input",{className:"form-input",value:L.location,onChange:w=>X({...L,location:w.target.value})})]})]}),n.jsxs("div",{className:"form-row",children:[n.jsxs("div",{className:"form-section",children:[n.jsx("label",{className:"form-label",children:"Site"}),n.jsx("input",{className:"form-input",value:L.site,onChange:w=>X({...L,site:w.target.value})})]}),n.jsxs("div",{className:"form-section",children:[n.jsx("label",{className:"form-label",children:"Cost Centre"}),n.jsx("input",{className:"form-input",value:L.costCentre,onChange:w=>X({...L,costCentre:w.target.value})})]})]}),n.jsxs("div",{className:"form-row",children:[n.jsxs("div",{className:"form-section",children:[n.jsx("label",{className:"form-label",children:"Manager"}),n.jsx("input",{className:"form-input",value:L.manager,onChange:w=>X({...L,manager:w.target.value})})]}),n.jsxs("div",{className:"form-section",children:[n.jsx("label",{className:"form-label",children:"Asset Owner"}),n.jsx("input",{className:"form-input",value:L.assetOwner,onChange:w=>X({...L,assetOwner:w.target.value})})]})]})]}),ce==="hardware"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"form-row",children:[n.jsxs("div",{className:"form-section",children:[n.jsx("label",{className:"form-label",children:"Manufacturer"}),n.jsx("input",{className:"form-input",value:L.manufacturer,onChange:w=>X({...L,manufacturer:w.target.value})})]}),n.jsxs("div",{className:"form-section",children:[n.jsx("label",{className:"form-label",children:"Model"}),n.jsx("input",{className:"form-input",value:L.model,onChange:w=>X({...L,model:w.target.value})})]})]}),n.jsxs("div",{className:"form-row",children:[n.jsxs("div",{className:"form-section",children:[n.jsx("label",{className:"form-label",children:"CPU"}),n.jsx("input",{className:"form-input",value:L.cpu,onChange:w=>X({...L,cpu:w.target.value})})]}),n.jsxs("div",{className:"form-section",children:[n.jsx("label",{className:"form-label",children:"RAM"}),n.jsx("input",{className:"form-input",value:L.ram,onChange:w=>X({...L,ram:w.target.value})})]})]}),n.jsxs("div",{className:"form-row",children:[n.jsxs("div",{className:"form-section",children:[n.jsx("label",{className:"form-label",children:"Storage"}),n.jsx("input",{className:"form-input",value:L.storage,onChange:w=>X({...L,storage:w.target.value})})]}),n.jsxs("div",{className:"form-section",children:[n.jsx("label",{className:"form-label",children:"MAC Address"}),n.jsx("input",{className:"form-input",value:L.macAddress,onChange:w=>X({...L,macAddress:w.target.value})})]})]}),n.jsxs("div",{className:"form-row",children:[n.jsxs("div",{className:"form-section",children:[n.jsx("label",{className:"form-label",children:"IP Address"}),n.jsx("input",{className:"form-input",value:L.ipAddress,onChange:w=>X({...L,ipAddress:w.target.value})})]}),n.jsxs("div",{className:"form-section",children:[n.jsx("label",{className:"form-label",children:"BIOS Version"}),n.jsx("input",{className:"form-input",value:L.biosVersion,onChange:w=>X({...L,biosVersion:w.target.value})})]})]}),n.jsx("div",{className:"form-row",children:n.jsxs("div",{className:"form-section",children:[n.jsx("label",{className:"form-label",children:"Firmware"}),n.jsx("input",{className:"form-input",value:L.firmware,onChange:w=>X({...L,firmware:w.target.value})})]})})]}),ce==="software"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"form-row",children:[n.jsxs("div",{className:"form-section",children:[n.jsx("label",{className:"form-label",children:"OS"}),n.jsx("input",{className:"form-input",value:L.os,onChange:w=>X({...L,os:w.target.value})})]}),n.jsxs("div",{className:"form-section",children:[n.jsx("label",{className:"form-label",children:"OS Version"}),n.jsx("input",{className:"form-input",value:L.osVersion,onChange:w=>X({...L,osVersion:w.target.value})})]})]}),n.jsxs("div",{className:"form-row",children:[n.jsxs("div",{className:"form-section",children:[n.jsx("label",{className:"form-label",children:"License Key"}),n.jsx("input",{className:"form-input",value:L.licenseKey,onChange:w=>X({...L,licenseKey:w.target.value})})]}),n.jsxs("div",{className:"form-section",children:[n.jsx("label",{className:"form-label",children:"Installed Software (comma separated)"}),n.jsx("input",{className:"form-input",value:L.installedSoftwareText,onChange:w=>X({...L,installedSoftwareText:w.target.value})})]})]}),n.jsxs("div",{className:"form-row",children:[n.jsxs("div",{className:"form-section",children:[n.jsx("label",{className:"form-label",children:"Antivirus"}),n.jsx("input",{className:"form-input",value:L.antivirus,onChange:w=>X({...L,antivirus:w.target.value})})]}),n.jsxs("div",{className:"form-section",children:[n.jsx("label",{className:"form-label",children:"Patch Status"}),n.jsx("input",{className:"form-input",value:L.patchStatus,onChange:w=>X({...L,patchStatus:w.target.value})})]})]}),n.jsx("div",{className:"form-row",children:n.jsxs("div",{className:"form-section",children:[n.jsx("label",{className:"form-label",children:"Encryption"}),n.jsx("input",{className:"form-input",value:L.encryption,onChange:w=>X({...L,encryption:w.target.value})})]})})]}),ce==="financial"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"form-row",children:[n.jsxs("div",{className:"form-section",children:[n.jsx("label",{className:"form-label",children:"Purchase Date"}),n.jsx("input",{className:"form-input",type:"date",value:L.purchaseDate,onChange:w=>X({...L,purchaseDate:w.target.value})})]}),n.jsxs("div",{className:"form-section",children:[n.jsx("label",{className:"form-label",children:"Supplier"}),n.jsx("input",{className:"form-input",value:L.supplier,onChange:w=>X({...L,supplier:w.target.value})})]})]}),n.jsxs("div",{className:"form-row",children:[n.jsxs("div",{className:"form-section",children:[n.jsx("label",{className:"form-label",children:"PO Number"}),n.jsx("input",{className:"form-input",value:L.poNumber,onChange:w=>X({...L,poNumber:w.target.value})})]}),n.jsxs("div",{className:"form-section",children:[n.jsx("label",{className:"form-label",children:"Invoice Number"}),n.jsx("input",{className:"form-input",value:L.invoiceNumber,onChange:w=>X({...L,invoiceNumber:w.target.value})})]})]}),n.jsxs("div",{className:"form-row",children:[n.jsxs("div",{className:"form-section",children:[n.jsx("label",{className:"form-label",children:"Purchase Cost"}),n.jsx("input",{className:"form-input",type:"number",value:L.purchaseCost,onChange:w=>X({...L,purchaseCost:w.target.value})})]}),n.jsxs("div",{className:"form-section",children:[n.jsx("label",{className:"form-label",children:"Warranty Start"}),n.jsx("input",{className:"form-input",type:"date",value:L.warrantyStart,onChange:w=>X({...L,warrantyStart:w.target.value})})]})]}),n.jsxs("div",{className:"form-row",children:[n.jsxs("div",{className:"form-section",children:[n.jsx("label",{className:"form-label",children:"Warranty End"}),n.jsx("input",{className:"form-input",type:"date",value:L.warrantyUntil,onChange:w=>X({...L,warrantyUntil:w.target.value})})]}),n.jsxs("div",{className:"form-section",children:[n.jsx("label",{className:"form-label",children:"AMC / Support"}),n.jsx("input",{className:"form-input",value:L.amcSupport,onChange:w=>X({...L,amcSupport:w.target.value})})]})]}),n.jsx("div",{className:"form-row",children:n.jsxs("div",{className:"form-section",children:[n.jsx("label",{className:"form-label",children:"Depreciation End"}),n.jsx("input",{className:"form-input",type:"date",value:L.depreciationEnd,onChange:w=>X({...L,depreciationEnd:w.target.value})})]})})]}),ce==="relationships"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"form-section",children:[n.jsx("label",{className:"form-label",children:"Linked Tickets"}),n.jsx("select",{multiple:!0,className:"form-select",value:L.linkedTicketIds,onChange:w=>X({...L,linkedTicketIds:Array.from(w.target.selectedOptions).map(ee=>ee.value)}),children:x.map(w=>n.jsxs("option",{value:w.ticketId||w.id,children:[w.ticketId||w.id," - ",w.subject||w.description||""]},w.ticketId||w.id))})]}),n.jsxs("div",{className:"form-section",children:[n.jsx("label",{className:"form-label",children:"Linked Changes"}),n.jsx("select",{multiple:!0,className:"form-select",value:L.changeIds,onChange:w=>X({...L,changeIds:Array.from(w.target.selectedOptions).map(ee=>Number(ee.value))}),children:M.map(w=>n.jsxs("option",{value:w.id,children:[w.code," - ",w.title]},w.id))})]}),n.jsxs("div",{className:"form-section",children:[n.jsx("label",{className:"form-label",children:"Linked Problems"}),n.jsx("select",{multiple:!0,className:"form-select",value:L.problemIds,onChange:w=>X({...L,problemIds:Array.from(w.target.selectedOptions).map(ee=>Number(ee.value))}),children:j.map(w=>n.jsxs("option",{value:w.id,children:[w.code," - ",w.title]},w.id))})]}),n.jsxs("div",{className:"form-section",children:[n.jsx("label",{className:"form-label",children:"Related Services"}),n.jsx("select",{multiple:!0,className:"form-select",value:L.serviceIds,onChange:w=>X({...L,serviceIds:Array.from(w.target.selectedOptions).map(ee=>Number(ee.value))}),children:E.map(w=>n.jsx("option",{value:w.id,children:w.name},w.id))})]}),n.jsxs("div",{className:"form-section",children:[n.jsx("label",{className:"form-label",children:"Parent Asset"}),n.jsxs("select",{className:"form-select",value:L.parentAssetId,onChange:w=>X({...L,parentAssetId:w.target.value}),children:[n.jsx("option",{value:"",children:"None"}),g.map(w=>n.jsx("option",{value:w.id,children:w.assetId||w.name},w.id))]})]})]}),ce==="notes"&&n.jsx(n.Fragment,{children:n.jsxs("div",{className:"form-section",children:[n.jsx("label",{className:"form-label",children:"Notes"}),n.jsx("textarea",{className:"form-input",style:{minHeight:120},value:L.notes,onChange:w=>X({...L,notes:w.target.value})})]})})]}),n.jsxs("div",{className:"modal-footer",children:[n.jsx("button",{className:"btn-cancel",onClick:()=>ue(!1),children:"Cancel"}),n.jsx("button",{className:"btn-submit",disabled:Y,onClick:At,children:Y?"Saving...":"Save Asset"})]})]})})]})]})}function JP(){var Fe;const{user:e}=An(),{assetId:t}=Qu(),s=Wn(),r=typeof document<"u"?document.getElementById("ticket-left-panel"):null,[i,a]=oe.useState(null),[l,c]=oe.useState(!1),[d,p]=oe.useState(!1),[g,v]=oe.useState(!1),[S,O]=oe.useState(""),[x,y]=oe.useState(!1),[M,k]=oe.useState(""),[j,C]=oe.useState([]),[E,B]=oe.useState(""),[_,F]=oe.useState(!1),[J,ue]=oe.useState(!1),[Y,xe]=oe.useState("ok"),[Ne,Re]=oe.useState("Unassigned"),[L,X]=oe.useState(()=>typeof window>"u"?!1:window.innerWidth<=1100),ce=Number(t);oe.useEffect(()=>(document.body.classList.add("assets-view-active"),()=>document.body.classList.remove("assets-view-active")),[]),oe.useEffect(()=>{const le="assets-queue-expanded",Me="assets-queue-collapsed";return L?(document.body.classList.remove(le),document.body.classList.add(Me)):(document.body.classList.add(le),document.body.classList.remove(Me)),()=>{document.body.classList.remove(le),document.body.classList.remove(Me)}},[L]),oe.useEffect(()=>{const le=Me=>{const G=Me.detail;!G||G.target!=="assets"||G.action==="toggle-left-panel"&&X(he=>!he)};return window.addEventListener("shared-toolbar-action",le),()=>window.removeEventListener("shared-toolbar-action",le)},[]),oe.useEffect(()=>{if(!Number.isFinite(ce)||ce<=0){O("Invalid asset id");return}let le=!1;return(async()=>{var G,he;try{c(!0),O("");const we=await Yp(ce);if(le)return;a(we)}catch(we){if(le)return;O(((he=(G=we==null?void 0:we.response)==null?void 0:G.data)==null?void 0:he.error)||(we==null?void 0:we.message)||"Failed to load asset")}finally{le||c(!1)}})(),()=>{le=!0}},[ce]),oe.useEffect(()=>{if(!x)return;let le=!1;return(async()=>{try{const G=await ua({q:M,limit:50});if(le)return;const he=Array.isArray(G)?G:(G==null?void 0:G.items)||[];C(he)}catch{le||C([])}})(),()=>{le=!0}},[x,M]);const N=()=>{i!=null&&i.id&&s(`/assets?edit=${i.id}`)},K=async()=>{var le,Me;if(i!=null&&i.id&&window.confirm(`Delete asset "${(i==null?void 0:i.name)||(i==null?void 0:i.assetId)||i.id}"? This cannot be undone.`))try{p(!0),await $P(Number(i.id)),s("/assets")}catch(G){O(((Me=(le=G==null?void 0:G.response)==null?void 0:le.data)==null?void 0:Me.error)||(G==null?void 0:G.message)||"Failed to delete asset")}finally{p(!1)}},W=()=>{var le;k(""),B((le=i==null?void 0:i.assignedTo)!=null&&le.id?String(i.assignedTo.id):i!=null&&i.assignedToId?String(i.assignedToId):""),y(!0)},ne=async()=>{var we,$;if(!(i!=null&&i.id))return;const le=E?Number(E):null,Me=j.find(V=>V.id===le),G=!!(i!=null&&i.assignedTo||i!=null&&i.assignedToId),he=le?G?"Reassign":"Assign":"Reassign";try{v(!0),O(""),await xh(Number(i.id),{assignedToId:le,assignedUserEmail:le&&(Me==null?void 0:Me.email)||null});const V=await Yp(Number(i.id));a(V),y(!1);try{await Tu({type:"Service Request",priority:"Medium",category:"Service Request",subcategory:he,subject:`${he} asset ${(V==null?void 0:V.assetId)||(V==null?void 0:V.name)||(i==null?void 0:i.assetId)||(i==null?void 0:i.name)||(i==null?void 0:i.id)}`,description:`${he} action executed for asset ${(V==null?void 0:V.assetId)||(V==null?void 0:V.name)||(i==null?void 0:i.id)}. Assigned user: ${le?(Me==null?void 0:Me.email)||`User #${le}`:"Unassigned"}.`,requesterId:e!=null&&e.id?Number(e.id):void 0,requesterEmail:(e==null?void 0:e.email)||void 0})}catch(ve){console.warn("Failed to create service request ticket for assign/reassign action",ve)}}catch(V){O((($=(we=V==null?void 0:V.response)==null?void 0:we.data)==null?void 0:$.error)||(V==null?void 0:V.message)||"Failed to assign asset")}finally{v(!1)}},R=()=>{xe("ok"),Re("Unassigned"),F(!0)},Q=async()=>{var le,Me;if(i!=null&&i.id)try{ue(!0),O(""),await xh(Number(i.id),{status:Ne,condition:Y==="ok"?"Good":"Faulty"});const G=await Yp(Number(i.id));a(G),F(!1);try{await Tu({type:"Service Request",priority:"Medium",category:"Service Request",subcategory:"Retire",subject:`Retire asset ${(G==null?void 0:G.assetId)||(G==null?void 0:G.name)||(i==null?void 0:i.id)}`,description:`Retire action executed for asset ${(G==null?void 0:G.assetId)||(G==null?void 0:G.name)||(i==null?void 0:i.id)}. Condition: ${Y==="ok"?"OK":"Not OK"}. Status set to: ${Ne}.`,requesterId:e!=null&&e.id?Number(e.id):void 0,requesterEmail:(e==null?void 0:e.email)||void 0})}catch(he){console.warn("Failed to create service request ticket for retire action",he)}}catch(G){O(((Me=(le=G==null?void 0:G.response)==null?void 0:le.data)==null?void 0:Me.error)||(G==null?void 0:G.message)||"Failed to retire asset")}finally{ue(!1)}},je=le=>{if(!le)return"-";const Me=new Date(le);return Number.isNaN(Me.getTime())?"-":Me.toLocaleDateString("en-GB",{day:"2-digit",month:"short",year:"numeric"})},se=le=>{if(le==null)return"-";const Me=String(le).trim();return Me||"-"},ze=()=>i!=null&&i.assignedTo?i.assignedTo.name||i.assignedTo.email:i!=null&&i.assignedToId?`User #${i.assignedToId}`:"Unassigned",Ze=()=>{const le=Array.isArray(i==null?void 0:i.installedSoftware)?i.installedSoftware:[];return le.length?le.filter(Boolean).join(", "):se(i==null?void 0:i.installedSoftwareText)},ye=()=>{const le=String((i==null?void 0:i.ownershipType)||"").trim().toLowerCase();if(le==="rental"||le==="rent"||le==="leased"||le==="lease")return"Rental";if(le==="own"||le==="owned")return"Own";const Me=`${(i==null?void 0:i.supplier)||""} ${(i==null?void 0:i.amcSupport)||""}`.toLowerCase();return Me.includes("rent")||Me.includes("lease")?"Rental":"Own"},lt=le=>{const Me=String(le||"").trim().toLowerCase(),G={width:30,height:30,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2};return Me.includes("server")||Me.includes("database")?n.jsxs("svg",{...G,children:[n.jsx("rect",{x:"4",y:"4",width:"16",height:"6",rx:"1.5"}),n.jsx("rect",{x:"4",y:"14",width:"16",height:"6",rx:"1.5"}),n.jsx("circle",{cx:"8",cy:"7",r:"0.8",fill:"currentColor"}),n.jsx("circle",{cx:"8",cy:"17",r:"0.8",fill:"currentColor"})]}):Me.includes("laptop")||Me.includes("workstation")||Me.includes("hardware")?n.jsxs("svg",{...G,children:[n.jsx("rect",{x:"5",y:"5",width:"14",height:"10",rx:"1.5"}),n.jsx("path",{d:"M3 19h18"})]}):Me.includes("mobile")||Me.includes("tablet")?n.jsxs("svg",{...G,children:[n.jsx("rect",{x:"8",y:"3",width:"8",height:"18",rx:"2"}),n.jsx("circle",{cx:"12",cy:"17.5",r:"0.8",fill:"currentColor"})]}):n.jsxs("svg",{...G,children:[n.jsx("circle",{cx:"12",cy:"12",r:"8"}),n.jsx("path",{d:"M12 8v8M8 12h8"})]})},We=!L&&r?Mi.createPortal(n.jsxs("aside",{className:"asset-left-panel",children:[n.jsxs("div",{className:"queue-header",children:[n.jsx("div",{className:"queue-title-icon","aria-hidden":"true",children:n.jsx("svg",{viewBox:"0 0 24 24",width:"18",height:"18",fill:"none",stroke:"currentColor",strokeWidth:"2",children:n.jsx("path",{d:"M3 7a2 2 0 0 1 2-2h5l2 2h7a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V7z"})})}),n.jsx("div",{className:"queue-title",children:n.jsx("div",{className:"queue-title-top",children:n.jsx("button",{className:"queue-title-btn",onClick:()=>s("/assets"),title:"Go to assets list",children:n.jsx("div",{className:"queue-title-text",children:"Assets"})})})}),n.jsx("button",{className:"queue-collapse-btn",title:"Hide Menu",onClick:()=>X(!0),children:n.jsxs("svg",{viewBox:"0 0 24 24",width:"14",height:"14",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[n.jsx("polyline",{points:"13 18 7 12 13 6"}),n.jsx("polyline",{points:"19 18 13 12 19 6"})]})})]}),n.jsx("div",{className:"queue-list",children:n.jsxs("div",{className:"queue-item queue-item-active",onClick:()=>s("/assets"),children:[n.jsx("div",{className:"queue-avatar",children:"AL"}),n.jsx("div",{className:"queue-name",children:"All Assets"})]})})]}),r):null;return n.jsxs(n.Fragment,{children:[We,n.jsxs("div",{className:"asset-detail-shell",children:[l?n.jsx("div",{className:"asset-detail-feedback",children:"Loading asset details..."}):null,S?n.jsx("div",{className:"asset-detail-feedback error",children:S}):null,!l&&i?n.jsxs("section",{className:"asset-detail-surface",children:[n.jsxs("div",{className:"asset-detail-head",children:[n.jsx("div",{className:"asset-card-icon",children:lt(i.assetType||i.category)}),n.jsxs("div",{className:"asset-detail-head-main",children:[n.jsxs("div",{className:"asset-card-title-row",children:[n.jsx("h3",{children:i.assetId||i.name||t}),n.jsx("span",{className:`asset-status ${String(i.status||"").toLowerCase().replace(/\s+/g,"-")}`,children:i.status||"Active"})]}),n.jsx("div",{className:"asset-card-divider"})]})]}),n.jsxs("div",{className:"asset-detail-grid",children:[n.jsxs("div",{className:"asset-detail-col",children:[n.jsxs("div",{children:[n.jsx("span",{children:"Asset ID:"}),n.jsx("strong",{children:se(i.assetId||t)})]}),n.jsxs("div",{children:[n.jsx("span",{children:"Asset Name:"}),n.jsx("strong",{children:se(i.name)})]}),n.jsxs("div",{children:[n.jsx("span",{children:"Asset Type:"}),n.jsx("strong",{children:se(i.assetType)})]}),n.jsxs("div",{children:[n.jsx("span",{children:"Category:"}),n.jsx("strong",{children:se(i.category)})]}),n.jsxs("div",{children:[n.jsx("span",{children:"Sub-Category:"}),n.jsx("strong",{children:se(i.subcategory)})]})]}),n.jsxs("div",{className:"asset-detail-col",children:[n.jsxs("div",{children:[n.jsx("span",{children:"CI Type:"}),n.jsx("strong",{children:se(i.ciType)})]}),n.jsxs("div",{children:[n.jsx("span",{children:"Serial Number:"}),n.jsx("strong",{children:se(i.serial)})]}),n.jsxs("div",{children:[n.jsx("span",{children:"Asset Tag:"}),n.jsx("strong",{children:se(i.assetTag)})]}),n.jsxs("div",{children:[n.jsx("span",{children:"Barcode / QR:"}),n.jsx("strong",{children:se(i.barcode)})]}),n.jsxs("div",{children:[n.jsx("span",{children:"Status:"}),n.jsx("strong",{children:se(i.status)})]})]})]}),n.jsx("div",{className:"asset-detail-section-title",children:"Assigned"}),n.jsxs("div",{className:"asset-detail-grid",children:[n.jsxs("div",{className:"asset-detail-col",children:[n.jsxs("div",{children:[n.jsx("span",{children:"Assigned User:"}),n.jsx("strong",{children:ze()})]}),n.jsxs("div",{children:[n.jsx("span",{children:"User Email:"}),n.jsx("strong",{children:se(i.assignedUserEmail||((Fe=i.assignedTo)==null?void 0:Fe.email))})]}),n.jsxs("div",{children:[n.jsx("span",{children:"Department:"}),n.jsx("strong",{children:se(i.department)})]}),n.jsxs("div",{children:[n.jsx("span",{children:"Location:"}),n.jsx("strong",{children:se(i.location)})]})]}),n.jsxs("div",{className:"asset-detail-col",children:[n.jsxs("div",{children:[n.jsx("span",{children:"Site:"}),n.jsx("strong",{children:se(i.site)})]}),n.jsxs("div",{children:[n.jsx("span",{children:"Manager:"}),n.jsx("strong",{children:se(i.manager)})]})]})]}),n.jsx("div",{className:"asset-detail-section-title",children:"Ownership"}),n.jsxs("div",{className:"asset-detail-grid",children:[n.jsxs("div",{className:"asset-detail-col",children:[n.jsxs("div",{children:[n.jsx("span",{children:"Ownership Type:"}),n.jsx("strong",{children:ye()})]}),n.jsxs("div",{children:[n.jsx("span",{children:"Asset Owner:"}),n.jsx("strong",{children:se(i.assetOwner)})]})]}),n.jsx("div",{className:"asset-detail-col",children:n.jsxs("div",{children:[n.jsx("span",{children:"Cost Centre:"}),n.jsx("strong",{children:se(i.costCentre)})]})})]}),n.jsx("div",{className:"asset-detail-section-title",children:"Hardware"}),n.jsxs("div",{className:"asset-detail-grid",children:[n.jsxs("div",{className:"asset-detail-col",children:[n.jsxs("div",{children:[n.jsx("span",{children:"Manufacturer:"}),n.jsx("strong",{children:se(i.manufacturer)})]}),n.jsxs("div",{children:[n.jsx("span",{children:"Model:"}),n.jsx("strong",{children:se(i.model)})]}),n.jsxs("div",{children:[n.jsx("span",{children:"CPU:"}),n.jsx("strong",{children:se(i.cpu)})]}),n.jsxs("div",{children:[n.jsx("span",{children:"RAM:"}),n.jsx("strong",{children:se(i.ram)})]}),n.jsxs("div",{children:[n.jsx("span",{children:"Storage:"}),n.jsx("strong",{children:se(i.storage)})]})]}),n.jsxs("div",{className:"asset-detail-col",children:[n.jsxs("div",{children:[n.jsx("span",{children:"MAC Address:"}),n.jsx("strong",{children:se(i.macAddress)})]}),n.jsxs("div",{children:[n.jsx("span",{children:"IP Address:"}),n.jsx("strong",{children:se(i.ipAddress)})]}),n.jsxs("div",{children:[n.jsx("span",{children:"BIOS Version:"}),n.jsx("strong",{children:se(i.biosVersion)})]}),n.jsxs("div",{children:[n.jsx("span",{children:"Firmware:"}),n.jsx("strong",{children:se(i.firmware)})]})]})]}),n.jsx("div",{className:"asset-detail-section-title",children:"OS & Software"}),n.jsxs("div",{className:"asset-detail-grid",children:[n.jsxs("div",{className:"asset-detail-col",children:[n.jsxs("div",{children:[n.jsx("span",{children:"OS:"}),n.jsx("strong",{children:se(i.os)})]}),n.jsxs("div",{children:[n.jsx("span",{children:"OS Version:"}),n.jsx("strong",{children:se(i.osVersion)})]}),n.jsxs("div",{children:[n.jsx("span",{children:"License Key:"}),n.jsx("strong",{children:se(i.licenseKey)})]}),n.jsxs("div",{children:[n.jsx("span",{children:"Installed Software:"}),n.jsx("strong",{children:Ze()})]})]}),n.jsxs("div",{className:"asset-detail-col",children:[n.jsxs("div",{children:[n.jsx("span",{children:"Antivirus:"}),n.jsx("strong",{children:se(i.antivirus)})]}),n.jsxs("div",{children:[n.jsx("span",{children:"Patch Status:"}),n.jsx("strong",{children:se(i.patchStatus)})]}),n.jsxs("div",{children:[n.jsx("span",{children:"Encryption:"}),n.jsx("strong",{children:se(i.encryption)})]})]})]}),n.jsx("div",{className:"asset-detail-section-title",children:"Financial"}),n.jsxs("div",{className:"asset-detail-grid",children:[n.jsxs("div",{className:"asset-detail-col",children:[n.jsxs("div",{children:[n.jsx("span",{children:"Purchase Date:"}),n.jsx("strong",{children:je(i.purchaseDate)})]}),n.jsxs("div",{children:[n.jsx("span",{children:"Supplier:"}),n.jsx("strong",{children:se(i.supplier)})]}),n.jsxs("div",{children:[n.jsx("span",{children:"PO Number:"}),n.jsx("strong",{children:se(i.poNumber)})]}),n.jsxs("div",{children:[n.jsx("span",{children:"Invoice Number:"}),n.jsx("strong",{children:se(i.invoiceNumber)})]}),n.jsxs("div",{children:[n.jsx("span",{children:"Purchase Cost:"}),n.jsx("strong",{children:i.purchaseCost==null?"-":String(i.purchaseCost)})]})]}),n.jsxs("div",{className:"asset-detail-col",children:[n.jsxs("div",{children:[n.jsx("span",{children:"Warranty Start:"}),n.jsx("strong",{children:je(i.warrantyStart)})]}),n.jsxs("div",{children:[n.jsx("span",{children:"Warranty End:"}),n.jsx("strong",{children:je(i.warrantyUntil)})]}),n.jsxs("div",{children:[n.jsx("span",{children:"AMC / Support:"}),n.jsx("strong",{children:se(i.amcSupport)})]}),n.jsxs("div",{children:[n.jsx("span",{children:"Depreciation End:"}),n.jsx("strong",{children:je(i.depreciationEnd)})]})]})]}),n.jsxs("div",{className:"asset-card-actions detail",children:[n.jsx("button",{className:"asset-btn assign",onClick:W,disabled:d||g,children:i!=null&&i.assignedTo||i!=null&&i.assignedToId?"Reassign":"Assign"}),n.jsx("button",{className:"asset-btn edit",onClick:R,disabled:d||g||J,children:"Retire"}),n.jsx("button",{className:"asset-btn edit",onClick:N,disabled:d,children:"Edit"}),n.jsx("button",{className:"asset-btn delete",onClick:K,disabled:d,children:"Delete"}),n.jsx("button",{className:"asset-btn view",onClick:()=>s(`/assets/${i.id}`),disabled:d,children:"View"})]})]}):null,x?n.jsx("div",{className:"modal-overlay",onClick:()=>!g&&y(!1),children:n.jsxs("div",{className:"modal-content asset-assign-modal",onClick:le=>le.stopPropagation(),children:[n.jsxs("div",{className:"modal-header",children:[n.jsx("h2",{children:i!=null&&i.assignedTo||i!=null&&i.assignedToId?"Reassign Asset":"Assign Asset"}),n.jsx("button",{className:"modal-close",onClick:()=>y(!1),disabled:g,children:""})]}),n.jsxs("div",{className:"modal-body",children:[n.jsxs("div",{className:"form-section",children:[n.jsx("label",{className:"form-label",children:"Search User"}),n.jsx("input",{className:"form-input",placeholder:"Search users...",value:M,onChange:le=>k(le.target.value),disabled:g})]}),n.jsxs("div",{className:"form-section",children:[n.jsx("label",{className:"form-label",children:"Assign To"}),n.jsxs("select",{className:"form-select",value:E,onChange:le=>B(le.target.value),disabled:g,children:[n.jsx("option",{value:"",children:"Unassigned"}),j.map(le=>n.jsxs("option",{value:le.id,children:[le.name||le.email," (",le.email,")"]},le.id))]})]})]}),n.jsxs("div",{className:"modal-footer",children:[n.jsx("button",{className:"btn-cancel",onClick:()=>y(!1),disabled:g,children:"Cancel"}),n.jsx("button",{className:"btn-submit",onClick:ne,disabled:g,children:g?"Saving...":"Save"})]})]})}):null,_?n.jsx("div",{className:"modal-overlay",onClick:()=>!J&&F(!1),children:n.jsxs("div",{className:"modal-content asset-assign-modal",onClick:le=>le.stopPropagation(),children:[n.jsxs("div",{className:"modal-header",children:[n.jsx("h2",{children:"Retire Asset"}),n.jsx("button",{className:"modal-close",onClick:()=>F(!1),disabled:J,children:""})]}),n.jsxs("div",{className:"modal-body",children:[n.jsxs("div",{className:"form-section",children:[n.jsx("label",{className:"form-label",children:"Condition"}),n.jsxs("select",{className:"form-select",value:Y,onChange:le=>{const Me=le.target.value==="not_ok"?"not_ok":"ok";xe(Me),Re(Me==="ok"?"Unassigned":"Faulty")},disabled:J,children:[n.jsx("option",{value:"ok",children:"OK"}),n.jsx("option",{value:"not_ok",children:"Not OK"})]})]}),n.jsxs("div",{className:"form-section",children:[n.jsx("label",{className:"form-label",children:"Status"}),n.jsx("select",{className:"form-select",value:Ne,onChange:le=>Re(le.target.value),disabled:J,children:Y==="ok"?n.jsxs(n.Fragment,{children:[n.jsx("option",{value:"Unassigned",children:"Unassigned"}),n.jsx("option",{value:"In Store",children:"In Store"})]}):n.jsxs(n.Fragment,{children:[n.jsx("option",{value:"Faulty",children:"Faulty"}),n.jsx("option",{value:"Retire",children:"Retire"})]})})]})]}),n.jsxs("div",{className:"modal-footer",children:[n.jsx("button",{className:"btn-cancel",onClick:()=>F(!1),disabled:J,children:"Cancel"}),n.jsx("button",{className:"btn-submit",onClick:Q,disabled:J,children:J?"Saving...":"Save"})]})]})}):null]})]})}const YP="modulepreload",XP=function(e){return"/"+e},Py={},ZP=function(t,s,r){if(!s||s.length===0)return t();const i=document.getElementsByTagName("link");return Promise.all(s.map(a=>{if(a=XP(a),a in Py)return;Py[a]=!0;const l=a.endsWith(".css"),c=l?'[rel="stylesheet"]':"";if(!!r)for(let g=i.length-1;g>=0;g--){const v=i[g];if(v.href===a&&(!l||v.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${a}"]${c}`))return;const p=document.createElement("link");if(p.rel=l?"stylesheet":YP,l||(p.as="script",p.crossOrigin=""),p.href=a,document.head.appendChild(p),l)return new Promise((g,v)=>{p.addEventListener("load",g),p.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${a}`)))})})).then(()=>t()).catch(a=>{const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=a,window.dispatchEvent(l),!l.defaultPrevented)throw a})};async function n1(e={}){return(await De.get("/sla",{params:e})).data}async function eL(e){return(await De.post("/sla",e)).data}async function tL(e,t){return(await De.patch(`/sla/${e}`,t)).data}async function Ly(e){return(await De.delete(`/sla/${e}`)).data}const s1="itsm.presenceStatus",Yo="itsm-presence-changed",Zp=[{value:"Available",color:"#16a34a",note:"Based on chat activity",style:"solid"},{value:"Do not disturb",color:"#dc2626",note:"Mute chat notifications",style:"solid"},{value:"Set as away",color:"#4b5563",note:"Show as away",style:"ring"}];function vl(e){return e==="Available"||e==="Do not disturb"||e==="Set as away"?e:e==="Automatic"?"Available":e==="Away"?"Set as away":e==="Do Not Disturb"||e==="Busy"?"Do not disturb":"Available"}function So(){return typeof window>"u"?"Available":vl(window.localStorage.getItem(s1))}function Iy(e){typeof window>"u"||(window.localStorage.setItem(s1,e),window.dispatchEvent(new CustomEvent(Yo,{detail:{value:e}})))}function nL(e){return e==="Do not disturb"?"dnd":e==="Set as away"?"away":"available"}const r1="itsm.user.avatar.map.v1",ko="itsm-avatar-changed";function i1(){try{const e=localStorage.getItem(r1);if(!e)return{};const t=JSON.parse(e);return t&&typeof t=="object"?t:{}}catch{return{}}}function ef(e){try{localStorage.setItem(r1,JSON.stringify(e))}catch{}}function a1(e){return String(e||"").trim().toLowerCase().replace(/\s+/g," ")}function po(e){const t=String(e||"").trim();if(!t)return"";const s=t.toLowerCase();return s.startsWith("data:")&&t.length>12e4?"":s.startsWith("http://")||s.startsWith("https://")||s.startsWith("blob:")||s.startsWith("data:image/")?t:""}function sL(e,t){const s=String((e==null?void 0:e.id)||"").trim(),r=String((e==null?void 0:e.email)||"").trim().toLowerCase(),i=a1((e==null?void 0:e.name)||(e==null?void 0:e.fullName)||""),a=i1();if(!t){s&&delete a[`id:${s}`],r&&delete a[`email:${r}`],i&&delete a[`name:${i}`],ef(a),typeof window<"u"&&window.dispatchEvent(new CustomEvent(ko,{detail:{id:s||void 0,email:r||void 0,name:i||void 0,avatarUrl:""}}));return}const l=po(t);if(!l){s&&delete a[`id:${s}`],r&&delete a[`email:${r}`],i&&delete a[`name:${i}`],ef(a),typeof window<"u"&&window.dispatchEvent(new CustomEvent(ko,{detail:{id:s||void 0,email:r||void 0,name:i||void 0,avatarUrl:""}}));return}s&&(a[`id:${s}`]=l),r&&(a[`email:${r}`]=l),i&&(a[`name:${i}`]=l),ef(a),typeof window<"u"&&window.dispatchEvent(new CustomEvent(ko,{detail:{id:s||void 0,email:r||void 0,name:i||void 0,avatarUrl:l}}))}function ma(e,t="U"){const s=String((e==null?void 0:e.name)||"").trim(),r=String((e==null?void 0:e.email)||"").trim(),i=s||r||t,a=i.split(/\s+/).filter(Boolean);if(a.length>=2)return`${a[0][0]||""}${a[1][0]||""}`.toUpperCase();const l=i.replace(/[^a-zA-Z0-9]/g,"");return l.length>=2?l.slice(0,2).toUpperCase():l.length===1?l.toUpperCase():t.toUpperCase()}function qr(e){try{const s=String((e==null?void 0:e.id)||"").trim(),r=String((e==null?void 0:e.email)||"").trim().toLowerCase(),i=a1((e==null?void 0:e.name)||(e==null?void 0:e.fullName)||""),a=i1();if(s&&a[`id:${s}`])return po(a[`id:${s}`]);if(r&&a[`email:${r}`])return po(a[`email:${r}`]);if(i&&a[`name:${i}`])return po(a[`name:${i}`])}catch{}const t=[e==null?void 0:e.avatarUrl,e==null?void 0:e.profilePic,e==null?void 0:e.avatar,e==null?void 0:e.photoUrl,e==null?void 0:e.image,e==null?void 0:e.picture];for(const s of t){const r=po(s);if(r)return r}return""}const Oy=32*1024*1024,rL="admin.mail.signatures.v1",iL="admin.mail.banners.v1";function $y(){var uv,mv,pv;const{user:e}=An(),{ticketId:t}=Qu(),s=Wn(),r=typeof document<"u"?document.getElementById("ticket-left-panel"):null,[i,a]=u.useState([]),[l,c]=u.useState("Open Tickets"),[d,p]=u.useState({type:"all"}),[g,v]=u.useState("team"),[S,O]=u.useState([]),[x,y]=u.useState(!1),[M,k]=u.useState(!1),[j,C]=u.useState(1),E=_m(),[B,_]=u.useState(!1),[F,J]=u.useState([]),[ue,Y]=u.useState(""),[xe,Ne]=u.useState(!1),[Re,L]=u.useState(!1),[X,ce]=u.useState([]),[N,K]=u.useState(null),[W,ne]=u.useState(!1),[R,Q]=u.useState(null),[je,se]=u.useState(null),[ze,Ze]=u.useState([]);u.useState("");const[ye,lt]=u.useState(""),[We,Fe]=u.useState(()=>Date.now()),[le,Me]=u.useState("Progress"),[G,he]=u.useState("All Actions"),[we,$]=u.useState(!1),[V,ve]=u.useState(!0),[ge,Ve]=u.useState(!1),[Le,H]=u.useState(()=>{var h;return typeof window>"u"?!1:(((h=window.visualViewport)==null?void 0:h.width)??window.innerWidth)<=1360}),[pe,_e]=u.useState(!1),[Ye,et]=u.useState(!1),[ct,rt]=u.useState("private"),[qe,yt]=u.useState([]),[St,hn]=u.useState(!1),[tn,fe]=u.useState(!1),[gt,He]=u.useState(!1),[At,mt]=u.useState(""),[Ut,T]=u.useState([]),[Se,ke]=u.useState([]),[Pe,Xe]=u.useState(!1),[dt,w]=u.useState(""),[ee,de]=u.useState(""),[$e,re]=u.useState(!1),Dt=oe.useRef(null),xt=oe.useRef(null),jn=oe.useRef(null),Mt=oe.useRef(null),ss=oe.useRef(null),qs=oe.useRef(null),pt=oe.useRef(null),[U,te]=u.useState(!1),[Ce,Ae]=u.useState(!1),[Ke,Qe]=u.useState(!1),[it,at]=u.useState(!1),[Vt,dn]=u.useState(!1),[bn,En]=u.useState(!1),[Yt,Bt]=u.useState(!1),[Er,pa]=u.useState(!1),[fa,kl]=u.useState(!1),[cr,rs]=u.useState(!1),[dr,Vr]=u.useState({url:"",text:""}),[Tn,is]=u.useState(!1),[ha,Cl]=u.useState({url:""}),[Al,El]=u.useState(!1),[Li,Kr]=u.useState({rows:3,cols:3}),[Dn,ur]=u.useState(!1),[xc,Tl]=u.useState(!1),[Rl,Ii]=u.useState(!1),[Hs,ga]=u.useState({name:"",html:""}),[Ml,va]=u.useState({}),[un,Vs]=u.useState("emailUser"),[ut,wn]=u.useState({to:"",cc:"",bcc:"",subject:"",body:"",actionStatus:"With User",nextUpdateDate:"",nextUpdateTime:"",issue:"Category1",issueDetail:"Category2",currentAction:"",nextAction:"",asset:"",supplier:"Supplier and Contract",supplierRef:"",approvalTeam:"Management Team",approvalPriority:"P2 - Single site outage with remote fix"}),[Ks,Qr]=u.useState({body:"",status:"In Progress",team:"Automated Alerts",staff:"",timeHours:"00",timeMinutes:"01"}),Hn=o=>{rt(o),et(!0)},[Vn,yc]=u.useState([]),[Fm,jc]=u.useState(()=>So()),[,Um]=u.useState(0),[Qs,Tr]=u.useState(()=>typeof window>"u"?!1:window.innerWidth<=1100),[As,Pl]=u.useState(()=>ts().ticketsMyLists),[xa,as]=u.useState(()=>ts().ticketQueues),[bt,Pt]=u.useState({ticketType:"Fault",subject:"",category:"",priority:"",description:""}),nn=o=>{var me,Je;const h=o==null?void 0:o.requester;if(h&&(h.name||h.email||h.username))return{id:h.id,role:h.role,name:h.name||h.username||h.email||"End User",username:h.username||h.userName||h.name||"",email:h.email||"",phone:h.phone||"",site:h.site||"",accountManager:h.accountManager||h.reportingManager||"",avatarUrl:h.avatarUrl||h.profilePic||h.avatar||""};const b=((Je=(me=String((o==null?void 0:o.description)||"").match(/^\s*From:\s*(.+)\s*$/im))==null?void 0:me[1])==null?void 0:Je.trim())||"";if(!b)return null;const I=b.match(/([A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,})/i),P=(I==null?void 0:I[1])||"",z=b.replace(/<[^>]+>/g,"").replace(P,"").replace(/["']/g,"").trim(),Te=P?P.split("@")[0]:"";return{name:z||Te||P||"End User",username:Te||void 0,email:P||void 0,phone:void 0,site:void 0,accountManager:void 0}},Oi=o=>{var b;const h=String((o==null?void 0:o.createdFrom)||(o==null?void 0:o.source)||"").trim().toLowerCase();if(h.includes("portal"))return"User portal";if(h.includes("itsm")||h.includes("platform"))return"ITSM Platform";if(Number((o==null?void 0:o.requesterId)||0)>0&&String((o==null?void 0:o.assigneeId)||"").trim()==="")return"User portal";const f=String(((b=o==null?void 0:o.requester)==null?void 0:b.role)||(o==null?void 0:o.requesterRole)||"").trim().toUpperCase();return f==="USER"?"User portal":"ITSM Platform"},ya=o=>{if(!o)return new Date().toLocaleString();const h=new Date(o);return Number.isNaN(h.getTime())?String(o):h.toLocaleString()},ja=o=>{if(!o)return"-";const h=new Date(o);return Number.isNaN(h.getTime())?"-":h.toLocaleString()},Kt=o=>{if(!o)return null;const f=new Date(o).getTime();return Number.isNaN(f)?null:f},Rr=o=>{const h=o<0,f=Math.abs(Math.floor(o/1e3)),b=Math.floor(f/3600),I=Math.floor(f%3600/60),P=f%60,z=b>0?`${String(b).padStart(2,"0")}:${String(I).padStart(2,"0")}:${String(P).padStart(2,"0")}`:`${String(I).padStart(2,"0")}:${String(P).padStart(2,"0")}`;return h?`-${z}`:z},Bm=o=>{const h=Math.max(0,Math.floor(o/6e4)),f=Math.floor(h/60),b=h%60;return`${String(f).padStart(2,"0")}:${String(b).padStart(2,"0")}`},bc=o=>{const h=Math.max(0,Math.min(100,Math.round(o/10)*10));return h<=0?"#006400":h<=10?"#008000":h<=20?"#32CD32":h<=30?"#9ACD32":h<=40?"#FFD700":h<=50?"#FFA500":h<=60?"#FF8C00":h<=70?"#FF6A00":h<=80?"#FF4500":h<=90?"#FF0000":"#8B0000"},wc=async o=>{var h,f;if(N)try{hn(!0),await Sd(N.id,{priority:o});const b=await wd(N.id);K(I=>{var P,z;return I&&{...I,priority:(b==null?void 0:b.priority)||o,sla:(b==null?void 0:b.sla)||I.sla,slaTimeLeft:(b==null?void 0:b.slaTimeLeft)||((z=(P=b==null?void 0:b.sla)==null?void 0:P.resolution)==null?void 0:z.remainingLabel)||I.slaTimeLeft}}),a(I=>I.map(P=>{var z,Te;return P.id===N.id?{...P,priority:(b==null?void 0:b.priority)||o,sla:(b==null?void 0:b.sla)||P.sla,slaTimeLeft:(b==null?void 0:b.slaTimeLeft)||((Te=(z=b==null?void 0:b.sla)==null?void 0:z.resolution)==null?void 0:Te.remainingLabel)||P.slaTimeLeft}:P}))}catch(b){alert(((f=(h=b==null?void 0:b.response)==null?void 0:h.data)==null?void 0:f.error)||(b==null?void 0:b.message)||"Failed to update SLA")}finally{hn(!1)}},Ll=o=>o===1?"Critical":o===2?"High":o===3?"Medium":"Low",mr=o=>{const h=String(o||"").trim().toLowerCase();return h==="critical"||h==="p1"?1:h==="high"||h==="p2"?2:h==="medium"||h==="p3"?3:4},$i=o=>{fe(!1),mt(String(o||"")),He(!0)};oe.useEffect(()=>{const o=h=>{const f=h.target;Mt.current&&!Mt.current.contains(f)&&fe(!1),ss.current&&!ss.current.contains(f)&&He(!1),qs.current&&!qs.current.contains(f)&&$(!1)};return document.addEventListener("mousedown",o),()=>document.removeEventListener("mousedown",o)},[]),oe.useEffect(()=>{const o=window.setInterval(()=>Fe(Date.now()),1e3);return()=>window.clearInterval(o)},[]),oe.useEffect(()=>{const o=()=>Um(f=>f+1),h=f=>{f.key==="itsm.user.avatar.map.v1"&&o()};return window.addEventListener(ko,o),window.addEventListener("storage",h),()=>{window.removeEventListener(ko,o),window.removeEventListener("storage",h)}},[]);const Gr=(o,h)=>{const f=Number((o==null?void 0:o.changedById)||0);if(f>0){const z=Vn.find(Te=>Number(Te==null?void 0:Te.id)===f);return z?ds(z):`User #${f}`}const b=String((o==null?void 0:o.note)||"").toLowerCase();if(!(b.includes("inbound email reply received")||b.includes(`
from:`)))return"Platform Field";const P=nn(h);return P!=null&&P.name||P!=null&&P.email||P!=null&&P.username?String(P.name||P.email||P.username):"Platform Field"},Il=o=>{const h=String((o==null?void 0:o.createdFrom)||(o==null?void 0:o.source)||"").toLowerCase();if(h.includes("email")||h.includes("mail"))return!0;const f=String((o==null?void 0:o.description)||"").toLowerCase();return f.includes("inbound email")||f.includes("mailbox:")||f.includes(`
from:`)?!0:(Array.isArray(o==null?void 0:o.history)?o.history:[]).some(I=>String((I==null?void 0:I.note)||"").toLowerCase().includes("inbound email"))},ls=o=>Il(o)||String(Oi(o)||"").trim().toLowerCase().includes("user portal")?"New":"Opened",zm=o=>{const h=String(o.noteRaw||"").toLowerCase(),f=String(o.note||"").toLowerCase(),b=String(o.fromStatus||"").trim(),I=String(o.toStatus||"").trim(),P=!!o.internal,z=String(o.kind||"").toLowerCase();if(f.includes("ticket created"))return o.createdAction||"Opened";if(f.includes("response sla marked as responded"))return"Mark As Responded";if(f.includes("asset assigned"))return"Asset Assigned";if(f.includes("asset unassigned"))return"Asset Unassigned";if(h.startsWith("[email]"))return"Email+Note";if(f.includes("inbound email reply received"))return"Conversation";if(P&&f.startsWith("private:"))return"Private Note";if(P)return"Internal Note";if(b||I){const Te=I.toLowerCase();if(Te==="acknowledged")return"Accept Ticket";if(Te==="resolved")return"Resolve Ticket";if(Te==="closed")return"Close Ticket";if(I)return I}return z==="conversation"?"First Response":"Updated"},Ol=o=>{const h=String((o==null?void 0:o.ticketId)||(o==null?void 0:o.id)||"");if(!h)return;const f=nn(o),b=String((f==null?void 0:f.name)||(f==null?void 0:f.email)||(f==null?void 0:f.username)||"Platform Field"),I=String((o==null?void 0:o.subject)||(o==null?void 0:o.description)||"Ticket created").trim(),P=ya(o==null?void 0:o.createdAt),z=ls(o),me=(Array.isArray(o==null?void 0:o.history)?o.history:[]).map(Oe=>{const nt=String((Oe==null?void 0:Oe.note)||"").trim(),st=nt.replace(/^\[EMAIL\]\s*/i,"").trim(),hs=String((Oe==null?void 0:Oe.fromStatus)||"").trim(),Ms=String((Oe==null?void 0:Oe.toStatus)||"").trim(),Ys=hs||Ms?`Status changed: ${hs||"-"} -> ${Ms||"-"}`:"Ticket updated",gr=!!(Oe!=null&&Oe.internal),Xs=nt.toLowerCase().startsWith("[email]")?"conversation":D(st||Ys,gr);return{author:Gr(Oe,o),text:st||Ys,time:ya(Oe==null?void 0:Oe.createdAt),action:zm({noteRaw:nt,note:st||Ys,fromStatus:hs,toStatus:Ms,internal:gr,kind:Xs,createdAction:z}),internal:gr,changedById:Number((Oe==null?void 0:Oe.changedById)||0)||null,kind:Xs}}).filter(Oe=>String(Oe.text||"").trim().length>0),Je=[{author:b,text:`Ticket created: ${I}`,time:P,action:z,internal:!1,changedById:null,kind:"public"},...me],ae=new Set,Be=Je.filter(Oe=>{const nt=`${Oe.author}|${Oe.action||""}|${Oe.text}|${Oe.time}`;return ae.has(nt)?!1:(ae.add(nt),!0)});Fc(Oe=>({...Oe,[h]:Be}))},ba=async()=>{try{const o=await Dm({page:1,pageSize:200}),f=(Array.isArray(o)?o:(o==null?void 0:o.items)||[]).map(b=>{var I,P,z,Te,me,Je,ae,Be,Oe,nt;return{id:b.ticketId||String(b.id),slaTimeLeft:b.slaTimeLeft||((P=(I=b==null?void 0:b.sla)==null?void 0:I.resolution)==null?void 0:P.remainingLabel)||"--:--",sla:b.sla||null,subject:b.subject||b.description||"",category:b.category||"",issueDetail:b.issueDetail||b.subCategory||b.resolutionCategory||"",resolution:b.resolution||b.resolutionText||b.closureNotes||"",priority:b.priority||"Low",status:b.status,type:b.type,endUser:((z=b.requester)==null?void 0:z.name)||((Te=b.requester)==null?void 0:Te.email)||"",dateReported:b.createdAt?new Date(b.createdAt).toLocaleString():"",lastAction:"",lastActionTime:"",assignedAgentId:((me=b.assignedTo)==null?void 0:me.id)||((Je=b.assignee)==null?void 0:Je.id),assignedAgentName:((ae=b.assignedTo)==null?void 0:ae.name)||((Be=b.assignee)==null?void 0:Be.name),workflow:b.workflow||void 0,team:b.team||b.category||void 0,requesterId:b.requesterId||((Oe=b.requester)==null?void 0:Oe.id)||void 0,createdFrom:Oi(b),createdAt:b.createdAt||void 0,updatedAt:b.updatedAt||void 0,closedAt:b.closedAt||void 0,closedByName:((nt=b.closedBy)==null?void 0:nt.name)||b.closedByName||void 0}});a(f)}catch(o){console.warn("Failed to fetch tickets:",o),a([])}};oe.useEffect(()=>{ba()},[]),oe.useEffect(()=>{const o=window.setInterval(()=>{ba()},15e3);return()=>window.clearInterval(o)},[]),oe.useEffect(()=>{W&&z1("")},[W]),oe.useEffect(()=>{const o=t?decodeURIComponent(t):"";if(!o){ne(!1);return}const h=i.find(f=>String(f.id)===String(o));if(h){if(K(h),h.endUser){const f=String(h.endUser).trim();Q({name:f.includes("@")?f.split("@")[0]:f,username:f.includes("@")?f.split("@")[0]:f,email:f.includes("@")?f:void 0})}ne(!0)}wd(o).then(f=>{var I,P,z,Te,me,Je,ae,Be,Oe,nt;const b={id:f.ticketId||String(f.id||o),slaTimeLeft:f.slaTimeLeft||((P=(I=f==null?void 0:f.sla)==null?void 0:I.resolution)==null?void 0:P.remainingLabel)||"--:--",sla:f.sla||null,subject:f.subject||f.description||"Ticket",category:f.category||"",issueDetail:f.issueDetail||f.subCategory||f.resolutionCategory||"",resolution:f.resolution||f.resolutionText||f.closureNotes||"",priority:f.priority||"Low",status:f.status||"New",type:f.type||"Incident",endUser:((z=f.requester)==null?void 0:z.name)||((Te=f.requester)==null?void 0:Te.email)||"",dateReported:f.createdAt?new Date(f.createdAt).toLocaleString():"",lastAction:"",lastActionTime:"",assignedAgentId:((me=f.assignedTo)==null?void 0:me.id)||((Je=f.assignee)==null?void 0:Je.id),assignedAgentName:((ae=f.assignedTo)==null?void 0:ae.name)||((Be=f.assignee)==null?void 0:Be.name),workflow:f.workflow||void 0,team:f.team||f.category||void 0,requesterId:f.requesterId||((Oe=f.requester)==null?void 0:Oe.id)||void 0,createdFrom:Oi(f),createdAt:f.createdAt||void 0,updatedAt:f.updatedAt||void 0,closedAt:f.closedAt||void 0,closedByName:((nt=f.closedBy)==null?void 0:nt.name)||f.closedByName||void 0};K(b),Q(nn(f)),Ol(f),ne(!0)}).catch(()=>{h||(K({id:o,slaTimeLeft:"--:--",sla:null,subject:"Ticket",category:"",issueDetail:"",resolution:"",priority:"Low",status:"New",type:"Incident",endUser:"",createdFrom:"ITSM Platform",dateReported:new Date().toLocaleString(),lastAction:"",lastActionTime:""}),ne(!0))})},[t,i]),oe.useEffect(()=>{const o=()=>jc(So()),h=f=>{var I;const b=(I=f==null?void 0:f.detail)==null?void 0:I.value;if(b){jc(vl(b));return}o()};return window.addEventListener("storage",o),window.addEventListener(Yo,h),()=>{window.removeEventListener("storage",o),window.removeEventListener(Yo,h)}},[]),oe.useEffect(()=>{ua({limit:500}).then(o=>{yc(Array.isArray(o)?o:[])}).catch(()=>{yc([])})},[]),oe.useEffect(()=>{if(String((e==null?void 0:e.role)||"").toUpperCase()!=="ADMIN"){yt([]);return}n1().then(o=>yt(Array.isArray(o)?o:[])).catch(()=>yt([]))},[e==null?void 0:e.role]),oe.useEffect(()=>{!W||!(N!=null&&N.id)||Vn.length===0||wd(N.id).then(o=>{Ol(o)}).catch(()=>{})},[Vn.length,W,N==null?void 0:N.id]),oe.useEffect(()=>{const o="tickets-queue-expanded",h="tickets-queue-collapsed";return Qs?(document.body.classList.remove(o),document.body.classList.add(h)):(document.body.classList.add(o),document.body.classList.remove(h)),()=>{document.body.classList.remove(o),document.body.classList.remove(h)}},[Qs]),oe.useEffect(()=>(document.body.classList.add("tickets-view-active"),()=>{document.body.classList.remove("tickets-view-active")}),[]),oe.useEffect(()=>{const o=()=>{const h=ts();Pl(h.ticketsMyLists),as(h.ticketQueues)};return window.addEventListener("left-panel-config-updated",o),()=>window.removeEventListener("left-panel-config-updated",o)},[]),oe.useEffect(()=>{sessionStorage.getItem("openNewTicket")&&(sessionStorage.removeItem("openNewTicket"),Ne(!0));const h=()=>Ne(!0);return window.addEventListener("open-new-ticket",h),()=>window.removeEventListener("open-new-ticket",h)},[]),oe.useEffect(()=>{const o=h=>{const f=h.detail;!f||f.target!=="tickets"||(f.action==="new"&&Ne(!0),f.action==="filter"&&k(b=>{const I=!b;return I||zl(),I}))};return window.addEventListener("shared-toolbar-action",o),()=>window.removeEventListener("shared-toolbar-action",o)},[]),oe.useEffect(()=>{const o=h=>{var b;const f=String(((b=h==null?void 0:h.detail)==null?void 0:b.query)??"");Y(f),Qs&&k(!1)};return window.addEventListener("global-search",o),()=>window.removeEventListener("global-search",o)},[Qs]),oe.useEffect(()=>{const o=()=>{window.innerWidth<=1100&&Tr(!0)};return window.addEventListener("resize",o),()=>window.removeEventListener("resize",o)},[]);const os={Hardware:["Laptop","Headset","Keyboard","Mouse","Monitor","PC","Powercord","VGA cable","HDMI cable"],"Hardware>Laptop":["Adaptor","Adaptor Cable"],Infrastructure:["Power","Data Connection","Router","Server","Printer"],"Infrastructure>Power":["Switch","Socket"]},Wm=["Fault","Live Chat","Problem","Change","Service Request"],qm=["Fault Workflow","Incident Management Workflow","Service Request Workflow","Change Workflow"],wa=["New","Acknowledged","In Progress","With User","With Supplier","Awaiting Approval","Resolved","Closed"],Di=["Not set","3rd Party","AutoRecover","Internal Repair","Repaired"],Na=["User portal","ITSM Platform"],cs=o=>Array.from(new Set(o.map(h=>String(h||"").trim()).filter(Boolean))),[vt,Jr]=u.useState("Incident Management Workflow"),[_i,$l]=u.useState(""),[Yr,Nc]=u.useState("ITSM Platform"),[Hm,Sc]=u.useState(""),[Fi,Dl]=u.useState(""),[_l,kc]=u.useState(""),[Fl,Cc]=u.useState("Not set"),[Vm,Ul]=u.useState(null),[Km,Sa]=u.useState(null),[Ac,ka]=u.useState({name:"",email:"",phone:"",site:"",accountManager:""}),[ot,Ec]=u.useState({viewing:"",id:"",slaTimeLeft:"",subject:"",category:"",priority:"",status:"",type:"",endUser:"",lastAction:"",dateReported:"",issueDetail:"",resolution:"",dateClosed:""}),Tc=10,gn={checkbox:40,status:100,id:100,subject:400,category:200,sla:160,priority:100,type:100,endUser:160,lastAction:150,date:140,issueDetail:160,resolution:150,dateClosed:150},Qm=(Object.keys(gn).length-1)*10,Mc=32,Gm=Math.ceil(Object.values(gn).reduce((o,h)=>o+h,0)+Qm+Mc),[Jm,Pc]=u.useState(Gm),Bl=oe.useRef(null),[mn,Lc]=u.useState({checkbox:gn.checkbox,status:gn.status,id:gn.id,summary:gn.subject,category:gn.category,sla:gn.sla,priority:gn.priority,type:gn.type,endUser:gn.endUser,lastAction:gn.lastAction,date:gn.date,issueDetail:gn.issueDetail,resolution:gn.resolution,dateClosed:gn.dateClosed}),[Gs,Ui]=u.useState(null),[Bi,Ic]=u.useState(0),[Oc,Ym]=u.useState(0),Xm=["All Tickets","Closed Tickets","Open Tickets"],Zm=["All Actions","Conversation & Internal","Conversation","Internal Conversations","Staff","Public ( User View)","Private"],Ca={"All Actions":"eye","Conversation & Internal":"message-circle",Conversation:"messages-square","Internal Conversations":"corner-up-left",Staff:"user","Public ( User View)":"eye",Private:"eye-off"},$c=()=>{B?(J([]),_(!1)):(J(i.map(o=>o.id)),_(!0))},ep=o=>{J(h=>h.includes(o)?h.filter(f=>f!==o):[...h,o])},tp=()=>{if(!bt.ticketType.trim()||!bt.priority.trim()||!bt.subject.trim()){alert("Please fill in all required fields: Ticket Type, Priority, and Subject");return}(async()=>{var o;try{const h={type:bt.ticketType,priority:bt.priority,category:bt.category,description:bt.description,subject:bt.subject,createdFrom:"ITSM Platform",requesterId:e!=null&&e.id?Number(e.id):void 0,requesterEmail:(e==null?void 0:e.email)||void 0},f=await Tu(h),I={id:f.ticketId||`#${String(f.id).padStart(6,"0")}`,slaTimeLeft:"00:00",subject:f.subject||f.description||bt.subject,category:f.category||bt.category,priority:f.priority||bt.priority,status:f.status||"New",type:f.type,endUser:"",createdFrom:(e==null?void 0:e.role)==="USER"?"User portal":"ITSM Platform",dateReported:new Date(f.createdAt).toLocaleString(),lastAction:"Created",lastActionTime:new Date().toLocaleString()};a([I,...i]),Ne(!1),Pt({ticketType:"Fault",subject:"",category:"",priority:"",description:""}),await ba()}catch{alert("Failed to create ticket");const f=(o=i[0])==null?void 0:o.id,I=((typeof f=="string"?parseInt(f.replace(/[^0-9]/g,""),10):typeof f=="number"?f:0)||0)+1,z={id:"#"+String(I).padStart(6,"0"),slaTimeLeft:"00:00",subject:bt.subject,category:bt.category,priority:bt.priority||"Low",status:"New",type:bt.ticketType,endUser:"",createdFrom:(e==null?void 0:e.role)==="USER"?"User portal":"ITSM Platform",dateReported:new Date().toLocaleString(),lastAction:"Created",lastActionTime:new Date().toLocaleString()};a([z,...i]),Ne(!1),Pt({ticketType:"Fault",subject:"",category:"",priority:"",description:""})}})()},_n=(o,h)=>{Ec(f=>({...f,[o]:h}))},zl=()=>{Ec({viewing:"",id:"",slaTimeLeft:"",subject:"",category:"",priority:"",status:"",type:"",endUser:"",lastAction:"",dateReported:"",issueDetail:"",resolution:"",dateClosed:""})},Xr=o=>o.toLowerCase().replace(/\s+/g,"-").replace(/[^a-z0-9\-]/g,""),Dc=o=>{ce(h=>h.includes(o)?h.filter(f=>f!==o):[...h,o])},Wl=o=>{Pt({...bt,category:o}),L(!1)},np=o=>{K(o),ne(!0),s(`/tickets/${encodeURIComponent(o.id)}`),ZP(()=>import("./ticket.service-8e81964f.js"),[]).then(h=>{h.getTicket(o.id).then(f=>{var b;Q(nn(f)),se(f.asset||null),lt(((b=f.asset)==null?void 0:b.id)||""),Ol(f),K(I=>{var P;return I&&{...I,status:f.status||I.status,createdFrom:Oi(f),dateReported:f.createdAt?new Date(f.createdAt).toLocaleString():I.dateReported,createdAt:f.createdAt||I.createdAt,updatedAt:f.updatedAt||I.updatedAt,closedAt:f.closedAt||I.closedAt,closedByName:((P=f.closedBy)==null?void 0:P.name)||f.closedByName||I.closedByName}})}).catch(()=>{})})},[_c,Fc]=u.useState({}),pr=()=>e&&(e.name||e.email||e.username||e.id)||"You",ds=o=>{const h=(o==null?void 0:o.name)||"";if(h.trim())return h;const f=(o==null?void 0:o.username)||(o==null?void 0:o.userName)||"";if(String(f||"").trim())return String(f).trim();const b=String((o==null?void 0:o.email)||"").trim();if(b){const I=b.split("@")[0]||b,P=I.split(/[._-]/).filter(Boolean)[0]||I;return P?P[0].toUpperCase()+P.slice(1):b}return"User"},ql=o=>{const h=String((o==null?void 0:o.id)||"").trim(),f=String((o==null?void 0:o.email)||"").trim().toLowerCase(),b=String(ds(o)||"").trim().toLowerCase(),I=String((e==null?void 0:e.id)||"").trim(),P=String((e==null?void 0:e.email)||"").trim().toLowerCase(),z=String((e==null?void 0:e.name)||"").trim().toLowerCase();if(h&&I&&h===I||f&&P&&f===P||b&&z&&b===z)return nL(Fm);const me=String((o==null?void 0:o.presenceStatus)||(o==null?void 0:o.status)||"").trim().toLowerCase();return me?me.includes("do not disturb")||me.includes("dnd")||me.includes("busy")?"dnd":me.includes("away")?"away":me.includes("inactive")||me.includes("offline")||me.includes("disabled")?"offline":(me.includes("active")||me.includes("available")||me.includes("online"),"available"):"available"},fr=o=>o!=="away",m=(o,h)=>{const f=String(o||"").trim().toLowerCase(),b=String(h||"").trim().toLowerCase();return Vn.find(I=>String((I==null?void 0:I.id)||"").trim().toLowerCase()===f)||Vn.find(I=>String(ds(I)||"").trim().toLowerCase()===f)||Vn.find(I=>b&&String(ds(I)||"").trim().toLowerCase()===b)||null},A=(o,h)=>{const f=String(ds(o)||h||"User").trim(),b={...o||{},name:f,email:String((o==null?void 0:o.email)||"").trim()},I=String((e==null?void 0:e.name)||"").trim().toLowerCase(),P=String((e==null?void 0:e.email)||"").trim().toLowerCase(),z=String((b==null?void 0:b.name)||"").trim().toLowerCase(),Te=String((b==null?void 0:b.email)||"").trim().toLowerCase(),Je=qr(!!(I&&z&&I===z||P&&Te&&P===Te)?e:b),ae=ma(b,ni(f));return Je?n.jsx("img",{src:Je,alt:f,className:"queue-avatar-image",onError:Be=>{Be.currentTarget.style.display="none"}}):ae},D=(o,h=!1,f)=>{if(f)return f;const b=String(o||"").toLowerCase();return b.includes("[email]")||b.includes("inbound email reply received")||b.includes("email user")||b.includes("note + email")||b.includes("email supplier")?"conversation":b.includes("response sla")||b.includes("resolution sla")||b.includes("sla")?"sla":b.includes("asset assigned")||b.includes("asset unassigned")?"asset":b.includes("user name")||b.includes("email address")||b.includes("phone number")||b.includes("reporting manager")||b.includes("site")?"user":h&&(b.includes("private")||b.startsWith("internal:"))?"private":h?"internal":b.includes("status changed")||b.includes("accepted by")||b.includes("acknowledge")?"system":"public"},q=(o,h,f)=>{const b=new Date().toLocaleString(),I=pr(),P=!!(f!=null&&f.internal),z=D(h,P,f==null?void 0:f.kind),Te=Number((f==null?void 0:f.changedById)||(e==null?void 0:e.id)||0)||null;Fc(me=>({...me,[o]:[...me[o]||[],{author:I,text:h,time:b,internal:P,kind:z,changedById:Te}]}))},ie=o=>{const h=(o||"").toLowerCase();return h==="incident"||h==="fault"},Ie=o=>String(o||"").toLowerCase().replace(/[^a-z0-9]+/g,""),Ee=()=>{var Je,ae,Be,Oe;if(!N)return[];const o=Ie(N.type),f=String(N.status||"").toLowerCase(),b=sn(N),I=b.accepted||f!=="new",P=b.ackSent||I&&f!=="acknowledged",z=[{label:"Back",onClick:Ge}],Te=!!((ae=(Je=N==null?void 0:N.sla)==null?void 0:Je.response)!=null&&ae.completedAt)&&Number(((Oe=(Be=N==null?void 0:N.sla)==null?void 0:Be.response)==null?void 0:Oe.completedById)||0)>0;P&&!Te&&z.push({label:"Mark as responsed",onClick:Yg}),z.push({label:"Internal note",onClick:()=>Hn("internal")}),z.push({label:"Private note",onClick:()=>Hn("private")});const me=(nt,st)=>()=>ap(nt,st||`Status updated to ${nt}`);return o==="servicerequest"?(f==="new"?(z.push({label:"Accept",onClick:Jg}),z.push({label:"Request Approval",onClick:me("Awaiting Approval")}),z.push({label:"Start",onClick:me("In Progress")}),z.push({label:"Quick Close",onClick:me("Closed")})):f==="awaiting approval"?(z.push({label:"Approve",onClick:me("In Progress")}),z.push({label:"Reject",onClick:me("Rejected")})):f==="in progress"?z.push({label:"Fulfill",onClick:me("Fulfilled")}):f==="fulfilled"?z.push({label:"Close",onClick:me("Closed")}):f==="closed"&&z.push({label:"Re-open",onClick:me("In Progress","Re-opened")}),z.filter(nt=>{const st=String(nt.label||"").trim().toLowerCase();return!(!I&&["mark as responsed","acknowledge","log to supplier","approval","requesting approval","resolve","resolve ticket"].includes(st)||!P&&["mark as responsed","log to supplier","approval","requesting approval","resolve","resolve ticket"].includes(st))})):o==="changerequestassetreplacement"||o==="changerequest"?(f==="new"?z.push({label:"Verify Asset",onClick:me("Under Verification")}):f==="under verification"?z.push({label:"Send for Approval",onClick:me("Awaiting Approval")}):f==="awaiting approval"?(z.push({label:"Approve",onClick:me("Approved")}),z.push({label:"Reject",onClick:me("Rejected")})):f==="approved"?(z.push({label:"Start Procurement",onClick:me("Procurement")}),z.push({label:"Start Implementation",onClick:me("In Progress")})):f==="procurement"?z.push({label:"Start Implementation",onClick:me("In Progress")}):f==="in progress"?z.push({label:"Complete Change",onClick:me("Completed")}):f==="completed"&&z.push({label:"Close",onClick:me("Closed")}),z.filter(nt=>{const st=String(nt.label||"").trim().toLowerCase();return!(!I&&["mark as responsed","acknowledge","log to supplier","approval","requesting approval","resolve","resolve ticket"].includes(st)||!P&&["mark as responsed","log to supplier","approval","requesting approval","resolve","resolve ticket"].includes(st))})):o==="accessrequest"?(f==="new"?z.push({label:"Send to Manager",onClick:me("Manager Approval")}):f==="manager approval"?(z.push({label:"Approve",onClick:me("IT Approval")}),z.push({label:"Reject",onClick:me("Rejected")})):f==="it approval"?z.push({label:"IT Approve",onClick:me("Provisioning")}):f==="provisioning"?z.push({label:"Provision Access",onClick:me("Completed")}):f==="completed"&&z.push({label:"Close",onClick:me("Closed")}),z.filter(nt=>{const st=String(nt.label||"").trim().toLowerCase();return!(!I&&["mark as responsed","acknowledge","log to supplier","approval","requesting approval","resolve","resolve ticket"].includes(st)||!P&&["mark as responsed","log to supplier","approval","requesting approval","resolve","resolve ticket"].includes(st))})):o==="newstarterrequest"?(f==="new"?z.push({label:"Confirm by HR",onClick:me("HR Confirmation")}):f==="hr confirmation"?z.push({label:"Start IT Setup",onClick:me("IT Setup")}):f==="it setup"?z.push({label:"Allocate Asset",onClick:me("Asset Allocation")}):f==="asset allocation"?z.push({label:"Mark Ready",onClick:me("Ready for Joining")}):f==="ready for joining"&&z.push({label:"Close",onClick:me("Closed")}),z.filter(nt=>{const st=String(nt.label||"").trim().toLowerCase();return!(!I&&["mark as responsed","acknowledge","log to supplier","approval","requesting approval","resolve","resolve ticket"].includes(st)||!P&&["mark as responsed","log to supplier","approval","requesting approval","resolve","resolve ticket"].includes(st))})):o==="leaverrequest"?(f==="new"?z.push({label:"HR Confirm",onClick:me("HR Confirmation")}):f==="hr confirmation"?z.push({label:"Revoke Access",onClick:me("Access Revoked")}):f==="access revoked"?z.push({label:"Collect Asset",onClick:me("Asset Collected")}):f==="asset collected"?z.push({label:"Complete Offboarding",onClick:me("Completed")}):f==="completed"&&z.push({label:"Close",onClick:me("Closed")}),z.filter(nt=>{const st=String(nt.label||"").trim().toLowerCase();return!(!I&&["mark as responsed","acknowledge","log to supplier","approval","requesting approval","resolve","resolve ticket"].includes(st)||!P&&["mark as responsed","log to supplier","approval","requesting approval","resolve","resolve ticket"].includes(st))})):o==="task"?(f==="new"?z.push({label:"Accept",onClick:me("Assigned")}):f==="assigned"?z.push({label:"Start",onClick:me("In Progress")}):f==="in progress"?z.push({label:"Complete",onClick:me("Completed")}):f==="completed"&&z.push({label:"Close",onClick:me("Closed")}),z.filter(nt=>{const st=String(nt.label||"").trim().toLowerCase();return!(!I&&["mark as responsed","acknowledge","log to supplier","approval","requesting approval","resolve","resolve ticket"].includes(st)||!P&&["mark as responsed","log to supplier","approval","requesting approval","resolve","resolve ticket"].includes(st))})):o==="softwarerequest"?(f==="new"?z.push({label:"Request Approval",onClick:me("Manager Approval")}):f==="manager approval"?(z.push({label:"Budget Approve",onClick:me("Budget Approval")}),z.push({label:"Reject",onClick:me("Rejected")})):f==="budget approval"?z.push({label:"Start Procurement",onClick:me("Procurement")}):f==="procurement"?z.push({label:"Install Software",onClick:me("Installation")}):f==="installation"?z.push({label:"Mark Completed",onClick:me("Completed")}):f==="completed"&&z.push({label:"Close",onClick:me("Closed")}),z.filter(nt=>{const st=String(nt.label||"").trim().toLowerCase();return!(!I&&["mark as responsed","acknowledge","log to supplier","approval","requesting approval","resolve","resolve ticket"].includes(st)||!P&&["mark as responsed","log to supplier","approval","requesting approval","resolve","resolve ticket"].includes(st))})):o==="hrrequest"?(f==="new"?z.push({label:"Send to HR",onClick:me("HR Review")}):f==="hr review"?(z.push({label:"Start Review",onClick:me("In Progress")}),z.push({label:"Reject",onClick:me("Rejected")})):f==="in progress"?z.push({label:"Resolve",onClick:me("Resolved")}):f==="resolved"&&z.push({label:"Close",onClick:me("Closed")}),z.filter(nt=>{const st=String(nt.label||"").trim().toLowerCase();return!(!I&&["mark as responsed","acknowledge","log to supplier","approval","requesting approval","resolve","resolve ticket"].includes(st)||!P&&["mark as responsed","log to supplier","approval","requesting approval","resolve","resolve ticket"].includes(st))})):o==="peripheralrequest"?(f==="new"?z.push({label:"Check Stock",onClick:me("Stock Check")}):f==="stock check"?(z.push({label:"Request Approval",onClick:me("Approval")}),z.push({label:"Issue Asset",onClick:me("Issued")})):f==="approval"?(z.push({label:"Issue Asset",onClick:me("Issued")}),z.push({label:"Reject",onClick:me("Rejected")})):f==="issued"&&z.push({label:"Close",onClick:me("Closed")}),z.filter(nt=>{const st=String(nt.label||"").trim().toLowerCase();return!(!I&&["mark as responsed","acknowledge","log to supplier","approval","requesting approval","resolve","resolve ticket"].includes(st)||!P&&["mark as responsed","log to supplier","approval","requesting approval","resolve","resolve ticket"].includes(st))})):z.filter(nt=>{const st=String(nt.label||"").trim().toLowerCase();return!(!I&&["mark as responsed","acknowledge","log to supplier","approval","requesting approval","resolve","resolve ticket"].includes(st)||!P&&["mark as responsed","log to supplier","approval","requesting approval","resolve","resolve ticket"].includes(st))})},Ge=()=>{ne(!1),s("/tickets")},sn=o=>{if(!o)return{accepted:!1,ackSent:!1,supplierLogged:!1};const h=o.id,f=Ml[h]||{accepted:!1,ackSent:!1,supplierLogged:!1},b=String(o.status||"").toLowerCase(),I=b!=="new",P=["in progress","resolved","closed","with supplier","awaiting approval"].includes(b),z=b.includes("supplier");return{accepted:f.accepted||I,ackSent:f.ackSent||P,supplierLogged:f.supplierLogged||z}},rn=(o,h)=>{a(f=>f.map(b=>b.id===o?{...b,status:h}:b)),K(f=>f&&{...f,status:h})},Es=(o,h)=>{va(f=>{var b,I,P;return{...f,[o]:{accepted:((b=f[o])==null?void 0:b.accepted)||!1,ackSent:((I=f[o])==null?void 0:I.ackSent)||!1,supplierLogged:((P=f[o])==null?void 0:P.supplierLogged)||!1,...h}}})},Ts=(o=un)=>o==="acknowledge"?"Acknowledge":o==="emailUser"?"Email End User":o==="logSupplier"?"Log With Supplier":o==="emailSupplier"?"Email Supplier":o==="callbackSupplier"?"Call Back Supplier":o==="approval"?"Requesting Approval":o==="resolve"?"Resolve Ticket":o==="close"?"Close Ticket":"Note + Email",Zr=()=>{const o=String((R==null?void 0:R.email)||"").trim();if(o)return o;const h=String((N==null?void 0:N.endUser)||"").trim();return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(h)?h:""},Mr=o=>{if(typeof window>"u")return o;const h=document.createElement("div");return h.innerHTML=o,String(h.textContent||h.innerText||"").trim()},Aa=o=>String(o||"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;"),Js=o=>{if(!o)return"-";const h=new Date(o);return Number.isNaN(h.getTime())?o:h.toLocaleDateString()},Uc=()=>{if(!N)return"";const o=ut.approvalTeam||"Approver",h=String((R==null?void 0:R.name)||N.endUser||"Requester").trim()||"Requester",f=String(N.team||N.category||"-").trim()||"-",b=String(N.type||"Service").trim()||"Service",I=String(N.priority||"-").trim()||"-",P=String(N.subject||"-").trim()||"-",z=String(N.issueDetail||"-").trim()||"-",Te=String(N.resolution||"-").trim()||"-",me=Js(N.createdAt||""),Je="-";return`Dear ${o},

Approval is required for the following request:

Ticket ID: ${N.id}
Request Type: ${b}
Requested By: ${h}
Department: ${f}
Priority: ${I}

Description:
${P}

Business Justification:
${z}

Impact:
${Te}

Planned Start Date: ${me}
Planned End Date: ${Je}

Kindly review and approve or reject this request at your earliest convenience.

You may respond by:
- Clicking Approve in the system
- Clicking Reject in the system
- Replying to this email with "Approved" or "Rejected"

If rejected, please provide a reason for tracking purposes.

Thank you for your prompt action.

Regards,
Service Desk
TrustyBytes

---
Quick Approval Template

Hi ${o},

Please review the below request:

Ticket ID: ${N.id}
Requested By: ${h}
Request: ${P}

Kindly reply with:
YES - to approve
NO - to reject

If rejecting, please mention the reason.

Thank you,
Service Desk Team

---
System Notification Version

Subject: Approval Pending - Ticket #${N.id}

You have a pending approval request.

Ticket: #${N.id}
Requester: ${h}
Priority: ${I}
Summary: ${P}

Click below to proceed:
[Approve] [Reject]`},Ea=(o,h)=>{if(typeof window>"u")return h;try{const f=window.localStorage.getItem(o);return f?JSON.parse(f):h}catch{return h}},Et=()=>{const o=Ea(iL,[]),h=Ea(rL,[]),f=o.find(Oe=>Oe&&Oe.active),b=e!=null&&e.id?String(e.id):"",I=h.find(Oe=>Oe&&Oe.active&&String(Oe.userId||"")===b),P=(f==null?void 0:f.tone)||"info",z=P==="success"?"#16a34a":P==="warning"?"#f59e0b":P==="danger"?"#ef4444":"#2563eb",Te=f?`<div style="border:1px solid ${z};background:${z}1a;border-radius:10px;padding:10px 12px;margin-bottom:16px">
          <div style="font-weight:700;margin-bottom:4px;color:#111827">${f.title}</div>
          <div style="color:#111827;font-size:13px">${f.message}</div>
        </div>`:"",me=String((R==null?void 0:R.name)||"").trim(),Je=me?`Hi ${me},`:"Hello,",ae=dt||"<p>(Empty message)</p>";let Be="";if(I!=null&&I.signatureHtml){const Oe=String(I.signatureHtml);Be=`<div style="margin-top:18px">${/<[^>]+>/.test(Oe)?Oe:Oe.replace(/\n/g,"<br/>")}</div>`}return`
      ${Te}
      <p>${Je}</p>
      <div>${ae}</div>
      ${Be}
    `},Rs="composer.canned_texts.v1",sp=()=>Ea(Rs,[]),h1=o=>{typeof window>"u"||window.localStorage.setItem(Rs,JSON.stringify(o))},Bc=o=>{const h=jn.current;h&&(h.focus(),document.execCommand("insertHTML",!1,o),Gg(h.innerHTML))},g1=()=>{const o=window.getSelection();if(!o||o.rangeCount===0)return null;let h=o.getRangeAt(0).commonAncestorContainer;for((h==null?void 0:h.nodeType)===3&&(h=h.parentElement);h&&h!==jn.current;){if(h.tagName==="OL"||h.tagName==="UL")return h;h=h.parentElement}return null},ei=o=>{const h=g1();h&&(h.style.listStyleType=o)},zt=(o,h)=>{const f=jn.current;if(f){if(f.focus(),o==="createLink"){if(!h)return;document.execCommand("createLink",!1,h);return}if(o==="insertImage"){if(!h)return;document.execCommand("insertImage",!1,h);return}if(o==="insertText"&&h){document.execCommand("insertText",!1,h);return}h!==void 0?document.execCommand(o,!1,h):document.execCommand(o,!1)}},Gg=o=>{const h=Mr(o);w(o),de(h),wn(f=>({...f,body:h}))},us=o=>{if(!N)return;Vs(o);const h=o==="emailUser"||o==="acknowledge"||o==="resolve"||o==="close"||o==="noteEmail"?Zr():"",f=`[${N.id}] ${N.subject}`,b=o==="logSupplier"?`Supplier log - ${f}`:o==="approval"?`Approval Pending - Ticket #${N.id}`:o==="resolve"?`Resolution update - ${f}`:o==="close"?`Ticket closed - ${f}`:o==="acknowledge"?`Acknowledged - ${f}`:`Update - ${f}`,I=o==="approval"?Uc():"",P=I?`<div>${Aa(I).replace(/\n/g,"<br/>")}</div>`:"";wn(z=>({...z,to:h,cc:"",bcc:"",subject:b,body:I,actionStatus:"With User",currentAction:"",nextAction:"",asset:""})),w(P),de(I),jn.current&&(jn.current.innerHTML=P),T([]),Ae(!1),Qe(!1),te(!1),_e(!0),window.requestAnimationFrame(()=>{jn.current&&(jn.current.innerHTML=P)})},v1=()=>{var z,Te,me,Je;if(!N)return[];if(!ie(N.type))return Ee();if((e==null?void 0:e.role)==="USER")return[{label:"Back",onClick:Ge}];const o=(N.status||"").toLowerCase(),h=sn(N),f=h.accepted||o!=="new",b=h.ackSent||f&&o!=="acknowledged",I=!!((Te=(z=N==null?void 0:N.sla)==null?void 0:z.response)!=null&&Te.completedAt)&&Number(((Je=(me=N==null?void 0:N.sla)==null?void 0:me.response)==null?void 0:Je.completedById)||0)>0,P=[];return P.push({label:"Back",onClick:Ge}),b&&!I&&P.push({label:"Mark as responsed",onClick:Yg}),o==="closed"?(P.push({label:"Re-open",onClick:()=>ap("In Progress","Re-opened")}),P.push({label:"Internal note",onClick:()=>Hn("internal")}),P.push({label:"Private note",onClick:()=>Hn("private")}),P.push({label:"Email User",onClick:()=>us("emailUser")}),P):o==="new"&&!h.accepted?(P.push({label:"Accept",onClick:Jg}),P.push({label:"Private note",onClick:()=>Hn("private")}),P.push({label:"Close",onClick:()=>us("close")}),P):o==="acknowledged"&&!h.ackSent?(P.push({label:"Acknowledge",onClick:()=>us("acknowledge")}),P.push({label:"Private note",onClick:()=>Hn("private")}),P.push({label:"Close",onClick:()=>us("close")}),P):(f&&!h.ackSent&&P.push({label:"Acknowledge",onClick:()=>us("acknowledge")}),P.push({label:"Email User",onClick:()=>us("emailUser")}),b&&!h.supplierLogged?P.push({label:"Log to Supplier",onClick:()=>us("logSupplier")}):b&&(P.push({label:"Email Supplier",onClick:()=>us("emailSupplier")}),P.push({label:"Call Back Supplier",onClick:()=>us("callbackSupplier")})),P.push({label:"Internal note",onClick:()=>Hn("internal")}),P.push({label:"Private note",onClick:()=>Hn("private")}),P.push({label:"Note + Email",onClick:()=>us("noteEmail")}),b&&P.push({label:"Requesting Approval",onClick:()=>us("approval")}),b&&P.push({label:"Resolve",onClick:()=>us("resolve")}),P.push({label:"Close",onClick:()=>us("close")}),P)},x1={Back:"arrow-left",Accept:"circle-check-big",Acknowledge:"check","Internal note":"sticky-note","Private note":"sticky-note",Close:"circle-x","Email User":"mail","Log to Supplier":"package",Approval:"clipboard-check","Requesting Approval":"clipboard-check","Note + Email":"mail-plus","Call Back Supplier":"phone-call",Resolve:"circle-check-big","Re-open":"rotate-ccw",Reclose:"lock","Email Supplier":"send","Recall to Approval":"refresh-ccw","Waiting for Approval":"clipboard-check","In Progress":"refresh-ccw",Acknowledged:"check","Mark as responsed":"badge-check"},y1=o=>{const h=(o||"").toLowerCase();return h!=="closed"&&h!=="resolved"},Pr=i.filter(o=>y1(o.status)),zc=xa.filter(o=>!Array.isArray(o.visibilityRoles)||o.visibilityRoles.length===0?!0:o.visibilityRoles.map(h=>String(h||"").toUpperCase()).includes(String((e==null?void 0:e.role)||"").toUpperCase())).filter(o=>{const h=String(o.label||"").trim().toLowerCase();return h!=="helpdesk"&&h!=="service request"}),zi=o=>{const h=String(o.category||"").trim(),f=zc.find(b=>b.label.trim().toLowerCase()===h.toLowerCase());return f?{team:f.label,forcedUnassigned:!1}:{team:"Support Desk",forcedUnassigned:!0}},j1=Pr.filter(o=>!o.assignedAgentId&&!o.assignedAgentName).length,b1=Pr.filter(o=>(o.status||"").toLowerCase().includes("supplier")).length;Pr.reduce((o,h)=>{const f=zi(h).team;return o[f]=(o[f]||0)+1,o},{});const w1=(()=>{const o={};return zc.forEach(h=>{const f=String(h.label||"").trim();!f||o[f]||(o[f]={total:0,unassigned:0,agents:{}})}),o["Support Desk"]||(o["Support Desk"]={total:0,unassigned:0,agents:{}}),Pr.forEach(h=>{const f=zi(h),b=f.team;o[b]||(o[b]={total:0,unassigned:0,agents:{}}),o[b].total+=1;const I=String(h.assignedAgentId||h.assignedAgentName||"").trim();if(f.forcedUnassigned||!I){o[b].unassigned+=1;return}const P=h.assignedAgentName||String(h.assignedAgentId);o[b].agents[I]||(o[b].agents[I]={label:P,count:0}),o[b].agents[I].count+=1}),o})(),N1=Pr.reduce((o,h)=>{const f=h.type||"Unknown";return o[f]=(o[f]||0)+1,o},{}),S1=Pr.reduce((o,h)=>{const f=h.status||"Unknown";return o[f]=(o[f]||0)+1,o},{}),Hl={all:i.length,open:Pr.length,closed:i.filter(o=>String(o.status||"").toLowerCase()==="closed").length,breached:i.filter(o=>String(o.slaTimeLeft||"").startsWith("-")).length,hold:i.filter(o=>{const h=String(o.status||"").toLowerCase(),f=String(o.slaTimeLeft||"").toLowerCase();return h.includes("hold")||f.includes("hold")}).length},k1=[{key:"myLists",label:"My Lists",icon:"?"},{key:"staff",label:"Tickets by Staff",icon:"?"},{key:"team",label:"Tickets by Team",icon:"??"},{key:"type",label:"Tickets by Ticket Type",icon:"??"},{key:"status",label:"Tickets by Status",icon:"?"},{key:"all",label:"All Tickets",icon:"?"}],C1={all:"All Tickets",team:"Tickets by Team",staff:"Tickets by Staff",type:"Tickets by Ticket Type",status:"Tickets by Status",myLists:"My Lists"},A1=oe.useMemo(()=>cs([...Wm,...i.map(o=>o.type),N==null?void 0:N.type]),[i,N==null?void 0:N.type]),E1=oe.useMemo(()=>cs([...qm,N==null?void 0:N.workflow]),[N==null?void 0:N.workflow]),T1=oe.useMemo(()=>cs([...wa,...i.map(o=>o.status),N==null?void 0:N.status]),[i,N==null?void 0:N.status]),R1=oe.useMemo(()=>cs([...zc.map(o=>o.label),N==null?void 0:N.team,N==null?void 0:N.category,N?zi(N).team:""]),[zc,N]),rp=oe.useMemo(()=>Vn.map(o=>({id:String((o==null?void 0:o.id)||""),label:ds(o)})),[Vn]),M1=oe.useMemo(()=>cs(Object.keys(os).map(o=>o.split(">")[0])),[os]),P1=oe.useMemo(()=>{if(!Fi)return[];const o=os[Fi]||[],h=Object.entries(os).filter(([f])=>f.startsWith(`${Fi}>`)).flatMap(([,f])=>f);return cs([...o,...h,N==null?void 0:N.issueDetail,_l])},[os,_l,Fi,N==null?void 0:N.issueDetail]),ti=(o,h)=>{K(f=>f&&f.id===o?{...f,...h}:f),a(f=>f.map(b=>b.id===o?{...b,...h}:b))},ip=async(o,h)=>{var f,b;if(N){ti(N.id,h);try{await Sd(N.id,o)}catch(I){alert(((b=(f=I==null?void 0:I.response)==null?void 0:f.data)==null?void 0:b.error)||(I==null?void 0:I.message)||"Failed to update ticket details")}}};oe.useEffect(()=>{var h;if(!N)return;const o=String(((h=xa.find(f=>!Array.isArray(f.visibilityRoles)||f.visibilityRoles.length===0?!0:f.visibilityRoles.map(b=>String(b||"").toUpperCase()).includes(String((e==null?void 0:e.role)||"").toUpperCase())))==null?void 0:h.label)||"").trim();Ul(null),Sa(null),Nc(String(N.createdFrom||Oi(N))),Jr(String(N.workflow||"Incident Management Workflow")),$l(String(N.team||zi(N).team||N.category||o||"")),Sc(String((N.additionalAgents||[])[0]||"")),Dl(String(N.category||"")),kc(String(N.issueDetail||"")),Cc(String(N.resolution||"Not set")),ka({name:String((R==null?void 0:R.name)||""),email:String((R==null?void 0:R.email)||""),phone:String((R==null?void 0:R.phone)||""),site:String((R==null?void 0:R.site)||""),accountManager:String((R==null?void 0:R.accountManager)||"")})},[R==null?void 0:R.accountManager,R==null?void 0:R.email,R==null?void 0:R.name,R==null?void 0:R.phone,R==null?void 0:R.site,N==null?void 0:N.id,xa,e==null?void 0:e.role]),oe.useEffect(()=>{if(!R)return;const o=R!=null&&R.id?Vn.find(P=>Number(P==null?void 0:P.id)===Number(R.id)):null,h=!o&&(R!=null&&R.email)?Vn.find(P=>String((P==null?void 0:P.email)||"").trim().toLowerCase()===String(R.email||"").trim().toLowerCase()):null,f=o||h;if(!f)return;const b={id:(R==null?void 0:R.id)||f.id,name:(R==null?void 0:R.name)||f.name||f.username||(R==null?void 0:R.email)||"End User",username:(R==null?void 0:R.username)||f.username||f.userName||"",email:(R==null?void 0:R.email)||f.email||"",phone:(R==null?void 0:R.phone)||f.phone||"",site:(R==null?void 0:R.site)||f.site||"",accountManager:(R==null?void 0:R.accountManager)||f.accountManager||f.reportingManager||"",avatarUrl:(R==null?void 0:R.avatarUrl)||f.avatarUrl||""};(String((R==null?void 0:R.id)||"")!==String(b.id||"")||String((R==null?void 0:R.name)||"")!==String(b.name||"")||String((R==null?void 0:R.username)||"")!==String(b.username||"")||String((R==null?void 0:R.email)||"")!==String(b.email||"")||String((R==null?void 0:R.phone)||"")!==String(b.phone||"")||String((R==null?void 0:R.site)||"")!==String(b.site||"")||String((R==null?void 0:R.accountManager)||"")!==String(b.accountManager||"")||String((R==null?void 0:R.avatarUrl)||"")!==String(b.avatarUrl||""))&&Q(P=>({...P||{},...b}))},[Vn,R]);const L1=()=>g==="staff"?n.jsxs("svg",{viewBox:"0 0 24 24",width:"18",height:"18",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[n.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),n.jsx("circle",{cx:"8.5",cy:"7",r:"3.5"}),n.jsx("path",{d:"M20 8v6"}),n.jsx("path",{d:"M23 11h-6"})]}):g==="team"?n.jsxs("svg",{viewBox:"0 0 24 24",width:"18",height:"18",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[n.jsx("circle",{cx:"9",cy:"7",r:"3"}),n.jsx("circle",{cx:"17",cy:"8",r:"2.5"}),n.jsx("path",{d:"M2 20a7 7 0 0 1 14 0"}),n.jsx("path",{d:"M14 20a5 5 0 0 1 8 0"})]}):g==="type"?n.jsxs("svg",{viewBox:"0 0 24 24",width:"18",height:"18",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[n.jsx("path",{d:"M20.6 13.4 11 23l-9-9 9.6-9.6a2 2 0 0 1 1.4-.6H20a2 2 0 0 1 2 2v7a2 2 0 0 1-.6 1.4Z"}),n.jsx("circle",{cx:"16",cy:"8",r:"1"})]}):g==="status"?n.jsxs("svg",{viewBox:"0 0 24 24",width:"18",height:"18",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[n.jsx("circle",{cx:"12",cy:"12",r:"10"}),n.jsx("path",{d:"M12 8v4"}),n.jsx("path",{d:"M12 16h.01"})]}):g==="myLists"?n.jsxs("svg",{viewBox:"0 0 24 24",width:"18",height:"18",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[n.jsx("line",{x1:"8",y1:"6",x2:"21",y2:"6"}),n.jsx("line",{x1:"8",y1:"12",x2:"21",y2:"12"}),n.jsx("line",{x1:"8",y1:"18",x2:"21",y2:"18"}),n.jsx("line",{x1:"3",y1:"6",x2:"3.01",y2:"6"}),n.jsx("line",{x1:"3",y1:"12",x2:"3.01",y2:"12"}),n.jsx("line",{x1:"3",y1:"18",x2:"3.01",y2:"18"})]}):n.jsxs("svg",{viewBox:"0 0 24 24",width:"18",height:"18",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[n.jsx("circle",{cx:"11",cy:"11",r:"7"}),n.jsx("line",{x1:"16.5",y1:"16.5",x2:"21",y2:"21"})]}),I1=!Qs&&r?Mi.createPortal(n.jsxs("aside",{className:"ticket-queue-sidebar",children:[n.jsxs("div",{className:"queue-header",children:[n.jsx("div",{className:"queue-title-icon","aria-hidden":"true",children:L1()}),n.jsx("div",{className:"queue-title",children:n.jsxs("div",{className:"queue-title-top",children:[n.jsx("button",{className:"queue-title-btn",onClick:()=>v("all"),title:"Select queue view",children:n.jsx("div",{className:"queue-title-text",children:C1[g]})}),n.jsx("button",{className:"queue-edit-btn",onClick:()=>v("all"),title:"Change ticket queue",children:n.jsxs("svg",{viewBox:"0 0 24 24",width:"13",height:"13",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[n.jsx("path",{d:"M12 20h9"}),n.jsx("path",{d:"M16.5 3.5a2.1 2.1 0 0 1 3 3L7 19l-4 1 1-4Z"})]})})]})}),n.jsx("button",{className:"queue-collapse-btn",title:"Hide Menu",onClick:()=>Tr(!0),children:n.jsxs("svg",{viewBox:"0 0 24 24",width:"14",height:"14",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[n.jsx("polyline",{points:"13 18 7 12 13 6"}),n.jsx("polyline",{points:"19 18 13 12 19 6"})]})})]}),n.jsxs("div",{className:"queue-list",children:[g==="all"&&n.jsx(n.Fragment,{children:k1.map(o=>n.jsxs("div",{className:`queue-item${g===o.key?" queue-item-active":""}`,onClick:()=>v(o.key),children:[n.jsx("div",{className:"queue-avatar",children:o.icon}),n.jsx("div",{className:"queue-name",children:o.label})]},o.key))}),g==="team"&&n.jsx(n.Fragment,{children:Object.entries(w1).map(([o,h])=>{const f=S.includes(o);return n.jsxs(oe.Fragment,{children:[n.jsxs("div",{className:`queue-item${d.type==="team"&&d.value===o?" queue-item-active":""}`,onClick:()=>{O(b=>b.includes(o)?b.filter(I=>I!==o):[...b,o]),p(b=>b.type==="team"&&b.value===o?{type:"all"}:{type:"team",value:o})},children:[n.jsx("div",{className:"queue-avatar",children:n.jsx("span",{className:`queue-caret${f?" queue-caret-down":""}`,children:">"})}),n.jsx("div",{className:"queue-name",children:o}),n.jsx("div",{className:"queue-count",children:h.total})]}),f&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:`queue-item queue-item-child${d.type==="teamUnassigned"&&d.team===o?" queue-item-active":""}`,onClick:()=>{p(b=>b.type==="teamUnassigned"&&b.team===o?{type:"all"}:{type:"teamUnassigned",team:o})},children:[n.jsx("div",{className:"queue-avatar queue-avatar-dark",children:"U"}),n.jsx("div",{className:"queue-name",children:"Unassigned"}),n.jsx("div",{className:"queue-count",children:h.unassigned})]}),Object.entries(h.agents).map(([b,I])=>n.jsxs("div",{className:`queue-item queue-item-child${d.type==="teamAgent"&&d.team===o&&d.value===b?" queue-item-active":""}`,onClick:()=>{p(P=>P.type==="teamAgent"&&P.team===o&&P.value===b?{type:"all"}:{type:"teamAgent",team:o,value:b})},children:[(()=>{const P=m(b,I.label),z=ql(P||{id:b,name:I.label});return n.jsxs("div",{className:"queue-avatar queue-avatar-with-presence",children:[A(P||{id:b,name:I.label},I.label),fr(z)?n.jsx("span",{className:`queue-avatar-presence queue-avatar-presence-${z}`}):null]})})(),n.jsx("div",{className:"queue-name",children:I.label}),n.jsx("div",{className:"queue-count",children:I.count})]},`${o}-${b}`))]})]},o)})}),g==="staff"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:`queue-item${d.type==="unassigned"?" queue-item-active":""}`,onClick:()=>p(o=>o.type==="unassigned"?{type:"all"}:{type:"unassigned"}),children:[n.jsx("div",{className:"queue-avatar queue-avatar-dark",children:"U"}),n.jsx("div",{className:"queue-name",children:"Unassigned"}),n.jsx("div",{className:"queue-count",children:j1})]}),Vn.map(o=>n.jsxs("div",{className:`queue-item${d.type==="agent"&&String(d.agentId||"")===String(o.id)?" queue-item-active":""}`,onClick:()=>{const h=ds(o);p(f=>f.type==="agent"&&String(f.agentId||"")===String(o.id)?{type:"all"}:{type:"agent",agentId:String(o.id),agentName:h})},children:[n.jsxs("div",{className:"queue-avatar queue-avatar-with-presence",children:[A(o,ds(o)),(()=>{const h=ql(o);return fr(h)?n.jsx("span",{className:`queue-avatar-presence queue-avatar-presence-${h}`}):null})()]}),n.jsx("div",{className:"queue-name",children:ds(o)}),n.jsx("div",{className:"queue-count",children:Pr.filter(h=>{const f=String(h.assignedAgentId||"")===String(o.id),b=h.assignedAgentName&&ds(o)&&h.assignedAgentName===ds(o);return f||b}).length})]},`agent-${o.id}`))]}),g==="type"&&n.jsx(n.Fragment,{children:Object.entries(N1).map(([o,h])=>{var f;return n.jsxs("div",{className:`queue-item${d.type==="ticketType"&&d.value===o?" queue-item-active":""}`,onClick:()=>p(b=>b.type==="ticketType"&&b.value===o?{type:"all"}:{type:"ticketType",value:o}),children:[n.jsx("div",{className:"queue-avatar",children:((f=o.trim()[0])==null?void 0:f.toUpperCase())||"T"}),n.jsx("div",{className:"queue-name",children:o}),n.jsx("div",{className:"queue-count",children:h})]},o)})}),g==="status"&&n.jsx(n.Fragment,{children:Object.entries(S1).map(([o,h])=>{var f;return n.jsxs("div",{className:`queue-item${d.type==="status"&&d.value===o?" queue-item-active":""}`,onClick:()=>p(b=>b.type==="status"&&b.value===o?{type:"all"}:{type:"status",value:o}),children:[n.jsx("div",{className:"queue-avatar",children:((f=o.trim()[0])==null?void 0:f.toUpperCase())||"S"}),n.jsx("div",{className:"queue-name",children:o}),n.jsx("div",{className:"queue-count",children:h})]},o)})}),g==="myLists"&&n.jsx(n.Fragment,{children:As.map(o=>{var h;return n.jsxs("div",{className:`queue-item${d.type==="myList"&&d.value===o.id?" queue-item-active":""}`,onClick:()=>p(f=>f.type==="myList"&&f.value===o.id?{type:"all"}:{type:"myList",value:o.id}),children:[n.jsx("div",{className:"queue-avatar",children:((h=o.label.trim()[0])==null?void 0:h.toUpperCase())||"M"}),n.jsx("div",{className:"queue-name",children:o.label}),n.jsx("div",{className:"queue-count",children:o.field==="status"&&String(o.value).toLowerCase()==="all"?Hl.all:o.field==="status"&&String(o.value).toLowerCase()==="open"?Hl.open:o.field==="status"&&String(o.value).toLowerCase()==="closed"?Hl.closed:o.field==="sla"?String(o.value).toLowerCase()==="hold"?Hl.hold:Hl.breached:Pr.filter(f=>String(f[o.field]||"").toLowerCase()===String(o.value||"").toLowerCase()).length})]},o.id)})}),g==="staff"&&n.jsxs("div",{className:`queue-item${d.type==="supplier"?" queue-item-active":""}`,onClick:()=>{p(o=>o.type==="supplier"?{type:"all"}:{type:"supplier"})},children:[n.jsx("div",{className:"queue-avatar queue-avatar-accent",children:"S"}),n.jsx("div",{className:"queue-name",children:"With Supplier"}),n.jsx("div",{className:"queue-count",children:b1})]})]})]}),r):null;function ni(o){const h=String(o||"").trim();if(!h)return"NA";const f=h.split(" ").filter(Boolean);return f.length===0?"NA":f.slice(0,2).map(b=>b[0]).join("").toUpperCase()}const O1=o=>{const h=String(o||"").trim();if(!h)return"";const f=h.toLowerCase();return f.startsWith("data:")&&h.length>12e4?"":f.startsWith("http://")||f.startsWith("https://")||f.startsWith("blob:")||f.startsWith("data:image/")?h:""},Ta=()=>{const o=String((R==null?void 0:R.name)||(R==null?void 0:R.username)||(R==null?void 0:R.email)||(N==null?void 0:N.endUser)||"End User").trim(),h=String((R==null?void 0:R.email)||"").trim().toLowerCase(),f=String((R==null?void 0:R.username)||"").trim().toLowerCase(),b=O1(String((R==null?void 0:R.avatarUrl)||(R==null?void 0:R.profilePic)||(R==null?void 0:R.avatar)||(R==null?void 0:R.photoUrl)||(R==null?void 0:R.imageUrl)||"").trim());return{name:o,email:h,username:f,avatarUrl:b}},$1=o=>{const h=Ta(),f=String(o||"").trim(),b=f.toLowerCase();return f?b&&(b===h.email||b===h.username||b===h.name.toLowerCase())?{name:h.name,avatarUrl:h.avatarUrl,initials:ni(h.name)}:{name:f||"Unknown",avatarUrl:"",initials:ni(f||"Unknown")}:{name:h.name||"End User",avatarUrl:h.avatarUrl,initials:ni(h.name||"End User")}},Jg=()=>{if(!N)return;const o=pr(),h=e!=null&&e.id?String(e.id):o,f=ie(N.type)?"In Progress":"Assigned";a(I=>I.map(P=>P.id===N.id?{...P,status:f,assignedAgentId:h,assignedAgentName:o}:P)),K(I=>I&&{...I,status:f,assignedAgentId:h,assignedAgentName:o}),q(N.id,`Accepted by ${o}`),Es(N.id,{accepted:!0,ackSent:!1});const b=I=>{I&&(K(P=>P&&{...P,status:I.status||P.status,sla:I.sla||P.sla,slaTimeLeft:I.slaTimeLeft||P.slaTimeLeft}),a(P=>P.map(z=>z.id===N.id?{...z,status:I.status||z.status,sla:I.sla||z.sla,slaTimeLeft:I.slaTimeLeft||z.slaTimeLeft}:z)))};(async()=>{var P;let I=!0;try{const z=await wd(N.id);b(z),I=String((z==null?void 0:z.status)||"").trim().toLowerCase()==="new"}catch{}try{if(I){const z=await _a(N.id,f);b(z)}}catch(z){Number(((P=z==null?void 0:z.response)==null?void 0:P.status)||0)!==400&&console.warn("Accept transition failed",z)}e!=null&&e.id&&Sd(N.id,{assigneeId:Number(e.id)}).then(b).catch(z=>{console.warn("Assign after accept failed",z)})})()},Yg=()=>{N&&(async()=>{var o,h;try{const f=await DP(N.id);K(b=>b&&{...b,sla:f.sla||b.sla,slaTimeLeft:f.slaTimeLeft||b.slaTimeLeft}),a(b=>b.map(I=>I.id===N.id?{...I,sla:f.sla||I.sla,slaTimeLeft:f.slaTimeLeft||I.slaTimeLeft}:I)),q(N.id,"Response SLA marked as responded")}catch(f){console.warn("Mark response SLA failed",f),alert(((h=(o=f==null?void 0:f.response)==null?void 0:o.data)==null?void 0:h.error)||(f==null?void 0:f.message)||"Failed to mark response SLA")}})()},Vl=(o,h)=>{const f={"arrow-left":"","circle-check-big":"",check:"","sticky-note":"","circle-x":"",mail:"",package:"","clipboard-check":"","mail-plus":"","phone-call":"","rotate-ccw":"",lock:"L",send:"","refresh-ccw":"","badge-check":"","messages-square":"","square-plus":"+","square-minus":"","arrow-up":"","arrow-down":""};return n.jsx("span",{className:h,"aria-hidden":"true",children:f[o]||""})},Xg=o=>{const h=x1[o];return h?Vl(h,"action-icon"):null},Zg=o=>!Number.isFinite(o)||o<=0?"0 B":o<1024?`${o} B`:o<1024*1024?`${(o/1024).toFixed(1)} KB`:`${(o/(1024*1024)).toFixed(1)} MB`,ev=(o,h)=>{if(!o||o.length===0)return;const f=Array.from(o),b=f.find(P=>P.size>Oy);if(b){alert(`"${b.name}" exceeds 32MB. Maximum allowed is 32MB per file.`);return}const I=f.map(P=>({key:`${P.name}-${P.size}-${P.lastModified}-${Math.random()}`,file:P}));h==="composer"?T(P=>[...P,...I]):ke(P=>[...P,...I])},tv=(o,h)=>{h==="composer"?T(f=>f.filter(b=>b.key!==o)):ke(f=>f.filter(b=>b.key!==o))},D1=o=>new Promise((h,f)=>{const b=new FileReader;b.onload=()=>{const I=String(b.result||""),P=I.includes(",")?I.split(",")[1]:I;P?h(P):f(new Error(`Failed to read file "${o.name}"`))},b.onerror=()=>f(new Error(`Failed to read file "${o.name}"`)),b.readAsDataURL(o)}),nv=async(o,h)=>{if(!h.length)return[];if(h.reduce((b,I)=>b+I.file.size,0)>Oy)throw new Error("Total selected attachment size exceeds 32MB.");Xe(!0);try{const b=await Promise.all(h.map(async P=>({name:P.file.name,type:P.file.type||"application/octet-stream",size:P.file.size,contentBase64:await D1(P.file)}))),I=await _P(o,{files:b});return Array.isArray(I==null?void 0:I.items)?I.items:[]}finally{Xe(!1)}},ap=async(o,h)=>{var f,b;if(N)try{const I=await _a(N.id,o);a(P=>P.map(z=>z.id===N.id?{...z,status:I.status}:z)),K(P=>P&&{...P,status:I.status}),q(N.id,h||`Status updated to ${o}`)}catch(I){alert(((b=(f=I==null?void 0:I.response)==null?void 0:f.data)==null?void 0:b.error)||(I==null?void 0:I.message)||`Failed to set status: ${o}`)}},_1=()=>{N&&(q(N.id,"Opened GChat"),window.open("https://chat.google.com/"))},F1=()=>{const o=ee.trim()||Mr(dt);if(!o){alert("Please enter message");return}de(o),re(!0)},U1=async()=>{var h,f;if(!N)return;const o=ee.trim();if(!o){alert("Please enter message");return}try{const b=await nv(N.id,Ut),I=b.map(z=>Number(z.id)).filter(z=>Number.isFinite(z)),P=b.length?`
Attachments: ${b.map(z=>z.filename).join(", ")}`:"";un==="resolve"?(await FP(N.id,{resolution:o,resolutionCategory:ut.issueDetail||void 0,sendEmail:!!ut.to.trim()}),I.length&&await Nd(N.id,{note:`Resolution attachments uploaded${P}`,attachmentIds:I}),rn(N.id,"Resolved"),q(N.id,`Resolved: ${o}`)):un==="close"?(ut.to.trim()?await Xp(N.id,{message:o,sendEmail:!0,to:ut.to.trim(),cc:ut.cc.trim()||void 0,bcc:ut.bcc.trim()||void 0,subject:ut.subject.trim()||`Ticket closed - ${N.id}`,attachmentIds:I}):I.length&&await Nd(N.id,{note:`Closure attachments uploaded${P}`,attachmentIds:I}),await _a(N.id,"Closed"),rn(N.id,"Closed"),q(N.id,`Closed: ${o}`)):un==="noteEmail"?(await Nd(N.id,{note:o,attachmentIds:I}),ut.to.trim()&&await Xp(N.id,{message:o,sendEmail:!0,to:ut.to.trim(),cc:ut.cc.trim()||void 0,bcc:ut.bcc.trim()||void 0,subject:ut.subject.trim()||`Update - ${N.id}`,attachmentIds:I}),q(N.id,`Note + Email: ${o}`)):(await Xp(N.id,{message:o,sendEmail:!!ut.to.trim(),to:ut.to.trim()||void 0,cc:ut.cc.trim()||void 0,bcc:ut.bcc.trim()||void 0,subject:ut.subject.trim()||void 0,attachmentIds:I}),q(N.id,`${Ts()}: ${o}`),un==="acknowledge"&&(await _a(N.id,"In Progress").catch(()=>{}),rn(N.id,"In Progress"),Es(N.id,{ackSent:!0})),un==="approval"&&(await _a(N.id,"Awaiting Approval").catch(()=>{}),rn(N.id,"Awaiting Approval")),un==="logSupplier"&&(rn(N.id,"With Supplier"),Es(N.id,{supplierLogged:!0}))),T([]),w(""),de(""),_e(!1)}catch(b){alert(((f=(h=b==null?void 0:b.response)==null?void 0:h.data)==null?void 0:f.error)||(b==null?void 0:b.message)||"Failed to send action")}},B1=async()=>{var b,I;if(!N)return;const o=Ks.body.trim(),h=ct==="internal"?"internal note":"private note";if(!o){alert(`Please enter ${h}`);return}const f=ct==="internal"?/^internal:/i.test(o)?o:`Internal: ${o}`:/^private:/i.test(o)?o:`Private: ${o}`;q(N.id,f,{internal:!0,kind:ct,changedById:Number((e==null?void 0:e.id)||0)||null});try{const z=(await nv(N.id,Se)).map(Te=>Number(Te.id)).filter(Te=>Number.isFinite(Te));await Nd(N.id,{note:f,attachmentIds:z}),Ks.status&&Ks.status!==N.status&&(await _a(N.id,Ks.status).catch(()=>{}),rn(N.id,Ks.status)),ke([])}catch(P){alert(((I=(b=P==null?void 0:P.response)==null?void 0:b.data)==null?void 0:I.error)||(P==null?void 0:P.message)||"Failed to save internal note")}et(!1)},z1=async(o="")=>{try{const h=await Jo({page:1,pageSize:20,q:o}),f=Array.isArray(h)?h:(h==null?void 0:h.items)||[];Ze(f)}catch(h){console.warn("Failed to load assets",h)}};oe.useEffect(()=>{const o=h=>{const f=(h==null?void 0:h.detail)||{},b=f.action,I=f.message,P=N||i[0];if(P){if(b==="email"){q(P.id,I||"Email user action started");const z=encodeURIComponent(`[${P.id}] ${P.subject}`);window.open(`mailto:${f.to||"admin@example.com"}?subject=${z}`)}else if(b==="log")q(P.id,I||"Logged to supplier");else if(b==="resolve"){const z=i.map(Te=>Te.id===P.id?{...Te,status:"Closed"}:Te);a(z),K(Te=>Te&&{...Te,status:"Closed"}),q(P.id,I||"Ticket resolved/closed")}}};return window.addEventListener("ticket-action",o),()=>window.removeEventListener("ticket-action",o)},[N,i]);const sv=i.filter(o=>{let h=!1;if(l==="All Tickets"?h=!0:l==="Closed Tickets"?h=o.status==="Closed":l==="Open Tickets"&&(h=o.status!=="Closed"),!h)return!1;if(ue.trim()){const f=ue.toLowerCase();if(!(o.id.toLowerCase().includes(f)||o.subject.toLowerCase().includes(f)||o.category.toLowerCase().includes(f)||String(o.slaTimeLeft||"").toLowerCase().includes(f)||o.priority.toLowerCase().includes(f)||o.status.toLowerCase().includes(f)||o.type.toLowerCase().includes(f)||o.dateReported.toLowerCase().includes(f)||String(o.issueDetail||"").toLowerCase().includes(f)||String(o.resolution||"").toLowerCase().includes(f)||String(o.closedAt?new Date(o.closedAt).toLocaleString():"").toLowerCase().includes(f)))return!1}if(ot.id&&!o.id.toLowerCase().includes(ot.id.toLowerCase())||ot.subject&&!o.subject.toLowerCase().includes(ot.subject.toLowerCase())||ot.category&&!o.category.toLowerCase().includes(ot.category.toLowerCase())||ot.slaTimeLeft&&!String(o.slaTimeLeft||"").toLowerCase().includes(ot.slaTimeLeft.toLowerCase())||ot.priority&&!o.priority.toLowerCase().includes(ot.priority.toLowerCase())||ot.status&&!o.status.toLowerCase().includes(ot.status.toLowerCase())||ot.type&&!o.type.toLowerCase().includes(ot.type.toLowerCase())||ot.endUser&&!o.endUser.toLowerCase().includes(ot.endUser.toLowerCase())||ot.lastAction&&!o.lastAction.toLowerCase().includes(ot.lastAction.toLowerCase())||ot.dateReported&&!o.dateReported.toLowerCase().includes(ot.dateReported.toLowerCase())||ot.issueDetail&&!String(o.issueDetail||"").toLowerCase().includes(ot.issueDetail.toLowerCase())||ot.resolution&&!String(o.resolution||"").toLowerCase().includes(ot.resolution.toLowerCase())||ot.dateClosed&&!(o.closedAt?new Date(o.closedAt).toLocaleString():"").toLowerCase().includes(ot.dateClosed.toLowerCase()))return!1;if(d.type==="unassigned"){if(o.assignedAgentId||o.assignedAgentName)return!1}else if(d.type==="supplier"){if(!(o.status||"").toLowerCase().includes("supplier"))return!1}else if(d.type==="agent"){const f=d.agentId&&String(o.assignedAgentId||"")===String(d.agentId),b=d.agentName&&o.assignedAgentName&&o.assignedAgentName===d.agentName;if(!f&&!b)return!1}else if(d.type==="team"){if(zi(o).team!==d.value)return!1}else if(d.type==="teamUnassigned"){const f=zi(o);if(f.team!==d.team||!f.forcedUnassigned&&(o.assignedAgentId||o.assignedAgentName))return!1}else if(d.type==="teamAgent"){const f=zi(o);if(f.team!==d.team||f.forcedUnassigned)return!1;const b=String(o.assignedAgentId||o.assignedAgentName||"").trim();if(!b||b!==String(d.value||""))return!1}else if(d.type==="ticketType"){if(String(o.type||"")!==String(d.value||""))return!1}else if(d.type==="status"){if(String(o.status||"")!==String(d.value||""))return!1}else if(d.type==="myList"){const f=As.find(b=>b.id===d.value);if(f){if(f.field==="sla"&&f.value==="breach"&&!String(o.slaTimeLeft||"").startsWith("-"))return!1;if(f.field==="sla"&&String(f.value).toLowerCase()==="hold"){const b=String(o.status||"").toLowerCase(),I=String(o.slaTimeLeft||"").toLowerCase();if(!b.includes("hold")&&!I.includes("hold"))return!1}if(f.field==="status"&&f.value.toLowerCase()==="open"){const b=String(o.status||"").toLowerCase();if(b==="closed"||b==="resolved")return!1}else if(!(f.field==="status"&&f.value.toLowerCase()==="all")){if(f.field==="status"&&f.value.toLowerCase()==="closed"){if(String(o.status||"").toLowerCase()!=="closed")return!1}else if(f.field!=="sla"&&String(o[f.field]||"").toLowerCase()!==String(f.value||"").toLowerCase())return!1}}}return!0}),Wc=sv.length,lp=Math.max(1,Math.ceil(Wc/E)),Wi=Math.min(j,lp),qc=(Wi-1)*E,rv=sv.slice(qc,qc+E),W1=Wc>0?qc+1:0,q1=Math.min(qc+E,Wc);oe.useEffect(()=>{j!==Wi&&C(Wi)},[j,Wi]),oe.useEffect(()=>{C(1)},[ue,l,d,ot]);const iv=()=>{console.log("Searching for:",ue)},Kn=(o,h)=>{const b=(I=>I==="subject"?"summary":I)(h);b!=="checkbox"&&(o.preventDefault(),o.stopPropagation(),Ui(b),Ic(o.clientX),Ym(Number(mn[b]||60)))},ms=o=>{const f=(Be=>Be==="subject"?"summary":Be)(o);if(f==="checkbox"||!Bl.current)return;const I={checkbox:"checkbox",status:"status",id:"id",summary:"subject",category:"category",priority:"priority",type:"type",lastAction:"lastAction",date:"date",endUser:"endUser",issueDetail:"issueDetail",resolution:"resolution",dateClosed:"dateClosed"}[f]||String(f),P=Array.from(Bl.current.querySelectorAll(`.col-${I}`));if(P.length===0)return;const me=P.reduce((Be,Oe)=>Math.max(Be,Oe.scrollWidth),0)+18,Je=1,ae=2e3;Lc(Be=>{const Oe={...Be};let nt=Math.max(Je,Math.min(ae,me));return Oe[f]=nt,Oe}),Pc(Be=>{const nt=(Object.keys(mn).length-1)*12,st=8,Ms=Object.values(mn).reduce((Ys,gr)=>Ys+gr,0)+nt+st;return Math.max(Be,Math.ceil(Ms))})};oe.useEffect(()=>{const o=f=>{if(!Gs)return;const b=f.clientX-Bi;Lc(I=>{const P={...I},z=2e3,Te=Gs;let me=Oc+b;const Je=1;me=Math.round(me/Tc)*Tc,me=Math.max(Je,Math.min(z,me)),P[Te]=me;const Be=(Object.keys(P).length-1)*12,Oe=8,st=Object.values(P).reduce((hs,Ms)=>hs+Ms,0)+Be+Oe;return Pc(hs=>Math.max(hs,Math.ceil(st))),P})},h=()=>{Ui(null)};if(Gs)return document.body.classList.add("is-column-resizing"),document.addEventListener("mousemove",o),document.addEventListener("mouseup",h),()=>{document.body.classList.remove("is-column-resizing"),document.removeEventListener("mousemove",o),document.removeEventListener("mouseup",h)};document.body.classList.remove("is-column-resizing")},[Gs,Bi,Oc]);const Hc=oe.useMemo(()=>{const o=i.length,h=i.filter(Je=>{const ae=String(Je.status||"").toLowerCase();return ae!=="closed"&&ae!=="resolved"}).length,f=i.filter(Je=>String(Je.status||"").toLowerCase()==="closed").length,b=i.reduce((Je,ae)=>{const Be=String(ae.priority||"Low");return Je[Be]=(Je[Be]||0)+1,Je},{}),I=10,P=new Date,z=new Array(I).fill(0),Te=[];for(let Je=I-1;Je>=0;Je-=1){const ae=new Date(P);ae.setDate(P.getDate()-Je),ae.setHours(0,0,0,0),Te.push(ae.toISOString().slice(0,10))}const me=new Map(Te.map((Je,ae)=>[Je,ae]));return i.forEach(Je=>{const ae=Je.dateReported;if(!ae)return;const Be=new Date(ae);if(Number.isNaN(Be.getTime()))return;const Oe=Be.toISOString().slice(0,10),nt=me.get(Oe);nt!==void 0&&(z[nt]+=1)}),{total:o,open:h,closed:f,byPriority:b,counts:z}},[i]);oe.useMemo(()=>{const f=Math.max(1,...Hc.counts);return{width:180,height:40,points:Hc.counts.map((I,P)=>{const z=P/Math.max(1,Hc.counts.length-1)*180,Te=40-I/f*40;return`${z},${Te}`}).join(" ")}},[Hc]);const op={gridTemplateColumns:`${mn.checkbox}px ${mn.status}px ${mn.id}px ${mn.summary}px ${mn.category}px ${mn.sla}px ${mn.priority}px ${mn.type}px ${mn.endUser}px ${mn.lastAction}px ${mn.date}px ${mn.issueDetail}px ${mn.resolution}px ${mn.dateClosed}px 1fr`,width:"100%",minWidth:`${Jm}px`},Vc=Number(((uv=N==null?void 0:N.sla)==null?void 0:uv.priorityRank)||mr(((mv=N==null?void 0:N.sla)==null?void 0:mv.priority)||(N==null?void 0:N.priority))),H1=String(((pv=N==null?void 0:N.sla)==null?void 0:pv.policyName)||"Select Policy"),Kl=String(At||H1),V1=oe.useMemo(()=>Array.from(new Set(qe.filter(h=>(h==null?void 0:h.active)!==!1).map(h=>String((h==null?void 0:h.name)||"").trim()).filter(Boolean))),[qe]),Kc=oe.useMemo(()=>N?qe.filter(o=>(o==null?void 0:o.active)!==!1&&String((o==null?void 0:o.name)||"")===Kl).slice().sort((o,h)=>Number((o==null?void 0:o.priorityRank)||mr(o==null?void 0:o.priority))-Number((h==null?void 0:h.priorityRank)||mr(h==null?void 0:h.priority))):[],[qe,N,Kl]),av=(()=>{var h;const o=Kc.find(f=>Number((f==null?void 0:f.priorityRank)||mr(f==null?void 0:f.priority))===Vc);return o!=null&&o.priority?String(o.priority):String(((h=N==null?void 0:N.sla)==null?void 0:h.priority)||(N==null?void 0:N.priority)||"P3")})(),K1=(()=>{const o=Number.isFinite(Vc)?Vc:3;return o<=1?"sla-tone-p1":o===2?"sla-tone-p2":o===3?"sla-tone-p3":"sla-tone-p4"})(),Ra=Kc.find(o=>Number((o==null?void 0:o.priorityRank)||mr(o==null?void 0:o.priority))===Vc)||Kc[0],Q1=o=>{const h=o==="response"?"responseTimeMin":"resolutionTimeMin",f=o==="response"?"responseMinutes":"resolutionMinutes",b=Number((Ra==null?void 0:Ra[h])??(Ra==null?void 0:Ra[f])??0);return Number.isFinite(b)&&b>0?b:0},lv=o=>{var Xs,si;const h=((Xs=N==null?void 0:N.sla)==null?void 0:Xs[o])||{},f=Q1(o),b=Kt(N==null?void 0:N.dateReported)??We,I=Kt(h==null?void 0:h.targetAt);let P=Kt(h==null?void 0:h.startedAt)??Kt((si=N==null?void 0:N.sla)==null?void 0:si.startedAt)??b,z=I;!z&&f>0&&(z=P+f*6e4),z&&!P&&f>0&&(P=z-f*6e4);const Te=Math.max(0,(z??P)-P),me=(z??We)-We,Je=Te>0?Math.max(0,Math.min(100,me/Te*100)):0,ae=Math.max(0,100-Je),Be=me,Oe=Kt(h==null?void 0:h.completedAt),nt=Number((h==null?void 0:h.completedById)||0),st=o==="response"?!!(Oe&&nt>0):!!Oe,hs=!!(st&&z&&Oe&&Oe>z),Ms=!!(!st&&z&&We>z),Ys=!!(h!=null&&h.breached)||hs||Ms,gr=st&&!Ys;return{percent:ae,balancePercent:Je,remainingLabel:Rr(Be),targetLabel:ja(z),completedLabel:ja(Oe),done:st,met:gr,breached:Ys,color:bc(ae)}},ps=lv("response"),fs=lv("resolution"),G1=o=>{const h=String(o||"").trim();if(!h)return null;const f=h.startsWith("-"),I=(f?h.slice(1):h).split(":").map(z=>Number(z));if(I.some(z=>!Number.isFinite(z)))return null;let P=0;if(I.length===2)P=I[0]*60+I[1];else if(I.length===3)P=I[0]*3600+I[1]*60+I[2];else return null;return f?-P:P},J1=o=>{const h=String(o||"").toLowerCase();return h==="critical"||h==="p1"?15:h==="high"||h==="p2"?30:h==="medium"||h==="p3"?60:240},Y1=o=>{const h=String(o||"").toLowerCase();return h==="critical"||h==="p1"?2*60:h==="high"||h==="p2"?4*60:h==="medium"||h==="p3"?8*60:24*60},X1=o=>{var Oe,nt,st,hs,Ms,Ys,gr;const h=We,f=((Oe=o==null?void 0:o.sla)==null?void 0:Oe.response)||{},b=((nt=o==null?void 0:o.sla)==null?void 0:nt.resolution)||{},I=!!(f!=null&&f.completedAt)&&Number((f==null?void 0:f.completedById)||0)>0,P=I?b:f,z=Kt(P==null?void 0:P.startedAt)??Kt((st=o==null?void 0:o.sla)==null?void 0:st.startedAt)??Kt(o==null?void 0:o.createdAt)??Kt(o.dateReported),Te=Kt(P==null?void 0:P.targetAt);let me=0,Je=!1,ae=String(I?((Ms=(hs=o==null?void 0:o.sla)==null?void 0:hs.resolution)==null?void 0:Ms.remainingLabel)||o.slaTimeLeft||"--:--":((gr=(Ys=o==null?void 0:o.sla)==null?void 0:Ys.response)==null?void 0:gr.remainingLabel)||o.slaTimeLeft||"--:--");if(z&&Te&&Te>z){const Xs=Te-z,si=Te-h,pp=Kt(P==null?void 0:P.completedAt);Je=pp?pp>Te:si<0,me=Je?0:Math.max(0,Math.min(100,si/Xs*100)),ae=pp?"SLA met":Rr(si)}else{const Xs=G1(ae);if(Xs!==null){Je=Xs<0;const si=(I?Y1(String(o.priority||"Low")):J1(String(o.priority||"Low")))*60;me=Je?0:Math.max(0,Math.min(100,Xs/Math.max(1,si)*100))}else Je=String(ae||"").trim().startsWith("-"),me=Je?0:50}const Be=Math.max(0,100-me);return{balancePercent:me,elapsedPercent:Be,breached:Je,label:ae,color:bc(Be)}},ov=String((N==null?void 0:N.status)||"").trim().toLowerCase()==="closed",Qc=String((e==null?void 0:e.role)||"").trim().toUpperCase()==="USER",Gc=oe.useMemo(()=>N?_c[N.id]||[]:[],[N,_c]),Jc=oe.useMemo(()=>{const o=Gc,h=Number((e==null?void 0:e.id)||0),f=String(pr()||"").trim().toLowerCase(),b=ae=>{const Be=String((ae==null?void 0:ae.kind)||"").toLowerCase(),Oe=String((ae==null?void 0:ae.text)||"").toLowerCase();return Be==="conversation"||Oe.includes("inbound email reply received")||Oe.includes("[email]")},I=ae=>!!(ae!=null&&ae.internal)||String((ae==null?void 0:ae.kind)||"").toLowerCase()==="internal"||String((ae==null?void 0:ae.kind)||"").toLowerCase()==="private",P=ae=>String((ae==null?void 0:ae.kind)||"").toLowerCase()==="private"||!!(ae!=null&&ae.internal)&&String((ae==null?void 0:ae.text)||"").toLowerCase().startsWith("private"),z=ae=>{const Be=String((ae==null?void 0:ae.kind)||"").toLowerCase();return Be==="sla"||Be==="user"||Be==="asset"},Te=ae=>{if(z(ae))return!0;const Be=String((ae==null?void 0:ae.text)||"").toLowerCase();return Be.includes("ticket updated")||Be.includes("created from")||Be.includes("ticket type")||Be.includes("workflow")||Be.includes("assigned staff")||Be.includes("additional staff")||Be.includes("issue - detail")||Be.includes("service level agreement")||Be.includes("response target")||Be.includes("resolution target")||Be.includes("end-user")||Be.includes("reporting manager")||Be.includes("phone number")},me=ae=>!P(ae)&&!I(ae)&&!z(ae),Je=ae=>{const Be=String((ae==null?void 0:ae.kind)||"").toLowerCase(),Oe=Number((ae==null?void 0:ae.changedById)||0);return(Be==="system"||Be==="internal"||Be==="private")&&Oe>0};if(Qc)return o.filter(ae=>b(ae)&&!Te(ae));switch(G){case"Conversation & Internal":return o.filter(ae=>(b(ae)||I(ae)||String((ae==null?void 0:ae.kind)||"").toLowerCase()==="system"||String((ae==null?void 0:ae.kind)||"").toLowerCase()==="public")&&!Te(ae));case"Conversation":return o.filter(ae=>b(ae)&&!Te(ae));case"Internal Conversations":return o.filter(ae=>I(ae)&&!Te(ae));case"Staff":return o.filter(ae=>Je(ae)&&!Te(ae));case"Public ( User View)":return o.filter(ae=>me(ae)&&!Te(ae));case"Private":return o.filter(ae=>{if(Te(ae)||!P(ae))return!1;const Be=h>0&&Number((ae==null?void 0:ae.changedById)||0)===h,Oe=!Be&&f&&String((ae==null?void 0:ae.author)||"").trim().toLowerCase()===f;return Be||Oe});case"All Actions":default:return o}},[Qc,G,Gc,e==null?void 0:e.id,e==null?void 0:e.name,e==null?void 0:e.email,e==null?void 0:e.username]),Ma=oe.useMemo(()=>N&&Gc.slice().sort((h,f)=>(Kt(f.time)||0)-(Kt(h.time)||0)).find(h=>{const f=String((h==null?void 0:h.text)||"").toLowerCase();return f.startsWith("closed:")||f.includes("status updated to closed")||f.includes("ticket resolved/closed")})||null,[N,Gc]),cp=oe.useCallback(()=>{const o=pt.current;if(!o)return;const h=24,f=o.scrollTop+o.clientHeight>=o.scrollHeight-h;Ve(f)},[]),cv=()=>{const o=pt.current;o&&(ge?o.scrollTo({top:0,behavior:"smooth"}):o.scrollTo({top:o.scrollHeight,behavior:"smooth"}))};oe.useEffect(()=>{const o=window.setTimeout(()=>cp(),0);return()=>window.clearTimeout(o)},[N==null?void 0:N.id,Jc.length,pe,Ye,V,cp]);const Yc=Kt(N==null?void 0:N.closedAt)??Kt(Ma==null?void 0:Ma.time)??(ov?Kt(N==null?void 0:N.updatedAt)??We:null),Z1=String((N==null?void 0:N.closedByName)||"").trim()||String((Ma==null?void 0:Ma.author)||"").trim()||String((N==null?void 0:N.assignedAgentName)||"").trim()||"System",Xc=Kt(N==null?void 0:N.createdAt)??Kt(N==null?void 0:N.dateReported),eN=Yc&&Xc?Bm(Math.max(0,Yc-Xc)):"--:--",dp=Xc?new Date(Xc):new Date,tN=`${String(dp.getHours()).padStart(2,"0")}:${String(dp.getMinutes()).padStart(2,"0")}`,up=oe.useRef(null),nN=o=>{up.current=o,Ul(o)},mp=()=>Ul(null),hr=(o,h,f,b,I="Not set")=>Vm===o?n.jsx("select",{className:"sidebar-select",autoFocus:!0,ref:P=>{P&&up.current===o&&(up.current=null,window.setTimeout(()=>{try{P.focus();const z=P.showPicker;typeof z=="function"&&z.call(P)}catch{P.focus()}},0))},value:h||"",onBlur:mp,onChange:P=>{f(P.target.value),mp()},onKeyDown:P=>{P.key==="Escape"&&mp()},children:b.map(P=>n.jsx("option",{value:P,children:P||I},`${o}-${P||"empty"}`))}):n.jsx("button",{type:"button",className:"sidebar-inline-value",onClick:()=>nN(o),children:String(h||"").trim()||I}),dv=async o=>{var f,b;const h=String(Ac[o]||"").trim();if(Q(I=>({...I||{},[o]:h})),o==="name"&&N&&ti(N.id,{endUser:h||N.endUser}),Sa(null),!!(R!=null&&R.id))try{await ll(Number(R.id),{[o]:h})}catch(I){alert(((b=(f=I==null?void 0:I.response)==null?void 0:f.data)==null?void 0:b.error)||(I==null?void 0:I.message)||"Failed to update end-user details")}},Ql=(o,h)=>{const f=String((R==null?void 0:R[h])||""),b=Km===h;return n.jsxs("div",{className:"sidebar-field",children:[n.jsx("label",{children:o}),b?n.jsx("input",{className:"sidebar-select",autoFocus:!0,value:Ac[h],onChange:I=>ka(P=>({...P,[h]:I.target.value})),onBlur:()=>dv(h),onKeyDown:I=>{I.key==="Enter"&&dv(h),I.key==="Escape"&&(ka(P=>({...P,[h]:f})),Sa(null))}}):n.jsx("button",{type:"button",className:"sidebar-inline-value",onClick:()=>{ka(I=>({...I,[h]:f})),Sa(h)},children:f||"Not set"})]})};oe.useEffect(()=>{fe(!1),He(!1),$(!1),mt(""),Me("Progress")},[N==null?void 0:N.id]),oe.useEffect(()=>{var h;if(typeof window>"u")return;const o=()=>{var b;const f=((b=window.visualViewport)==null?void 0:b.width)??window.innerWidth;H(f<=1360)};return o(),window.addEventListener("resize",o),(h=window.visualViewport)==null||h.addEventListener("resize",o),()=>{var f;window.removeEventListener("resize",o),(f=window.visualViewport)==null||f.removeEventListener("resize",o)}},[]);const sN=W&&N?n.jsx("div",{className:`tickets-shell main-only ${Qs?"queue-collapsed":""}`,children:n.jsx("div",{className:"work-main",children:n.jsxs("div",{className:"detail-view-container",children:[n.jsx("div",{className:"detail-action-bar",children:n.jsxs("div",{className:"action-toolbar",children:[Qs&&n.jsx("button",{className:"pill-icon-btn",title:"Show side panel","aria-label":"Show side panel",onClick:()=>Tr(!1),children:n.jsxs("svg",{viewBox:"0 0 24 24",width:"14",height:"14",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[n.jsx("line",{x1:"4",y1:"7",x2:"20",y2:"7"}),n.jsx("line",{x1:"4",y1:"12",x2:"20",y2:"12"}),n.jsx("line",{x1:"4",y1:"17",x2:"20",y2:"17"})]})}),v1().map((o,h)=>o.label==="Back"?n.jsx("button",{className:"pill-icon-btn back-icon-btn",onClick:o.onClick,title:"Back","aria-label":"Back",children:Xg(o.label)},h):n.jsxs("button",{className:"pill-btn",onClick:o.onClick,children:[Xg(o.label),o.label]},h))]})}),Le&&n.jsxs("div",{className:"detail-tabs compact",children:[n.jsx("button",{className:`tab-btn${le==="Progress"?" active":""}`,onClick:()=>Me("Progress"),children:"Progress"}),n.jsx("button",{className:`tab-btn${le==="Details"?" active":""}`,onClick:()=>Me("Details"),children:"Details"})]}),n.jsxs("div",{className:`detail-view-card${Le?" compact":""}`,children:[(!Le||le==="Progress")&&n.jsxs("div",{className:"progress-card",children:[n.jsxs("div",{className:"progress-card-header",children:[n.jsx("span",{className:"progress-title",children:"Progress"}),n.jsxs("div",{className:"progress-header-right",children:[!Qc&&n.jsxs("div",{className:"filter-dropdown progress-filter-dropdown",ref:qs,children:[n.jsx("button",{className:"progress-icon-btn progress-icon-btn-filter",type:"button",onClick:()=>$(o=>!o),title:G,"aria-label":"Progress filter",children:Vl("messages-square","progress-icon-image")}),we&&n.jsx("div",{className:"filter-menu progress-filter-menu",children:Zm.map(o=>n.jsxs("button",{type:"button",className:`filter-option progress-filter-option ${o===G?"active":""}`,onClick:()=>{he(o),$(!1)},children:[Vl(Ca[o],"progress-filter-icon"),o]},o))})]}),n.jsxs("div",{className:"progress-actions",children:[n.jsx("button",{type:"button",className:"progress-icon-btn",title:V?"Collapse All":"Expand All","aria-label":V?"Collapse All":"Expand All",onClick:()=>ve(o=>!o),children:Vl(V?"square-minus":"square-plus","progress-icon-image")}),n.jsx("button",{type:"button",className:"progress-icon-btn",title:ge?"Move to Top":"Move to Last","aria-label":ge?"Move to Top":"Move to Last",onClick:cv,children:Vl(ge?"arrow-up":"arrow-down","progress-icon-image")})]})]})]}),n.jsxs("div",{ref:pt,onScroll:cp,className:`progress-list${pe||Ye?" progress-list-editor-open":""}${V?"":" progress-list-collapsed"}`,children:[pe&&n.jsxs("div",{className:`action-compose-modal inline-compose-card${it?" compose-fullscreen":""}`,children:[n.jsxs("div",{className:"compose-header",children:[n.jsxs("div",{className:"compose-identity",children:[n.jsx("div",{className:"compose-avatar",children:ni(pr()).slice(0,1)}),n.jsxs("div",{children:[n.jsx("div",{className:"compose-user",children:pr()}),n.jsxs("div",{className:"compose-mode",children:["| ",Ts()]})]})]}),n.jsxs("div",{className:"compose-header-actions",children:[n.jsx("button",{className:"compose-icon-btn",onClick:()=>te(o=>!o),"aria-label":"More actions",children:"..."}),n.jsx("button",{className:"compose-icon-btn","aria-label":"High priority",children:"!"}),n.jsx("button",{className:"compose-icon-btn compose-icon-btn-active","aria-label":"Mail mode",children:"@"}),n.jsx("button",{className:"compose-icon-btn","aria-label":"Attach file",onClick:()=>{var o;return(o=Dt.current)==null?void 0:o.click()},type:"button",children:"+"}),U&&n.jsxs("div",{className:"compose-menu",children:[n.jsx("button",{onClick:()=>Ae(o=>!o),children:"Show Cc"}),n.jsx("button",{onClick:()=>Qe(o=>!o),children:"Show Bcc"}),n.jsx("button",{onClick:()=>wn(o=>({...o,to:(R==null?void 0:R.email)||""})),children:"Reply directly to me"})]}),n.jsx("button",{className:"compose-icon-btn",onClick:()=>{T([]),re(!1),_e(!1)},"aria-label":"Close",children:"x"})]})]}),n.jsxs("div",{className:"compose-row compose-row-line",children:[n.jsx("label",{children:"To"}),n.jsx("input",{value:ut.to,onChange:o=>wn(h=>({...h,to:o.target.value})),placeholder:"Enter recipient"}),n.jsxs("div",{className:"compose-row-tools",children:[n.jsx("button",{type:"button",onClick:()=>te(o=>!o),"aria-label":"Recipient options",children:"v"}),n.jsx("button",{type:"button",onClick:()=>Ae(o=>!o),"aria-label":"Toggle Cc",children:"cc"})]})]}),Ce&&n.jsxs("div",{className:"compose-row compose-row-line",children:[n.jsx("label",{children:"Cc"}),n.jsx("input",{value:ut.cc,onChange:o=>wn(h=>({...h,cc:o.target.value})),placeholder:"Enter cc recipient"})]}),Ke&&n.jsxs("div",{className:"compose-row compose-row-line",children:[n.jsx("label",{children:"Bcc"}),n.jsx("input",{value:ut.bcc,onChange:o=>wn(h=>({...h,bcc:o.target.value})),placeholder:"Enter bcc recipient"})]}),n.jsxs("div",{className:"compose-row compose-row-line compose-row-subject",children:[n.jsx("label",{}),n.jsx("input",{value:ut.subject,onChange:o=>wn(h=>({...h,subject:o.target.value})),placeholder:"Enter a subject here"})]}),n.jsxs("div",{className:"compose-editor-shell",children:[n.jsxs("div",{className:"compose-editor-toolbar",children:[n.jsx("button",{type:"button",onClick:()=>at(o=>!o),"aria-label":"Fullscreen",children:"[]"}),n.jsx("button",{type:"button",onClick:()=>dn(o=>!o),"aria-label":"Font styles",children:"A:"}),Vt&&n.jsxs("div",{className:"compose-toolbar-menu",children:[n.jsxs("div",{className:"compose-toolbar-group",children:[n.jsx("button",{type:"button",onClick:()=>zt("bold"),children:"B"}),n.jsx("button",{type:"button",onClick:()=>zt("italic"),children:"i"}),n.jsx("button",{type:"button",onClick:()=>zt("underline"),children:"U"}),n.jsx("button",{type:"button",onClick:()=>zt("strikeThrough"),children:"S"})]}),n.jsxs("div",{className:"compose-toolbar-group",children:[n.jsx("button",{type:"button",onClick:()=>zt("fontName","Arial"),children:"Aa"}),n.jsx("button",{type:"button",onClick:()=>zt("fontName","Georgia"),children:"Gg"}),n.jsx("button",{type:"button",onClick:()=>zt("fontName","Courier New"),children:"Mono"})]}),n.jsxs("div",{className:"compose-toolbar-group",children:[n.jsx("button",{type:"button",onClick:()=>zt("fontSize","2"),children:"A-"}),n.jsx("button",{type:"button",onClick:()=>zt("fontSize","3"),children:"A"}),n.jsx("button",{type:"button",onClick:()=>zt("fontSize","5"),children:"A+"})]})]}),n.jsx("button",{type:"button",onClick:()=>En(o=>!o),"aria-label":"Align",children:"="}),bn&&n.jsxs("div",{className:"compose-toolbar-menu",children:[n.jsx("button",{type:"button",onClick:()=>zt("justifyLeft"),children:"Left"}),n.jsx("button",{type:"button",onClick:()=>zt("justifyCenter"),children:"Center"}),n.jsx("button",{type:"button",onClick:()=>zt("justifyRight"),children:"Right"}),n.jsx("button",{type:"button",onClick:()=>zt("justifyFull"),children:"Justify"})]}),n.jsx("button",{type:"button",onClick:()=>{zt("insertOrderedList"),Bt(o=>!o)},"aria-label":"Ordered list",children:"1."}),Yt&&n.jsxs("div",{className:"compose-toolbar-menu",children:[n.jsx("button",{type:"button",onClick:()=>ei("decimal"),children:"Default"}),n.jsx("button",{type:"button",onClick:()=>ei("lower-alpha"),children:"Lower Alpha"}),n.jsx("button",{type:"button",onClick:()=>ei("upper-alpha"),children:"Upper Alpha"}),n.jsx("button",{type:"button",onClick:()=>ei("lower-roman"),children:"Lower Roman"}),n.jsx("button",{type:"button",onClick:()=>ei("upper-roman"),children:"Upper Roman"})]}),n.jsx("button",{type:"button",onClick:()=>{zt("insertUnorderedList"),pa(o=>!o)},"aria-label":"Unordered list",children:""}),Er&&n.jsxs("div",{className:"compose-toolbar-menu",children:[n.jsx("button",{type:"button",onClick:()=>ei("disc"),children:"Disc"}),n.jsx("button",{type:"button",onClick:()=>ei("circle"),children:"Circle"}),n.jsx("button",{type:"button",onClick:()=>ei("square"),children:"Square"})]}),n.jsx("button",{type:"button",onClick:()=>{zt("formatBlock","blockquote"),kl(o=>!o)},"aria-label":"Quote",children:'""'}),fa&&n.jsxs("div",{className:"compose-toolbar-menu",children:[n.jsx("button",{type:"button",onClick:()=>zt("indent"),children:"Increase"}),n.jsx("button",{type:"button",onClick:()=>zt("outdent"),children:"Decrease"})]}),n.jsx("button",{type:"button",onClick:()=>rs(!0),"aria-label":"Insert link",children:"link"}),n.jsx("button",{type:"button",onClick:()=>is(!0),"aria-label":"Insert image",children:"img"}),n.jsx("button",{type:"button",onClick:()=>El(o=>!o),"aria-label":"Insert table",children:"table"}),Al&&n.jsxs("div",{className:"compose-toolbar-menu",children:[n.jsxs("label",{children:["Rows",n.jsx("input",{value:Li.rows,onChange:o=>Kr(h=>({...h,rows:Number(o.target.value||1)}))})]}),n.jsxs("label",{children:["Cols",n.jsx("input",{value:Li.cols,onChange:o=>Kr(h=>({...h,cols:Number(o.target.value||1)}))})]}),n.jsx("button",{type:"button",onClick:()=>{const o=Math.max(1,Li.rows),h=Math.max(1,Li.cols),f=`<table style="border-collapse:collapse;width:100%;">${Array.from({length:o}).map(()=>`<tr>${Array.from({length:h}).map(()=>'<td style="border:1px solid #d1d5db;padding:6px;">&nbsp;</td>').join("")}</tr>`).join("")}</table>`;Bc(f),El(!1)},children:"Insert"})]}),n.jsx("button",{type:"button",onClick:()=>ur(o=>!o),"aria-label":"Emoticons",children:":)"}),Dn&&n.jsx("div",{className:"compose-toolbar-menu emoji",children:["","","","","","","","","","","","","","","","","",""].map(o=>n.jsx("button",{type:"button",onClick:()=>{zt("insertText",o),ur(!1)},children:o},o))}),n.jsx("button",{type:"button",onClick:()=>Tl(o=>!o),"aria-label":"Insert canned",children:"+:"}),xc&&n.jsxs("div",{className:"compose-toolbar-menu",children:[sp().length===0&&n.jsx("span",{style:{fontSize:12,color:"#6b7280"},children:"No canned text"}),sp().map(o=>n.jsx("button",{type:"button",onClick:()=>{Bc(o.html),Tl(!1)},children:o.name},o.id)),n.jsx("button",{type:"button",onClick:()=>{Tl(!1),Ii(!0)},children:"Create Canned Text"})]}),n.jsx("button",{type:"button",onClick:()=>zt("insertHorizontalRule"),"aria-label":"Horizontal line",children:"-"}),n.jsx("button",{type:"button",onClick:()=>zt("removeFormat"),"aria-label":"Clear formatting",children:"Tx"})]}),n.jsx("div",{ref:jn,className:"compose-editor-body rich",contentEditable:!0,suppressContentEditableWarning:!0,"data-placeholder":"Type your update/note here",onInput:o=>Gg(o.currentTarget.innerHTML)})]}),n.jsx("div",{className:"compose-meta-row",children:n.jsxs("label",{className:"compose-meta-field",children:[n.jsx("span",{children:"Status *"}),n.jsxs("select",{value:ut.actionStatus,onChange:o=>wn(h=>({...h,actionStatus:o.target.value})),children:[n.jsx("option",{children:"With User"}),n.jsx("option",{children:"In Progress"}),n.jsx("option",{children:"Awaiting Approval"}),n.jsx("option",{children:"On Hold"})]})]})}),n.jsx("input",{ref:Dt,type:"file",multiple:!0,style:{display:"none"},onChange:o=>{ev(o.target.files,"composer"),o.currentTarget.value=""}}),Ut.length>0&&n.jsx("div",{className:"compose-attachments",children:Ut.map(o=>n.jsxs("div",{className:"compose-attachment-chip",children:[n.jsxs("span",{children:[o.file.name," (",Zg(o.file.size),")"]}),n.jsx("button",{type:"button",onClick:()=>tv(o.key,"composer"),children:"x"})]},o.key))}),(un==="logSupplier"||un==="emailSupplier"||un==="callbackSupplier")&&n.jsxs("div",{className:"compose-grid three",children:[n.jsxs("label",{children:["Supplier",n.jsx("input",{value:ut.supplier,onChange:o=>wn(h=>({...h,supplier:o.target.value}))})]}),n.jsxs("label",{children:["Supplier Ref",n.jsx("input",{value:ut.supplierRef,onChange:o=>wn(h=>({...h,supplierRef:o.target.value}))})]}),n.jsxs("label",{children:["Priority",n.jsx("input",{value:ut.approvalPriority,onChange:o=>wn(h=>({...h,approvalPriority:o.target.value}))})]})]}),un==="approval"&&n.jsxs("div",{className:"compose-grid three",children:[n.jsxs("label",{children:["Approval Team",n.jsxs("select",{value:ut.approvalTeam,onChange:o=>wn(h=>({...h,approvalTeam:o.target.value})),children:[n.jsx("option",{children:"Management Team"}),n.jsx("option",{children:"HR Team"}),n.jsx("option",{children:"Account Team"})]})]}),n.jsxs("label",{children:["Priority",n.jsx("input",{value:ut.approvalPriority,onChange:o=>wn(h=>({...h,approvalPriority:o.target.value}))})]}),n.jsxs("label",{children:["Current Action",n.jsx("input",{value:ut.currentAction,onChange:o=>wn(h=>({...h,currentAction:o.target.value}))})]})]}),n.jsxs("div",{className:"compose-footer-actions",children:[n.jsx("button",{className:"btn-submit",onClick:F1,disabled:Pe,children:Pe?"Uploading...":"Send"}),n.jsx("button",{className:"btn-cancel",onClick:()=>{T([]),re(!1),_e(!1)},children:"Discard"}),n.jsx("button",{type:"button",className:"compose-footer-icon","aria-label":"Schedule",children:"[]"})]})]}),Ye&&n.jsxs("div",{className:"action-compose-modal inline-compose-card",children:[n.jsxs("div",{className:"compose-header",children:[n.jsxs("div",{className:"compose-identity",children:[n.jsx("div",{className:"compose-avatar",children:ni(pr()).slice(0,1)}),n.jsxs("div",{children:[n.jsx("div",{className:"compose-user",children:pr()}),n.jsx("div",{className:"compose-mode",children:ct==="internal"?"Internal Note":"Private Note"})]})]}),n.jsxs("div",{style:{display:"flex",gap:8},children:[n.jsx("button",{className:"compose-icon-btn",onClick:()=>{var o;return(o=xt.current)==null?void 0:o.click()},type:"button","aria-label":"Attach file",children:"+"}),n.jsx("button",{className:"compose-icon-btn",onClick:()=>{ke([]),et(!1)},children:"x"})]})]}),n.jsxs("div",{className:"compose-editor-shell",children:[n.jsxs("div",{className:"compose-editor-toolbar",children:[n.jsx("button",{type:"button",children:"A:"}),n.jsx("button",{type:"button",children:"-"}),n.jsx("button",{type:"button",children:"1."}),n.jsx("button",{type:"button",children:'"'}),n.jsx("button",{type:"button",children:"link"}),n.jsx("button",{type:"button",children:"img"}),n.jsx("button",{type:"button",children:"table"})]}),n.jsx("textarea",{className:"compose-editor-body",placeholder:"Enter your note here",value:Ks.body,onChange:o=>Qr(h=>({...h,body:o.target.value}))})]}),n.jsx("input",{ref:xt,type:"file",multiple:!0,style:{display:"none"},onChange:o=>{ev(o.target.files,"note"),o.currentTarget.value=""}}),Se.length>0&&n.jsx("div",{className:"compose-attachments",children:Se.map(o=>n.jsxs("div",{className:"compose-attachment-chip",children:[n.jsxs("span",{children:[o.file.name," (",Zg(o.file.size),")"]}),n.jsx("button",{type:"button",onClick:()=>tv(o.key,"note"),children:"x"})]},o.key))}),n.jsxs("div",{className:"compose-footer-actions",children:[n.jsx("button",{className:"btn-submit",onClick:B1,disabled:Pe,children:Pe?"Uploading...":"Save"}),n.jsx("button",{className:"btn-cancel",onClick:()=>{ke([]),et(!1)},children:"Discard"})]})]}),Jc.slice().sort((o,h)=>{const f=new Date(o.time).getTime(),b=new Date(h.time).getTime();return Number.isNaN(f)||Number.isNaN(b)?0:b-f}).map((o,h)=>{const f=String((o==null?void 0:o.author)??""),b=$1(f),I=String((o==null?void 0:o.action)||"").trim();return n.jsxs("div",{className:`progress-item${V?"":" is-collapsed"}`,children:[n.jsx("div",{className:"progress-avatar",children:b.avatarUrl?n.jsx("img",{src:b.avatarUrl,alt:b.name,onError:P=>{P.currentTarget.style.display="none"}}):b.initials}),n.jsxs("div",{className:"progress-body",children:[n.jsxs("div",{className:"progress-meta",children:[n.jsxs("div",{className:"progress-head-left",children:[n.jsx("div",{className:"progress-author",children:b.name}),I?n.jsxs("div",{className:"progress-action-line",children:["| ",I]}):null]}),n.jsx("div",{className:"progress-time",children:o.time})]}),n.jsx("div",{className:"progress-text",children:o.text})]})]},`${o.time}-${h}`)}),Jc.length===0&&n.jsx("div",{className:"progress-item",children:Qc?n.jsx("div",{className:"progress-body",children:n.jsx("div",{className:"progress-meta",children:n.jsx("div",{className:"progress-author",children:"No conversation yet"})})}):n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"progress-avatar",children:Ta().avatarUrl?n.jsx("img",{src:Ta().avatarUrl,alt:Ta().name,onError:o=>{o.currentTarget.style.display="none"}}):ni(Ta().name)}),n.jsxs("div",{className:"progress-body",children:[n.jsxs("div",{className:"progress-meta",children:[n.jsx("div",{className:"progress-author",children:Ta().name}),n.jsx("div",{className:"progress-time",children:N.dateReported})]}),n.jsx("div",{className:"progress-text",children:N.subject})]})]})}),ge&&Jc.length>0&&n.jsx("button",{type:"button",className:"progress-float-btn",title:"Move to Top","aria-label":"Move to Top",onClick:cv,children:""})]})]}),(!Le||le==="Details")&&n.jsx("div",{className:"detail-sidebar-wrap",children:n.jsx("div",{className:"detail-sidebar",children:n.jsxs("div",{className:"sidebar-stack",children:[n.jsxs("div",{className:"ticket-info-card",children:[n.jsx("h3",{className:"sidebar-title",children:"Ticket information"}),n.jsxs("div",{className:"sidebar-field",children:[n.jsx("label",{children:"Date Created"}),n.jsxs("span",{children:[dp.toLocaleDateString()," ",tN]})]}),n.jsxs("div",{className:"sidebar-field",children:[n.jsx("label",{children:"Created from"}),hr("createdFrom",Yr,o=>{Nc(o),ti(N.id,{createdFrom:o})},Na)]}),n.jsxs("div",{className:"sidebar-field",children:[n.jsx("label",{children:"Ticket Type"}),hr("type",N.type||"",o=>ip({type:o},{type:o}),A1)]}),n.jsxs("div",{className:"sidebar-field",children:[n.jsx("label",{children:"Workflow"}),hr("workflow",vt,o=>{Jr(o),ti(N.id,{workflow:o})},E1)]}),n.jsxs("div",{className:"sidebar-field",children:[n.jsx("label",{children:"Status"}),hr("status",N.status||"",o=>ap(o,`Status updated to ${o}`),T1)]}),n.jsxs("div",{className:"sidebar-field",children:[n.jsx("label",{children:"Team"}),hr("team",_i,o=>{$l(o),ti(N.id,{team:o,category:o}),Sd(N.id,{category:o}).catch(()=>{})},R1)]}),n.jsxs("div",{className:"sidebar-field assigned-field",children:[n.jsx("label",{children:"Assigned Staff"}),hr("assignedStaff",N.assignedAgentName||"",o=>{const h=rp.find(I=>I.label===o),f=String((h==null?void 0:h.id)||""),b=(h==null?void 0:h.label)||"Not set";ip({assigneeId:f?Number(f):null},{assignedAgentId:f,assignedAgentName:b})},["Not set",...cs(rp.map(o=>o.label))])]}),n.jsxs("div",{className:"sidebar-field",children:[n.jsx("label",{children:"Additional Staff"}),hr("additionalStaff",Hm,o=>{const h=o==="Not set"?"":o;Sc(h),ti(N.id,{additionalAgents:h?[h]:[]})},["Not set",...cs(rp.map(o=>o.label))])]}),n.jsxs("div",{className:"sidebar-field",children:[n.jsx("label",{children:"Issue"}),hr("issue",Fi,o=>{const h=o==="Not set"?"":o;Dl(h),ip({category:h},{category:h})},["Not set",...M1])]}),n.jsxs("div",{className:"sidebar-field",children:[n.jsx("label",{children:"Issue - Detail"}),hr("issueDetail",_l,o=>{const h=o==="Not set"?"":o;kc(h),ti(N.id,{issueDetail:h})},["Not set",...P1])]}),n.jsxs("div",{className:"sidebar-field",children:[n.jsx("label",{children:"Resolution"}),hr("resolution",Fl,o=>{Cc(o),ti(N.id,{resolution:o})},cs([...Di,N.resolution,Fl]))]}),n.jsxs("div",{className:"sidebar-field",children:[n.jsx("label",{children:"Source"}),n.jsx("span",{children:"Manual"})]}),n.jsxs("div",{className:"sidebar-field",children:[n.jsx("label",{children:"Assigned Asset"}),n.jsx("span",{children:je?`${je.name} (${je.serial||"no-serial"})`:"None"})]})]}),n.jsxs("div",{className:`sla-card ${K1}`,children:[n.jsx("h3",{className:"sidebar-title",children:"Service Level Agreement"}),n.jsxs("div",{className:"sla-pill",children:[n.jsxs("div",{className:"sla-pill-select-wrap",ref:Mt,children:[n.jsx("button",{type:"button",className:"sla-pill-select",onClick:()=>fe(o=>!o),disabled:St,children:n.jsx("span",{children:Kl})}),tn&&n.jsx("div",{className:"sla-pill-dropdown",children:V1.map(o=>n.jsx("button",{type:"button",className:`sla-pill-option${String(Kl)===String(o)?" active":""}`,onClick:()=>$i(String(o)),children:o},o))})]}),n.jsxs("div",{className:"sla-pill-select-wrap",ref:ss,children:[n.jsx("button",{type:"button",className:"sla-pill-select",onClick:()=>He(o=>!o),disabled:St,children:n.jsx("span",{children:av})}),gt&&n.jsx("div",{className:"sla-pill-dropdown",children:Kc.map(o=>{const h=Number((o==null?void 0:o.priorityRank)||mr(o==null?void 0:o.priority)),f=Ll(h),b=String((o==null?void 0:o.priority)||f);return n.jsx("button",{type:"button",className:`sla-pill-option${String(av).toLowerCase()===b.toLowerCase()?" active":""}`,onClick:()=>{He(!1),wc(f),mt(Kl)},children:b},`${o.id}-${b}`)})})]})]}),n.jsxs("div",{className:"sla-metric",children:[n.jsxs("div",{className:"sla-row",children:[n.jsx("span",{children:"Response Target"}),n.jsx("span",{children:ps.targetLabel}),n.jsx("span",{className:`sla-x${ps.met?" sla-check":""}`,children:ps.met?"":ps.breached?"x":""})]}),ps.done?n.jsxs("div",{className:"sla-done-line",children:["First response completed ",ps.completedLabel!=="-"?`at ${ps.completedLabel}`:""]}):n.jsxs("div",{className:"sla-progress-track",role:"progressbar","aria-label":"Response SLA progress","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":Math.round(ps.percent),children:[n.jsx("div",{className:"sla-progress-fill",style:{width:`${ps.breached?100:ps.percent}%`,background:ps.breached?"#8B0000":ps.color}}),n.jsx("span",{className:"sla-progress-time",children:ps.remainingLabel})]})]}),n.jsxs("div",{className:"sla-metric",children:[n.jsxs("div",{className:"sla-row",children:[n.jsx("span",{children:"Resolution Target"}),n.jsx("span",{children:fs.targetLabel}),n.jsx("span",{className:`sla-x${fs.met?" sla-check":""}`,children:fs.met?"":fs.breached?"x":""})]}),fs.done?n.jsxs("div",{className:"sla-done-line",children:["Resolution completed ",fs.completedLabel!=="-"?`at ${fs.completedLabel}`:""]}):n.jsxs("div",{className:"sla-progress-track",role:"progressbar","aria-label":"Resolution SLA progress","aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":Math.round(fs.percent),children:[n.jsx("div",{className:"sla-progress-fill",style:{width:`${fs.breached?100:fs.percent}%`,background:fs.breached?"#8B0000":fs.color}}),n.jsx("span",{className:"sla-progress-time",children:fs.remainingLabel})]})]}),ov&&n.jsxs("div",{className:"closure-section",children:[n.jsxs("div",{className:"closure-title-row",children:[n.jsx("h4",{className:"closure-title",children:"Closure details"}),n.jsx("span",{className:"closure-chevron",children:"^"})]}),n.jsxs("div",{className:"sidebar-field",children:[n.jsx("label",{children:"Date Closed"}),n.jsx("span",{children:Yc?new Date(Yc).toLocaleString():"-"})]}),n.jsxs("div",{className:"sidebar-field",children:[n.jsx("label",{children:"Closed by"}),n.jsx("span",{children:Z1})]}),n.jsxs("div",{className:"sidebar-field",children:[n.jsx("label",{children:"Time to Close"}),n.jsx("span",{children:eN})]})]})]}),n.jsxs("div",{className:"enduser-card",children:[n.jsx("h3",{className:"sidebar-title",style:{marginTop:0,marginBottom:8},children:"End-User details"}),n.jsxs("div",{className:"enduser-header",style:{display:"flex",gap:12,alignItems:"center",marginBottom:12},children:[n.jsx("div",{className:"enduser-avatar",children:R&&R.name?R.name.split(" ").map(o=>o[0]).slice(0,2).join(""):"EU"}),n.jsxs("div",{children:[n.jsx("div",{className:"enduser-name",style:{fontWeight:700},children:(R==null?void 0:R.name)||"Not set"}),n.jsx("div",{className:"enduser-client",style:{color:"#6b7280",fontSize:13},children:(R==null?void 0:R.email)||"Not set"})]})]}),Ql("User Name","name"),Ql("Email Address","email"),Ql("Phone Number","phone"),Ql("Site","site"),Ql("Reporting Manager","accountManager"),n.jsx("div",{style:{display:"flex",gap:8,marginTop:12},children:n.jsx("button",{className:"message-button",onClick:_1,children:"Message Directly on GChat"})})]})]})})})]})]})})}):n.jsx("div",{className:`tickets-shell main-only ${Qs?"queue-collapsed":""}`,children:n.jsxs("div",{className:"work-main",children:[n.jsxs("div",{className:"tickets-tool-bar",children:[n.jsxs("div",{className:"tool-bar-left",children:[Qs&&n.jsx("button",{className:"table-icon-btn",title:"Show Menu",onClick:()=>{Tr(!1)},children:n.jsxs("svg",{viewBox:"0 0 24 24",width:"14",height:"14",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[n.jsx("line",{x1:"4",y1:"7",x2:"20",y2:"7"}),n.jsx("line",{x1:"4",y1:"12",x2:"20",y2:"12"}),n.jsx("line",{x1:"4",y1:"17",x2:"20",y2:"17"})]})}),n.jsxs("div",{className:"filter-dropdown",children:[n.jsxs("button",{className:"filter-button",onClick:()=>y(!x),children:[l,n.jsx("span",{className:"dropdown-icon",children:"?"})]}),x&&n.jsx("div",{className:"filter-menu",children:Xm.map(o=>n.jsx("div",{className:`filter-option ${o===l?"active":""}`,onClick:()=>{c(o),y(!1)},children:o},o))})]}),n.jsxs("div",{className:"global-search tickets-search",children:[n.jsx("input",{type:"text",placeholder:"Search...",value:ue,onChange:o=>Y(o.target.value),onKeyPress:o=>o.key==="Enter"&&iv()}),n.jsx("span",{className:"search-icon",onClick:iv,children:n.jsxs("svg",{viewBox:"0 0 24 24",width:"14",height:"14",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[n.jsx("circle",{cx:"11",cy:"11",r:"7"}),n.jsx("line",{x1:"16.5",y1:"16.5",x2:"21",y2:"21"})]})})]})]}),n.jsxs("div",{className:"tool-bar-right",children:[n.jsxs("span",{className:"pagination",children:[W1,"-",q1," of ",Wc]}),n.jsxs("div",{className:"toolbar-pagination-group",children:[n.jsx("button",{className:"users-page-btn",onClick:()=>C(o=>Math.max(1,o-1)),disabled:Wi<=1,"aria-label":"Previous page",children:"<"}),n.jsx("button",{className:"users-page-btn active","aria-label":"Current page",children:Wi}),n.jsx("button",{className:"users-page-btn",onClick:()=>C(o=>Math.min(lp,o+1)),disabled:Wi>=lp,"aria-label":"Next page",children:">"})]}),n.jsx("button",{className:"table-icon-btn",title:"Refresh","aria-label":"Refresh",onClick:ba,children:n.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[n.jsx("polyline",{points:"23 4 23 10 17 10"}),n.jsx("polyline",{points:"1 20 1 14 7 14"}),n.jsx("path",{d:"M3.51 9a9 9 0 0 1 14.13-3.36L23 10M1 14l5.36 4.36A9 9 0 0 0 20.49 15"})]})}),n.jsx("button",{className:"table-primary-btn",onClick:()=>Ne(!0),children:"+ New"}),n.jsx("button",{className:"table-icon-btn",title:"Filter",onClick:()=>{y(!1),k(o=>{const h=!o;return h||zl(),h})},children:n.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:n.jsx("polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"})})})]})]}),n.jsxs("div",{className:"incidents-table",ref:Bl,children:[n.jsxs("div",{className:"table-header",style:op,children:[n.jsxs("div",{className:"col-checkbox col-header",children:[n.jsx("input",{type:"checkbox",checked:B,onChange:$c,"aria-label":"Select all tickets"}),n.jsx("span",{className:"col-resize-handle",onMouseDown:o=>Kn(o,"checkbox")})]}),n.jsxs("div",{className:"col-status col-header",children:["Status",n.jsx("span",{className:"col-resize-handle",onMouseDown:o=>Kn(o,"status"),onDoubleClick:()=>ms("status")})]}),n.jsxs("div",{className:"col-id col-header",children:["Ticket ID",n.jsx("span",{className:"col-resize-handle",onMouseDown:o=>Kn(o,"id"),onDoubleClick:()=>ms("id")})]}),n.jsxs("div",{className:"col-summary col-header",children:["Subject",n.jsx("span",{className:"col-resize-handle",onMouseDown:o=>Kn(o,"subject"),onDoubleClick:()=>ms("subject")})]}),n.jsxs("div",{className:"col-category col-header",children:["Issue",n.jsx("span",{className:"col-resize-handle",onMouseDown:o=>Kn(o,"category"),onDoubleClick:()=>ms("category")})]}),n.jsxs("div",{className:"col-sla col-header",children:["SLA Time Left",n.jsx("span",{className:"col-resize-handle",onMouseDown:o=>Kn(o,"sla"),onDoubleClick:()=>ms("sla")})]}),n.jsxs("div",{className:"col-priority col-header",children:["Priority",n.jsx("span",{className:"col-resize-handle",onMouseDown:o=>Kn(o,"priority"),onDoubleClick:()=>ms("priority")})]}),n.jsxs("div",{className:"col-type col-header",children:["Ticket Type",n.jsx("span",{className:"col-resize-handle",onMouseDown:o=>Kn(o,"type"),onDoubleClick:()=>ms("type")})]}),n.jsxs("div",{className:"col-endUser col-header",children:["Client",n.jsx("span",{className:"col-resize-handle",onMouseDown:o=>Kn(o,"endUser"),onDoubleClick:()=>ms("endUser")})]}),n.jsxs("div",{className:"col-lastAction col-header",children:["Last Action Date",n.jsx("span",{className:"col-resize-handle",onMouseDown:o=>Kn(o,"lastAction"),onDoubleClick:()=>ms("lastAction")})]}),n.jsxs("div",{className:"col-date col-header",children:["Date Created",n.jsx("span",{className:"col-resize-handle",onMouseDown:o=>Kn(o,"date"),onDoubleClick:()=>ms("date")})]}),n.jsxs("div",{className:"col-issueDetail col-header",children:["Issue - Detail",n.jsx("span",{className:"col-resize-handle",onMouseDown:o=>Kn(o,"issueDetail"),onDoubleClick:()=>ms("issueDetail")})]}),n.jsxs("div",{className:"col-resolution col-header",children:["Resolution",n.jsx("span",{className:"col-resize-handle",onMouseDown:o=>Kn(o,"resolution"),onDoubleClick:()=>ms("resolution")})]}),n.jsxs("div",{className:"col-dateClosed col-header",children:["Date Closed",n.jsx("span",{className:"col-resize-handle",onMouseDown:o=>Kn(o,"dateClosed"),onDoubleClick:()=>ms("dateClosed")})]}),n.jsx("div",{className:"col-spacer col-header","aria-hidden":"true"})]}),M&&n.jsxs("div",{className:"table-row table-search-row",style:op,children:[n.jsx("div",{className:"col-checkbox",children:n.jsx("button",{className:"search-close-btn",onClick:()=>{k(!1),zl()},"aria-label":"Close search",children:n.jsx("svg",{viewBox:"0 0 24 24",width:"14",height:"14",fill:"none",stroke:"currentColor",strokeWidth:"2","aria-hidden":"true",children:n.jsx("path",{d:"M18 6 6 18M6 6l12 12"})})})}),n.jsx("div",{className:"col-status",children:n.jsx("input",{className:"table-filter-input",value:ot.status,onChange:o=>_n("status",o.target.value)})}),n.jsx("div",{className:"col-id",children:n.jsx("input",{className:"table-filter-input",value:ot.id,onChange:o=>_n("id",o.target.value)})}),n.jsx("div",{className:"col-summary",children:n.jsx("input",{className:"table-filter-input",value:ot.subject,onChange:o=>_n("subject",o.target.value)})}),n.jsx("div",{className:"col-category",children:n.jsx("input",{className:"table-filter-input",value:ot.category,onChange:o=>_n("category",o.target.value)})}),n.jsx("div",{className:"col-sla",children:n.jsx("input",{className:"table-filter-input",value:ot.slaTimeLeft,onChange:o=>_n("slaTimeLeft",o.target.value)})}),n.jsx("div",{className:"col-priority",children:n.jsx("input",{className:"table-filter-input",value:ot.priority,onChange:o=>_n("priority",o.target.value)})}),n.jsx("div",{className:"col-type",children:n.jsx("input",{className:"table-filter-input",value:ot.type,onChange:o=>_n("type",o.target.value)})}),n.jsx("div",{className:"col-endUser",children:n.jsx("input",{className:"table-filter-input",value:ot.endUser,onChange:o=>_n("endUser",o.target.value)})}),n.jsx("div",{className:"col-lastAction",children:n.jsx("input",{className:"table-filter-input",value:ot.lastAction,onChange:o=>_n("lastAction",o.target.value)})}),n.jsx("div",{className:"col-date",children:n.jsx("input",{className:"table-filter-input",value:ot.dateReported,onChange:o=>_n("dateReported",o.target.value)})}),n.jsx("div",{className:"col-issueDetail",children:n.jsx("input",{className:"table-filter-input",value:ot.issueDetail,onChange:o=>_n("issueDetail",o.target.value)})}),n.jsx("div",{className:"col-resolution",children:n.jsx("input",{className:"table-filter-input",value:ot.resolution,onChange:o=>_n("resolution",o.target.value)})}),n.jsx("div",{className:"col-dateClosed",children:n.jsx("input",{className:"table-filter-input",value:ot.dateClosed,onChange:o=>_n("dateClosed",o.target.value)})}),n.jsx("div",{className:"col-spacer","aria-hidden":"true"})]}),rv.map(o=>n.jsxs("div",{className:"table-row",style:op,children:[n.jsx("div",{className:"col-checkbox",children:n.jsx("input",{type:"checkbox",checked:F.includes(o.id),onChange:()=>ep(o.id),"aria-label":`Select ${o.id}`})}),n.jsx("div",{className:"col-status",children:n.jsx("span",{className:`status-badge ${Xr(o.status)}`,children:o.status})}),n.jsx("div",{className:"col-id",children:o.id}),n.jsx("div",{className:"col-summary",children:n.jsx("a",{href:"#",onClick:h=>{h.preventDefault(),np(o)},children:o.subject||"-"})}),n.jsx("div",{className:"col-category",children:o.category||"-"}),n.jsx("div",{className:"col-sla",children:(()=>{if(String(o.status||"").trim().toLowerCase()==="closed")return n.jsx("span",{children:"-"});const f=X1(o);return n.jsxs("div",{className:`sla-table-track${f.breached?" is-breached":""}`,children:[n.jsx("div",{className:"sla-table-fill",style:{width:`${f.breached?100:f.elapsedPercent}%`,background:f.breached?"#8B0000":f.color}}),n.jsx("span",{className:"sla-table-text",children:f.label})]})})()}),n.jsx("div",{className:"col-priority",children:o.priority||"-"}),n.jsx("div",{className:"col-type",children:o.type||"-"}),n.jsx("div",{className:"col-endUser",children:o.endUser||"-"}),n.jsx("div",{className:"col-lastAction",children:o.lastAction||"-"}),n.jsx("div",{className:"col-date",children:o.dateReported||"-"}),n.jsx("div",{className:"col-issueDetail",children:o.issueDetail||"-"}),n.jsx("div",{className:"col-resolution",children:o.resolution||"-"}),n.jsx("div",{className:"col-dateClosed",children:o.closedAt?new Date(o.closedAt).toLocaleString():"-"}),n.jsx("div",{className:"col-spacer","aria-hidden":"true"})]},o.id)),rv.length===0&&n.jsx("div",{className:"table-empty",children:"No tickets found."})]})]})});return n.jsxs("div",{className:"tickets-view",children:[I1,sN,$e&&n.jsx("div",{className:"compose-review-overlay",onClick:()=>re(!1),children:n.jsxs("div",{className:"compose-review-card",onClick:o=>o.stopPropagation(),children:[n.jsxs("div",{className:"compose-review-topbar",children:[n.jsx("button",{className:"compose-review-send",onClick:async()=>{re(!1),await U1()},disabled:Pe,children:"Send"}),n.jsx("button",{className:"compose-review-cancel",onClick:()=>re(!1),children:"Cancel"}),n.jsx("button",{className:"compose-review-close",onClick:()=>re(!1),"aria-label":"Close",children:"x"})]}),n.jsxs("div",{className:"compose-review-header",children:[n.jsx("div",{className:"compose-review-avatar",children:ni(pr()).slice(0,1)}),n.jsxs("div",{children:[n.jsx("div",{className:"compose-review-title",children:Ts()}),n.jsx("div",{className:"compose-review-subtitle",children:"Email"})]})]}),n.jsxs("div",{className:"compose-review-body",children:[n.jsxs("div",{className:"compose-review-row",children:[n.jsx("span",{children:"Sent:"}),n.jsx("span",{children:'Not yet ready to send (press "Send" to save your Action and send this Email or "Cancel" to edit your Action).'})]}),n.jsxs("div",{className:"compose-review-row",children:[n.jsx("span",{children:"From:"}),n.jsx("span",{children:(e==null?void 0:e.email)||"support@itsm.local"})]}),n.jsxs("div",{className:"compose-review-row",children:[n.jsx("span",{children:"To:"}),n.jsx("span",{children:ut.to||"Not set"})]}),n.jsxs("div",{className:"compose-review-row",children:[n.jsx("span",{children:"Cc:"}),n.jsx("span",{children:ut.cc||"Not set"})]}),n.jsxs("div",{className:"compose-review-row",children:[n.jsx("span",{children:"Bcc:"}),n.jsx("span",{children:ut.bcc||"Not set"})]}),n.jsxs("div",{className:"compose-review-row",children:[n.jsx("span",{children:"Subject:"}),n.jsx("span",{children:ut.subject||"Not set"})]}),n.jsxs("div",{className:"compose-review-row",children:[n.jsx("span",{children:"Status:"}),n.jsx("span",{children:ut.actionStatus||"Not set"})]}),Ut.length>0&&n.jsxs("div",{className:"compose-review-row",children:[n.jsx("span",{children:"Attachments:"}),n.jsx("span",{children:Ut.map(o=>o.file.name).join(", ")})]}),n.jsx("div",{className:"compose-review-content",dangerouslySetInnerHTML:{__html:Et()}})]})]})}),cr&&n.jsx("div",{className:"compose-modal-overlay",onClick:()=>rs(!1),children:n.jsxs("div",{className:"compose-modal",onClick:o=>o.stopPropagation(),children:[n.jsx("h4",{children:"Insert Link"}),n.jsxs("label",{children:["URL",n.jsx("input",{value:dr.url,onChange:o=>Vr(h=>({...h,url:o.target.value})),placeholder:"https://..."})]}),n.jsxs("label",{children:["Text",n.jsx("input",{value:dr.text,onChange:o=>Vr(h=>({...h,text:o.target.value})),placeholder:"Link text"})]}),n.jsxs("div",{className:"compose-modal-actions",children:[n.jsx("button",{onClick:()=>rs(!1),children:"Cancel"}),n.jsx("button",{onClick:()=>{const o=dr.url.trim();if(!o)return;const h=dr.text.trim();h?Bc(`<a href="${o}">${h}</a>`):zt("createLink",o),Vr({url:"",text:""}),rs(!1)},children:"Insert"})]})]})}),Tn&&n.jsx("div",{className:"compose-modal-overlay",onClick:()=>is(!1),children:n.jsxs("div",{className:"compose-modal",onClick:o=>o.stopPropagation(),children:[n.jsx("h4",{children:"Insert Image"}),n.jsxs("label",{children:["Image URL",n.jsx("input",{value:ha.url,onChange:o=>Cl(h=>({...h,url:o.target.value})),placeholder:"https://..."})]}),n.jsxs("div",{className:"compose-modal-actions",children:[n.jsx("button",{onClick:()=>is(!1),children:"Cancel"}),n.jsx("button",{onClick:()=>{const o=ha.url.trim();o&&(Bc(`<img src="${o}" alt="" style="max-width:100%;" />`),Cl({url:""}),is(!1))},children:"Insert"})]})]})}),Rl&&n.jsx("div",{className:"compose-modal-overlay",onClick:()=>Ii(!1),children:n.jsxs("div",{className:"compose-modal",onClick:o=>o.stopPropagation(),children:[n.jsx("h4",{children:"Create Canned Text"}),n.jsxs("label",{children:["Name",n.jsx("input",{value:Hs.name,onChange:o=>ga(h=>({...h,name:o.target.value}))})]}),n.jsxs("label",{children:["Text",n.jsx("textarea",{value:Hs.html,onChange:o=>ga(h=>({...h,html:o.target.value}))})]}),n.jsxs("div",{className:"compose-modal-actions",children:[n.jsx("button",{onClick:()=>Ii(!1),children:"Cancel"}),n.jsx("button",{onClick:()=>{const o=Hs.name.trim(),h=(Hs.html.trim()||dt).trim(),b=/<[^>]+>/.test(h)?h:h.replace(/\n/g,"<br/>");if(!o||!b)return;const I=sp();h1([{id:`ct-${Date.now()}`,name:o,html:b},...I]),ga({name:"",html:""}),Ii(!1)},children:"Save"})]})]})}),xe&&n.jsx("div",{className:"modal-overlay",onClick:()=>Ne(!1),children:n.jsxs("div",{className:"modal-content",onClick:o=>o.stopPropagation(),children:[n.jsxs("div",{className:"modal-header",children:[n.jsx("h2",{children:"Incident Details"}),n.jsx("button",{className:"modal-close",onClick:()=>Ne(!1),children:""})]}),n.jsxs("div",{className:"modal-body",children:[n.jsxs("div",{className:"form-section",children:[n.jsx("label",{className:"form-label",children:"Ticket Type *"}),n.jsxs("select",{value:bt.ticketType,onChange:o=>Pt({...bt,ticketType:o.target.value}),className:"form-select",children:[n.jsx("option",{value:"",disabled:!0,children:"Select Ticket Type"}),n.jsx("option",{value:"Fault",children:"Fault"}),n.jsx("option",{value:"HR request",children:"HR request"}),n.jsx("option",{value:"Change request",children:"Change request"}),n.jsx("option",{value:"Return request",children:"Return request"}),n.jsx("option",{value:"Incident",children:"Incident"}),n.jsx("option",{value:"Task",children:"Task"})]})]}),n.jsxs("div",{className:"form-section",children:[n.jsx("label",{className:"form-label",children:"Subject *"}),n.jsx("input",{type:"text",placeholder:"Enter subject",value:bt.subject,onChange:o=>Pt({...bt,subject:o.target.value}),className:"form-input"})]}),n.jsxs("div",{className:"form-section",children:[n.jsx("label",{className:"form-label",children:"Description"}),n.jsx("textarea",{placeholder:"Please provide a detailed description and include screenshots where possible.",value:bt.description,onChange:o=>Pt({...bt,description:o.target.value}),className:"form-textarea"})]}),n.jsxs("div",{className:"form-section",children:[n.jsx("label",{className:"form-label",children:"Category"}),n.jsxs("div",{className:"custom-category-dropdown",children:[n.jsxs("div",{className:"category-select-input",onClick:()=>L(!Re),children:[bt.category||"Select Category",n.jsx("span",{className:"dropdown-arrow",children:""})]}),Re&&n.jsx("div",{className:"category-dropdown-menu",children:n.jsx("div",{className:"category-list",children:Object.keys(os).filter(o=>!o.includes(">")).map(o=>{var h,f;return n.jsxs("div",{className:"category-item",children:[n.jsxs("div",{className:"category-header",children:[((h=os[o])==null?void 0:h.length)>0?n.jsx("button",{className:"expand-btn",onClick:b=>{b.stopPropagation(),Dc(o)},children:X.includes(o)?"":""}):n.jsx("span",{className:"expand-placeholder"}),n.jsx("span",{className:"category-name",onClick:()=>Wl(o),children:o})]}),X.includes(o)&&n.jsx("div",{className:"subcategories-list",children:(f=os[o])==null?void 0:f.map(b=>{var I,P,z;return n.jsxs("div",{className:"subcategory-item",children:[n.jsxs("div",{className:"subcategory-header",children:[((I=os[`${o}>${b}`])==null?void 0:I.length)>0?n.jsx("button",{className:"expand-btn",onClick:Te=>{Te.stopPropagation(),Dc(`${o}>${b}`)},children:X.includes(`${o}>${b}`)?"":""}):n.jsx("span",{className:"expand-placeholder"}),n.jsx("span",{className:"subcategory-name",onClick:()=>Wl(`${o}>${b}`),children:b})]}),X.includes(`${o}>${b}`)&&((P=os[`${o}>${b}`])==null?void 0:P.length)>0&&n.jsx("div",{className:"leaf-items",children:(z=os[`${o}>${b}`])==null?void 0:z.map(Te=>n.jsx("div",{className:"leaf-item",onClick:()=>Wl(`${o}>${b}>${Te}`),children:Te},Te))})]},b)})})]},o)})})})]})]}),n.jsxs("div",{className:"form-section",children:[n.jsx("label",{className:"form-label",children:"Priority *"}),n.jsxs("select",{value:bt.priority,onChange:o=>Pt({...bt,priority:o.target.value}),className:"form-select",children:[n.jsx("option",{value:"",disabled:!0,children:"Select Priority"}),n.jsx("option",{value:"Low",children:"Low"}),n.jsx("option",{value:"Medium",children:"Medium"}),n.jsx("option",{value:"High",children:"High"}),n.jsx("option",{value:"Critical",children:"Critical"})]})]})]}),n.jsxs("div",{className:"modal-footer",children:[n.jsx("button",{className:"btn-cancel",onClick:()=>Ne(!1),children:"Cancel"}),n.jsx("button",{className:"btn-submit",onClick:tp,children:"Create Ticket"})]})]})})]})}function Dy(){return u.useState(!1),u.useState("email"),null}async function aL(e={}){return(await De.get("/users",{params:e})).data}async function l1(e){return(await De.get(`/users/${e}/permissions`)).data}async function _y(e){return(await De.post("/users",{name:e.fullName,email:e.email,phone:e.phone||null,workEmail:e.mailId||e.email||null,employeeId:e.employeeId||null,department:e.department||null,reportingManager:e.reportingManager||null,dateOfJoining:e.dateOfJoining||null,employmentType:e.employmentType||null,workMode:e.workMode||null,designation:e.designation||null,role:e.role,isServiceAccount:e.isServiceAccount,autoUpgradeQueues:e.autoUpgradeQueues,queueIds:e.queueIds,status:e.inviteMode?"INVITED":"ACTIVE",inviteMode:e.inviteMode,defaultPermissionTemplate:e.defaultPermissionTemplate})).data}async function lL(e){return(await De.post(`/users/${e}/send-invite`)).data}async function oL(e){return(await De.post(`/users/${e}/mark-invite-pending`)).data}async function Fy(e,t){return(await De.post(`/users/${e}/service-account/invite`,{toEmail:t||void 0})).data}async function Uy(e,t){return(await De.post(`/users/${e}/service-account/reinvite`,{toEmail:t||void 0})).data}async function cL(e,t){return(await De.put(`/users/${e}/permissions`,t)).data}const By={key:"custom",label:"Custom",baseRole:"CUSTOM",permissions:{}},dL=[{key:"support_desk",label:"Support Desk",baseRole:"USER",permissions:{}},{key:"hr_queue",label:"HR Queue",baseRole:"USER",permissions:{}},{key:"management",label:"Management",baseRole:"ADMIN",permissions:{}},{key:"account",label:"Account",baseRole:"USER",permissions:{}},{key:"supplier_queue",label:"Supplier Queue",baseRole:"SUPPLIER",permissions:{}}],uL={dashboard:["View Dashboard","Analytics","KPI View"],tickets:["View Ticket","Create Ticket","Assign Ticket","Respond to Ticket"],assets:["View Asset","Create Asset","Edit Asset","Delete Asset"],users:["View User","Create User","Edit User","Delete User"],suppliers:["View Supplier","Create Supplier","Edit Supplier","Delete Supplier"],accounts:["View Account","Create Account","Edit Account","Delete Account"],reports:["View Report","Export Report"],admin:["View Admin","Create Admin","Edit Admin","Delete Admin"]},mL=Tw.map(e=>({id:e.id,title:e.label,items:uL[e.id]||[`Read ${e.label}`,`Create ${e.label}`,`Edit ${e.label}`,`Delete ${e.label}`,`Export ${e.label}`]})),pL=new Set(["hi"]),o1="itsm_ui_permissions_v1",zy=[{key:"all",label:"all"},{key:"read",label:"read"},{key:"create",label:"create"},{key:"edit",label:"edit"},{key:"delete",label:"delete"},{key:"export",label:"export"}],fL={tickets:["edit","export"],assets:["export"],users:["export"],suppliers:["export"],reports:["edit"]};function Wy(){if(typeof window>"u")return{};try{const e=window.localStorage.getItem(o1);if(!e)return{};const t=JSON.parse(e);return!t||typeof t!="object"?{}:t}catch{return{}}}function hL(e){typeof window>"u"||window.localStorage.setItem(o1,JSON.stringify(e))}function qy(e){return e.toLowerCase().trim().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"")}function Hy(){const e=ts(),t=Array.isArray(e==null?void 0:e.ticketsMyLists)?e.ticketsMyLists:[],s=new Set;return t.map(r=>{const i=String((r==null?void 0:r.id)||""),a=String((r==null?void 0:r.label)||"").trim();if(!a)return null;const l=i||`queue-${qy(a)}`,c=`team-${qy(l||a)}`;return s.has(c)?null:(s.add(c),{id:c,label:a})}).filter(r=>!!r)}function ii(e){return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()}function gL({isAdmin:e}){const[t,s]=u.useState([]),[r,i]=u.useState(""),[a,l]=u.useState(null),[c,d]=u.useState(null),[p,g]=u.useState("USER"),[v,S]=u.useState("support_desk"),[O,x]=u.useState({}),[y,M]=u.useState({}),[k,j]=u.useState(null),[C,E]=u.useState(!1),[B,_]=u.useState(!1),[F,J]=u.useState(null),[ue,Y]=u.useState(!1),[xe,Ne]=u.useState(1),[Re,L]=u.useState(null),[X,ce]=u.useState(""),[N,K]=u.useState({fullName:"",mailId:"",phone:"",employeeId:"",designation:"",department:"",manager:"",dateOfJoining:"",employmentType:"Full-time",workMode:"Onsite",defaultPermissionTemplate:""}),[W,ne]=u.useState("none"),[R,Q]=u.useState(null),[je,se]=u.useState(null),[ze,Ze]=u.useState(!1),[ye,lt]=u.useState(!0),[We,Fe]=u.useState([]),[le,Me]=u.useState(!1),[G,he]=u.useState(!1),we=(U,te)=>{J({type:U,text:te}),window.setTimeout(()=>J(null),2200)},$=U=>a&&Object.prototype.hasOwnProperty.call(y,U)?!!y[U]:!1,V=U=>`${U.email} | ${U.name||"No name"} | ${ii(U.role)} | ${ii(U.inviteStatus||U.status||"none")}`,ve=U=>U.isServiceAccount?"Service Account (Agent)":ii(U.role||"user"),ge=U=>String(U.inviteStatus||U.status||"none").trim().toLowerCase()||"none",Ve=U=>{const te=ge(U);return["invited","invite_pending","invited_not_accepted"].includes(te)},Le=u.useMemo(()=>t.slice().sort((U,te)=>{const Ce=U.isServiceAccount?1:0,Ae=te.isServiceAccount?1:0;return Ce!==Ae?Ae-Ce:String(U.name||U.email||"").localeCompare(String(te.name||te.email||""))}),[t]),H=u.useMemo(()=>Le.filter(U=>U.isServiceAccount),[Le]),pe=u.useMemo(()=>Le,[Le]),_e=u.useMemo(()=>Le.filter(U=>!U.isServiceAccount),[Le]),Ye=async()=>{var U,te;try{const Ce=await aL({q:r,limit:500}),Ae=Array.isArray(Ce)?Ce:[];s(Ae)}catch(Ce){we("error",((te=(U=Ce==null?void 0:Ce.response)==null?void 0:U.data)==null?void 0:te.error)||"Failed to load users")}},et=async U=>{var te,Ce;E(!0);try{const Ae=await l1(U),Ke=Ae.permissions.reduce((bn,En)=>(bn[En.permissionKey]=!!En.allowed,bn),{}),it=Wy()[String(U)]||{},at={...Ke,...it},Vt=String(Ae.selectedTemplateKey||"custom");d(Ae),g(Ae.user.role||"USER"),S(Vt),M(at),j({role:Ae.user.role||"USER",templateKey:Vt,permissions:at});const dn=(Ae.modules||[]).reduce((bn,En)=>{const Yt=Ae.permissions.filter(Bt=>Bt.module===En.key&&!Bt.queue);return bn[En.key]=Yt.some(Bt=>!!Ke[Bt.permissionKey]),bn},{});x(dn)}catch(Ae){we("error",((Ce=(te=Ae==null?void 0:Ae.response)==null?void 0:te.data)==null?void 0:Ce.error)||"Failed to load user permissions")}finally{E(!1)}};u.useEffect(()=>{Ye()},[]),u.useEffect(()=>{Ye()},[r]),u.useEffect(()=>{if(a){et(a);return}d(null),M({}),j(null)},[a]);const ct=u.useMemo(()=>[...((c==null?void 0:c.permissionTemplates)||[]).length>0?(c==null?void 0:c.permissionTemplates)||[]:dL,By],[c]);u.useMemo(()=>ct.reduce((U,te)=>(U[te.key]=te,U),{}),[ct]);const rt=u.useMemo(()=>((c==null?void 0:c.permissions)||[]).map(U=>U.permissionKey),[c]),qe=u.useMemo(()=>{const U=Qe=>{const it=`${Qe.action||""} ${Qe.label||""}`.toLowerCase();return it.includes("create")||it.includes("add")?"create":it.includes("edit")||it.includes("update")?"edit":it.includes("delete")||it.includes("remove")?"delete":it.includes("export")?"export":"read"},te=(Qe,it)=>{const at=fL[Qe]||[];if(at.length===0)return it;const Vt=[...it];return at.forEach(dn=>{if(Vt.some(En=>U(En)===dn))return;const bn=ii(Qe.replace(/_/g," "));Vt.push({permissionKey:`ui_matrix_${Qe}_${dn}`,module:Qe,queue:null,action:dn,label:`${ii(dn)} ${bn}`,allowed:!1})}),Vt},Ce=((c==null?void 0:c.modules)||[]).slice().sort((Qe,it)=>Qe.sortOrder-it.sortOrder),Ae=((c==null?void 0:c.permissions)||[]).filter(Qe=>Qe.queue?!1:!pL.has(Qe.label.trim().toLowerCase()));if(Ce.length>0||Ae.length>0){const Qe=Ae.map(at=>at.module).filter(Boolean).filter((at,Vt,dn)=>dn.indexOf(at)===Vt).map(at=>({key:at,label:ii(at.replace(/_/g," ")),sortOrder:999})),it=[...Ce];return Qe.forEach(at=>{it.some(Vt=>Vt.key===at.key)||it.push(at)}),Tw.forEach((at,Vt)=>{it.some(dn=>dn.key===at.id)||it.push({key:at.id,label:at.label,sortOrder:1e3+Vt})}),it.map(at=>({id:at.key,title:at.label,subtitle:"Permission",items:te(at.key,[...Ae.filter(Vt=>Vt.module===at.key).sort((Vt,dn)=>Vt.label.localeCompare(dn.label))])}))}return mL.map(Qe=>({id:Qe.id,title:Qe.title,subtitle:"Permission",items:te(Qe.id,[...Qe.items.map((it,at)=>({permissionKey:`ui_fallback_${Qe.id}_${at}`,module:Qe.id,queue:null,action:it.toLowerCase().replace(/\s+/g,"_"),label:it,allowed:!0}))])}))},[c]),yt=u.useMemo(()=>k?JSON.stringify({role:p,templateKey:v,permissions:y})!==JSON.stringify(k):!1,[k,y,p,v]),[St,hn]=u.useState(()=>Hy()),tn=W==="existing-user"?R:je,fe=u.useMemo(()=>{const U=Number(tn||0);return U&&t.find(te=>Number(te.id)===U)||null},[tn,t]),gt=String((fe==null?void 0:fe.inviteStatus)||"none").toLowerCase(),He=["none","invite_pending"].includes(gt),At=["invite_pending","invited_not_accepted"].includes(gt),mt=String((fe==null?void 0:fe.role)||"").toUpperCase()==="AGENT",Ut=!!(fe!=null&&fe.isServiceAccount),T=()=>{ne("none"),Q(null),se(null),Ze(!1),lt(!0),Fe([])},Se=(U,te)=>{Fe(Ce=>te?Ce.includes(U)?Ce:[...Ce,U]:Ce.filter(Ae=>Ae!==U))};u.useEffect(()=>{const U=()=>{const te=Hy();hn(te)};return U(),window.addEventListener("left-panel-config-updated",U),()=>window.removeEventListener("left-panel-config-updated",U)},[]),u.useEffect(()=>{if(W!=="existing-user")return;if(!R){Ze(!1),lt(!0),Fe([]);return}const U=t.find(te=>Number(te.id)===Number(R));if(!U||!U.isServiceAccount){Ze(!1),lt(!0),Fe([]);return}Ze(!0),lt(U.autoUpgradeQueues!==!1),Fe(Array.isArray(U.queueIds)?U.queueIds:[])},[W,R,t]);const ke=U=>((c==null?void 0:c.permissionTemplates)||[]).find(Ae=>rt.every(Ke=>!!U[Ke]==!!Ae.permissions[Ke]))||By,Pe=U=>{const te=ke(U);S(te.key),g(te.baseRole||"CUSTOM")},Xe=(U,te)=>{const Ce=qe.find(Ke=>Ke.id===U);if(!Ce)return;const Ae={...y};Ce.items.forEach(Ke=>{Ae[Ke.permissionKey]=te}),M(Ae),x(Ke=>({...Ke,[U]:te||!!Ke[U]})),Pe(Ae)},dt=U=>{const te=`${U.action||""} ${U.label||""}`.toLowerCase();return te.includes("create")||te.includes("add")?"create":te.includes("edit")||te.includes("update")?"edit":te.includes("delete")||te.includes("remove")?"delete":te.includes("export")?"export":"read"},w=(U,te)=>te==="all"?U:U.filter(Ce=>dt(Ce)===te),ee=(U,te,Ce)=>{if(te==="all"){Xe(U,Ce);return}const Ae=qe.find(at=>at.id===U);if(!Ae)return;const Ke=w(Ae.items,te);if(Ke.length===0)return;const Qe={...y};Ke.forEach(at=>{Qe[at.permissionKey]=Ce}),M(Qe);const it=Ae.items.some(at=>!!Qe[at.permissionKey]);x(at=>({...at,[U]:it||!!at[U]})),Pe(Qe)},de=async()=>{var U,te;if(a){_(!0);try{const Ce=new Set(rt),Ae=Object.entries(y).reduce((Yt,[Bt,Er])=>(Ce.has(Bt)&&(Yt[Bt]=Er),Yt),{}),Ke=await cL(a,{role:p,templateKey:v,permissions:Ae,autoSwitchCustom:!0}),Qe=Ke.permissions.reduce((Yt,Bt)=>(Yt[Bt.permissionKey]=!!Bt.allowed,Yt),{}),at=Object.keys(y).filter(Yt=>Yt.startsWith("ui_")).reduce((Yt,Bt)=>(Yt[Bt]=!!y[Bt],Yt),{}),dn={...Wy(),[String(a)]:at};hL(dn);const bn={...Qe,...at},En=String(Ke.selectedTemplateKey||"custom");d(Ke),g(Ke.user.role),S(En),M(bn),j({role:Ke.user.role,templateKey:En,permissions:bn}),we("ok","Permissions updated successfully")}catch(Ce){we("error",((te=(U=Ce==null?void 0:Ce.response)==null?void 0:U.data)==null?void 0:te.error)||"Failed to update permissions")}finally{_(!1)}}},$e=async()=>{var te,Ce;ce("");const U=N.mailId.trim();if(!N.fullName.trim()||!U){const Ae="Full Name and Mail ID is required.";ce(Ae),we("error",Ae);return}try{const Ae=await _y({fullName:N.fullName.trim(),email:U,mailId:U,phone:N.phone.trim(),employeeId:N.employeeId.trim()||void 0,department:N.department.trim()||void 0,reportingManager:N.manager.trim()||void 0,dateOfJoining:N.dateOfJoining||void 0,employmentType:N.employmentType,workMode:N.workMode,designation:N.designation.trim()||void 0,role:"USER",defaultPermissionTemplate:N.defaultPermissionTemplate||void 0});L(Number(Ae.id)),Ne(2),we("ok","User created"),await Ye()}catch(Ae){const Ke=((Ce=(te=Ae==null?void 0:Ae.response)==null?void 0:te.data)==null?void 0:Ce.error)||"Failed to create user";ce(Ke),we("error",Ke)}},re=()=>{Y(!1),Ne(1),L(null),ce(""),K({fullName:"",mailId:"",phone:"",employeeId:"",designation:"",department:"",manager:"",dateOfJoining:"",employmentType:"Full-time",workMode:"Onsite",defaultPermissionTemplate:""})},Dt=async()=>{var U,te;if(Re)try{await lL(Re),we("ok","Invite sent successfully"),re(),await Ye()}catch(Ce){we("error",((te=(U=Ce==null?void 0:Ce.response)==null?void 0:U.data)==null?void 0:te.error)||"Failed to send invite")}},xt=async()=>{var U,te;if(Re)try{await oL(Re),we("ok","Invite marked as pending"),re(),await Ye()}catch(Ce){we("error",((te=(U=Ce==null?void 0:Ce.response)==null?void 0:U.data)==null?void 0:te.error)||"Failed to mark invite pending")}},jn=async()=>{var te,Ce;ce("");const U=N.mailId.trim();if(!N.fullName.trim()||!U){const Ae="Full Name and Mail ID is required.";ce(Ae),we("error",Ae);return}try{const Ae=await _y({fullName:N.fullName.trim(),email:U,mailId:U,phone:N.phone.trim(),employeeId:N.employeeId.trim()||void 0,department:N.department.trim()||void 0,reportingManager:N.manager.trim()||void 0,dateOfJoining:N.dateOfJoining||void 0,employmentType:N.employmentType,workMode:N.workMode,designation:N.designation.trim()||void 0,role:"USER",defaultPermissionTemplate:N.defaultPermissionTemplate||void 0}),Ke=Number(Ae.id);se(Ke),Ze(!0),we("ok","User created. Continue with service account setup."),await Ye()}catch(Ae){const Ke=((Ce=(te=Ae==null?void 0:Ae.response)==null?void 0:te.data)==null?void 0:Ce.error)||"Failed to create user";ce(Ke),we("error",Ke)}},Mt=async()=>{var te,Ce;const U=Number(tn||0);if(!U){we("error","Select a user first");return}try{if(!ze){await ll(U,{role:"USER",isServiceAccount:!1}),l(U),await Ye(),we("ok","Service account disabled"),T();return}const Ae=ye?St.map(Ke=>Ke.id):We;if(Ae.length===0){we("error","Select at least one team queue");return}await ll(U,{role:"AGENT",isServiceAccount:!0,autoUpgradeQueues:ye,queueIds:Ae}),await Ye(),l(U),we("ok",Ut?"Service account updated successfully":"Service account configured successfully"),T()}catch(Ae){we("error",((Ce=(te=Ae==null?void 0:Ae.response)==null?void 0:te.data)==null?void 0:Ce.error)||"Failed to configure service account")}},ss=async U=>{var Ae,Ke;const te=Number(tn||0),Ce=String((fe==null?void 0:fe.email)||"").trim();if(!te){we("error","Select a user first");return}if(!Ce){we("error","Selected user mail ID is missing");return}try{if(Me(!0),U==="invite"){const Qe=await Fy(te,Ce);we("ok",`Service account invite sent to ${(Qe==null?void 0:Qe.sentTo)||Ce}`)}else{const Qe=await Uy(te,Ce);we("ok",`Service account re-invite sent to ${(Qe==null?void 0:Qe.sentTo)||Ce}`)}await Ye(),a===te&&await et(te)}catch(Qe){we("error",((Ke=(Ae=Qe==null?void 0:Qe.response)==null?void 0:Ae.data)==null?void 0:Ke.error)||"Failed to process service account invite")}finally{Me(!1)}},qs=async(U,te)=>{var Ke,Qe;const Ce=Number((U==null?void 0:U.id)||0),Ae=String((U==null?void 0:U.email)||"").trim();if(!Ce){we("error","Invalid user selected");return}if(!Ae){we("error","Selected user mail ID is missing");return}try{if(Me(!0),te==="invite"){const it=await Fy(Ce,Ae);we("ok",`Service account invite sent to ${(it==null?void 0:it.sentTo)||Ae}`)}else{const it=await Uy(Ce,Ae);we("ok",`Service account re-invite sent to ${(it==null?void 0:it.sentTo)||Ae}`)}await Ye(),a===Ce&&await et(Ce)}catch(it){we("error",((Qe=(Ke=it==null?void 0:it.response)==null?void 0:Ke.data)==null?void 0:Qe.error)||"Failed to process service account invite")}finally{Me(!1)}},pt=async U=>{var Ce,Ae;const te=Number((U==null?void 0:U.id)||0);if(!te){we("error","Invalid user selected");return}try{he(!0),await ll(te,{role:"USER",isServiceAccount:!1}),await Ye(),a===te&&l(null),we("ok","Service account deactivated")}catch(Ke){we("error",((Ae=(Ce=Ke==null?void 0:Ke.response)==null?void 0:Ce.data)==null?void 0:Ae.error)||"Failed to deactivate service account")}finally{he(!1)}};return n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"rbac-top-action-row",children:[n.jsx("div",{className:"rbac-top-action-title",children:"User & Access management"}),n.jsxs("div",{className:"rbac-top-action-actions",children:[a&&n.jsxs(n.Fragment,{children:[n.jsx("button",{className:"rbac-update-btn",onClick:de,disabled:!yt||B||!a,children:B?"Updating...":"Update"}),n.jsx("button",{className:"admin-settings-ghost",onClick:()=>l(null),children:"Cancel"})]}),n.jsxs("button",{className:"rbac-add-btn",onClick:()=>{re(),T(),ne("picker")},disabled:!e,children:[n.jsx("span",{className:"rbac-add-btn-plus","aria-hidden":"true",children:"+"}),n.jsx("span",{children:"Add Service Account (Agent)"})]})]})]}),W!=="none"?n.jsx("section",{className:"rbac-module-card",children:n.jsxs("div",{className:"rbac-service-account-shell",children:[W==="picker"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"rbac-service-account-head",children:[n.jsx("h3",{children:"Service Account Setup"}),n.jsx("button",{className:"admin-settings-ghost",onClick:T,children:"Back to Permissions"})]}),n.jsxs("div",{className:"rbac-service-account-picker-grid",children:[n.jsxs("button",{className:"rbac-service-account-picker-card",onClick:()=>ne("existing-user"),children:[n.jsx("h4",{children:"Add service account from existing user"}),n.jsx("p",{children:"Select a current user to add or edit queue-scoped service account settings."})]}),n.jsxs("button",{className:"rbac-service-account-picker-card",onClick:()=>ne("new-user"),children:[n.jsx("h4",{children:"Add new user for service account"}),n.jsx("p",{children:"Create a new user first, then continue with service account conversion and queue scope."})]})]})]}),W==="existing-user"&&n.jsxs("div",{className:"rbac-service-account-form",children:[n.jsxs("div",{className:"rbac-service-account-head",children:[n.jsx("h3",{children:"Add service account from existing user"}),n.jsx("button",{className:"admin-settings-ghost",onClick:()=>ne("picker"),children:"Back"})]}),X&&n.jsx("div",{className:"rbac-modal-error",children:X}),n.jsxs("label",{className:"rbac-service-account-label",children:["Select User",n.jsxs("select",{value:R??"",onChange:U=>Q(U.target.value?Number(U.target.value):null),children:[n.jsx("option",{value:"",children:"Select User"}),H.length>0&&n.jsx("optgroup",{label:"Service Accounts",children:H.map(U=>n.jsx("option",{value:U.id,children:V(U)},U.id))}),_e.length>0&&n.jsx("optgroup",{label:"Other Users",children:_e.map(U=>n.jsx("option",{value:U.id,children:V(U)},U.id))})]})]}),R&&n.jsx("p",{className:"rbac-service-account-note",children:Ut?"Existing service account config loaded. Update and save changes.":"No existing service account config. Configure and save to create one."}),n.jsxs("label",{className:"rbac-service-account-toggle",children:[n.jsx("span",{children:"Make as Service Account (Agent)"}),n.jsxs("span",{className:"rbac-toggle-switch",children:[n.jsx("input",{type:"checkbox",checked:ze,onChange:U=>Ze(U.target.checked)}),n.jsx("span",{className:"rbac-toggle-slider"})]})]}),ze&&n.jsxs("div",{className:"rbac-service-account-queues",children:[n.jsxs("label",{className:"rbac-service-account-check",children:[n.jsx("input",{type:"checkbox",checked:ye,onChange:U=>lt(U.target.checked)}),n.jsx("span",{children:"Auto-upgrade to include future team queues"})]}),n.jsx("div",{className:"rbac-service-account-queue-grid",children:St.map(U=>{const te=ye?!0:We.includes(U.id);return n.jsxs("label",{className:"rbac-service-account-check",children:[n.jsx("input",{type:"checkbox",checked:te,disabled:ye,onChange:Ce=>Se(U.id,Ce.target.checked)}),n.jsx("span",{children:U.label})]},U.id)})})]}),n.jsxs("div",{className:"rbac-service-account-actions",children:[n.jsx("button",{className:"admin-settings-primary",onClick:Mt,children:ze?Ut?"Update Service Account":"Save Service Account":"Disable Service Account"}),mt&&n.jsxs(n.Fragment,{children:[n.jsx("button",{className:"admin-settings-ghost",onClick:()=>ss("invite"),disabled:le||!He,title:He?"Send invite":"Invite already sent; use re-invite",children:le?"Processing...":"Invite"}),n.jsx("button",{className:"admin-settings-ghost",onClick:()=>ss("reinvite"),disabled:le||!At,title:At?"Send re-invite":"Re-invite available only after pending/sent invite",children:le?"Processing...":"Re-Invite"})]})]})]}),W==="new-user"&&n.jsxs("div",{className:"rbac-service-account-form",children:[n.jsxs("div",{className:"rbac-service-account-head",children:[n.jsx("h3",{children:"Add new user for service account"}),n.jsx("button",{className:"admin-settings-ghost",onClick:()=>ne("picker"),children:"Back"})]}),X&&n.jsx("div",{className:"rbac-modal-error",children:X}),je?n.jsxs(n.Fragment,{children:[n.jsx("p",{className:"rbac-service-account-note",children:"User created. Continue with service account conversion and queue scopes."}),n.jsxs("label",{className:"rbac-service-account-toggle",children:[n.jsx("span",{children:"Make as Service Account (Agent)"}),n.jsxs("span",{className:"rbac-toggle-switch",children:[n.jsx("input",{type:"checkbox",checked:ze,onChange:U=>Ze(U.target.checked)}),n.jsx("span",{className:"rbac-toggle-slider"})]})]}),ze&&n.jsxs("div",{className:"rbac-service-account-queues",children:[n.jsxs("label",{className:"rbac-service-account-check",children:[n.jsx("input",{type:"checkbox",checked:ye,onChange:U=>lt(U.target.checked)}),n.jsx("span",{children:"Auto-upgrade to include future team queues"})]}),n.jsx("div",{className:"rbac-service-account-queue-grid",children:St.map(U=>{const te=ye?!0:We.includes(U.id);return n.jsxs("label",{className:"rbac-service-account-check",children:[n.jsx("input",{type:"checkbox",checked:te,disabled:ye,onChange:Ce=>Se(U.id,Ce.target.checked)}),n.jsx("span",{children:U.label})]},U.id)})})]}),n.jsxs("div",{className:"rbac-service-account-actions",children:[n.jsx("button",{className:"admin-settings-primary",onClick:Mt,children:"Save Service Account"}),mt&&n.jsxs(n.Fragment,{children:[n.jsx("button",{className:"admin-settings-ghost",onClick:()=>ss("invite"),disabled:le||!He,title:He?"Send invite":"Invite already sent; use re-invite",children:le?"Processing...":"Invite"}),n.jsx("button",{className:"admin-settings-ghost",onClick:()=>ss("reinvite"),disabled:le||!At,title:At?"Send re-invite":"Re-invite available only after pending/sent invite",children:le?"Processing...":"Re-Invite"})]})]})]}):n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"rbac-user-template-grid",children:[n.jsxs("label",{children:["Full Name",n.jsx("input",{placeholder:"Full name",value:N.fullName,onChange:U=>K(te=>({...te,fullName:U.target.value}))})]}),n.jsxs("label",{children:["Mail ID",n.jsx("input",{placeholder:"name@company.com",value:N.mailId,onChange:U=>K(te=>({...te,mailId:U.target.value}))})]}),n.jsxs("label",{children:["Phone Number",n.jsx("input",{placeholder:"+1 555 000 0000",value:N.phone,onChange:U=>K(te=>({...te,phone:U.target.value}))})]}),n.jsxs("label",{children:["Employee ID",n.jsx("input",{placeholder:"EMP-001",value:N.employeeId,onChange:U=>K(te=>({...te,employeeId:U.target.value}))})]}),n.jsxs("label",{children:["Designation",n.jsx("input",{placeholder:"Designation",value:N.designation,onChange:U=>K(te=>({...te,designation:U.target.value}))})]}),n.jsxs("label",{children:["Department/Project",n.jsx("input",{placeholder:"Department or project",value:N.department,onChange:U=>K(te=>({...te,department:U.target.value}))})]}),n.jsxs("label",{children:["Reporting Manager",n.jsx("input",{placeholder:"Manager name",value:N.manager,onChange:U=>K(te=>({...te,manager:U.target.value}))})]}),n.jsxs("label",{children:["Date of Joining",n.jsx("input",{type:"date",value:N.dateOfJoining,onChange:U=>K(te=>({...te,dateOfJoining:U.target.value}))})]}),n.jsxs("label",{children:["Employment Type",n.jsxs("select",{value:N.employmentType,onChange:U=>K(te=>({...te,employmentType:U.target.value})),children:[n.jsx("option",{children:"Full-time"}),n.jsx("option",{children:"Part-time"}),n.jsx("option",{children:"Contract"})]})]}),n.jsxs("label",{className:"rbac-user-template-span-1",children:["Work mode",n.jsxs("select",{value:N.workMode,onChange:U=>K(te=>({...te,workMode:U.target.value})),children:[n.jsx("option",{children:"Onsite"}),n.jsx("option",{children:"Hybrid"}),n.jsx("option",{children:"Remote"})]})]})]}),n.jsxs("label",{className:"rbac-service-account-toggle",children:[n.jsx("span",{children:"Make as Service Account (Agent)"}),n.jsxs("span",{className:"rbac-toggle-switch",children:[n.jsx("input",{type:"checkbox",checked:ze,onChange:U=>Ze(U.target.checked)}),n.jsx("span",{className:"rbac-toggle-slider"})]})]}),ze&&n.jsxs("div",{className:"rbac-service-account-queues",children:[n.jsxs("label",{className:"rbac-service-account-check",children:[n.jsx("input",{type:"checkbox",checked:ye,onChange:U=>lt(U.target.checked)}),n.jsx("span",{children:"Auto-upgrade to include future team queues"})]}),n.jsx("div",{className:"rbac-service-account-queue-grid",children:St.map(U=>{const te=ye?!0:We.includes(U.id);return n.jsxs("label",{className:"rbac-service-account-check",children:[n.jsx("input",{type:"checkbox",checked:te,disabled:ye,onChange:Ce=>Se(U.id,Ce.target.checked)}),n.jsx("span",{children:U.label})]},U.id)})})]}),!ze&&n.jsx("p",{className:"rbac-service-account-note",children:'Enable "Make as Service Account (Agent)" to continue.'}),n.jsx("div",{className:"rbac-service-account-actions",children:n.jsx("button",{className:"admin-settings-primary",onClick:jn,disabled:!ze,children:"Add Service Account (Agent)"})})]})]})]})}):ue?n.jsx("section",{className:"rbac-module-card",children:n.jsxs("div",{className:"modal-content rbac-modal rbac-inline-add-user",children:[n.jsxs("div",{className:"modal-header",children:[n.jsx("h3",{children:"Add / Invite New User"}),n.jsx("button",{className:"modal-close",onClick:re,children:"x"})]}),n.jsxs("div",{className:"modal-body",children:[X&&n.jsx("div",{className:"rbac-modal-error",children:X}),xe===1&&n.jsxs("div",{className:"rbac-user-template-grid",children:[n.jsxs("label",{children:["Full Name",n.jsx("input",{placeholder:"Full name",value:N.fullName,onChange:U=>K(te=>({...te,fullName:U.target.value}))})]}),n.jsxs("label",{children:["Mail ID",n.jsx("input",{placeholder:"name@company.com",value:N.mailId,onChange:U=>K(te=>({...te,mailId:U.target.value}))})]}),n.jsxs("label",{children:["Phone Number",n.jsx("input",{placeholder:"+1 555 000 0000",value:N.phone,onChange:U=>K(te=>({...te,phone:U.target.value}))})]}),n.jsxs("label",{children:["Employee ID",n.jsx("input",{placeholder:"EMP-001",value:N.employeeId,onChange:U=>K(te=>({...te,employeeId:U.target.value}))})]}),n.jsxs("label",{children:["Designation",n.jsx("input",{placeholder:"Designation",value:N.designation,onChange:U=>K(te=>({...te,designation:U.target.value}))})]}),n.jsxs("label",{children:["Department/Project",n.jsx("input",{placeholder:"Department or project",value:N.department,onChange:U=>K(te=>({...te,department:U.target.value}))})]}),n.jsxs("label",{children:["Reporting Manager",n.jsx("input",{placeholder:"Manager name",value:N.manager,onChange:U=>K(te=>({...te,manager:U.target.value}))})]}),n.jsxs("label",{children:["Date of Joining",n.jsx("input",{type:"date",value:N.dateOfJoining,onChange:U=>K(te=>({...te,dateOfJoining:U.target.value}))})]}),n.jsxs("label",{children:["Employment Type",n.jsxs("select",{value:N.employmentType,onChange:U=>K(te=>({...te,employmentType:U.target.value})),children:[n.jsx("option",{children:"Full-time"}),n.jsx("option",{children:"Part-time"}),n.jsx("option",{children:"Contract"})]})]}),n.jsxs("label",{className:"rbac-user-template-span-1",children:["Work mode",n.jsxs("select",{value:N.workMode,onChange:U=>K(te=>({...te,workMode:U.target.value})),children:[n.jsx("option",{children:"Onsite"}),n.jsx("option",{children:"Hybrid"}),n.jsx("option",{children:"Remote"})]})]})]}),xe===2&&n.jsxs("div",{className:"rbac-invite-step",children:[n.jsx("p",{children:"User saved. Choose invite action:"}),n.jsxs("div",{className:"rbac-invite-buttons",children:[n.jsx("button",{className:"admin-settings-primary",onClick:Dt,children:"Invite Now"}),n.jsx("button",{className:"admin-settings-ghost",onClick:xt,children:"Invite Later"})]})]})]}),n.jsx("div",{className:"modal-footer",children:xe===1&&n.jsx("button",{className:"admin-settings-primary",onClick:$e,children:"Save"})})]})}):n.jsx("section",{className:"rbac-module-card",children:a?n.jsx("div",{className:"rbac-permission-matrix-wrap",children:n.jsxs("table",{className:"rbac-permission-matrix",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{scope:"col",children:"Permission"}),zy.map(U=>n.jsx("th",{scope:"col",children:U.label},U.key))]})}),n.jsx("tbody",{children:qe.map(U=>n.jsxs("tr",{children:[n.jsx("td",{className:"rbac-permission-module-cell",children:n.jsx("span",{className:"rbac-permission-module-name",children:U.title})}),zy.map(te=>{const Ce=w(U.items,te.key),Ae=Ce.length>0&&Ce.every(Ke=>$(Ke.permissionKey));return n.jsx("td",{className:"rbac-permission-matrix-cell",children:n.jsx("input",{type:"checkbox",checked:Ae,onChange:Ke=>ee(U.id,te.key,Ke.target.checked),disabled:!e||Ce.length===0})},`${U.id}-${te.key}`)})]},U.id))})]})}):n.jsx("div",{className:"rbac-permission-matrix-wrap",children:n.jsxs("table",{className:"rbac-permission-matrix",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{scope:"col",children:"Service Account (Agent)"}),n.jsx("th",{scope:"col",children:"Name"}),n.jsx("th",{scope:"col",children:"Role"}),n.jsx("th",{scope:"col",children:"Invite Status"}),n.jsx("th",{scope:"col",children:"Status"}),n.jsx("th",{scope:"col",children:"Service Account?"}),n.jsx("th",{scope:"col",children:"Action"})]})}),n.jsx("tbody",{children:pe.length>0?pe.map(U=>n.jsxs("tr",{children:[n.jsx("td",{children:U.email}),n.jsx("td",{children:U.name||"No name"}),n.jsx("td",{children:ve(U)}),n.jsx("td",{children:ii(U.inviteStatus||"none")}),n.jsx("td",{children:ii(U.status||"active")}),n.jsx("td",{children:U.isServiceAccount?"Yes":"No"}),n.jsx("td",{children:n.jsxs("div",{style:{display:"flex",gap:6,flexWrap:"wrap"},children:[n.jsx("button",{className:"admin-settings-ghost",onClick:()=>l(Number(U.id)),children:"Edit"}),U.isServiceAccount?null:n.jsx("button",{className:"admin-settings-primary",onClick:()=>{Q(Number(U.id)),ne("existing-user")},disabled:!e,title:"Convert user to service account (agent)",children:"Make Service Account"}),n.jsx("button",{className:"admin-settings-ghost",onClick:()=>qs(U,"invite"),disabled:le||Ve(U)||!e,title:Ve(U)?"Invite already sent; use re-invite":"Send invite",children:le?"Processing...":"Invite"}),n.jsx("button",{className:"admin-settings-ghost",onClick:()=>qs(U,"reinvite"),disabled:le||!Ve(U)||!e,title:Ve(U)?"Send re-invite":"Re-invite available only after invite",children:le?"Processing...":"Reinvite"}),n.jsx("button",{className:"admin-settings-danger",onClick:()=>pt(U),disabled:G||!e||!U.isServiceAccount,title:"Remove agent permissions and keep as user",children:G?"Working...":"Deactivate"})]})})]},U.id)):n.jsx("tr",{children:n.jsx("td",{colSpan:7,children:n.jsx("div",{className:"rbac-empty-state",children:"No users found."})})})})]})})}),F&&n.jsx("div",{className:`rbac-toast ${F.type}`,children:F.text})]})}async function vL(){return(await De.get("/mail/config")).data}async function xL(e){return(await De.post("/mail/config/inbound",e)).data}async function yL(e){return(await De.post("/mail/smtp/test",e)).data}async function jL(e){return(await De.post("/mail/imap/test",e)).data}async function bL(e){return(await De.post("/mail/smtp/send",e)).data}async function wL(){return(await De.get("/system/database/config")).data}async function NL(e){return(await De.post("/system/database/test",e)).data}const tf=[{id:"general",label:"General Settings",items:[{id:"timezone-localization",label:"Time zone & localization"}]},{id:"user-access",label:"User & Access Management",items:[{id:"roles-permissions",label:"User & Access management",requiresAdmin:!0},{id:"mfa-settings",label:"MFA settings",requiresAdmin:!0}]},{id:"queue-management",label:"Queue & Panel management",items:[{id:"queue-management",label:"Queue & Panel management",requiresAdmin:!0}]},{id:"workflow-automation",label:"Workflow and Automation",items:[{id:"workflow-automation",label:"Workflow and Automation",requiresAdmin:!0}]},{id:"incident",label:"Policy (SLA) Management",items:[{id:"sla-policies",label:"SLA policies"},{id:"auto-assignment",label:"Auto-assignment rules"}]},{id:"integrations",label:"Integrations & Platform",items:[{id:"mail-configuration",label:"Mail Configuration",requiresAdmin:!0},{id:"email-signature-templates",label:"Email & Signature Templates",requiresAdmin:!0},{id:"database-configuration",label:"Database Configuration",requiresAdmin:!0}]}],oi=["Critical","High","Medium","Low"],Vy=["min","hrs","days","weeks"],SL=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],Nr=(()=>{try{return Intl.DateTimeFormat().resolvedOptions().timeZone||"UTC"}catch{return"UTC"}})(),kL=(()=>{try{const e=Intl.supportedValuesOf,t=typeof e=="function"?e("timeZone"):[];return t.length?Array.from(new Set([Nr,...t])):[Nr,"UTC"]}catch{return[Nr,"UTC"]}})(),ci=[{name:"Incident",states:["New","In Progress","Awaiting Approval","Closed","Rejected"],transitions:["New -> In Progress","In Progress -> Awaiting Approval","Awaiting Approval -> In Progress","In Progress -> Closed","New -> Closed (quick close)"],buttonFlow:["Back -> Return to list","Accept (New) -> Assign to agent","Acknowledge -> In Progress","Approval -> Awaiting Approval","Resolve -> Closed","Close -> Closed","Re-open (Closed) -> In Progress"]},{name:"Service Request",states:["New","Awaiting Approval","In Progress","Fulfilled","Closed","Rejected"],transitions:["New -> Awaiting Approval","New -> In Progress (if no approval required)","Awaiting Approval -> In Progress","Awaiting Approval -> Rejected","In Progress -> Fulfilled","Fulfilled -> Closed","New -> Closed (quick close)"],buttonFlow:["Back -> Return to list","Accept (New) -> Assign to agent","Request Approval (New) -> Awaiting Approval","Approve (Awaiting Approval) -> In Progress","Reject (Awaiting Approval) -> Rejected","Fulfill (In Progress) -> Fulfilled","Close (Fulfilled) -> Closed","Re-open (Closed) -> In Progress"]},{name:"Change Request (Asset Replacement)",states:["New","Under Verification","Awaiting Approval","Approved","Procurement","In Progress","Completed","Closed","Rejected"],transitions:["New -> Under Verification","Under Verification -> Awaiting Approval","Awaiting Approval -> Approved","Awaiting Approval -> Rejected","Approved -> Procurement","Approved -> In Progress","Procurement -> In Progress","In Progress -> Completed","Completed -> Closed"],buttonFlow:["Verify Asset -> Under Verification","Send for Approval -> Awaiting Approval","Approve -> Approved","Reject -> Rejected","Start Procurement -> Procurement","Start Implementation -> In Progress","Complete Change -> Completed","Close -> Closed"]},{name:"Access Request",states:["New","Manager Approval","IT Approval","Provisioning","Completed","Closed","Rejected"],transitions:["New -> Manager Approval","Manager Approval -> IT Approval","Manager Approval -> Rejected","IT Approval -> Provisioning","Provisioning -> Completed","Completed -> Closed"],buttonFlow:["Send to Manager -> Manager Approval","Approve (Manager) -> IT Approval","Reject -> Rejected","IT Approve -> Provisioning","Provision Access -> Completed","Close -> Closed"]},{name:"New Starter Request",states:["New","HR Confirmation","IT Setup","Asset Allocation","Ready for Joining","Closed","Rejected"],transitions:["New -> HR Confirmation","HR Confirmation -> IT Setup","IT Setup -> Asset Allocation","Asset Allocation -> Ready for Joining","Ready for Joining -> Closed"],buttonFlow:["Confirm by HR -> HR Confirmation","Start IT Setup -> IT Setup","Allocate Asset -> Asset Allocation","Mark Ready -> Ready for Joining","Close -> Closed"]},{name:"Leaver Request",states:["New","HR Confirmation","Access Revoked","Asset Collected","Completed","Closed"],transitions:["New -> HR Confirmation","HR Confirmation -> Access Revoked","Access Revoked -> Asset Collected","Asset Collected -> Completed","Completed -> Closed"],buttonFlow:["HR Confirm -> HR Confirmation","Revoke Access -> Access Revoked","Collect Asset -> Asset Collected","Complete Offboarding -> Completed","Close -> Closed"]},{name:"Task",states:["New","Assigned","In Progress","Completed","Closed"],transitions:["New -> Assigned","Assigned -> In Progress","In Progress -> Completed","Completed -> Closed"],buttonFlow:["Accept -> Assigned","Start -> In Progress","Complete -> Completed","Close -> Closed"]},{name:"Software Request",states:["New","Manager Approval","Budget Approval","Procurement","Installation","Completed","Closed","Rejected"],transitions:["New -> Manager Approval","Manager Approval -> Budget Approval","Manager Approval -> Rejected","Budget Approval -> Procurement","Procurement -> Installation","Installation -> Completed","Completed -> Closed"],buttonFlow:["Request Approval -> Manager Approval","Budget Approve -> Budget Approval","Start Procurement -> Procurement","Install Software -> Installation","Mark Completed -> Completed","Close -> Closed"]},{name:"HR Request",states:["New","HR Review","In Progress","Resolved","Closed","Rejected"],transitions:["New -> HR Review","HR Review -> In Progress","HR Review -> Rejected","In Progress -> Resolved","Resolved -> Closed"],buttonFlow:["Send to HR -> HR Review","Start Review -> In Progress","Resolve -> Resolved","Close -> Closed"]},{name:"Peripheral Request",states:["New","Stock Check","Approval","Issued","Closed","Rejected"],transitions:["New -> Stock Check","Stock Check -> Approval","Stock Check -> Issued","Approval -> Issued","Approval -> Rejected","Issued -> Closed"],buttonFlow:["Check Stock -> Stock Check","Request Approval -> Approval","Issue Asset -> Issued","Close -> Closed"]}],Ky="admin.workflow.automation.v1",Vi=e=>e.map(t=>({name:t.name,states:[...t.states],transitions:[...t.transitions],buttonFlow:[...t.buttonFlow]})),ao=e=>String(e||"").trim().toLowerCase(),Qy=e=>{const t=new Map,s=[];for(const i of e){const a=String((i==null?void 0:i.name)||"").trim();if(!a)continue;const l={name:a,states:Array.isArray(i.states)?i.states.map(d=>String(d||"").trim()).filter(Boolean):[],transitions:Array.isArray(i.transitions)?i.transitions.map(d=>String(d||"").trim()).filter(Boolean):[],buttonFlow:Array.isArray(i.buttonFlow)?i.buttonFlow.map(d=>String(d||"").trim()).filter(Boolean):[]},c=ao(a);t.has(c)||t.set(c,l)}const r=ci.map(i=>{const a=t.get(ao(i.name));return a||Vi([i])[0]});for(const i of e){const a=ao(i.name);!ci.some(c=>ao(c.name)===a)&&!s.some(c=>ao(c.name)===a)&&s.push({name:i.name,states:[...i.states],transitions:[...i.transitions],buttonFlow:[...i.buttonFlow]})}return[...r,...s]},Gy="admin.mail.templates.v1",Jy="admin.mail.signatures.v1",Yy="admin.mail.banners.v1",CL=["Assign","Reassign","Retire","Accept","Approve","Reject","Close"],nf=(e,t)=>{if(typeof window>"u")return t;try{const s=window.localStorage.getItem(e);if(!s)return t;const r=JSON.parse(s);return Array.isArray(r)?r:t}catch{return t}},AL=()=>({provider:"gmail",providerType:"google-workspace-oauth",connectionMode:"oauth2",oauthConnected:!1,oauthTokenExpiry:"",workspaceProvider:"custom",supportMail:"",inboundEmailAddress:"",inboundDefaultQueue:"Helpdesk",inboundDefaultTicketType:"Incident",inboundDefaultPriority:"Medium",autoAssignRule:"",pollIntervalMs:"60000",imapEncryption:"SSL",smtpEncryption:"SSL",enablePush:!1,ignoreAutoReply:!0,preventEmailLoop:!0,processAttachments:!0,overwriteStatusOnReply:!1,autoReopenOnReply:!0,stripQuotedReplies:!0,appendToTicketPattern:"[#TICKET-ID]",outboundReplyTo:"",maxAttachmentSizeMb:"20",signatureTemplate:`Regards,
IT Support Team`,allowExternalEmailCreation:!0,allowInternalOnly:!1,allowedDomains:"",blockedDomains:"",spfDkimStatus:"Unknown",emailLogRetentionDays:"90",retryFailedSend:!0,maxRetryCount:"3",routingRuleHelpdeskQueue:"If email sent to helpdesk@ -> Queue = Helpdesk",routingRuleAccessType:'If subject contains "Access" -> Type = Access Request',routingRuleSupplierType:"If sender domain = vendor.com -> Type = Supplier Ticket",lastSyncTime:"",lastEmailReceived:"",lastEmailSent:"",errorLogs:"",apiProviderName:"SendGrid",apiBaseUrl:"",apiKey:"",apiSecret:"",smtp:{host:"",port:"465",secure:!0,user:"",pass:"",from:""},imap:{host:"",port:"993",secure:!0,user:"",pass:"",mailbox:"INBOX"}}),EL=()=>({connectionString:"",host:"",port:"5432",database:"",user:"",password:"",ssl:!1}),TL=e=>{const t=String(e||"").trim().toLowerCase();return t==="google-workspace"?"google-workspace":t==="microsoft-workspace"?"microsoft-workspace":t==="zoho"?"zoho":t==="outlook"?"outlook":"custom"},Xa=()=>({Sunday:{enabled:!1,slots:[{start:"08:00",end:"17:30"}]},Monday:{enabled:!0,slots:[{start:"08:00",end:"17:30"}]},Tuesday:{enabled:!0,slots:[{start:"08:00",end:"17:30"}]},Wednesday:{enabled:!0,slots:[{start:"08:00",end:"17:30"}]},Thursday:{enabled:!0,slots:[{start:"08:00",end:"17:30"}]},Friday:{enabled:!0,slots:[{start:"08:00",end:"17:30"}]},Saturday:{enabled:!1,slots:[{start:"08:00",end:"17:30"}]}}),gi=e=>{const t={Critical:{response:"15",responseUnit:"min",resolution:"4",resolutionUnit:"hrs"},High:{response:"30",responseUnit:"min",resolution:"8",resolutionUnit:"hrs"},Medium:{response:"1",responseUnit:"hrs",resolution:"1",resolutionUnit:"days"},Low:{response:"4",responseUnit:"hrs",resolution:"3",resolutionUnit:"days"}};return{enabled:!1,name:`${e} SLA`,responseTimeMin:t[e].response,responseTimeUnit:t[e].responseUnit,resolutionTimeMin:t[e].resolution,resolutionTimeUnit:t[e].resolutionUnit,businessHours:!1,timeZone:Nr,businessSchedule:Xa(),active:!0,existingId:null}},yh=()=>({Critical:gi("Critical"),High:gi("High"),Medium:gi("Medium"),Low:gi("Low")}),RL=()=>({Critical:{...gi("Critical"),enabled:!0},High:{...gi("High"),enabled:!0},Medium:{...gi("Medium"),enabled:!0},Low:{...gi("Low"),enabled:!0}}),Cd={scope:"Global",ownerRole:"Admin",approvalMode:"Manager approval",timezone:"UTC",locale:"en-US",runbookLink:"",documentationLink:"",notes:"",ssoEnforced:!0,mfaRequired:!0,auditLogging:!0,backupEnabled:!0,autoAssignEnabled:!0,notificationsEnabled:!0,webhookEnabled:!1},Xy=e=>e==="weeks"?7*24*60:e==="days"?24*60:e==="hrs"?60:1,Zy=e=>{const t=Number(e);return!Number.isFinite(t)||t<0?{value:"0",unit:"min"}:t>0&&t%(7*24*60)===0?{value:String(t/(7*24*60)),unit:"weeks"}:t>0&&t%(24*60)===0?{value:String(t/(24*60)),unit:"days"}:t>0&&t%60===0?{value:String(t/60),unit:"hrs"}:{value:String(t),unit:"min"}},ej=(e,t)=>{if(e==="p_set")return["P1","P2","P3","P4"];if(e==="custom"){const s=String(t||"").split(",").map(i=>i.trim()).filter(Boolean),r=["L1","L2","L3","L4"];return[s[0]||r[0],s[1]||r[1],s[2]||r[2],s[3]||r[3]]}return["Critical","High","Medium","Low"]},ML=e=>{const t=e.map(a=>String((a==null?void 0:a.priority)||"").trim()).filter(Boolean);if(!t.length)return{format:"critical_set",customFormatText:""};const s=t.map(a=>a.toLowerCase());return["critical","high","medium","low"].every(a=>s.includes(a))?{format:"critical_set",customFormatText:""}:["p1","p2","p3","p4"].every(a=>s.includes(a))?{format:"p_set",customFormatText:""}:{format:"custom",customFormatText:t.slice(0,4).join(", ")}},PL=(e,t,s)=>{const r=e.filter(c=>String((c==null?void 0:c.name)||"").trim().toLowerCase()===String(t||"").trim().toLowerCase()),i=s||["Critical","High","Medium","Low"],a=c=>{const d=Number(c==null?void 0:c.priorityRank);if(Number.isFinite(d)&&d>=1&&d<=4)return d;const p=String((c==null?void 0:c.priority)||"").trim().toLowerCase(),g=i.findIndex(v=>v.toLowerCase()===p);return g>=0?g+1:p==="critical"||p==="p1"?1:p==="high"||p==="p2"?2:p==="medium"||p==="p3"?3:4};r.sort((c,d)=>a(c)-a(d));const l=yh();for(let c=0;c<oi.length;c++){const d=oi[c],p=r.find(S=>a(S)===c+1);if(!p)continue;const g=Zy(p.responseTimeMin),v=Zy(p.resolutionTimeMin);l[d]={enabled:!0,name:String(p.name||""),responseTimeMin:g.value,responseTimeUnit:g.unit,resolutionTimeMin:v.value,resolutionTimeUnit:v.unit,businessHours:!!p.businessHours,timeZone:Nr,businessSchedule:Xa(),active:!!p.active,existingId:Number(p.id)}}return l},LL={"organization-info":[{id:"org-profile",title:"Organization Profile",description:"Business identity and ownership metadata.",fields:[{key:"orgName",label:"Organization name",type:"text"},{key:"orgCode",label:"Organization code",type:"text"},{key:"primaryDomain",label:"Primary domain",type:"text"},{key:"ownerRole",label:"Owner role",type:"select",options:["Admin","Service Owner","Platform Engineer"]}]}],"business-hours":[{id:"hours",title:"Business Calendar",description:"Working hours, shifts, and holiday handling.",fields:[{key:"workWeek",label:"Work week",type:"select",options:["Mon-Fri","Sun-Thu","24x7"]},{key:"businessHours",label:"Business hours",type:"text"},{key:"holidayCalendar",label:"Holiday calendar",type:"select",options:["Global","US","EMEA","APAC"]},{key:"afterHoursEscalation",label:"After-hours escalation enabled",type:"toggle"}]}],"timezone-localization":[{id:"localization",title:"Regional Preferences",description:"Default timezone and locale for records and notifications.",fields:[{key:"timezone",label:"Default timezone",type:"select",options:["UTC","America/New_York","Europe/London","Asia/Kolkata"]},{key:"locale",label:"Localization",type:"select",options:["en-US","en-GB","fr-FR","de-DE"]},{key:"dateFormat",label:"Date format",type:"select",options:["YYYY-MM-DD","DD/MM/YYYY","MM/DD/YYYY"]},{key:"weekStart",label:"Week starts on",type:"select",options:["Monday","Sunday"]}]}],"roles-permissions":[{id:"rbac",title:"Role Matrix",description:"Define role templates and scoped permissions.",fields:[{key:"defaultRoleTemplate",label:"Default role template",type:"select",options:["Least Privilege","Balanced","Power User"],adminOnly:!0},{key:"roleApprovalRequired",label:"Role change requires approval",type:"toggle",adminOnly:!0},{key:"privilegedSessionTimeout",label:"Privileged session timeout (minutes)",type:"text",adminOnly:!0},{key:"permissionNotes",label:"Permission governance notes",type:"textarea",adminOnly:!0}]}],"user-groups":[{id:"groups",title:"Group Policies",description:"Control group ownership, lifecycle, and membership flow.",fields:[{key:"groupAutoProvision",label:"Auto-provision groups from directory",type:"toggle"},{key:"groupOwnerRole",label:"Default group owner role",type:"select",options:["Manager","Team Lead","Service Owner"]},{key:"groupReviewCycle",label:"Membership review cycle",type:"select",options:["30 days","60 days","90 days"]},{key:"groupNamingRule",label:"Naming rule pattern",type:"text"}]}],"sso-configuration":[{id:"sso",title:"SSO Configuration",description:"Identity provider and sign-in enforcement controls.",fields:[{key:"ssoEnforced",label:"Enforce SSO",type:"toggle",adminOnly:!0},{key:"idpType",label:"Identity provider",type:"select",options:["Azure AD","Okta","Google Workspace","SAML Custom"],adminOnly:!0},{key:"ssoJitProvisioning",label:"JIT provisioning",type:"toggle",adminOnly:!0},{key:"ssoMetadataUrl",label:"Metadata URL",type:"text",adminOnly:!0}]}],"mfa-settings":[{id:"mfa",title:"MFA Policy",description:"Second-factor strategy and conditional access rules.",fields:[{key:"mfaRequired",label:"MFA required for privileged roles",type:"toggle",adminOnly:!0},{key:"mfaMethod",label:"Primary MFA method",type:"select",options:["Authenticator App","FIDO2 Key","SMS OTP"],adminOnly:!0},{key:"mfaGracePeriod",label:"Enrollment grace period (days)",type:"text",adminOnly:!0},{key:"mfaBypassEmergency",label:"Allow emergency bypass",type:"toggle",adminOnly:!0}]}],"priority-matrix":[{id:"priority",title:"Priority Matrix",description:"Map impact and urgency to ticket priorities.",fields:[{key:"matrixModel",label:"Matrix model",type:"select",options:["3x3","4x4","Custom"]},{key:"defaultPriority",label:"Default priority",type:"select",options:["Low","Medium","High","Critical"]},{key:"autoDowngrade",label:"Auto-downgrade stale incidents",type:"toggle"},{key:"prioritySlaLink",label:"Link priority to SLA automatically",type:"toggle"}]}],"sla-policies":[{id:"sla",title:"SLA Policies",description:"Response/resolution targets and business calendar linkage.",fields:[{key:"slaPolicySet",label:"Policy set",type:"select",options:["Standard","Premium","Critical Services"]},{key:"firstResponseTarget",label:"First response target",type:"select",options:["15 min","30 min","1 hour","4 hours"]},{key:"resolutionTarget",label:"Resolution target",type:"select",options:["4 hours","8 hours","24 hours","72 hours"]},{key:"slaBreachNotify",label:"Notify on breach risk",type:"toggle"}]}],"auto-assignment":[{id:"auto-assignment",title:"Auto-Assignment",description:"Assign work based on load, skills, and queues.",fields:[{key:"autoAssignEnabled",label:"Enable auto-assignment",type:"toggle"},{key:"assignmentStrategy",label:"Assignment strategy",type:"select",options:["Round Robin","Least Loaded","Skill Match"]},{key:"fallbackQueue",label:"Fallback queue",type:"text"},{key:"reassignInactive",label:"Reassign inactive tickets",type:"toggle"}]}],categories:[{id:"catalog-categories",title:"Catalog Categories",description:"Taxonomy and ownership for service requests.",fields:[{key:"catalogRoot",label:"Root category label",type:"text"},{key:"categoryApprovalMode",label:"Category approval mode",type:"select",options:["Auto","Manager","Service Owner"]},{key:"categoryVisibility",label:"Default visibility",type:"select",options:["All users","By department","By group"]},{key:"categoryArchiveDays",label:"Archive empty categories (days)",type:"text"}]}],"request-workflows":[{id:"request-workflows",title:"Request Workflows",description:"Workflow templates used by service catalog requests.",fields:[{key:"requestDefaultWorkflow",label:"Default workflow template",type:"select",options:["Standard Fulfillment","Access Request","Hardware Provision"]},{key:"workflowParallelApproval",label:"Enable parallel approvals",type:"toggle"},{key:"workflowSlaBinding",label:"Bind workflow to SLA",type:"toggle"},{key:"workflowNotes",label:"Workflow design notes",type:"textarea"}]}],"approval-matrix":[{id:"approval-matrix",title:"Approval Matrix",description:"Approval routing based on risk, cost, and requester.",fields:[{key:"approvalModel",label:"Approval model",type:"select",options:["Manager","Manager + Finance","CAB"]},{key:"approvalThreshold",label:"Cost threshold for additional approvals",type:"text"},{key:"approvalEscalation",label:"Escalate pending approvals",type:"toggle"},{key:"approvalSla",label:"Approval SLA",type:"select",options:["4 hours","8 hours","24 hours"]}]}],"change-types":[{id:"change-types",title:"Change Types",description:"Standard, normal, and emergency change governance.",fields:[{key:"defaultChangeType",label:"Default change type",type:"select",options:["Standard","Normal","Emergency"]},{key:"changeTemplateRequired",label:"Template required for changes",type:"toggle"},{key:"emergencyApprovalBypass",label:"Emergency approval bypass",type:"toggle",adminOnly:!0},{key:"changeFreezeWindow",label:"Change freeze windows",type:"text"}]}],"risk-matrix":[{id:"risk-matrix",title:"Risk Matrix",description:"Risk scoring for change and incident policies.",fields:[{key:"riskScoringModel",label:"Scoring model",type:"select",options:["Impact x Likelihood","Weighted","Custom"]},{key:"riskAutoClassification",label:"Auto-classify risk from CI tags",type:"toggle"},{key:"riskHighThreshold",label:"High-risk threshold",type:"text"},{key:"riskReviewRequired",label:"Require risk review for high-risk",type:"toggle"}]}],"cab-configuration":[{id:"cab",title:"CAB Configuration",description:"Change Advisory Board composition and cadence.",fields:[{key:"cabMeetingCadence",label:"CAB meeting cadence",type:"select",options:["Daily","Twice Weekly","Weekly"]},{key:"cabQuorum",label:"Minimum quorum",type:"text"},{key:"cabAutoInvite",label:"Auto-invite service owners",type:"toggle"},{key:"cabEmergencyBoard",label:"Enable emergency CAB",type:"toggle"}]}],"workflow-builder":[{id:"automation-builder",title:"Workflow Builder",description:"Low-code workflow execution settings.",fields:[{key:"builderVersion",label:"Builder runtime",type:"select",options:["v1 Stable","v2 Modern"]},{key:"builderSandbox",label:"Sandbox mode for draft workflows",type:"toggle"},{key:"builderPublishApproval",label:"Require publish approval",type:"toggle"},{key:"builderTimeout",label:"Workflow execution timeout (seconds)",type:"text"}]}],"triggers-conditions":[{id:"triggers",title:"Triggers & Conditions",description:"Event predicates and suppression logic.",fields:[{key:"triggerDeduplication",label:"Deduplicate repeated triggers",type:"toggle"},{key:"triggerWindow",label:"Deduplication window",type:"select",options:["1 min","5 min","15 min"]},{key:"triggerConditionMode",label:"Condition mode",type:"select",options:["All true","Any true"]},{key:"triggerAuditTrail",label:"Store trigger evaluation trail",type:"toggle"}]}],"email-templates-automation":[{id:"automation-email",title:"Automation Email Templates",description:"System email templates used by workflows.",fields:[{key:"emailTemplatePack",label:"Template pack",type:"select",options:["Default","Enterprise","Custom"]},{key:"emailBranding",label:"Branding profile",type:"select",options:["Global","Regional","Departmental"]},{key:"emailFooterLegal",label:"Include legal footer",type:"toggle"},{key:"emailSenderAddress",label:"Sender address",type:"text"}]}],webhooks:[{id:"webhooks",title:"Webhook Delivery",description:"Outbound integration endpoint and retry controls.",fields:[{key:"webhookEnabled",label:"Enable outbound webhooks",type:"toggle"},{key:"webhookEndpoint",label:"Endpoint URL",type:"text"},{key:"webhookRetries",label:"Retry policy",type:"select",options:["No retries","3 retries","5 retries"]},{key:"webhookSigning",label:"Sign webhook payloads",type:"toggle",adminOnly:!0}]}],"api-keys":[{id:"api-keys",title:"API Keys",description:"Key lifecycle controls and scopes.",fields:[{key:"apiKeyRotation",label:"Rotation interval",type:"select",options:["30 days","60 days","90 days"],adminOnly:!0},{key:"apiKeyScopeDefault",label:"Default key scope",type:"select",options:["Read only","Read/Write","Admin"],adminOnly:!0},{key:"apiKeyIpAllowlist",label:"IP allowlist",type:"text",adminOnly:!0},{key:"apiKeyAudit",label:"Audit key usage",type:"toggle",adminOnly:!0}]}],"third-party-tools":[{id:"third-party",title:"Third-party Tools",description:"Connected SaaS apps and identity bridge settings.",fields:[{key:"slackIntegration",label:"Slack integration enabled",type:"toggle"},{key:"azureAdSync",label:"Azure AD sync mode",type:"select",options:["Manual","Hourly","Real-time"]},{key:"teamsNotifications",label:"Microsoft Teams notifications",type:"toggle"},{key:"integrationFallback",label:"Fallback connector",type:"text"}]}],"monitoring-tools":[{id:"monitoring",title:"Monitoring Tools",description:"Integrate observability and alerting systems.",fields:[{key:"monitoringProvider",label:"Primary provider",type:"select",options:["Datadog","Prometheus","New Relic","CloudWatch"]},{key:"monitoringAlertSync",label:"Sync alerts to incidents",type:"toggle"},{key:"monitoringSeverityMap",label:"Severity mapping profile",type:"select",options:["Default","Strict","Custom"]},{key:"monitoringIngestionKey",label:"Ingestion key",type:"text",adminOnly:!0}]}],"asset-types":[{id:"asset-types",title:"Asset Type Catalog",description:"Asset type schema and ownership for CMDB.",fields:[{key:"assetTypeModel",label:"Asset type model",type:"select",options:["Hardware + Software","CI first","Custom"]},{key:"assetLifecyclePolicy",label:"Lifecycle policy",type:"select",options:["Standard","Strict Compliance","Flexible"]},{key:"assetTagPrefix",label:"Asset tag prefix",type:"text"},{key:"assetOwnershipRequired",label:"Require asset owner",type:"toggle"}]}],"ci-relationships":[{id:"ci-relationships",title:"CI Relationships",description:"Relationship graph and dependency modeling.",fields:[{key:"ciRelationModel",label:"Relationship model",type:"select",options:["Parent-Child","Service Topology","Hybrid"]},{key:"ciAutoLink",label:"Auto-link discovered CIs",type:"toggle"},{key:"ciImpactPropagation",label:"Impact propagation depth",type:"select",options:["1 hop","2 hops","3 hops"]},{key:"ciLinkConfidence",label:"Minimum confidence threshold",type:"text"}]}],"discovery-settings":[{id:"discovery",title:"Discovery Settings",description:"Network discovery schedule and scanning profile.",fields:[{key:"discoveryEnabled",label:"Enable discovery engine",type:"toggle"},{key:"discoveryCadence",label:"Discovery cadence",type:"select",options:["Daily","Weekly","Monthly"]},{key:"discoveryCredentialProfile",label:"Credential profile",type:"select",options:["Default","Privileged","Read-only"]},{key:"discoveryExcludeRanges",label:"Excluded network ranges",type:"text"}]}],"email-templates-notify":[{id:"notify-email",title:"Notification Email Templates",description:"Notification template set for tickets and changes.",fields:[{key:"notifyEmailPack",label:"Template pack",type:"select",options:["Default","Branded","Minimal"]},{key:"notifyDigestMode",label:"Digest mode",type:"select",options:["Instant","Hourly Digest","Daily Digest"]},{key:"notifyEmailFooter",label:"Include compliance footer",type:"toggle"},{key:"notifyReplyTo",label:"Reply-to address",type:"text"}]}],"sms-settings":[{id:"sms",title:"SMS Settings",description:"SMS gateway and delivery behavior.",fields:[{key:"smsEnabled",label:"Enable SMS notifications",type:"toggle"},{key:"smsProvider",label:"SMS provider",type:"select",options:["Twilio","Azure Communication","Custom"]},{key:"smsCountryPolicy",label:"Allowed country policy",type:"select",options:["Global","Restricted","Custom list"]},{key:"smsSenderId",label:"Sender ID",type:"text"}]}],"push-notifications":[{id:"push",title:"Push Notifications",description:"In-app and mobile push controls.",fields:[{key:"pushEnabled",label:"Enable push notifications",type:"toggle"},{key:"pushCriticalOnly",label:"Critical alerts only",type:"toggle"},{key:"pushQuietHours",label:"Quiet hours",type:"text"},{key:"pushRetryPolicy",label:"Retry policy",type:"select",options:["No retry","2 retries","5 retries"]}]}],"audit-logs":[{id:"audit-logs",title:"Audit Logs",description:"Security event and configuration audit retention.",fields:[{key:"auditLogging",label:"Enable audit logging",type:"toggle",adminOnly:!0},{key:"auditExportCadence",label:"Export cadence",type:"select",options:["Daily","Weekly","Monthly"],adminOnly:!0},{key:"auditImmutableStore",label:"Immutable log storage",type:"toggle",adminOnly:!0},{key:"auditLogViewerRole",label:"Log viewer role",type:"select",options:["Admin","Security Team"],adminOnly:!0}]}],"data-retention":[{id:"retention",title:"Data Retention Policy",description:"Retention and purge schedules by data class.",fields:[{key:"ticketRetentionDays",label:"Ticket retention (days)",type:"text",adminOnly:!0},{key:"assetRetentionDays",label:"Asset record retention (days)",type:"text",adminOnly:!0},{key:"purgeSchedule",label:"Purge schedule",type:"select",options:["Weekly","Monthly","Quarterly"],adminOnly:!0},{key:"legalHoldEnabled",label:"Legal hold override enabled",type:"toggle",adminOnly:!0}]}],"backup-settings":[{id:"backup",title:"Backup Settings",description:"Backup schedule, encryption, and recovery targets.",fields:[{key:"backupEnabled",label:"Enable daily backups",type:"toggle",adminOnly:!0},{key:"backupWindow",label:"Backup window",type:"text",adminOnly:!0},{key:"backupEncryption",label:"Backup encryption",type:"select",options:["AES-256","Provider managed"],adminOnly:!0},{key:"backupRetention",label:"Backup retention",type:"select",options:["30 days","90 days","365 days"],adminOnly:!0}]}]};function IL(e){const{user:t}=An(),s=typeof document<"u"?document.getElementById("ticket-left-panel"):null,r=String((t==null?void 0:t.role)||"USER"),[i,a]=u.useState(""),[l,c]=u.useState(!1),[d,p]=u.useState(!1),[g,v]=u.useState(tf[0].id),[S,O]=u.useState(tf[0].items[0].id),[x,y]=u.useState(Cd),[M,k]=u.useState(Cd),[j,C]=u.useState(!1),[E,B]=u.useState(!1),[_,F]=u.useState(!1),[,J]=u.useState(null),[,ue]=u.useState(["Role matrix synced by Platform Admin","SLA policy update applied to Incident queue","Webhook endpoint validation completed","Backup retention adjusted to 90 days"]),[Y,xe]=u.useState(()=>ts()),[Ne,Re]=u.useState("ticketsMyLists"),[L,X]=u.useState("ticket"),[ce,N]=u.useState(null),[K,W]=u.useState(!1),[ne,R]=u.useState(""),[Q,je]=u.useState(""),[se,ze]=u.useState(""),[Ze,ye]=u.useState("ADMIN,AGENT"),[lt,We]=u.useState(""),[Fe,le]=u.useState(null),[Me,G]=u.useState(!1),[he,we]=u.useState(""),[$,V]=u.useState(""),[ve,ge]=u.useState(""),[Ve,Le]=u.useState("ADMIN,AGENT"),[H,pe]=u.useState(""),[_e,Ye]=u.useState(!1),[et,ct]=u.useState(!1),[rt,qe]=u.useState([]),[yt,St]=u.useState(yh()),[hn,tn]=u.useState(!1),[fe,gt]=u.useState("create"),[He,At]=u.useState(""),[mt,Ut]=u.useState(null),[T,Se]=u.useState("critical_set"),[ke,Pe]=u.useState(""),[Xe,dt]=u.useState(Nr),[w,ee]=u.useState(Xa()),[de,$e]=u.useState(1),[re,Dt]=u.useState(AL()),[xt,jn]=u.useState(!1),[Mt,ss]=u.useState(!1),[qs,pt]=u.useState(""),[U,te]=u.useState(""),[Ce,Ae]=u.useState(()=>nf(Gy,[])),[Ke,Qe]=u.useState({name:"",buttonKey:"Assign",subject:"",body:"",active:!0}),[it,at]=u.useState(null),[Vt,dn]=u.useState([]),[bn,En]=u.useState(()=>nf(Jy,[])),[Yt,Bt]=u.useState({userId:"",userLabel:"",signatureHtml:"",active:!0}),[Er,pa]=u.useState(null),[fa,kl]=u.useState(()=>nf(Yy,[])),[cr,rs]=u.useState({title:"",message:"",tone:"info",active:!0}),[dr,Vr]=u.useState(null),[Tn,is]=u.useState(EL()),[ha,Cl]=u.useState(!1),[Al,El]=u.useState(!1),[Li,Kr]=u.useState(""),[Dn,ur]=u.useState(()=>{if(typeof window>"u")return Vi(ci);try{const m=window.localStorage.getItem(Ky);if(!m)return Vi(ci);const A=JSON.parse(m);if(!Array.isArray(A))return Vi(ci);const D=A.map(q=>({name:String((q==null?void 0:q.name)||"").trim(),states:Array.isArray(q==null?void 0:q.states)?q.states.map(ie=>String(ie||"").trim()).filter(Boolean):[],transitions:Array.isArray(q==null?void 0:q.transitions)?q.transitions.map(ie=>String(ie||"").trim()).filter(Boolean):[],buttonFlow:Array.isArray(q==null?void 0:q.buttonFlow)?q.buttonFlow.map(ie=>String(ie||"").trim()).filter(Boolean):[]})).filter(q=>q.name);return D.length?Qy(D):Vi(ci)}catch{return Vi(ci)}}),[xc,Tl]=u.useState(""),[Rl,Ii]=u.useState(""),[Hs,ga]=u.useState(""),[Ml,va]=u.useState(!1),un=u.useMemo(()=>tf.map(m=>{const A=m.items;return{...m,items:A}}).filter(m=>m.items.length>0),[]);u.useEffect(()=>{const m=un.find(D=>D.id===g),A=m==null?void 0:m.items.some(D=>D.id===S&&!(D.requiresAdmin&&r!=="ADMIN"));if(!m||!A){const D=un.find(ie=>ie.items.some(Ie=>!(Ie.requiresAdmin&&r!=="ADMIN")));if(!D)return;const q=D.items.find(ie=>!(ie.requiresAdmin&&r!=="ADMIN"));if(!q)return;v(D.id),O(q.id)}},[un,g,S,r]),u.useEffect(()=>{const m=()=>xe(ts());return window.addEventListener("left-panel-config-updated",m),()=>window.removeEventListener("left-panel-config-updated",m)},[]),u.useEffect(()=>{S==="sla-policies"&&r==="ADMIN"&&Di()},[S,r]),u.useEffect(()=>{(S==="mail-configuration"||S==="email-signature-templates")&&r==="ADMIN"&&(Na(),ua({limit:500}).then(m=>{const A=Array.isArray(m)?m:Array.isArray(m==null?void 0:m.rows)?m.rows:[],D=A.filter(q=>!!(q!=null&&q.isServiceAccount));dn(D.length?D:A)}).catch(()=>dn([])))},[S,r]),u.useEffect(()=>{S==="database-configuration"&&r==="ADMIN"&&cs()},[S,r]),u.useEffect(()=>{if(!(typeof window>"u"))try{window.localStorage.setItem(Ky,JSON.stringify(Dn))}catch{}},[Dn]),u.useEffect(()=>{if(!(typeof window>"u"))try{window.localStorage.setItem(Gy,JSON.stringify(Ce))}catch{}},[Ce]),u.useEffect(()=>{if(!(typeof window>"u"))try{window.localStorage.setItem(Jy,JSON.stringify(bn))}catch{}},[bn]),u.useEffect(()=>{if(!(typeof window>"u"))try{window.localStorage.setItem(Yy,JSON.stringify(fa))}catch{}},[fa]),u.useEffect(()=>{if(!Dn.length)return;const m=Dn.some(D=>D.name===Rl),A=Dn.some(D=>D.name===Hs);(!Rl||!m)&&Ii(Dn[0].name),(!Hs||!A)&&ga(Dn[0].name)},[Dn,Rl,Hs]);const Vs=un.find(m=>m.id===g)||un[0],ut=(Vs==null?void 0:Vs.items.find(m=>m.id===S))||(Vs==null?void 0:Vs.items[0]),wn=LL[S]||[],Ks=JSON.stringify(x)!==JSON.stringify(M),Qr=(ut==null?void 0:ut.label)||"Settings",Hn=S==="queue-management",Vn=S==="roles-permissions",yc=S==="sla-policies",Fm=S==="mail-configuration",jc=S==="email-signature-templates",Um=S==="database-configuration",Qs=S==="workflow-automation",Tr=re.providerType==="api-provider";re.providerType==="google-workspace-oauth"||re.providerType;const As=re.connectionMode==="oauth2",Pl=re.connectionMode==="app-password";re.connectionMode;const xa=As,as=Tr,bt=Tr,Pt=u.useMemo(()=>Dn.findIndex(m=>m.name===Hs),[Dn,Hs]),nn=Pt>=0?Dn[Pt]:null,Oi=(m,A)=>{ur(D=>D.map((q,ie)=>ie===m?{...q,name:A}:q))},ya=(m,A,D,q)=>{ur(ie=>ie.map((Ie,Ee)=>{if(Ee!==m)return Ie;const Ge=[...Ie[A]];return Ge[D]=q,{...Ie,[A]:Ge}}))},ja=(m,A)=>{ur(D=>D.map((q,ie)=>ie===m?{...q,[A]:[...q[A],""]}:q))},Kt=(m,A,D)=>{ur(q=>q.map((ie,Ie)=>{if(Ie!==m)return ie;const Ee=ie[A].filter((Ge,sn)=>sn!==D);return{...ie,[A]:Ee.length?Ee:[""]}}))},Rr=(m,A,D,q)=>{ur(ie=>ie.map((Ie,Ee)=>{if(Ee!==m)return Ie;const Ge=[...Ie[A]],sn=D+q;if(sn<0||sn>=Ge.length)return Ie;const rn=Ge[D];return Ge[D]=Ge[sn],Ge[sn]=rn,{...Ie,[A]:Ge}}))},Bm=()=>{ur(m=>[...m,{name:"New Workflow",states:["New"],transitions:["New -> In Progress"],buttonFlow:["Start -> In Progress"]}])},bc=()=>{const m=Dn.map(A=>({name:String(A.name||"").trim(),states:A.states.map(D=>String(D||"").trim()).filter(Boolean),transitions:A.transitions.map(D=>String(D||"").trim()).filter(Boolean),buttonFlow:A.buttonFlow.map(D=>String(D||"").trim()).filter(Boolean)})).filter(A=>A.name);ur(m.length?Qy(m):Vi(ci)),Tl(new Date().toLocaleString())},wc=u.useMemo(()=>ej(T,ke),[T,ke]),Ll=u.useMemo(()=>oi.some(m=>yt[m].enabled&&yt[m].businessHours),[yt]),mr=u.useMemo(()=>{const m=new Map;for(const A of rt){const D=String((A==null?void 0:A.name)||"").trim()||"Unnamed Policy";m.has(D)||m.set(D,[]),m.get(D).push(A)}return Array.from(m.entries()).map(([A,D])=>({name:A,rows:D}))},[rt]),$i=10,Gr=mr.length,Il=Math.max(1,Math.ceil(Gr/$i)),ls=Math.min(de,Il),zm=Gr===0?0:(ls-1)*$i+1,Ol=Math.min(ls*$i,Gr),ba=u.useMemo(()=>mr.slice((ls-1)*$i,ls*$i),[mr,ls]);u.useEffect(()=>{de!==ls&&$e(ls)},[de,ls]);const os=m=>{const A=i.trim().toLowerCase();return A?m.toLowerCase().includes(A):!0},Wm=(m,A)=>os(m)?d?A?x[A]!==M[A]:!1:!0:!1,qm=m=>{if(!Wm(m.label,m.key))return null;const A=!!((m.adminOnly||ut!=null&&ut.requiresAdmin)&&r!=="ADMIN"),D=A?"Restricted Access: Administrator role required":m.label;if(m.type==="toggle")return n.jsxs("label",{className:"admin-field-row switch-row",children:[n.jsxs("span",{children:[m.label,m.helper&&n.jsx("em",{title:m.helper,children:"?"})]}),n.jsx("input",{type:"checkbox",checked:!!x[m.key],disabled:A,title:D,onChange:q=>wa(m.key,q.target.checked)})]},m.key);if(m.type==="select"){const q=m.options||[];return n.jsxs("label",{className:"admin-field-row",children:[n.jsxs("span",{children:[m.label,m.helper&&n.jsx("em",{title:m.helper,children:"?"})]}),n.jsx("select",{value:String(x[m.key]??q[0]??""),disabled:A,title:D,onChange:ie=>wa(m.key,ie.target.value),children:q.map(ie=>n.jsx("option",{value:ie,children:ie},ie))})]},m.key)}return m.type==="textarea"?n.jsxs("label",{className:"admin-field-row grow",children:[n.jsxs("span",{children:[m.label,m.helper&&n.jsx("em",{title:m.helper,children:"?"})]}),n.jsx("textarea",{value:String(x[m.key]??""),disabled:A,title:D,onChange:q=>wa(m.key,q.target.value)})]},m.key):n.jsxs("label",{className:"admin-field-row",children:[n.jsxs("span",{children:[m.label,m.helper&&n.jsx("em",{title:m.helper,children:"?"})]}),n.jsx("input",{value:String(x[m.key]??""),disabled:A,title:D,onChange:q=>wa(m.key,q.target.value)})]},m.key)},wa=(m,A)=>{y(D=>({...D,[m]:A}))},Di=async()=>{var m,A;if(r==="ADMIN")try{Ye(!0);const D=await n1(),q=Array.isArray(D)?D:[];qe(q)}catch(D){alert(((A=(m=D==null?void 0:D.response)==null?void 0:m.data)==null?void 0:A.error)||"Failed to load SLA configs"),qe([])}finally{Ye(!1)}},Na=async()=>{var m,A,D,q;if(r==="ADMIN")try{jn(!0),pt("");const ie=await vL(),Ie=String((ie==null?void 0:ie.provider)||"custom"),Ee=(ie==null?void 0:ie.smtp)||{},Ge=(ie==null?void 0:ie.imap)||{},sn=new Date().toLocaleString();Dt({provider:Ie,providerType:Ie==="google-workspace"||Ie==="gmail"?"google-workspace-oauth":Ie==="microsoft-workspace"||Ie==="outlook"?"microsoft-365-oauth":"smtp-imap-custom",connectionMode:"oauth2",oauthConnected:!1,oauthTokenExpiry:"",workspaceProvider:TL(Ie),supportMail:String((Ee==null?void 0:Ee.from)||""),inboundEmailAddress:String((Ee==null?void 0:Ee.from)||""),inboundDefaultQueue:String(((m=ie==null?void 0:ie.inbound)==null?void 0:m.defaultQueue)||"Helpdesk"),inboundDefaultTicketType:"Incident",inboundDefaultPriority:"Medium",autoAssignRule:"",pollIntervalMs:String(((A=ie==null?void 0:ie.inbound)==null?void 0:A.pollIntervalMs)||6e4),imapEncryption:Ge!=null&&Ge.secure?"SSL":"None",smtpEncryption:Ee!=null&&Ee.secure?"SSL":"None",enablePush:!1,ignoreAutoReply:!0,preventEmailLoop:!0,processAttachments:!0,overwriteStatusOnReply:!1,autoReopenOnReply:!0,stripQuotedReplies:!0,appendToTicketPattern:"[#TICKET-ID]",outboundReplyTo:"",maxAttachmentSizeMb:"20",signatureTemplate:`Regards,
IT Support Team`,allowExternalEmailCreation:!0,allowInternalOnly:!1,allowedDomains:"",blockedDomains:"",spfDkimStatus:"Unknown",emailLogRetentionDays:"90",retryFailedSend:!0,maxRetryCount:"3",routingRuleHelpdeskQueue:"If email sent to helpdesk@ -> Queue = Helpdesk",routingRuleAccessType:'If subject contains "Access" -> Type = Access Request',routingRuleSupplierType:"If sender domain = vendor.com -> Type = Supplier Ticket",lastSyncTime:sn,lastEmailReceived:"",lastEmailSent:"",errorLogs:"",apiProviderName:"SendGrid",apiBaseUrl:"",apiKey:"",apiSecret:"",smtp:{host:String((Ee==null?void 0:Ee.host)||""),port:String((Ee==null?void 0:Ee.port)??""),secure:!!(Ee!=null&&Ee.secure),user:String((Ee==null?void 0:Ee.user)||""),pass:"",from:String((Ee==null?void 0:Ee.from)||"")},imap:{host:String((Ge==null?void 0:Ge.host)||""),port:String((Ge==null?void 0:Ge.port)??""),secure:!!(Ge!=null&&Ge.secure),user:String((Ge==null?void 0:Ge.user)||""),pass:"",mailbox:String((Ge==null?void 0:Ge.mailbox)||"INBOX")}})}catch(ie){pt(((q=(D=ie==null?void 0:ie.response)==null?void 0:D.data)==null?void 0:q.error)||"Failed to load mail configuration")}finally{jn(!1)}},cs=async()=>{var m,A;if(r==="ADMIN")try{Cl(!0),Kr("");const D=await wL();is(q=>({...q,host:String((D==null?void 0:D.host)||""),port:String((D==null?void 0:D.port)??"5432"),database:String((D==null?void 0:D.database)||""),user:String((D==null?void 0:D.user)||""),ssl:!!(D!=null&&D.ssl)}))}catch(D){Kr(((A=(m=D==null?void 0:D.response)==null?void 0:m.data)==null?void 0:A.error)||"Failed to load database configuration")}finally{Cl(!1)}},vt=(m,A)=>{Dt(D=>({...D,[m]:A}))},Jr=(m,A)=>{Dt(D=>({...D,smtp:{...D.smtp,[m]:A}}))},_i=(m,A)=>{Dt(D=>({...D,imap:{...D.imap,[m]:A}}))},$l=(m,A)=>{Dt(D=>{const q={...D,providerType:m,connectionMode:A};return m==="google-workspace-oauth"?(q.provider="google-workspace",q.imap.host="imap.gmail.com",q.imap.port="993",q.smtp.host="smtp.gmail.com",q.smtp.port=A==="oauth2"?"587":"465",q.imapEncryption="SSL",q.smtpEncryption=A==="oauth2"?"TLS":"SSL"):m==="microsoft-365-oauth"?(q.provider="microsoft-workspace",q.imap.host="outlook.office365.com",q.imap.port="993",q.smtp.host="smtp.office365.com",q.smtp.port="587",q.imapEncryption="TLS",q.smtpEncryption="TLS"):m==="api-provider"?(q.provider="custom",q.enablePush=!0):q.provider="custom",A==="oauth2"&&(q.imap.pass="",q.smtp.pass=""),q})},Yr=async m=>{var A,D;if(r==="ADMIN")try{ss(!0),pt("");const q={provider:re.provider,smtp:{host:re.smtp.host.trim(),port:Number(re.smtp.port||0),secure:re.smtpEncryption!=="None",user:re.smtp.user.trim(),pass:re.smtp.pass,from:re.smtp.from.trim()||re.supportMail.trim()},imap:{host:re.imap.host.trim(),port:Number(re.imap.port||0),secure:re.imapEncryption!=="None",user:re.imap.user.trim(),pass:re.imap.pass,mailbox:re.imap.mailbox.trim()||"INBOX"}};if(m==="smtp"){const ie=await yL(q);pt(`SMTP test passed (${ie.host}:${ie.port})`),Dt(Ie=>({...Ie,lastEmailSent:new Date().toLocaleString()}))}else if(m==="imap"){const ie=await jL(q);pt(`IMAP test passed (${ie.host}:${ie.port})`),Dt(Ie=>({...Ie,lastSyncTime:new Date().toLocaleString()}))}else{const ie=U.trim()||re.supportMail.trim();if(!ie){pt("Recipient email is required for test mail");return}const Ie=await bL({...q,to:ie,subject:"ITSM Mail Configuration Test",text:"This is a test email from ITSM Admin Mail Configuration.",from:re.smtp.from.trim()||re.supportMail.trim()||void 0}),Ee=String((Ie==null?void 0:Ie.messageId)||"");pt(Ee?`Test mail sent (${Ee})`:"Test mail sent successfully"),Dt(Ge=>({...Ge,lastEmailSent:new Date().toLocaleString()}))}}catch(q){const ie=((D=(A=q==null?void 0:q.response)==null?void 0:A.data)==null?void 0:D.error)||"Mail action failed";pt(ie),Dt(Ie=>({...Ie,errorLogs:`${new Date().toLocaleString()} - ${ie}`}))}finally{ss(!1)}},Nc=async()=>{var m,A;if(r==="ADMIN")try{El(!0),Kr("");const D={connectionString:Tn.connectionString.trim(),host:Tn.host.trim(),port:Number(Tn.port||5432),database:Tn.database.trim(),user:Tn.user.trim(),password:Tn.password,ssl:Tn.ssl},q=await NL(D);Kr(`Connected to ${q.database}@${q.host}:${q.port} in ${q.latencyMs}ms`)}catch(D){Kr(((A=(m=D==null?void 0:D.response)==null?void 0:m.data)==null?void 0:A.error)||"Database connection test failed")}finally{El(!1)}},Hm=async()=>{var A,D;if(r!=="ADMIN")return;const m=String(re.inboundDefaultQueue||"").trim();if(!m){pt("Inbound default queue/team is required");return}try{ss(!0),pt(""),await xL({defaultQueue:m}),pt(`Inbound mails will be routed to "${m}"`)}catch(q){pt(((D=(A=q==null?void 0:q.response)==null?void 0:A.data)==null?void 0:D.error)||"Failed to save inbound routing")}finally{ss(!1)}},Sc=()=>{const m=new Date(Date.now()+2592e6).toLocaleString();Dt(A=>({...A,oauthConnected:!0,oauthTokenExpiry:m})),pt("OAuth account connected")},Fi=()=>{const m=new Date(Date.now()+2592e6).toLocaleString();Dt(A=>({...A,oauthConnected:!0,oauthTokenExpiry:m,errorLogs:""})),pt("OAuth account reconnected")},Dl=()=>{const m=new Date().toLocaleString();Dt(A=>({...A,lastSyncTime:m,lastEmailReceived:m})),pt("Inbound mail sync completed")},_l=()=>{pt(re.lastSyncTime?`Last sync: ${re.lastSyncTime}`:"No sync has been executed yet")},kc=async()=>{await Yr("imap"),pt(m=>m?`${m}. Inbound parsing validated.`:"Inbound parsing validated")},Fl=async()=>{await Hm(),pt(m=>m?`${m}. Configuration snapshot saved.`:"Configuration snapshot saved")},Cc=()=>{const m=Ke.name.trim(),A=Ke.subject.trim(),D=Ke.body.trim();if(!m||!A||!D){pt("Template name, subject and body are required");return}it?(Ae(q=>q.map(ie=>ie.id===it?{...ie,...Ke,name:m,subject:A,body:D}:ie)),pt("Email template updated")):(Ae(q=>[{id:`tpl-${Date.now()}`,...Ke,name:m,subject:A,body:D},...q]),pt("Email template created")),at(null),Qe({name:"",buttonKey:"Assign",subject:"",body:"",active:!0})},Vm=m=>{at(m.id),Qe({name:m.name,buttonKey:m.buttonKey,subject:m.subject,body:m.body,active:m.active})},Ul=m=>{Ae(A=>A.filter(D=>D.id!==m)),it===m&&(at(null),Qe({name:"",buttonKey:"Assign",subject:"",body:"",active:!0})),pt("Email template deleted")},Km=()=>{const m=Yt.userId.trim(),A=Yt.signatureHtml.trim();if(!m||!A){pt("Service account user and signature content are required");return}const D=Vt.find(Ie=>String((Ie==null?void 0:Ie.id)||"")===m),q=String((D==null?void 0:D.name)||(D==null?void 0:D.fullName)||(D==null?void 0:D.email)||m),ie={...Yt,userId:m,userLabel:q,signatureHtml:A};Er?(En(Ie=>Ie.map(Ee=>Ee.id===Er?{...Ee,...ie}:Ee)),pt("Email signature updated")):(En(Ie=>[{id:`sig-${Date.now()}`,...ie},...Ie]),pt("Email signature created")),pa(null),Bt({userId:"",userLabel:"",signatureHtml:"",active:!0})},Sa=m=>{pa(m.id),Bt({userId:m.userId,userLabel:m.userLabel,signatureHtml:m.signatureHtml,active:m.active})},Ac=m=>{En(A=>A.filter(D=>D.id!==m)),Er===m&&(pa(null),Bt({userId:"",userLabel:"",signatureHtml:"",active:!0})),pt("Email signature deleted")},ka=()=>{const m=cr.title.trim(),A=cr.message.trim();if(!m||!A){pt("Banner title and message are required");return}dr?(kl(D=>D.map(q=>q.id===dr?{...q,...cr,title:m,message:A}:q)),pt("Mail banner updated")):(kl(D=>[{id:`bnr-${Date.now()}`,...cr,title:m,message:A},...D]),pt("Mail banner created")),Vr(null),rs({title:"",message:"",tone:"info",active:!0})},ot=m=>{Vr(m.id),rs({title:m.title,message:m.message,tone:m.tone,active:m.active})},Ec=m=>{kl(A=>A.filter(D=>D.id!==m)),dr===m&&(Vr(null),rs({title:"",message:"",tone:"info",active:!0})),pt("Mail banner deleted")},Tc=()=>{gt("create"),Ut(null),At(""),Se("critical_set"),Pe(""),dt(Nr),ee(Xa()),St(RL()),tn(!0)},gn=m=>{var Ge;gt("edit"),Ut(m),At(m);const A=rt.filter(sn=>String((sn==null?void 0:sn.name)||"").trim().toLowerCase()===String(m||"").trim().toLowerCase()),D=ML(A),q=String(((Ge=A[0])==null?void 0:Ge.format)||"").trim().toLowerCase(),ie=q==="p_set"?"p_set":q==="custom"?"custom":q==="critical_set"?"critical_set":D.format;Se(ie),Pe(D.customFormatText);const Ie=ej(ie,D.customFormatText);St(PL(rt,m,Ie));const Ee=A[0];dt(String((Ee==null?void 0:Ee.timeZone)||Nr)),ee(Ee!=null&&Ee.businessSchedule&&typeof Ee.businessSchedule=="object"?Ee.businessSchedule:Xa()),tn(!0)},Rc=()=>{tn(!1),Ut(null),At(""),Se("critical_set"),Pe(""),dt(Nr),ee(Xa()),St(yh())},Qm=(m,A)=>{ee(D=>({...D,[m]:{...D[m],enabled:A}}))},Mc=(m,A,D,q)=>{ee(ie=>({...ie,[m]:{...ie[m],slots:ie[m].slots.map((Ie,Ee)=>Ee===A?{...Ie,[D]:q}:Ie)}}))},Gm=m=>{ee(A=>({...A,[m]:{...A[m],slots:[...A[m].slots,{start:"08:00",end:"17:30"}]}}))},Jm=(m,A)=>{ee(D=>D[m].slots.length<=1?D:{...D,[m]:{...D[m],slots:D[m].slots.filter((q,ie)=>ie!==A)}})},Pc=async()=>{var D,q;const m=He.trim();if(!m)return alert("Policy name is required");if(!oi.filter(ie=>yt[ie].enabled).length)return alert("Select at least one priority for SLA");if(fe==="create"&&rt.some(Ie=>String((Ie==null?void 0:Ie.name)||"").trim().toLowerCase()===m.toLowerCase()))return alert("Policy name already exists");try{ct(!0);const ie=fe==="edit"&&mt?rt.filter(Ie=>String((Ie==null?void 0:Ie.name)||"").trim().toLowerCase()===mt.trim().toLowerCase()):[];for(const Ie of oi){const Ee=yt[Ie],Ge=oi.indexOf(Ie)+1,sn=wc[Ge-1],rn=ie.find(Js=>String((Js==null?void 0:Js.priority)||"").toLowerCase()===Ie.toLowerCase())||ie.find(Js=>Number(Js==null?void 0:Js.priorityRank)===Ge);if(!Ee.enabled){rn!=null&&rn.id&&await Ly(Number(rn.id));continue}const Es=Number(Ee.responseTimeMin),Ts=Number(Ee.resolutionTimeMin),Zr=Es*Xy(Ee.responseTimeUnit),Mr=Ts*Xy(Ee.resolutionTimeUnit);if(!Number.isFinite(Es)||Es<0)throw new Error(`Invalid response time for ${Ie}`);if(!Number.isFinite(Ts)||Ts<0)throw new Error(`Invalid resolution time for ${Ie}`);const Aa={name:m,priority:sn,priorityRank:Ge,format:T,responseTimeMin:Zr,resolutionTimeMin:Mr,businessHours:Ee.businessHours,timeZone:Ee.businessHours?Xe:null,businessSchedule:Ee.businessHours?w:null,active:Ee.active};rn!=null&&rn.id?await tL(Number(rn.id),Aa):await eL(Aa)}await Di(),Rc()}catch(ie){alert(((q=(D=ie==null?void 0:ie.response)==null?void 0:D.data)==null?void 0:q.error)||(ie==null?void 0:ie.message)||"Failed to save SLA policy")}finally{ct(!1)}},Bl=async m=>{var D,q;const A=rt.filter(ie=>String((ie==null?void 0:ie.name)||"").trim().toLowerCase()===String(m||"").trim().toLowerCase());if(A.length&&window.confirm(`Delete policy "${m}" and all priority SLAs?`))try{ct(!0);for(const ie of A)ie!=null&&ie.id&&await Ly(Number(ie.id));await Di(),mt&&mt.toLowerCase()===m.toLowerCase()&&Rc()}catch(ie){alert(((q=(D=ie==null?void 0:ie.response)==null?void 0:D.data)==null?void 0:q.error)||"Failed to delete SLA policy")}finally{ct(!1)}},mn=m=>{const A=un.find(q=>q.id===m);if(!A)return;const D=A.items.find(q=>!(q.requiresAdmin&&r!=="ADMIN"));D&&(v(m),O(D.id))},Lc=(m,A)=>{v(m),O(A)};Y[Ne];const Gs=m=>{xe(m),KP(m)},Ui=m=>{const A=String(m||"").split(",").map(D=>D.trim().toUpperCase()).filter(Boolean);return A.length?Array.from(new Set(A)):["ADMIN","AGENT"]},Bi=()=>{W(!1),N(null),R(""),je(""),ze(""),ye("ADMIN,AGENT"),We("")},Ic=m=>{const A=Y.ticketQueues.find(D=>D.id===m);A&&(je(A.label),ze(A.serviceAccount||""),ye((A.visibilityRoles||[]).join(",")||"ADMIN,AGENT"))},Oc=()=>{N("add"),W(!0),We(""),R(""),je(""),ze(""),ye("ADMIN,AGENT")},Ym=()=>{if(N("edit"),W(!0),We(""),!Y.ticketQueues.length){R(""),je(""),ze(""),ye("ADMIN,AGENT"),We("No ticket queue available.");return}const m=Y.ticketQueues[0];R(m.id),Ic(m.id)},Xm=()=>{if(N("delete"),W(!0),We(""),!Y.ticketQueues.length){R(""),We("No ticket queue available.");return}R(Y.ticketQueues[0].id)},Zm=()=>{if(!ce)return;We("");const m=new Set(["service request","helpdesk"]);if(ce==="add"){const D=Q.trim();if(!D)return We("Queue/team name is required.");if(m.has(D.toLowerCase()))return We(`"${D}" is reserved and cannot be used as a queue name.`);if(Y.ticketQueues.some(Ee=>Ee.label.trim().toLowerCase()===D.toLowerCase()))return We(`Queue "${D}" already exists.`);const ie=se.trim();if(!ie)return We("Service account is required.");const Ie=Ui(Ze);Gs({...Y,ticketQueues:[...Y.ticketQueues,{id:`tq-${Date.now()}`,label:D,serviceAccount:ie,visibilityRoles:Ie}]}),Bi();return}if(ce==="edit"){if(!ne)return We("Select a queue to edit.");const D=Y.ticketQueues.find(Ge=>Ge.id===ne);if(!D)return We("Queue not found.");const q=Q.trim();if(!q)return We("Queue/team name is required.");if(m.has(q.toLowerCase()))return We(`"${q}" is reserved and cannot be used as a queue name.`);if(Y.ticketQueues.some(Ge=>Ge.id!==D.id&&Ge.label.trim().toLowerCase()===q.toLowerCase()))return We(`Queue "${q}" already exists.`);const Ie=se.trim();if(!Ie)return We("Service account is required.");const Ee=Ui(Ze);Gs({...Y,ticketQueues:Y.ticketQueues.map(Ge=>Ge.id===D.id?{...Ge,label:q,serviceAccount:Ie,visibilityRoles:Ee}:Ge)}),Bi();return}if(!ne)return We("Select a queue to delete.");const A=Y.ticketQueues.find(D=>D.id===ne);if(!A)return We("Queue not found.");if(A.label.trim().toLowerCase()==="unassigned")return We("Unassigned cannot be deleted.");Gs({...Y,ticketQueues:Y.ticketQueues.filter(D=>D.id!==A.id)}),Bi()},Ca=()=>{G(!1),le(null),we(""),V(""),ge(""),Le("ADMIN,AGENT"),pe("")},$c=m=>{const A=Y.assetCategories.find(D=>D.id===m);A&&(V(A.label),ge((A.subcategories||[]).join(", ")),Le((A.visibilityRoles||[]).join(",")||"ADMIN,AGENT"))},ep=()=>{le("add"),G(!0),pe(""),we(""),V(""),ge(""),Le("ADMIN,AGENT")},tp=()=>{if(le("edit"),G(!0),pe(""),!Y.assetCategories.length){we(""),pe("No asset category available.");return}const m=Y.assetCategories[0];we(m.id),$c(m.id)},_n=()=>{if(le("delete"),G(!0),pe(""),!Y.assetCategories.length){we(""),pe("No asset category available.");return}we(Y.assetCategories[0].id)},zl=()=>{if(!Fe)return;if(pe(""),Fe==="add"){const A=$.trim();if(!A)return pe("Category name is required.");if(Y.assetCategories.some(Ie=>Ie.label.trim().toLowerCase()===A.toLowerCase()))return pe(`Category "${A}" already exists.`);const q=ve.split(",").map(Ie=>Ie.trim()).filter(Boolean),ie=Ui(Ve);Gs({...Y,assetCategories:[...Y.assetCategories,{id:`ac-${Date.now()}`,label:A,subcategories:q,visibilityRoles:ie}]}),Ca();return}if(Fe==="edit"){if(!he)return pe("Select a category to edit.");const A=Y.assetCategories.find(Ee=>Ee.id===he);if(!A)return pe("Category not found.");const D=$.trim();if(!D)return pe("Category name is required.");if(Y.assetCategories.some(Ee=>Ee.id!==A.id&&Ee.label.trim().toLowerCase()===D.toLowerCase()))return pe(`Category "${D}" already exists.`);const ie=ve.split(",").map(Ee=>Ee.trim()).filter(Boolean),Ie=Ui(Ve);Gs({...Y,assetCategories:Y.assetCategories.map(Ee=>Ee.id===A.id?{...Ee,label:D,subcategories:ie,visibilityRoles:Ie}:Ee)}),Ca();return}if(!he)return pe("Select a category to delete.");const m=Y.assetCategories.find(A=>A.id===he);if(!m)return pe("Category not found.");Gs({...Y,assetCategories:Y.assetCategories.filter(A=>A.id!==m.id)}),Ca()},Xr=m=>{ue(A=>[`${m} (${new Date().toLocaleTimeString()})`,...A])},Dc=()=>{k(x);const m=new Date().toLocaleString();J(m),Xr(`${Qr} configuration saved`),C(!1)},Wl=()=>{y(M),Xr("Uncommitted settings reverted")},np=()=>{Xr("Configuration import requested"),alert("Import configuration started. Validate uploaded file in audit logs.")},_c=()=>{Xr("Configuration export requested"),alert("Export package prepared. Download is available in activity log.")},Fc=()=>{y(Cd),k(Cd),B(!1),Xr(`${Qr} reset to defaults`)},pr=()=>{F(!1),Xr("All active API keys revoked"),alert("All API keys have been revoked. Regenerate keys for integrations.")};u.useEffect(()=>{const m=A=>{Ks&&(A.preventDefault(),A.returnValue="")};return window.addEventListener("beforeunload",m),()=>window.removeEventListener("beforeunload",m)},[Ks]),u.useEffect(()=>{const m="admin-queue-expanded",A="admin-queue-collapsed";return l?(document.body.classList.remove(m),document.body.classList.add(A)):(document.body.classList.add(m),document.body.classList.remove(A)),()=>{document.body.classList.remove(m),document.body.classList.remove(A)}},[l]),u.useEffect(()=>(document.body.classList.add("admin-view-active"),()=>document.body.classList.remove("admin-view-active")),[]),u.useEffect(()=>{const m=A=>{const D=A.detail;if(!(!D||D.target!=="admin")){if(D.action==="toggle-left-panel"){c(q=>!q);return}if(D.action==="admin-cancel"){Wl();return}if(D.action==="admin-save"){Ks&&C(!0);return}D.action==="refresh"&&(xe(ts()),S==="sla-policies"&&r==="ADMIN"&&Di(),S==="mail-configuration"&&r==="ADMIN"&&Na(),S==="database-configuration"&&r==="ADMIN"&&cs())}};return window.addEventListener("shared-toolbar-action",m),()=>window.removeEventListener("shared-toolbar-action",m)},[S,Ks,r,M,x,Qr]);const ds=un,ql=m=>m==="user-access"?n.jsxs("svg",{viewBox:"0 0 24 24",width:"14",height:"14",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[n.jsx("circle",{cx:"12",cy:"8",r:"3"}),n.jsx("path",{d:"M5 19a7 7 0 0 1 14 0"})]}):m==="incident"?n.jsxs("svg",{viewBox:"0 0 24 24",width:"14",height:"14",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[n.jsx("path",{d:"M12 9v4"}),n.jsx("path",{d:"M12 17h.01"}),n.jsx("path",{d:"M10.3 3.9 1.8 18a2 2 0 0 0 1.7 3h17a2 2 0 0 0 1.7-3L13.7 3.9a2 2 0 0 0-3.4 0z"})]}):m==="integrations"?n.jsxs("svg",{viewBox:"0 0 24 24",width:"14",height:"14",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[n.jsx("path",{d:"M8 7h4a2 2 0 1 1 0 4H9"}),n.jsx("path",{d:"M16 17h-4a2 2 0 1 1 0-4h3"}),n.jsx("line",{x1:"8",y1:"12",x2:"16",y2:"12"})]}):m==="workflow-automation"?n.jsxs("svg",{viewBox:"0 0 24 24",width:"14",height:"14",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[n.jsx("rect",{x:"3",y:"4",width:"6",height:"6",rx:"1"}),n.jsx("rect",{x:"15",y:"14",width:"6",height:"6",rx:"1"}),n.jsx("path",{d:"M9 7h3a3 3 0 0 1 3 3v4"}),n.jsx("path",{d:"M15 14h-2"})]}):n.jsxs("svg",{viewBox:"0 0 24 24",width:"14",height:"14",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[n.jsx("circle",{cx:"12",cy:"12",r:"3"}),n.jsx("path",{d:"M19.4 15a1.6 1.6 0 0 0 .3 1.8l.1.1a2 2 0 1 1-2.8 2.8l-.1-.1a1.6 1.6 0 0 0-1.8-.3 1.6 1.6 0 0 0-1 1.5V21a2 2 0 1 1-4 0v-.2a1.6 1.6 0 0 0-1-1.5 1.6 1.6 0 0 0-1.8.3l-.1.1a2 2 0 1 1-2.8-2.8l.1-.1a1.6 1.6 0 0 0 .3-1.8 1.6 1.6 0 0 0-1.5-1H3a2 2 0 1 1 0-4h.2a1.6 1.6 0 0 0 1.5-1 1.6 1.6 0 0 0-.3-1.8l-.1-.1a2 2 0 1 1 2.8-2.8l.1.1a1.6 1.6 0 0 0 1.8.3h0a1.6 1.6 0 0 0 1-1.5V3a2 2 0 1 1 4 0v.2a1.6 1.6 0 0 0 1 1.5h0a1.6 1.6 0 0 0 1.8-.3l.1-.1a2 2 0 1 1 2.8 2.8l-.1.1a1.6 1.6 0 0 0-.3 1.8v0a1.6 1.6 0 0 0 1.5 1H21a2 2 0 1 1 0 4h-.2a1.6 1.6 0 0 0-1.5 1z"})]}),fr=!l&&s?Mi.createPortal(n.jsxs("aside",{className:"admin-left-panel",children:[n.jsxs("div",{className:"queue-header",children:[n.jsx("div",{className:"queue-title-icon","aria-hidden":"true",children:n.jsxs("svg",{viewBox:"0 0 24 24",width:"14",height:"14",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[n.jsx("path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z"}),n.jsx("path",{d:"m9 12 2 2 4-4"})]})}),n.jsx("div",{className:"queue-title",children:n.jsx("button",{className:"queue-title-btn",title:"Admin settings",children:n.jsx("div",{className:"queue-title-text",children:"Admin Settings"})})}),n.jsx("button",{className:"queue-collapse-btn",title:"Hide Menu",onClick:()=>c(!0),children:n.jsx("svg",{viewBox:"0 0 24 24",width:"14",height:"14",fill:"none",stroke:"currentColor",strokeWidth:"2",children:n.jsx("polyline",{points:"15 18 9 12 15 6"})})})]}),n.jsx("div",{className:"queue-list",children:ds.map(m=>{const A=m.items.filter(q=>!(q.requiresAdmin&&r!=="ADMIN")),D=g===m.id;return A.length>1?A.map(q=>n.jsxs("div",{className:`queue-item${S===q.id?" queue-item-active":""}`,onClick:()=>Lc(m.id,q.id),children:[n.jsx("div",{className:"queue-avatar",children:ql(m.id)}),n.jsx("div",{className:"queue-name",children:q.label})]},q.id)):n.jsx(oe.Fragment,{children:n.jsxs("div",{className:`queue-item${D?" queue-item-active":""}`,onClick:()=>mn(m.id),children:[n.jsx("div",{className:"queue-avatar",children:ql(m.id)}),n.jsx("div",{className:"queue-name",children:m.label})]})},m.id)})})]}),s):null;return Vn?n.jsxs(n.Fragment,{children:[fr,n.jsx(gL,{isAdmin:r==="ADMIN"})]}):yc?n.jsxs(n.Fragment,{children:[fr,n.jsx("section",{className:"rbac-module-card",style:{marginLeft:l?12:0},children:n.jsxs("div",{style:{padding:16},children:[n.jsxs("div",{className:"rbac-top-action-row",children:[n.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[n.jsx("button",{className:"table-icon-btn",onClick:()=>c(m=>!m),title:l?"Show Menu":"Hide Menu","aria-label":l?"Show menu":"Hide menu",children:n.jsx("svg",{viewBox:"0 0 24 24",width:"14",height:"14",fill:"none",stroke:"currentColor",strokeWidth:"2",children:l?n.jsxs(n.Fragment,{children:[n.jsx("polyline",{points:"13 18 7 12 13 6"}),n.jsx("polyline",{points:"19 18 13 12 19 6"})]}):n.jsxs(n.Fragment,{children:[n.jsx("polyline",{points:"11 18 17 12 11 6"}),n.jsx("polyline",{points:"5 18 11 12 5 6"})]})})}),n.jsx("div",{className:"rbac-top-action-title",children:"SLA Policies"})]}),n.jsxs("div",{className:"rbac-top-action-actions",children:[!hn&&n.jsx("button",{className:"admin-settings-ghost",onClick:Di,disabled:et,children:et?"Loading...":"Reload"}),hn?n.jsx("span",{}):n.jsxs("button",{className:"rbac-add-btn",onClick:Tc,disabled:et,children:[n.jsx("span",{className:"rbac-add-btn-plus","aria-hidden":"true",children:"+"}),n.jsx("span",{children:"Add Policy"})]})]})]}),r!=="ADMIN"?n.jsx("p",{children:"Only administrators can manage SLA policies."}):n.jsx(n.Fragment,{children:hn?n.jsxs("div",{style:{marginBottom:14},children:[n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"240px 240px 320px 1fr auto auto",gap:10,alignItems:"center",marginBottom:12},children:[n.jsx("label",{style:{fontWeight:600},children:"Policy Name"}),n.jsx("label",{style:{fontWeight:600},children:"Format"}),n.jsx("label",{style:{fontWeight:600},children:"Time Zone"}),n.jsx("div",{}),n.jsx("div",{}),n.jsx("div",{}),n.jsx("input",{placeholder:"Enter policy name",value:He,disabled:et,onChange:m=>At(m.target.value),style:{height:34,borderRadius:8,border:"1px solid #cbd5e1",padding:"0 10px",background:"#fff"}}),n.jsxs("select",{value:T,disabled:et,onChange:m=>Se(m.target.value),style:{height:34,borderRadius:8,border:"1px solid #cbd5e1",padding:"0 10px",background:"#fff"},children:[n.jsx("option",{value:"critical_set",children:"Critical, High, Medium, Low"}),n.jsx("option",{value:"p_set",children:"P1, P2, P3, P4"}),n.jsx("option",{value:"custom",children:"Custom"})]}),n.jsx("select",{value:Xe,disabled:et,onChange:m=>dt(m.target.value),style:{height:34,borderRadius:8,border:"1px solid #cbd5e1",padding:"0 10px",background:"#fff"},children:kL.map(m=>n.jsxs("option",{value:m,children:[m,m===Nr?" (System)":""]},m))}),n.jsx("div",{}),n.jsx("button",{className:"admin-settings-ghost",onClick:Rc,disabled:et,children:"Cancel"}),n.jsx("button",{className:"admin-settings-primary",onClick:Pc,disabled:et,children:et?"Saving...":fe==="edit"?"Update Policy":"Create Policy"})]}),T==="custom"?n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"220px 1fr",gap:8,alignItems:"center",marginBottom:10},children:[n.jsx("label",{style:{fontWeight:600},children:"Custom Labels"}),n.jsx("input",{placeholder:"Ex: Sev1, Sev2, Sev3, Sev4",value:ke,disabled:et,onChange:m=>Pe(m.target.value),style:{height:34,borderRadius:8,border:"1px solid #cbd5e1",padding:"0 10px",background:"#fff"}})]}):null,n.jsxs("div",{style:{display:"grid",gridTemplateColumns:Ll?"minmax(640px, 1fr) 470px":"minmax(640px, 1fr)",gap:12,alignItems:"start",marginBottom:10},children:[n.jsx("div",{style:{maxWidth:Ll?780:"100%"},children:n.jsxs("table",{className:"rbac-permission-matrix sla-priority-table",style:{width:"100%",tableLayout:"fixed"},children:[n.jsxs("colgroup",{children:[n.jsx("col",{style:{width:78}}),n.jsx("col",{style:{width:52}}),n.jsx("col",{style:{width:188}}),n.jsx("col",{style:{width:188}}),n.jsx("col",{style:{width:96}}),n.jsx("col",{style:{width:62}})]}),n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{children:"Need SLA"}),n.jsx("th",{children:"Priority"}),n.jsx("th",{children:"Response"}),n.jsx("th",{children:"Resolution"}),n.jsx("th",{children:"Business Hours"}),n.jsx("th",{children:"Active"})]})}),n.jsx("tbody",{children:oi.map(m=>{const A=yt[m];return n.jsxs("tr",{children:[n.jsx("td",{children:n.jsx("input",{type:"checkbox",checked:A.enabled,onChange:D=>St(q=>({...q,[m]:{...q[m],enabled:D.target.checked}}))})}),n.jsx("td",{children:wc[oi.indexOf(m)]}),n.jsx("td",{children:n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 74px",minWidth:156,border:"1px solid #cbd5e1",borderRadius:8,overflow:"hidden",background:"#fff"},children:[n.jsx("input",{type:"number",min:0,step:1,value:A.responseTimeMin,disabled:!A.enabled||et,onChange:D=>St(q=>({...q,[m]:{...q[m],responseTimeMin:D.target.value}})),style:{border:"none",borderRight:"1px solid #cbd5e1",padding:"0 8px",height:30}}),n.jsx("select",{value:A.responseTimeUnit,disabled:!A.enabled||et,onChange:D=>St(q=>({...q,[m]:{...q[m],responseTimeUnit:D.target.value}})),style:{border:"none",padding:"0 6px",height:30,background:"#f8fafc"},children:Vy.map(D=>n.jsx("option",{value:D,children:D},D))})]})}),n.jsx("td",{children:n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 74px",minWidth:156,border:"1px solid #cbd5e1",borderRadius:8,overflow:"hidden",background:"#fff"},children:[n.jsx("input",{type:"number",min:0,step:1,value:A.resolutionTimeMin,disabled:!A.enabled||et,onChange:D=>St(q=>({...q,[m]:{...q[m],resolutionTimeMin:D.target.value}})),style:{border:"none",borderRight:"1px solid #cbd5e1",padding:"0 8px",height:30}}),n.jsx("select",{value:A.resolutionTimeUnit,disabled:!A.enabled||et,onChange:D=>St(q=>({...q,[m]:{...q[m],resolutionTimeUnit:D.target.value}})),style:{border:"none",padding:"0 6px",height:30,background:"#f8fafc"},children:Vy.map(D=>n.jsx("option",{value:D,children:D},D))})]})}),n.jsx("td",{children:n.jsx("input",{type:"checkbox",checked:A.businessHours,disabled:!A.enabled||et,onChange:D=>St(q=>({...q,[m]:{...q[m],businessHours:D.target.checked}}))})}),n.jsx("td",{children:n.jsx("input",{type:"checkbox",checked:A.active,disabled:!A.enabled||et,onChange:D=>St(q=>({...q,[m]:{...q[m],active:D.target.checked}}))})})]},m)})})]})}),Ll?n.jsxs("div",{style:{border:"1px solid #d7dee8",borderRadius:10,padding:10,background:"#fff",width:"100%"},children:[n.jsx("div",{style:{fontSize:12,fontWeight:700,marginBottom:8},children:"Business Hours Schedule"}),n.jsx("div",{style:{display:"grid",gap:6},children:SL.map(m=>{const A=w[m];return n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"20px 44px 1fr auto",gap:6,alignItems:"start"},children:[n.jsx("input",{type:"checkbox",checked:A.enabled,disabled:et,onChange:D=>Qm(m,D.target.checked)}),n.jsx("span",{style:{fontSize:12,marginTop:4},children:m.slice(0,3)}),n.jsx("div",{style:{display:"grid",gap:4},children:A.slots.map((D,q)=>n.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr auto 1fr auto",gap:4,alignItems:"center"},children:[n.jsx("input",{type:"time",value:D.start,disabled:!A.enabled||et,onChange:ie=>Mc(m,q,"start",ie.target.value)}),n.jsx("span",{style:{fontSize:11},children:"to"}),n.jsx("input",{type:"time",value:D.end,disabled:!A.enabled||et,onChange:ie=>Mc(m,q,"end",ie.target.value)}),n.jsx("button",{type:"button",className:"admin-settings-ghost",disabled:!A.enabled||et||A.slots.length<=1,onClick:()=>Jm(m,q),style:{padding:"2px 6px"},children:"-"})]},`${m}-${q}`))}),n.jsx("button",{type:"button",className:"admin-settings-ghost",disabled:!A.enabled||et,onClick:()=>Gm(m),style:{padding:"2px 6px"},children:"+"})]},m)})})]}):null]})]}):_e?n.jsx("p",{children:"Loading SLA policies..."}):n.jsxs(n.Fragment,{children:[n.jsxs("table",{className:"rbac-permission-matrix sla-summary-table",children:[n.jsxs("colgroup",{children:[n.jsx("col",{style:{width:130}}),n.jsx("col",{style:{width:88}}),n.jsx("col",{style:{width:96}}),n.jsx("col",{style:{width:76}}),n.jsx("col",{style:{width:82}}),n.jsx("col",{style:{width:44}}),n.jsx("col",{style:{width:50}}),n.jsx("col",{style:{width:76}}),n.jsx("col",{style:{width:82}}),n.jsx("col",{style:{width:44}}),n.jsx("col",{style:{width:50}}),n.jsx("col",{style:{width:76}}),n.jsx("col",{style:{width:82}}),n.jsx("col",{style:{width:44}}),n.jsx("col",{style:{width:50}}),n.jsx("col",{style:{width:76}}),n.jsx("col",{style:{width:82}}),n.jsx("col",{style:{width:44}}),n.jsx("col",{style:{width:50}}),n.jsx("col",{style:{width:104}})]}),n.jsxs("thead",{children:[n.jsxs("tr",{children:[n.jsx("th",{rowSpan:2,children:"Policy"}),n.jsx("th",{rowSpan:2,children:"Format"}),n.jsx("th",{rowSpan:2,children:"Time Zone"}),n.jsx("th",{colSpan:4,children:"Critical/Priority1 (P1)"}),n.jsx("th",{colSpan:4,children:"High/Priority2 (P2)"}),n.jsx("th",{colSpan:4,children:"Medium/Priority3 (P3)"}),n.jsx("th",{colSpan:4,children:"Low/Priority4 (P4)"}),n.jsx("th",{rowSpan:2,children:"Actions"})]}),n.jsxs("tr",{children:[n.jsx("th",{children:"Response"}),n.jsx("th",{children:"Resolution"}),n.jsx("th",{children:"BH"}),n.jsx("th",{children:"Active"}),n.jsx("th",{children:"Response"}),n.jsx("th",{children:"Resolution"}),n.jsx("th",{children:"BH"}),n.jsx("th",{children:"Active"}),n.jsx("th",{children:"Response"}),n.jsx("th",{children:"Resolution"}),n.jsx("th",{children:"BH"}),n.jsx("th",{children:"Active"}),n.jsx("th",{children:"Response"}),n.jsx("th",{children:"Resolution"}),n.jsx("th",{children:"BH"}),n.jsx("th",{children:"Active"})]})]}),n.jsx("tbody",{children:Gr===0?n.jsx("tr",{children:n.jsx("td",{colSpan:20,children:"No SLA policy available."})}):ba.map(m=>n.jsxs("tr",{children:[(()=>{var Uc,Ea;const A=m.rows.slice(),D=new Map;A.forEach(Et=>{const Rs=Number(Et==null?void 0:Et.priorityRank);Number.isFinite(Rs)&&Rs>=1&&Rs<=4&&!D.has(Rs)&&D.set(Rs,Et)});const q=Et=>A.find(Rs=>Et.includes(String((Rs==null?void 0:Rs.priority)||"").trim().toLowerCase())),ie=D.get(1)||q(["critical","p1"]),Ie=D.get(2)||q(["high","p2"]),Ee=D.get(3)||q(["medium","p3"]),Ge=D.get(4)||q(["low","p4"]),sn=Et=>Et==null?"-":`${Et} min`,rn=Et=>Et==null?"-":Et?"Yes":"No",Es=Et=>Et?sn(Et.responseTimeMin):"-",Ts=Et=>Et?sn(Et.resolutionTimeMin):"-",Zr=Et=>Et?rn(Et.businessHours):"-",Mr=Et=>Et?rn(Et.active):"-",Aa=String(((Uc=A[0])==null?void 0:Uc.format)||"").trim(),Js=String(((Ea=A[0])==null?void 0:Ea.timeZone)||"").trim();return n.jsxs(n.Fragment,{children:[n.jsx("td",{children:m.name||"-"}),n.jsx("td",{children:Aa||"-"}),n.jsx("td",{children:Js||"-"}),n.jsx("td",{children:Es(ie)}),n.jsx("td",{children:Ts(ie)}),n.jsx("td",{children:Zr(ie)}),n.jsx("td",{children:Mr(ie)}),n.jsx("td",{children:Es(Ie)}),n.jsx("td",{children:Ts(Ie)}),n.jsx("td",{children:Zr(Ie)}),n.jsx("td",{children:Mr(Ie)}),n.jsx("td",{children:Es(Ee)}),n.jsx("td",{children:Ts(Ee)}),n.jsx("td",{children:Zr(Ee)}),n.jsx("td",{children:Mr(Ee)}),n.jsx("td",{children:Es(Ge)}),n.jsx("td",{children:Ts(Ge)}),n.jsx("td",{children:Zr(Ge)}),n.jsx("td",{children:Mr(Ge)})]})})(),n.jsxs("td",{style:{display:"flex",gap:6},children:[n.jsx("button",{className:"admin-settings-ghost",onClick:()=>gn(m.name),disabled:et,children:"Edit"}),n.jsx("button",{className:"admin-settings-danger",onClick:()=>Bl(m.name),disabled:et,children:"Delete"})]})]},m.name))})]}),Gr>0&&n.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",alignItems:"center",gap:8,marginTop:10},children:[n.jsxs("span",{className:"pagination",children:[zm,"-",Ol," of ",Gr]}),n.jsxs("div",{className:"toolbar-pagination-group",children:[n.jsx("button",{className:"users-page-btn",onClick:()=>$e(m=>Math.max(1,m-1)),disabled:ls<=1,"aria-label":"Previous page",children:"<"}),n.jsx("button",{className:"users-page-btn active","aria-label":"Current page",children:ls}),n.jsx("button",{className:"users-page-btn",onClick:()=>$e(m=>Math.min(Il,m+1)),disabled:ls>=Il,"aria-label":"Next page",children:">"})]})]})]})})]})})]}):Fm?n.jsxs(n.Fragment,{children:[fr,n.jsx("section",{className:"rbac-module-card",style:{marginLeft:l?12:0},children:n.jsxs("div",{className:"admin-config-page",children:[n.jsxs("div",{className:"admin-config-head",children:[n.jsx("h3",{children:"Mail Provider, Routing & Automation"}),n.jsxs("div",{className:"admin-config-actions",children:[n.jsx("button",{className:"admin-settings-ghost",onClick:Na,disabled:Mt||xt,children:xt?"Loading...":"Reload"}),n.jsx("button",{className:"admin-settings-primary",onClick:Fl,disabled:Mt||xt,children:Mt?"Working...":"Save"})]})]}),r!=="ADMIN"?n.jsx("p",{children:"Only administrators can manage mail configuration."}):n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"admin-config-grid two",children:[n.jsxs("article",{className:"admin-config-card",children:[n.jsx("h4",{children:"Email Provider"}),n.jsx("p",{children:"Provider type, connection mode, and OAuth status."}),n.jsxs("label",{className:"admin-field-row",children:[n.jsx("span",{children:"Provider Type"}),n.jsxs("select",{value:re.providerType,onChange:m=>{const A=m.target.value;$l(A,re.connectionMode)},children:[n.jsx("option",{value:"google-workspace-oauth",children:"Google Workspace (OAuth)"}),n.jsx("option",{value:"microsoft-365-oauth",children:"Microsoft 365 (OAuth)"}),n.jsx("option",{value:"smtp-imap-custom",children:"SMTP/IMAP (Custom)"}),n.jsx("option",{value:"api-provider",children:"API Provider (SendGrid / Mailgun)"})]})]}),n.jsxs("label",{className:"admin-field-row",children:[n.jsx("span",{children:"Connection Mode"}),n.jsxs("select",{value:re.connectionMode,onChange:m=>$l(re.providerType,m.target.value),children:[n.jsx("option",{value:"oauth2",children:"OAuth 2.0"}),n.jsx("option",{value:"app-password",children:"App Password"}),n.jsx("option",{value:"manual-credentials",children:"Manual Credentials"})]})]}),re.connectionMode==="oauth2"?n.jsxs(n.Fragment,{children:[n.jsxs("label",{className:"admin-field-row",children:[n.jsx("span",{children:"Connected Status"}),n.jsx("div",{className:`mail-status-badge ${re.oauthConnected?"success":"danger"}`,children:re.oauthConnected?"Connected":"Not Connected"})]}),n.jsxs("label",{className:"admin-field-row",children:[n.jsx("span",{children:"Token Expiry"}),n.jsx("input",{value:re.oauthTokenExpiry,onChange:m=>vt("oauthTokenExpiry",m.target.value),placeholder:"mm/dd/yyyy hh:mm"})]}),n.jsxs("div",{className:"admin-config-actions",children:[n.jsx("button",{className:"admin-settings-ghost",onClick:Sc,disabled:Mt||xt,children:"Connect Account"}),n.jsx("button",{className:"admin-settings-ghost",onClick:Fi,disabled:Mt||xt,children:"Reconnect"})]})]}):null,re.providerType==="api-provider"?n.jsxs("div",{className:"admin-config-row three",children:[n.jsxs("label",{className:"admin-field-row",children:[n.jsx("span",{children:"API Provider"}),n.jsx("input",{value:re.apiProviderName,onChange:m=>vt("apiProviderName",m.target.value),placeholder:"SendGrid / Mailgun"})]}),n.jsxs("label",{className:"admin-field-row",children:[n.jsx("span",{children:"API Base URL"}),n.jsx("input",{value:re.apiBaseUrl,onChange:m=>vt("apiBaseUrl",m.target.value),placeholder:"https://api.provider.com"})]}),n.jsxs("label",{className:"admin-field-row",children:[n.jsx("span",{children:"API Key"}),n.jsx("input",{value:re.apiKey,onChange:m=>vt("apiKey",m.target.value)})]})]}):null]}),n.jsxs("article",{className:"admin-config-card",children:[n.jsx("h4",{children:"Inbound Mail Processing"}),n.jsxs("p",{children:["Mode:"," ",Tr?"API provider mode (IMAP disabled)":As?"OAuth mode":Pl?"App password mode":"Manual credentials mode"]}),n.jsxs("label",{className:"admin-field-row",children:[n.jsx("span",{children:"Inbound Email Address"}),n.jsx("input",{value:re.inboundEmailAddress,onChange:m=>{const A=m.target.value;Dt(D=>({...D,inboundEmailAddress:A,supportMail:A}))},placeholder:"support@domain.com"})]}),n.jsxs("div",{className:"admin-config-row two",children:[n.jsxs("label",{className:"admin-field-row",children:[n.jsx("span",{children:"IMAP Host"}),n.jsx("input",{disabled:as,value:re.imap.host,onChange:m=>_i("host",m.target.value)})]}),n.jsxs("label",{className:"admin-field-row",children:[n.jsx("span",{children:"Port"}),n.jsx("input",{disabled:as,value:re.imap.port,onChange:m=>_i("port",m.target.value)})]})]}),n.jsxs("div",{className:"admin-config-row two",children:[n.jsxs("label",{className:"admin-field-row",children:[n.jsx("span",{children:"Username"}),n.jsx("input",{disabled:as,value:re.imap.user,onChange:m=>_i("user",m.target.value)})]}),n.jsxs("label",{className:"admin-field-row",children:[n.jsx("span",{children:As?"OAuth Managed":Pl?"App Password":"Password"}),n.jsx("input",{type:As?"text":"password",disabled:as||xa,value:As?"Managed via OAuth":re.imap.pass,onChange:m=>_i("pass",m.target.value)})]})]}),n.jsxs("div",{className:"admin-config-row three",children:[n.jsxs("label",{className:"admin-field-row",children:[n.jsx("span",{children:"Encryption"}),n.jsxs("select",{disabled:as,value:re.imapEncryption,onChange:m=>vt("imapEncryption",m.target.value),children:[n.jsx("option",{value:"SSL",children:"SSL"}),n.jsx("option",{value:"TLS",children:"TLS"}),n.jsx("option",{value:"None",children:"None"})]})]}),n.jsxs("label",{className:"admin-field-row",children:[n.jsx("span",{children:"Poll Interval (ms)"}),n.jsx("input",{value:re.pollIntervalMs,onChange:m=>vt("pollIntervalMs",m.target.value)})]}),n.jsxs("label",{className:"admin-field-row switch-row",children:[n.jsx("span",{children:"Enable Push (Webhook)"}),n.jsx("input",{type:"checkbox",checked:re.enablePush,onChange:m=>vt("enablePush",m.target.checked)})]})]}),n.jsxs("div",{className:"admin-config-row three",children:[n.jsxs("label",{className:"admin-field-row",children:[n.jsx("span",{children:"Default Queue"}),n.jsx("input",{value:re.inboundDefaultQueue,onChange:m=>vt("inboundDefaultQueue",m.target.value)})]}),n.jsxs("label",{className:"admin-field-row",children:[n.jsx("span",{children:"Default Ticket Type"}),n.jsx("input",{value:re.inboundDefaultTicketType,onChange:m=>vt("inboundDefaultTicketType",m.target.value)})]}),n.jsxs("label",{className:"admin-field-row",children:[n.jsx("span",{children:"Default Priority"}),n.jsx("input",{value:re.inboundDefaultPriority,onChange:m=>vt("inboundDefaultPriority",m.target.value)})]})]}),n.jsxs("div",{className:"admin-config-row two",children:[n.jsxs("label",{className:"admin-field-row",children:[n.jsx("span",{children:"Auto Assign Rule"}),n.jsx("input",{value:re.autoAssignRule,onChange:m=>vt("autoAssignRule",m.target.value),placeholder:"Round robin / skill based"})]}),n.jsxs("label",{className:"admin-field-row",children:[n.jsx("span",{children:"Mailbox"}),n.jsx("input",{disabled:as,value:re.imap.mailbox,onChange:m=>_i("mailbox",m.target.value)})]})]}),n.jsxs("div",{className:"admin-config-row three",children:[n.jsxs("label",{className:"admin-field-row switch-row",children:[n.jsx("span",{children:"Ignore Auto-Reply Emails"}),n.jsx("input",{type:"checkbox",checked:re.ignoreAutoReply,onChange:m=>vt("ignoreAutoReply",m.target.checked)})]}),n.jsxs("label",{className:"admin-field-row switch-row",children:[n.jsx("span",{children:"Prevent Email Loop"}),n.jsx("input",{type:"checkbox",checked:re.preventEmailLoop,onChange:m=>vt("preventEmailLoop",m.target.checked)})]}),n.jsxs("label",{className:"admin-field-row switch-row",children:[n.jsx("span",{children:"Process Attachments"}),n.jsx("input",{type:"checkbox",checked:re.processAttachments,onChange:m=>vt("processAttachments",m.target.checked)})]})]}),n.jsxs("div",{className:"admin-config-actions",children:[n.jsx("button",{className:"admin-settings-ghost",onClick:()=>Yr("imap"),disabled:Mt||xt||bt,children:"Test IMAP"}),n.jsx("button",{className:"admin-settings-ghost",onClick:kc,disabled:Mt||xt||bt,children:"Test Inbound Processing"}),n.jsx("button",{className:"admin-settings-ghost",onClick:_l,disabled:Mt||xt,children:"View Last Sync Time"}),n.jsx("button",{className:"admin-settings-ghost",onClick:Dl,disabled:Mt||xt,children:"Sync Now"})]})]})]}),n.jsxs("div",{className:"admin-config-grid two",children:[n.jsxs("article",{className:"admin-config-card",children:[n.jsx("h4",{children:"Outgoing Mail"}),n.jsxs("p",{children:["SMTP channel for ticket updates sent to users."," ",Tr?"(disabled in API provider mode)":As?"(OAuth-managed auth)":""]}),n.jsxs("div",{className:"admin-config-row two",children:[n.jsxs("label",{className:"admin-field-row",children:[n.jsx("span",{children:"SMTP Host"}),n.jsx("input",{disabled:as,value:re.smtp.host,onChange:m=>Jr("host",m.target.value)})]}),n.jsxs("label",{className:"admin-field-row",children:[n.jsx("span",{children:"Port"}),n.jsx("input",{disabled:as,value:re.smtp.port,onChange:m=>Jr("port",m.target.value)})]})]}),n.jsxs("div",{className:"admin-config-row three",children:[n.jsxs("label",{className:"admin-field-row",children:[n.jsx("span",{children:"Encryption"}),n.jsxs("select",{disabled:as,value:re.smtpEncryption,onChange:m=>vt("smtpEncryption",m.target.value),children:[n.jsx("option",{value:"SSL",children:"SSL"}),n.jsx("option",{value:"TLS",children:"TLS"}),n.jsx("option",{value:"None",children:"None"})]})]}),n.jsxs("label",{className:"admin-field-row",children:[n.jsx("span",{children:"Username"}),n.jsx("input",{disabled:as,value:re.smtp.user,onChange:m=>Jr("user",m.target.value)})]}),n.jsxs("label",{className:"admin-field-row",children:[n.jsx("span",{children:As?"OAuth Managed":Pl?"App Password":"Password"}),n.jsx("input",{type:As?"text":"password",disabled:as||xa,value:As?"Managed via OAuth":re.smtp.pass,onChange:m=>Jr("pass",m.target.value)})]})]}),n.jsxs("div",{className:"admin-config-row three",children:[n.jsxs("label",{className:"admin-field-row",children:[n.jsx("span",{children:"From Address"}),n.jsx("input",{value:re.smtp.from,onChange:m=>Jr("from",m.target.value),placeholder:"support@domain.com"})]}),n.jsxs("label",{className:"admin-field-row",children:[n.jsx("span",{children:"Reply-To Address"}),n.jsx("input",{value:re.outboundReplyTo,onChange:m=>vt("outboundReplyTo",m.target.value),placeholder:"helpdesk@domain.com"})]}),n.jsxs("label",{className:"admin-field-row",children:[n.jsx("span",{children:"Max Attachment Size (MB)"}),n.jsx("input",{value:re.maxAttachmentSizeMb,onChange:m=>vt("maxAttachmentSizeMb",m.target.value)})]})]}),n.jsxs("label",{className:"admin-field-row",children:[n.jsx("span",{children:"Signature Template"}),n.jsx("textarea",{value:re.signatureTemplate,onChange:m=>vt("signatureTemplate",m.target.value)})]}),n.jsxs("label",{className:"admin-field-row",children:[n.jsx("span",{children:"Test Recipient"}),n.jsx("input",{value:U,onChange:m=>te(m.target.value),placeholder:"admin@yourdomain.com"})]}),n.jsxs("div",{className:"admin-config-actions",children:[n.jsx("button",{className:"admin-settings-ghost",onClick:()=>Yr("smtp"),disabled:Mt||xt||bt,children:"Test SMTP"}),n.jsx("button",{className:"admin-settings-ghost",onClick:()=>Yr("send"),disabled:Mt||xt,children:"Send Test Mail"})]})]}),n.jsxs("article",{className:"admin-config-card",children:[n.jsx("h4",{children:"Mail to Ticket Rules"}),n.jsx("p",{children:"Rule engine for creating and appending ticket threads."}),n.jsxs("label",{className:"admin-field-row switch-row",children:[n.jsx("span",{children:"Create new ticket when subject has no ticket ID"}),n.jsx("input",{type:"checkbox",checked:!0,readOnly:!0})]}),n.jsxs("label",{className:"admin-field-row",children:[n.jsx("span",{children:"Append to ticket pattern"}),n.jsx("input",{value:re.appendToTicketPattern,onChange:m=>vt("appendToTicketPattern",m.target.value)})]}),n.jsxs("div",{className:"admin-config-row three",children:[n.jsxs("label",{className:"admin-field-row switch-row",children:[n.jsx("span",{children:"Overwrite status on reply"}),n.jsx("input",{type:"checkbox",checked:re.overwriteStatusOnReply,onChange:m=>vt("overwriteStatusOnReply",m.target.checked)})]}),n.jsxs("label",{className:"admin-field-row switch-row",children:[n.jsx("span",{children:"Auto reopen on reply"}),n.jsx("input",{type:"checkbox",checked:re.autoReopenOnReply,onChange:m=>vt("autoReopenOnReply",m.target.checked)})]}),n.jsxs("label",{className:"admin-field-row switch-row",children:[n.jsx("span",{children:"Strip quoted replies"}),n.jsx("input",{type:"checkbox",checked:re.stripQuotedReplies,onChange:m=>vt("stripQuotedReplies",m.target.checked)})]})]}),n.jsx("div",{className:"admin-config-result",children:"Example: Subject: Re: Printer Issue [#INC-1023]"})]})]}),n.jsxs("div",{className:"admin-config-grid two",children:[n.jsxs("article",{className:"admin-config-card",children:[n.jsx("h4",{children:"Automation & Routing Rules"}),n.jsx("p",{children:"Queue and type routing rules for inbound emails."}),n.jsxs("label",{className:"admin-field-row",children:[n.jsx("span",{children:"Rule 1"}),n.jsx("input",{value:re.routingRuleHelpdeskQueue,onChange:m=>vt("routingRuleHelpdeskQueue",m.target.value)})]}),n.jsxs("label",{className:"admin-field-row",children:[n.jsx("span",{children:"Rule 2"}),n.jsx("input",{value:re.routingRuleAccessType,onChange:m=>vt("routingRuleAccessType",m.target.value)})]}),n.jsxs("label",{className:"admin-field-row",children:[n.jsx("span",{children:"Rule 3"}),n.jsx("input",{value:re.routingRuleSupplierType,onChange:m=>vt("routingRuleSupplierType",m.target.value)})]})]}),n.jsxs("article",{className:"admin-config-card",children:[n.jsx("h4",{children:"Security & Logging"}),n.jsx("p",{children:"Domain restrictions, validation posture, and delivery retries."}),n.jsxs("div",{className:"admin-config-row two",children:[n.jsxs("label",{className:"admin-field-row switch-row",children:[n.jsx("span",{children:"Allow External Email Creation"}),n.jsx("input",{type:"checkbox",checked:re.allowExternalEmailCreation,onChange:m=>vt("allowExternalEmailCreation",m.target.checked)})]}),n.jsxs("label",{className:"admin-field-row switch-row",children:[n.jsx("span",{children:"Allow Internal Only"}),n.jsx("input",{type:"checkbox",checked:re.allowInternalOnly,onChange:m=>vt("allowInternalOnly",m.target.checked)})]})]}),n.jsxs("div",{className:"admin-config-row two",children:[n.jsxs("label",{className:"admin-field-row",children:[n.jsx("span",{children:"Allowed Domains"}),n.jsx("input",{value:re.allowedDomains,onChange:m=>vt("allowedDomains",m.target.value),placeholder:"company.com, partner.com"})]}),n.jsxs("label",{className:"admin-field-row",children:[n.jsx("span",{children:"Blocked Domains"}),n.jsx("input",{value:re.blockedDomains,onChange:m=>vt("blockedDomains",m.target.value),placeholder:"spam.com, blocked.com"})]})]}),n.jsxs("div",{className:"admin-config-row three",children:[n.jsxs("label",{className:"admin-field-row",children:[n.jsx("span",{children:"SPF/DKIM Validation"}),n.jsxs("select",{value:re.spfDkimStatus,onChange:m=>vt("spfDkimStatus",m.target.value),children:[n.jsx("option",{value:"Unknown",children:"Unknown"}),n.jsx("option",{value:"Valid",children:"Valid"}),n.jsx("option",{value:"Invalid",children:"Invalid"})]})]}),n.jsxs("label",{className:"admin-field-row",children:[n.jsx("span",{children:"Email Logging Retention (days)"}),n.jsx("input",{value:re.emailLogRetentionDays,onChange:m=>vt("emailLogRetentionDays",m.target.value)})]}),n.jsxs("label",{className:"admin-field-row",children:[n.jsx("span",{children:"Max Retry Count"}),n.jsx("input",{value:re.maxRetryCount,onChange:m=>vt("maxRetryCount",m.target.value)})]})]}),n.jsxs("label",{className:"admin-field-row switch-row",children:[n.jsx("span",{children:"Retry Failed Send Attempts"}),n.jsx("input",{type:"checkbox",checked:re.retryFailedSend,onChange:m=>vt("retryFailedSend",m.target.checked)})]}),n.jsxs("div",{className:"admin-status-grid",children:[n.jsxs("div",{className:`mail-status-badge ${re.oauthConnected?"success":"danger"}`,children:["OAuth ",re.oauthConnected?"Connected":"Disconnected"]}),n.jsx("div",{className:`mail-status-badge ${re.errorLogs?"danger":"success"}`,children:re.errorLogs?"Failed":"Healthy"}),n.jsx("div",{className:`mail-status-badge ${re.oauthTokenExpiry?"warning":"neutral"}`,children:re.oauthTokenExpiry?"Token Expiring":"Token Unknown"})]}),n.jsxs("div",{className:"admin-log-panel",children:[n.jsxs("div",{children:[n.jsx("strong",{children:"Last Sync:"})," ",re.lastSyncTime||"-"]}),n.jsxs("div",{children:[n.jsx("strong",{children:"Last Email Received:"})," ",re.lastEmailReceived||"-"]}),n.jsxs("div",{children:[n.jsx("strong",{children:"Last Email Sent:"})," ",re.lastEmailSent||"-"]}),n.jsxs("div",{children:[n.jsx("strong",{children:"Error Logs:"})," ",re.errorLogs||"-"]})]})]})]}),n.jsxs("div",{className:"admin-config-actions admin-mail-footer-actions",children:[n.jsx("button",{className:"admin-settings-ghost",onClick:()=>Yr("imap"),disabled:Mt||xt||bt,children:"Test IMAP"}),n.jsx("button",{className:"admin-settings-ghost",onClick:()=>Yr("smtp"),disabled:Mt||xt||bt,children:"Test SMTP"}),n.jsx("button",{className:"admin-settings-ghost",onClick:Dl,disabled:Mt||xt,children:"Sync Now"}),n.jsx("button",{className:"admin-settings-primary",onClick:Fl,disabled:Mt||xt,children:"Save"})]}),qs?n.jsx("div",{className:"admin-config-result",children:qs}):null]})]})})]}):jc?n.jsxs(n.Fragment,{children:[fr,n.jsx("section",{className:"rbac-module-card",style:{marginLeft:l?12:0},children:n.jsxs("div",{className:"admin-config-page",children:[n.jsxs("div",{className:"admin-config-head",children:[n.jsx("h3",{children:"Email & Signature Templates"}),n.jsx("div",{className:"admin-config-actions",children:n.jsx("button",{className:"admin-settings-ghost",onClick:Na,disabled:Mt||xt,children:xt?"Loading...":"Reload"})})]}),r!=="ADMIN"?n.jsx("p",{children:"Only administrators can manage email templates and signatures."}):n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"admin-config-grid one",children:n.jsxs("article",{className:"admin-config-card",children:[n.jsx("h4",{children:"Email Templates (CRUD)"}),n.jsx("p",{children:"Create individual email templates per button action."}),n.jsxs("div",{className:"admin-config-row three",children:[n.jsxs("label",{className:"admin-field-row",children:[n.jsx("span",{children:"Template Name"}),n.jsx("input",{value:Ke.name,onChange:m=>Qe(A=>({...A,name:m.target.value})),placeholder:"Assign Notification"})]}),n.jsxs("label",{className:"admin-field-row",children:[n.jsx("span",{children:"Button Action"}),n.jsx("select",{value:Ke.buttonKey,onChange:m=>Qe(A=>({...A,buttonKey:m.target.value})),children:CL.map(m=>n.jsx("option",{value:m,children:m},m))})]}),n.jsxs("label",{className:"admin-field-row switch-row",children:[n.jsx("span",{children:"Active"}),n.jsx("input",{type:"checkbox",checked:Ke.active,onChange:m=>Qe(A=>({...A,active:m.target.checked}))})]})]}),n.jsxs("div",{className:"admin-config-row two",children:[n.jsxs("label",{className:"admin-field-row",children:[n.jsx("span",{children:"Subject"}),n.jsx("input",{value:Ke.subject,onChange:m=>Qe(A=>({...A,subject:m.target.value})),placeholder:"Asset assigned to {{user_name}}"})]}),n.jsxs("label",{className:"admin-field-row",children:[n.jsx("span",{children:"Body"}),n.jsx("textarea",{value:Ke.body,onChange:m=>Qe(A=>({...A,body:m.target.value})),placeholder:"Hello {{user_name}}, your asset {{asset_id}} has been assigned."})]})]}),n.jsxs("div",{className:"admin-config-actions",children:[n.jsx("button",{className:"admin-settings-primary",onClick:Cc,children:it?"Update Template":"Create Template"}),it?n.jsx("button",{className:"admin-settings-ghost",onClick:()=>{at(null),Qe({name:"",buttonKey:"Assign",subject:"",body:"",active:!0})},children:"Cancel"}):null]}),n.jsx("div",{className:"admin-entity-list",children:Ce.length===0?n.jsx("div",{className:"admin-entity-empty",children:"No email templates configured."}):Ce.map(m=>n.jsxs("div",{className:"admin-entity-row",children:[n.jsxs("div",{children:[n.jsx("strong",{children:m.name})," | Action: ",m.buttonKey," | ",m.active?"Active":"Inactive",n.jsx("div",{className:"admin-entity-subtext",children:m.subject})]}),n.jsxs("div",{className:"admin-config-actions",children:[n.jsx("button",{className:"admin-settings-ghost",onClick:()=>Vm(m),children:"Edit"}),n.jsx("button",{className:"admin-settings-danger",onClick:()=>Ul(m.id),children:"Delete"})]})]},m.id))})]})}),n.jsxs("div",{className:"admin-config-grid two",children:[n.jsxs("article",{className:"admin-config-card",children:[n.jsx("h4",{children:"Email Signatures (CRUD)"}),n.jsx("p",{children:"Manage individual signatures for service-account users (agents)."}),n.jsxs("label",{className:"admin-field-row",children:[n.jsx("span",{children:"Service Account User"}),n.jsxs("select",{value:Yt.userId,onChange:m=>Bt(A=>({...A,userId:m.target.value})),children:[n.jsx("option",{value:"",children:"Select user"}),Vt.map(m=>{const A=String((m==null?void 0:m.id)||""),D=String((m==null?void 0:m.name)||(m==null?void 0:m.fullName)||(m==null?void 0:m.email)||`User ${A}`);return n.jsx("option",{value:A,children:D},`sig-user-${A}`)})]})]}),n.jsxs("label",{className:"admin-field-row",children:[n.jsx("span",{children:"Signature HTML/Text"}),n.jsx("textarea",{value:Yt.signatureHtml,onChange:m=>Bt(A=>({...A,signatureHtml:m.target.value})),placeholder:`Regards,
IT Support Team`})]}),n.jsxs("label",{className:"admin-field-row switch-row",children:[n.jsx("span",{children:"Active"}),n.jsx("input",{type:"checkbox",checked:Yt.active,onChange:m=>Bt(A=>({...A,active:m.target.checked}))})]}),n.jsxs("div",{className:"admin-config-actions",children:[n.jsx("button",{className:"admin-settings-primary",onClick:Km,children:Er?"Update Signature":"Create Signature"}),Er?n.jsx("button",{className:"admin-settings-ghost",onClick:()=>{pa(null),Bt({userId:"",userLabel:"",signatureHtml:"",active:!0})},children:"Cancel"}):null]}),n.jsx("div",{className:"admin-entity-list",children:bn.length===0?n.jsx("div",{className:"admin-entity-empty",children:"No signatures configured."}):bn.map(m=>n.jsxs("div",{className:"admin-entity-row",children:[n.jsxs("div",{children:[n.jsx("strong",{children:m.userLabel})," | ",m.active?"Active":"Inactive",n.jsx("div",{className:"admin-entity-subtext",children:m.signatureHtml})]}),n.jsxs("div",{className:"admin-config-actions",children:[n.jsx("button",{className:"admin-settings-ghost",onClick:()=>Sa(m),children:"Edit"}),n.jsx("button",{className:"admin-settings-danger",onClick:()=>Ac(m.id),children:"Delete"})]})]},m.id))})]}),n.jsxs("article",{className:"admin-config-card",children:[n.jsx("h4",{children:"Mail Banner (CRUD)"}),n.jsx("p",{children:"Banner shown on mail/ticket communications."}),n.jsxs("label",{className:"admin-field-row",children:[n.jsx("span",{children:"Banner Title"}),n.jsx("input",{value:cr.title,onChange:m=>rs(A=>({...A,title:m.target.value})),placeholder:"Maintenance Window"})]}),n.jsxs("label",{className:"admin-field-row",children:[n.jsx("span",{children:"Banner Message"}),n.jsx("textarea",{value:cr.message,onChange:m=>rs(A=>({...A,message:m.target.value})),placeholder:"Support response time may be delayed during planned maintenance."})]}),n.jsxs("div",{className:"admin-config-row two",children:[n.jsxs("label",{className:"admin-field-row",children:[n.jsx("span",{children:"Tone"}),n.jsxs("select",{value:cr.tone,onChange:m=>rs(A=>({...A,tone:m.target.value})),children:[n.jsx("option",{value:"info",children:"Info"}),n.jsx("option",{value:"success",children:"Success"}),n.jsx("option",{value:"warning",children:"Warning"}),n.jsx("option",{value:"danger",children:"Danger"})]})]}),n.jsxs("label",{className:"admin-field-row switch-row",children:[n.jsx("span",{children:"Active"}),n.jsx("input",{type:"checkbox",checked:cr.active,onChange:m=>rs(A=>({...A,active:m.target.checked}))})]})]}),n.jsxs("div",{className:"admin-config-actions",children:[n.jsx("button",{className:"admin-settings-primary",onClick:ka,children:dr?"Update Banner":"Create Banner"}),dr?n.jsx("button",{className:"admin-settings-ghost",onClick:()=>{Vr(null),rs({title:"",message:"",tone:"info",active:!0})},children:"Cancel"}):null]}),n.jsx("div",{className:"admin-entity-list",children:fa.length===0?n.jsx("div",{className:"admin-entity-empty",children:"No banners configured."}):fa.map(m=>n.jsxs("div",{className:"admin-entity-row",children:[n.jsxs("div",{children:[n.jsx("strong",{children:m.title})," | Tone: ",m.tone," | ",m.active?"Active":"Inactive",n.jsx("div",{className:"admin-entity-subtext",children:m.message})]}),n.jsxs("div",{className:"admin-config-actions",children:[n.jsx("button",{className:"admin-settings-ghost",onClick:()=>ot(m),children:"Edit"}),n.jsx("button",{className:"admin-settings-danger",onClick:()=>Ec(m.id),children:"Delete"})]})]},m.id))})]})]}),qs?n.jsx("div",{className:"admin-config-result",children:qs}):null]})]})})]}):Um?n.jsxs(n.Fragment,{children:[fr,n.jsx("section",{className:"rbac-module-card",style:{marginLeft:l?12:0},children:n.jsxs("div",{className:"admin-config-page",children:[n.jsxs("div",{className:"admin-config-head",children:[n.jsx("h3",{children:"Database Configuration"}),n.jsxs("div",{className:"admin-config-actions",children:[n.jsx("button",{className:"admin-settings-ghost",onClick:cs,disabled:Al||ha,children:ha?"Loading...":"Reload"}),n.jsx("button",{className:"admin-settings-primary",onClick:Nc,disabled:Al||ha,children:Al?"Testing...":"Test Connection"})]})]}),r!=="ADMIN"?n.jsx("p",{children:"Only administrators can manage database configuration."}):n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"admin-config-grid one",children:n.jsxs("article",{className:"admin-config-card",children:[n.jsx("h4",{children:"Application Database Connection"}),n.jsx("p",{children:"Use either a connection string or explicit host credentials."}),n.jsxs("label",{className:"admin-field-row",children:[n.jsx("span",{children:"Connection String"}),n.jsx("input",{value:Tn.connectionString,onChange:m=>is(A=>({...A,connectionString:m.target.value})),placeholder:"postgresql://user:password@host:5432/database?sslmode=require"})]}),n.jsx("div",{className:"admin-config-divider",children:"OR"}),n.jsxs("div",{className:"admin-config-row three",children:[n.jsxs("label",{className:"admin-field-row",children:[n.jsx("span",{children:"Host"}),n.jsx("input",{value:Tn.host,onChange:m=>is(A=>({...A,host:m.target.value}))})]}),n.jsxs("label",{className:"admin-field-row",children:[n.jsx("span",{children:"Port"}),n.jsx("input",{value:Tn.port,onChange:m=>is(A=>({...A,port:m.target.value}))})]}),n.jsxs("label",{className:"admin-field-row",children:[n.jsx("span",{children:"Database"}),n.jsx("input",{value:Tn.database,onChange:m=>is(A=>({...A,database:m.target.value}))})]})]}),n.jsxs("div",{className:"admin-config-row three",children:[n.jsxs("label",{className:"admin-field-row",children:[n.jsx("span",{children:"User"}),n.jsx("input",{value:Tn.user,onChange:m=>is(A=>({...A,user:m.target.value}))})]}),n.jsxs("label",{className:"admin-field-row",children:[n.jsx("span",{children:"Password"}),n.jsx("input",{type:"password",value:Tn.password,onChange:m=>is(A=>({...A,password:m.target.value}))})]}),n.jsxs("label",{className:"admin-field-row switch-row",children:[n.jsx("span",{children:"SSL"}),n.jsx("input",{type:"checkbox",checked:Tn.ssl,onChange:m=>is(A=>({...A,ssl:m.target.checked}))})]})]})]})}),Li?n.jsx("div",{className:"admin-config-result",children:Li}):null]})]})})]}):Qs?n.jsxs(n.Fragment,{children:[fr,n.jsx("section",{className:"rbac-module-card",style:{marginLeft:l?12:0},children:n.jsxs("div",{className:"admin-config-page",children:[n.jsxs("div",{className:"admin-config-head",children:[n.jsx("h3",{children:"Workflow and Automation"}),n.jsxs("div",{className:"admin-config-actions",children:[!Ml&&nn?n.jsx("button",{className:"admin-settings-primary",onClick:()=>va(!0),children:"Edit"}):null,Ml?n.jsxs(n.Fragment,{children:[n.jsx("button",{className:"admin-settings-ghost",onClick:()=>va(!1),children:"Cancel"}),n.jsx("button",{className:"admin-settings-primary",onClick:()=>{bc(),va(!1)},children:"Save"})]}):null]})]}),xc?n.jsxs("div",{className:"admin-config-result",children:["Saved at ",xc]}):null,r!=="ADMIN"?n.jsx("p",{children:"Only administrators can manage workflow automation."}):n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"admin-config-grid one",children:n.jsx("article",{className:"admin-config-card",children:n.jsx("div",{className:"admin-config-row one",children:n.jsxs("label",{className:"admin-field-row",children:[n.jsx("span",{children:"Select Type & Workflow"}),n.jsx("select",{value:Hs,onChange:m=>{const A=m.target.value;Ii(A),ga(A),va(!1)},children:Dn.map(m=>n.jsx("option",{value:m.name,children:m.name},`type-${m.name}`))})]})})})}),nn?n.jsx("div",{className:"admin-config-grid one",children:n.jsx("article",{className:"admin-config-card",children:Ml?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"admin-config-row",children:n.jsxs("label",{className:"admin-field-row",style:{flex:1},children:[n.jsx("span",{children:"Workflow Name"}),n.jsx("input",{value:nn.name,onChange:m=>Oi(Pt,m.target.value),placeholder:"Workflow name"})]})}),n.jsxs("div",{className:"admin-field-row",children:[n.jsx("span",{children:"States (Flow Chart)"}),n.jsx("div",{style:{color:"#334155",fontWeight:600},children:nn.states.map(m=>String(m||"").trim()).filter(Boolean).join(" -> ")||"-"})]}),n.jsxs("div",{className:"admin-field-row",style:{alignItems:"flex-start"},children:[n.jsx("span",{children:"States (Editable)"}),n.jsxs("div",{style:{width:"100%"},children:[nn.states.map((m,A)=>n.jsxs("div",{className:"admin-config-row",style:{marginBottom:8},children:[n.jsx("input",{value:m,onChange:D=>ya(Pt,"states",A,D.target.value),placeholder:`State ${A+1}`}),n.jsxs("div",{className:"admin-settings-toolbar-actions",children:[n.jsx("button",{className:"admin-settings-ghost",onClick:()=>Rr(Pt,"states",A,-1),disabled:A===0,children:"Up"}),n.jsx("button",{className:"admin-settings-ghost",onClick:()=>Rr(Pt,"states",A,1),disabled:A===nn.states.length-1,children:"Down"}),n.jsx("button",{className:"admin-settings-danger",onClick:()=>Kt(Pt,"states",A),children:"Delete"})]})]},`state-${A}`)),n.jsx("button",{className:"admin-settings-ghost",onClick:()=>ja(Pt,"states"),children:"+ Add State"})]})]}),n.jsxs("div",{className:"admin-field-row",style:{alignItems:"flex-start"},children:[n.jsx("span",{children:"Allowed Transitions"}),n.jsxs("div",{style:{width:"100%"},children:[nn.transitions.map((m,A)=>n.jsxs("div",{className:"admin-config-row",style:{marginBottom:8},children:[n.jsx("input",{value:m,onChange:D=>ya(Pt,"transitions",A,D.target.value),placeholder:"From -> To"}),n.jsxs("div",{className:"admin-settings-toolbar-actions",children:[n.jsx("button",{className:"admin-settings-ghost",onClick:()=>Rr(Pt,"transitions",A,-1),disabled:A===0,children:"Up"}),n.jsx("button",{className:"admin-settings-ghost",onClick:()=>Rr(Pt,"transitions",A,1),disabled:A===nn.transitions.length-1,children:"Down"}),n.jsx("button",{className:"admin-settings-danger",onClick:()=>Kt(Pt,"transitions",A),children:"Delete"})]})]},`transition-${A}`)),n.jsx("button",{className:"admin-settings-ghost",onClick:()=>ja(Pt,"transitions"),children:"+ Add Transition"})]})]}),n.jsxs("div",{className:"admin-field-row",style:{alignItems:"flex-start"},children:[n.jsx("span",{children:"Button Action Flow (1,2,3...)"}),n.jsxs("div",{style:{width:"100%"},children:[nn.buttonFlow.map((m,A)=>n.jsxs("div",{className:"admin-config-row",style:{marginBottom:8},children:[n.jsxs("div",{style:{minWidth:28,fontWeight:700,color:"#1e293b",alignSelf:"center"},children:[A+1,"."]}),n.jsx("input",{value:m,onChange:D=>ya(Pt,"buttonFlow",A,D.target.value),placeholder:"Button -> Next State"}),n.jsxs("div",{className:"admin-settings-toolbar-actions",children:[n.jsx("button",{className:"admin-settings-ghost",onClick:()=>Rr(Pt,"buttonFlow",A,-1),disabled:A===0,children:"Up"}),n.jsx("button",{className:"admin-settings-ghost",onClick:()=>Rr(Pt,"buttonFlow",A,1),disabled:A===nn.buttonFlow.length-1,children:"Down"}),n.jsx("button",{className:"admin-settings-danger",onClick:()=>Kt(Pt,"buttonFlow",A),children:"Delete"})]})]},`action-${A}`)),n.jsx("button",{className:"admin-settings-ghost",onClick:()=>ja(Pt,"buttonFlow"),children:"+ Add Action Step"})]})]})]}):n.jsxs(n.Fragment,{children:[n.jsx("h4",{children:nn.name}),n.jsxs("div",{className:"admin-field-row",children:[n.jsx("span",{children:"States (Flow Chart)"}),n.jsx("div",{children:nn.states.filter(Boolean).join(" -> ")||"-"})]}),n.jsxs("div",{className:"admin-field-row",children:[n.jsx("span",{children:"Allowed Transitions"}),n.jsx("div",{children:nn.transitions.filter(Boolean).join(" | ")||"-"})]}),n.jsxs("div",{className:"admin-field-row",style:{alignItems:"flex-start"},children:[n.jsx("span",{children:"Action Flow"}),n.jsx("div",{children:nn.buttonFlow.filter(Boolean).length?nn.buttonFlow.filter(Boolean).map((m,A)=>`${A+1}. ${m}`).join(" | "):"-"})]})]})})}):n.jsx("div",{className:"admin-config-grid one",children:n.jsxs("article",{className:"admin-config-card",children:[n.jsx("p",{children:"No workflow available. Add one to continue."}),n.jsx("button",{className:"admin-settings-primary",onClick:Bm,children:"Add Workflow"})]})})]})]})})]}):n.jsxs(n.Fragment,{children:[fr,n.jsx("div",{style:{marginLeft:l?12:0},children:n.jsx("div",{className:Hn?"":"admin-settings-page",children:n.jsxs("section",{className:Hn?"":"admin-settings-main",children:[Hn&&n.jsxs("div",{className:"queue-panel-toolbar",children:[n.jsx("div",{className:"queue-panel-toolbar-left",children:n.jsx("h3",{style:{margin:0},children:"Queue & Panel management"})}),n.jsx("div",{className:"queue-panel-toolbar-actions",children:n.jsx("button",{className:"table-icon-btn",onClick:()=>c(m=>!m),title:l?"Show Menu":"Hide Menu","aria-label":l?"Show menu":"Hide menu",children:n.jsx("svg",{viewBox:"0 0 24 24",width:"14",height:"14",fill:"none",stroke:"currentColor",strokeWidth:"2",children:l?n.jsxs(n.Fragment,{children:[n.jsx("polyline",{points:"13 18 7 12 13 6"}),n.jsx("polyline",{points:"19 18 13 12 19 6"})]}):n.jsxs(n.Fragment,{children:[n.jsx("polyline",{points:"11 18 17 12 11 6"}),n.jsx("polyline",{points:"5 18 11 12 5 6"})]})})})})]}),!Hn&&n.jsx("div",{className:"admin-settings-main-head",children:n.jsxs("div",{children:[n.jsx("h2",{children:Qr}),n.jsxs("p",{children:[(Vs==null?void 0:Vs.label)||"Configuration"," configuration workspace"]})]})}),!Hn&&n.jsxs("div",{className:"admin-settings-toolbar",children:[n.jsx("div",{className:"admin-settings-inline-search",children:n.jsx("input",{placeholder:"Search fields...",value:i,onChange:m=>a(m.target.value)})}),n.jsxs("div",{className:"admin-settings-toolbar-actions",children:[n.jsx("button",{className:`admin-settings-ghost${d?" active":""}`,onClick:()=>p(m=>!m),children:d?"Recent Changes: ON":"Recent Changes"}),n.jsx("button",{className:"admin-settings-ghost",onClick:np,children:"Import"}),n.jsx("button",{className:"admin-settings-ghost",onClick:_c,children:"Export"}),n.jsx("button",{className:"admin-settings-ghost",onClick:()=>B(!0),children:"Reset"}),n.jsx("button",{className:"admin-settings-danger",onClick:()=>F(!0),children:"Revoke Keys"})]})]}),n.jsx("div",{className:"admin-settings-grid",children:wn.length>0?wn.map(m=>n.jsxs("article",{className:"admin-settings-card",children:[n.jsx("h3",{children:m.title}),n.jsx("p",{children:m.description}),m.fields.map(A=>qm(A))]},m.id)):n.jsxs("article",{className:"admin-settings-card",children:[n.jsxs("div",{className:"admin-settings-toolbar-actions",children:[n.jsx("button",{className:`admin-settings-ghost${L==="ticket"?" active":""}`,onClick:()=>X("ticket"),children:"Ticket"}),n.jsx("button",{className:`admin-settings-ghost${L==="asset"?" active":""}`,onClick:()=>X("asset"),children:"Asset"})]}),L==="ticket"?n.jsxs(n.Fragment,{children:[n.jsx("h3",{style:{marginTop:0},children:"Ticket Team Queues"}),n.jsx("p",{children:"Create/edit/delete queues with service account (app user) and visibility scope."}),n.jsxs("div",{className:"admin-settings-toolbar-actions",children:[n.jsx("button",{className:"admin-settings-ghost",onClick:Oc,children:"Add Queue"}),n.jsx("button",{className:"admin-settings-ghost",onClick:Ym,children:"Edit Queue"}),n.jsx("button",{className:"admin-settings-ghost",onClick:Xm,children:"Delete Queue"})]}),K&&ce&&n.jsxs("div",{style:{marginTop:10,border:"1px solid #e5e7eb",borderRadius:10,padding:12,background:"#fffafa"},children:[n.jsx("h4",{style:{margin:0},children:ce==="add"?"Add Ticket Queue Team":ce==="edit"?"Edit Ticket Queue Team":"Delete Ticket Queue Team"}),ce!=="add"&&n.jsxs("label",{className:"admin-field-row",style:{marginTop:10},children:[n.jsx("span",{children:"Queue Team"}),n.jsx("select",{value:ne,onChange:m=>{const A=m.target.value;R(A),ce==="edit"&&Ic(A)},children:Y.ticketQueues.map(m=>n.jsx("option",{value:m.id,children:m.label},m.id))})]}),ce!=="delete"&&n.jsxs(n.Fragment,{children:[n.jsxs("label",{className:"admin-field-row",style:{marginTop:10},children:[n.jsx("span",{children:"Queue/team name"}),n.jsx("input",{value:Q,onChange:m=>je(m.target.value),placeholder:"L1 Team, L2 Team, Accounts Team, HR Team"})]}),n.jsxs("label",{className:"admin-field-row",style:{marginTop:10},children:[n.jsx("span",{children:"Service account"}),n.jsx("input",{value:se,onChange:m=>ze(m.target.value),placeholder:"app.user"})]}),n.jsxs("label",{className:"admin-field-row",style:{marginTop:10},children:[n.jsx("span",{children:"Visibility roles (comma separated)"}),n.jsx("input",{value:Ze,onChange:m=>ye(m.target.value),placeholder:"ADMIN,AGENT"})]})]}),ce==="delete"&&n.jsxs("div",{style:{marginTop:10,border:"1px solid #fecaca",background:"#fef2f2",borderRadius:8,padding:"10px 12px"},children:[n.jsx("div",{style:{fontWeight:700,color:"#991b1b",marginBottom:4},children:"Danger Zone"}),n.jsx("p",{style:{margin:0,color:"#7f1d1d"},children:"This action permanently deletes the selected ticket queue team and cannot be undone."})]}),lt?n.jsx("p",{style:{marginTop:10,color:"#b91c1c"},children:lt}):null,n.jsxs("div",{className:"admin-settings-modal-actions",style:{marginTop:10},children:[n.jsx("button",{className:"admin-settings-ghost",onClick:Bi,children:"Cancel"}),n.jsx("button",{className:"admin-settings-primary",onClick:Zm,children:ce==="delete"?"Delete":"Save"})]})]}),n.jsx("div",{className:"admin-queue-rules-plain",children:Y.ticketQueues.length===0?n.jsx("div",{className:"admin-queue-rule-row",children:n.jsx("small",{children:"No ticket queues configured."})}):Y.ticketQueues.map(m=>n.jsxs("div",{className:"admin-queue-rule-row",children:[n.jsx("span",{children:m.label}),n.jsxs("small",{children:["App User: ",m.serviceAccount||"Not set"," | Scope: ",(m.visibilityRoles||[]).join(", ")||"ALL"," | Default: Unassigned (non-deletable)"]})]},m.id))})]}):n.jsxs(n.Fragment,{children:[n.jsx("h3",{style:{marginTop:0},children:"Asset Categories & Subcategories"}),n.jsx("p",{children:"Maintain category tree like Hardware > Laptop without hardcoding."}),n.jsxs("div",{className:"admin-settings-toolbar-actions",children:[n.jsx("button",{className:"admin-settings-ghost",onClick:ep,children:"Add Category"}),n.jsx("button",{className:"admin-settings-ghost",onClick:tp,children:"Edit Category"}),n.jsx("button",{className:"admin-settings-ghost",onClick:_n,children:"Delete Category"})]}),Me&&Fe&&n.jsxs("div",{style:{marginTop:10,border:"1px solid #e5e7eb",borderRadius:10,padding:12,background:"#fffafa"},children:[n.jsx("h4",{style:{margin:0},children:Fe==="add"?"Add Asset Category":Fe==="edit"?"Edit Asset Category":"Delete Asset Category"}),Fe!=="add"&&n.jsxs("label",{className:"admin-field-row",style:{marginTop:10},children:[n.jsx("span",{children:"Category"}),n.jsx("select",{value:he,onChange:m=>{const A=m.target.value;we(A),Fe==="edit"&&$c(A)},children:Y.assetCategories.map(m=>n.jsx("option",{value:m.id,children:m.label},m.id))})]}),Fe!=="delete"&&n.jsxs(n.Fragment,{children:[n.jsxs("label",{className:"admin-field-row",style:{marginTop:10},children:[n.jsx("span",{children:"Main category name"}),n.jsx("input",{value:$,onChange:m=>V(m.target.value),placeholder:"Hardware"})]}),n.jsxs("label",{className:"admin-field-row",style:{marginTop:10},children:[n.jsx("span",{children:"Subcategories (comma separated)"}),n.jsx("input",{value:ve,onChange:m=>ge(m.target.value),placeholder:"Laptop, Workstation, Mobile"})]}),n.jsxs("label",{className:"admin-field-row",style:{marginTop:10},children:[n.jsx("span",{children:"Visibility roles (comma separated)"}),n.jsx("input",{value:Ve,onChange:m=>Le(m.target.value),placeholder:"ADMIN,AGENT"})]})]}),Fe==="delete"&&n.jsxs("div",{style:{marginTop:10,border:"1px solid #fecaca",background:"#fef2f2",borderRadius:8,padding:"10px 12px"},children:[n.jsx("div",{style:{fontWeight:700,color:"#991b1b",marginBottom:4},children:"Danger Zone"}),n.jsx("p",{style:{margin:0,color:"#7f1d1d"},children:"This action permanently deletes the selected asset category and cannot be undone."})]}),H?n.jsx("p",{style:{marginTop:10,color:"#b91c1c"},children:H}):null,n.jsxs("div",{className:"admin-settings-modal-actions",style:{marginTop:10},children:[n.jsx("button",{className:"admin-settings-ghost",onClick:Ca,children:"Cancel"}),n.jsx("button",{className:"admin-settings-primary",onClick:zl,children:Fe==="delete"?"Delete":"Save"})]})]}),n.jsx("div",{className:"admin-queue-rules-plain",children:Y.assetCategories.length===0?n.jsx("div",{className:"admin-queue-rule-row",children:n.jsx("small",{children:"No asset categories configured."})}):Y.assetCategories.map(m=>n.jsxs("div",{className:"admin-queue-rule-row",children:[n.jsx("span",{children:m.label}),n.jsxs("small",{children:[(m.subcategories||[]).length?m.subcategories.join(", "):"No subcategory"," | Scope: ",(m.visibilityRoles||[]).join(", ")||"ALL"]})]},m.id))})]})]})})]})})}),j&&n.jsx("div",{className:"admin-settings-modal-backdrop",onClick:()=>C(!1),children:n.jsxs("div",{className:"admin-settings-modal",onClick:m=>m.stopPropagation(),children:[n.jsx("h4",{children:"Save configuration changes"}),n.jsxs("p",{children:["Confirm applying updates to ",Qr,". This action will be tracked in audit history."]}),n.jsxs("div",{className:"admin-settings-modal-actions",children:[n.jsx("button",{className:"admin-settings-ghost",onClick:()=>C(!1),children:"Cancel"}),n.jsx("button",{className:"admin-settings-primary",onClick:Dc,children:"Save Changes"})]})]})}),E&&n.jsx("div",{className:"admin-settings-modal-backdrop",onClick:()=>B(!1),children:n.jsxs("div",{className:"admin-settings-modal",onClick:m=>m.stopPropagation(),children:[n.jsx("h4",{children:"Confirm reset"}),n.jsxs("p",{children:["This will reset current settings to default values for ",Qr,". Continue?"]}),n.jsxs("div",{className:"admin-settings-modal-actions",children:[n.jsx("button",{className:"admin-settings-ghost",onClick:()=>B(!1),children:"Cancel"}),n.jsx("button",{className:"admin-settings-danger",onClick:Fc,children:"Confirm Reset"})]})]})}),_&&n.jsx("div",{className:"admin-settings-modal-backdrop",onClick:()=>F(!1),children:n.jsxs("div",{className:"admin-settings-modal",onClick:m=>m.stopPropagation(),children:[n.jsx("h4",{children:"Revoke API keys"}),n.jsx("p",{children:"All currently active integration keys will be revoked immediately. Continue?"}),n.jsxs("div",{className:"admin-settings-modal-actions",children:[n.jsx("button",{className:"admin-settings-ghost",onClick:()=>F(!1),children:"Cancel"}),n.jsx("button",{className:"admin-settings-danger",onClick:pr,children:"Revoke Keys"})]})]})})]})}function c1({initialWidths:e,minWidth:t=1}){const[s,r]=oe.useState(e),[i,a]=oe.useState(!1),l=oe.useRef(null),c=oe.useCallback((p,g)=>{p<0||p>=s.length||(g.preventDefault(),g.stopPropagation(),l.current={index:p,startX:g.clientX,startWidth:s[p]},a(!0),document.body.classList.add("is-column-resizing"))},[s]);oe.useEffect(()=>{if(!i)return;const p=v=>{const S=l.current;if(!S)return;const O=v.clientX-S.startX,x=Math.max(t,S.startWidth+O);r(y=>{if(y[S.index]===x)return y;const M=[...y];return M[S.index]=x,M})},g=()=>{l.current&&(l.current=null,a(!1),document.body.classList.remove("is-column-resizing"))};return window.addEventListener("mousemove",p),window.addEventListener("mouseup",g),()=>{window.removeEventListener("mousemove",p),window.removeEventListener("mouseup",g),document.body.classList.remove("is-column-resizing")}},[i,t]);const d=oe.useCallback((p,g)=>{r(v=>{if(p<0||p>=v.length)return v;const S=[...v];return S[p]=Math.max(t,g),S})},[t]);return{widths:s,setWidths:r,startResize:c,setColumnWidth:d}}const OL=["Table","Board"];function tj(e){const t=String(e||"").trim();return t?t.split(" ").filter(Boolean).slice(0,2).map(r=>r[0]).join("").toUpperCase():"NA"}function Ad(e){if(!e)return"-";const t=new Date(e);return Number.isNaN(t.getTime())?"-":t.toLocaleString()}function $L({toolbarSearch:e="",controlledPage:t,onPageChange:s,onPaginationMetaChange:r}){const i=typeof document<"u"?document.getElementById("ticket-left-panel"):null,[a,l]=u.useState("Table"),[c,d]=u.useState(e),[p,g]=u.useState([]),[v,S]=u.useState(!1),[O,x]=u.useState(!1),[y,M]=u.useState(!1),[k,j]=u.useState(null),[C,E]=u.useState(1),B=_m(),[_,F]=u.useState(!1),[J,ue]=u.useState(!1),[Y,xe]=u.useState(()=>typeof window>"u"?!1:window.innerWidth<=1100),[Ne,Re]=u.useState(()=>ts().users),[L,X]=u.useState("allUsers"),[ce,N]=u.useState(!1),[K,W]=u.useState(0),[ne,R]=u.useState("all"),[Q,je]=u.useState({name:"",personalEmail:"",phone:"",employeeId:"",workEmail:"",designation:"",department:"",manager:"",dateOfJoining:"",employmentType:"",workMode:""}),[se,ze]=u.useState([]),Ze=u.useRef(null),[ye,lt]=u.useState({name:"",personalEmail:"",workEmail:"",phone:"",employeeId:"",department:"",manager:"",dateOfJoining:"",employmentType:"Full-time",workMode:"Onsite",designation:""}),{widths:We,startResize:Fe}=c1({initialWidths:[30,180,160,120,120,180,140,160,160,140,140,120,90],minWidth:0}),le=async()=>{S(!0);try{const T=await ua({q:c||void 0}),Se=Array.isArray(T)?T:[];g(Se)}catch(T){console.warn("Failed to fetch users",T),g([])}finally{S(!1)}};u.useEffect(()=>{le()},[c,K]),u.useEffect(()=>{d(e)},[e]),u.useEffect(()=>{const T="users-queue-expanded",Se="users-queue-collapsed";return Y?(document.body.classList.remove(T),document.body.classList.add(Se)):(document.body.classList.add(T),document.body.classList.remove(Se)),()=>{document.body.classList.remove(T),document.body.classList.remove(Se)}},[Y]),u.useEffect(()=>(document.body.classList.add("users-view-active"),()=>document.body.classList.remove("users-view-active")),[]),u.useEffect(()=>{const T=()=>Re(ts().users);return window.addEventListener("left-panel-config-updated",T),()=>window.removeEventListener("left-panel-config-updated",T)},[]),u.useEffect(()=>{const T=Se=>{const ke=Se.detail;!ke||ke.target!=="users"||(ke.action==="new"&&(j(null),x(!0)),ke.action==="filter"&&ue(Pe=>!Pe),ke.action==="refresh"&&W(Pe=>Pe+1))};return window.addEventListener("shared-toolbar-action",T),()=>window.removeEventListener("shared-toolbar-action",T)},[]),u.useEffect(()=>{const T=Se=>{const ke=Se.detail;!ke||ke.target!=="users"||ke.action==="toggle-left-panel"&&xe(Pe=>!Pe)};return window.addEventListener("shared-toolbar-action",T),()=>window.removeEventListener("shared-toolbar-action",T)},[]);const Me=async()=>{var T,Se;if(!ye.name.trim()){alert("Full Name is required.");return}if(!ye.workEmail.trim()&&!ye.personalEmail.trim()){alert("Work Email or Personal Email is required.");return}M(!0);try{const ke=ye.workEmail.trim(),Pe=ye.personalEmail.trim();await PP({name:ye.name.trim()||void 0,email:ke||Pe,personalEmail:Pe||void 0,workEmail:ke||void 0,phone:ye.phone.trim()||void 0,employeeId:ye.employeeId.trim()||void 0,department:ye.department.trim()||void 0,reportingManager:ye.manager.trim()||void 0,dateOfJoining:ye.dateOfJoining||void 0,employmentType:ye.employmentType,workMode:ye.workMode,designation:ye.designation.trim()||void 0,role:"USER"}),x(!1),lt({name:"",personalEmail:"",workEmail:"",phone:"",employeeId:"",department:"",manager:"",dateOfJoining:"",employmentType:"Full-time",workMode:"Onsite",designation:""}),await le()}catch(ke){alert(((Se=(T=ke==null?void 0:ke.response)==null?void 0:T.data)==null?void 0:Se.error)||(ke==null?void 0:ke.message)||"Failed to create user")}finally{M(!1)}},G=T=>{j(T),lt({name:T.name||"",personalEmail:T.personalEmail||"",workEmail:T.workEmail||T.email||"",phone:T.phone||"",employeeId:T.employeeId||"",department:T.department||"",manager:T.reportingManager||"",dateOfJoining:T.dateOfJoining?String(T.dateOfJoining).slice(0,10):"",employmentType:T.employmentType||"Full-time",workMode:T.workMode||"Onsite",designation:T.designation||""}),x(!0)},he=async()=>{var T,Se;if(k){if(!ye.name.trim()){alert("Full Name is required.");return}if(!ye.workEmail.trim()&&!ye.personalEmail.trim()){alert("Work Email or Personal Email is required.");return}M(!0);try{const ke=ye.workEmail.trim(),Pe=ye.personalEmail.trim(),Xe=await ll(k.id,{name:ye.name.trim()||void 0,email:ke||Pe,personalEmail:Pe||void 0,workEmail:ke||void 0,phone:ye.phone.trim()||void 0,employeeId:ye.employeeId.trim()||void 0,department:ye.department.trim()||void 0,reportingManager:ye.manager.trim()||void 0,dateOfJoining:ye.dateOfJoining||void 0,employmentType:ye.employmentType,workMode:ye.workMode,designation:ye.designation.trim()||void 0});g(dt=>dt.map(w=>w.id===k.id?{...w,...Xe,email:(Xe==null?void 0:Xe.email)||ke||Pe}:w)),x(!1),j(null),lt({name:"",personalEmail:"",workEmail:"",phone:"",employeeId:"",department:"",manager:"",dateOfJoining:"",employmentType:"Full-time",workMode:"Onsite",designation:""}),await le()}catch(ke){alert(((Se=(T=ke==null?void 0:ke.response)==null?void 0:T.data)==null?void 0:Se.error)||(ke==null?void 0:ke.message)||"Failed to update user")}finally{M(!1)}}},we=async T=>{var ke,Pe;const Se=T.name||T.email||"this user";if(window.confirm(`Delete ${Se}?`)){M(!0);try{await LP(T.id),g(Xe=>Xe.filter(dt=>dt.id!==T.id)),ze(Xe=>Xe.filter(dt=>dt!==T.id)),await le()}catch(Xe){alert(((Pe=(ke=Xe==null?void 0:Xe.response)==null?void 0:ke.data)==null?void 0:Pe.error)||(Xe==null?void 0:Xe.message)||"Failed to delete user")}finally{M(!1)}}},$=u.useMemo(()=>{const T=(Se,ke)=>String(Se||"").toLowerCase().includes(ke.toLowerCase());return p.filter(Se=>!(L==="byProject"&&ne!=="all"&&String(Se.department||"").toLowerCase()!==ne.toLowerCase()||Q.name&&!T(Se.name,Q.name)&&!T(Se.email,Q.name)||Q.personalEmail&&!T(Se.personalEmail,Q.personalEmail)||Q.phone&&!T(Se.phone,Q.phone)||Q.employeeId&&!T(Se.employeeId,Q.employeeId)||Q.workEmail&&!T(Se.workEmail||Se.email,Q.workEmail)||Q.designation&&!T(Se.designation,Q.designation)||Q.department&&!T(Se.department,Q.department)||Q.manager&&!T(Se.reportingManager,Q.manager)||Q.dateOfJoining&&!T(Se.dateOfJoining?Ad(Se.dateOfJoining):"",Q.dateOfJoining)||Q.employmentType&&!T(Se.employmentType,Q.employmentType)||Q.workMode&&!T(Se.workMode,Q.workMode)))},[p,Q,L,ne]),V=t??C,ve=T=>{const Se=typeof T=="function"?T(V):T;if(typeof t=="number"){s==null||s(Se);return}E(Se)},ge=$.length,Ve=Math.max(1,Math.ceil(ge/B)),Le=Math.min(V,Ve),H=(Le-1)*B,pe=$.slice(H,H+B),_e=pe.map(T=>T.id),Ye=_e.length>0&&_e.every(T=>se.includes(T));u.useMemo(()=>{const T=p.length,Se=p.reduce((Pe,Xe)=>{const dt=Xe.employmentType||"Unspecified";return Pe[dt]=(Pe[dt]||0)+1,Pe},{}),ke=p.reduce((Pe,Xe)=>{const dt=Xe.workMode||"Unspecified";return Pe[dt]=(Pe[dt]||0)+1,Pe},{});return{totalCount:T,employment:Object.entries(Se),workMode:Object.entries(ke)}},[p]),u.useEffect(()=>{V!==Le&&ve(Le)},[Le,V]),u.useEffect(()=>{r==null||r({page:Le,totalPages:Ve,totalRows:ge,rangeStart:ge===0?0:H+1,rangeEnd:Math.min(H+B,ge)})},[Le,Ve,ge,H,r]),u.useEffect(()=>{if(!_)return;const T=Se=>{const ke=Se.target;Ze.current&&!Ze.current.contains(ke)&&F(!1)};return document.addEventListener("mousedown",T),()=>document.removeEventListener("mousedown",T)},[_]);const et=()=>{ze(Ye?T=>T.filter(Se=>!_e.includes(Se)):T=>Array.from(new Set([...T,..._e])))},ct=T=>{ze(Se=>Se.includes(T)?Se.filter(ke=>ke!==T):[...Se,T])},rt=[{key:"name",label:"Full Name"},{key:"personalEmail",label:"Personal Email"},{key:"phone",label:"Phone Number"},{key:"employeeId",label:"Employee ID"},{key:"workEmail",label:"Work Email"},{key:"designation",label:"Designation"},{key:"department",label:"Department/Project"},{key:"reportingManager",label:"Reporting Manager"},{key:"dateOfJoining",label:"Date of Joining"},{key:"employmentType",label:"Employment Type"},{key:"workMode",label:"Work mode"}],qe=T=>({name:T.name||"",personalEmail:T.personalEmail||"",phone:T.phone||"",employeeId:T.employeeId||"",workEmail:T.workEmail||T.email||"",designation:T.designation||"",department:T.department||"",reportingManager:T.reportingManager||"",dateOfJoining:T.dateOfJoining?Ad(T.dateOfJoining):"",employmentType:T.employmentType||"",workMode:T.workMode||""}),yt=(T,Se)=>{const ke=URL.createObjectURL(T),Pe=document.createElement("a");Pe.href=ke,Pe.download=Se,document.body.appendChild(Pe),Pe.click(),Pe.remove(),URL.revokeObjectURL(ke)},St=T=>T.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;"),hn=T=>{const Se=rt.map(Pe=>`"${Pe.label.replace(/"/g,'""')}"`).join(","),ke=T.map(Pe=>rt.map(Xe=>`"${String(Pe[Xe.key]??"").replace(/"/g,'""')}"`).join(","));return[Se,...ke].join(`
`)},tn=T=>`<?xml version="1.0" encoding="UTF-8"?><users>${T.map(ke=>`<user>${rt.map(Xe=>`<${Xe.key}>${St(String(ke[Xe.key]??""))}</${Xe.key}>`).join("")}</user>`).join("")}</users>`,fe=T=>{const Se=rt.map(Pe=>`<th>${Pe.label}</th>`).join(""),ke=T.map(Pe=>`<tr>${rt.map(Xe=>`<td>${String(Pe[Xe.key]??"")}</td>`).join("")}</tr>`).join("");return`<html><head><meta charset="UTF-8" /></head><body><table>${Se?`<tr>${Se}</tr>`:""}${ke}</table></body></html>`},gt=T=>{const Pe=`BT /F1 10 Tf 50 760 Td (${T.flatMap($e=>rt.map(re=>`${re.label}: ${String($e[re.key]??"")}`)).join("\\n").replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")}) Tj ET`,Xe=["1 0 obj << /Type /Catalog /Pages 2 0 R >> endobj","2 0 obj << /Type /Pages /Kids [3 0 R] /Count 1 >> endobj","3 0 obj << /Type /Page /Parent 2 0 R /MediaBox [0 0 612 792] /Contents 4 0 R /Resources << /Font << /F1 5 0 R >> >> >> endobj",`4 0 obj << /Length ${Pe.length} >> stream\\n${Pe}\\nendstream endobj`,"5 0 obj << /Type /Font /Subtype /Type1 /BaseFont /Helvetica >> endobj"];let dt="xref\\n0 6\\n0000000000 65535 f \\n",w=9;const ee=Xe.map($e=>{const re=$e+"\\n";return dt+=String(w).padStart(10,"0")+" 00000 n \\n",w+=re.length,re}).join(""),de=`trailer << /Size 6 /Root 1 0 R >>\\nstartxref\\n${w}\\n%%EOF`;return`%PDF-1.4\\n${ee}${dt}${de}`},He=(T,Se)=>{const Pe=(Se==="all"?$:pe).map(qe);if(T==="json"){const w=new Blob([JSON.stringify(Pe,null,2)],{type:"application/json"});yt(w,Se==="all"?"Users.json":"Users-view.json"),F(!1);return}if(T==="xml"){const w=new Blob([tn(Pe)],{type:"application/xml"});yt(w,Se==="all"?"Users.xml":"Users-view.xml"),F(!1);return}if(T==="xls"){const w=new Blob([fe(Pe)],{type:"application/vnd.ms-excel"});yt(w,Se==="all"?"Users.xls":"Users-view.xls"),F(!1);return}if(T==="pdf"){const w=new Blob([gt(Pe)],{type:"application/pdf"});yt(w,Se==="all"?"Users.pdf":"Users-view.pdf"),F(!1);return}const Xe=hn(Pe),dt=new Blob([Xe],{type:"text/csv;charset=utf-8"});yt(dt,Se==="all"?"Users.csv":"Users-view.csv"),F(!1)},At=u.useMemo(()=>{const T=p.reduce((ke,Pe)=>{const Xe=String(Pe.department||"").trim()||"General",dt=Xe.toLowerCase();return ke[dt]||(ke[dt]={label:Xe,value:Xe,count:0}),ke[dt].count+=1,ke},{});return Ne.filter(ke=>String(ke.field||"").toLowerCase()==="department").forEach(ke=>{const Pe=String(ke.value||"").trim();if(!Pe)return;const Xe=Pe.toLowerCase(),dt=p.filter(w=>String(w.department||"").toLowerCase()===Xe).length;T[Xe]?T[Xe]={...T[Xe],label:ke.label||T[Xe].label,value:Pe,count:dt}:T[Xe]={label:ke.label||Pe,value:Pe,count:dt}}),Object.values(T).sort((ke,Pe)=>ke.label.localeCompare(Pe.label))},[p,Ne]),mt=T=>T==="project"?n.jsx("svg",{viewBox:"0 0 24 24",width:"14",height:"14",fill:"none",stroke:"currentColor",strokeWidth:"2",children:n.jsx("path",{d:"M3 7a2 2 0 0 1 2-2h5l2 2h7a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V7z"})}):n.jsxs("svg",{viewBox:"0 0 24 24",width:"14",height:"14",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[n.jsx("circle",{cx:"11",cy:"11",r:"7"}),n.jsx("line",{x1:"16.5",y1:"16.5",x2:"21",y2:"21"})]}),Ut=!Y&&i?Mi.createPortal(n.jsxs("aside",{className:"user-left-panel",children:[n.jsxs("div",{className:"queue-header",children:[n.jsx("div",{className:"queue-title-icon","aria-hidden":"true",children:n.jsxs("svg",{viewBox:"0 0 24 24",width:"18",height:"18",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[n.jsx("circle",{cx:"12",cy:"8",r:"3"}),n.jsx("path",{d:"M5 19a7 7 0 0 1 14 0"})]})}),n.jsx("div",{className:"queue-title",children:n.jsxs("div",{className:"queue-title-top",children:[n.jsx("button",{className:"queue-title-btn",onClick:()=>N(!0),title:"Select user queue view",children:n.jsx("div",{className:"queue-title-text",children:L==="byProject"?"Users by Project":"All Users"})}),n.jsx("button",{className:"queue-edit-btn",onClick:()=>N(!0),title:"Change user queue view",children:n.jsxs("svg",{viewBox:"0 0 24 24",width:"13",height:"13",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[n.jsx("path",{d:"M12 20h9"}),n.jsx("path",{d:"M16.5 3.5a2.1 2.1 0 0 1 3 3L7 19l-4 1 1-4Z"})]})})]})}),n.jsx("button",{className:"queue-collapse-btn",title:"Hide Menu",onClick:()=>xe(!0),children:n.jsxs("svg",{viewBox:"0 0 24 24",width:"14",height:"14",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[n.jsx("polyline",{points:"13 18 7 12 13 6"}),n.jsx("polyline",{points:"19 18 13 12 19 6"})]})})]}),n.jsx("div",{className:"queue-list",children:ce?n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:`queue-item${L==="byProject"?" queue-item-active":""}`,onClick:()=>{X("byProject"),R("all"),N(!1)},children:[n.jsx("div",{className:"queue-avatar",children:mt("project")}),n.jsx("div",{className:"queue-name",children:"Users by Project"}),n.jsx("div",{className:"queue-count",children:p.length})]}),n.jsxs("div",{className:`queue-item${L==="allUsers"?" queue-item-active":""}`,onClick:()=>{X("allUsers"),R("all"),N(!1)},children:[n.jsx("div",{className:"queue-avatar",children:mt("all")}),n.jsx("div",{className:"queue-name",children:"All Users"}),n.jsx("div",{className:"queue-count",children:p.length})]})]}):L==="byProject"?n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:`queue-item${ne==="all"?" queue-item-active":""}`,onClick:()=>R("all"),children:[n.jsx("div",{className:"queue-avatar",children:mt("all")}),n.jsx("div",{className:"queue-name",children:"All Projects"}),n.jsx("div",{className:"queue-count",children:p.length})]}),At.map(T=>n.jsxs("div",{className:`queue-item${ne===T.value?" queue-item-active":""}`,onClick:()=>R(T.value),children:[n.jsx("div",{className:"queue-avatar",children:mt("project")}),n.jsx("div",{className:"queue-name",children:T.label}),n.jsx("div",{className:"queue-count",children:T.count})]},T.value))]}):n.jsxs("div",{className:"queue-item queue-item-active",children:[n.jsx("div",{className:"queue-avatar",children:mt("all")}),n.jsx("div",{className:"queue-name",children:"All Users"}),n.jsx("div",{className:"queue-count",children:p.length})]})})]}),i):null;return n.jsxs(n.Fragment,{children:[Ut,n.jsxs("div",{className:"users-view",children:[n.jsxs("div",{className:"users-filters-bar",children:[n.jsx("div",{className:"users-filters"}),n.jsxs("div",{className:"users-toolbar-right",children:[n.jsx("div",{className:"users-tabs",children:OL.map(T=>n.jsx("button",{className:`users-tab ${a===T?"active":""}`,onClick:()=>l(T),title:T,"aria-label":T,children:T==="Table"?n.jsxs("svg",{viewBox:"0 0 24 24",width:"16",height:"16","aria-hidden":"true",children:[n.jsx("rect",{x:"3",y:"4",width:"18",height:"16",rx:"2",fill:"none",stroke:"currentColor",strokeWidth:"1.5"}),n.jsx("path",{d:"M3 9h18M3 14h18M8 4v16M14 4v16",fill:"none",stroke:"currentColor",strokeWidth:"1.5"})]}):n.jsxs("svg",{viewBox:"0 0 24 24",width:"16",height:"16","aria-hidden":"true",children:[n.jsx("rect",{x:"3",y:"4",width:"8",height:"7",rx:"1.5",fill:"none",stroke:"currentColor",strokeWidth:"1.5"}),n.jsx("rect",{x:"13",y:"4",width:"8",height:"7",rx:"1.5",fill:"none",stroke:"currentColor",strokeWidth:"1.5"}),n.jsx("rect",{x:"3",y:"13",width:"8",height:"7",rx:"1.5",fill:"none",stroke:"currentColor",strokeWidth:"1.5"}),n.jsx("rect",{x:"13",y:"13",width:"8",height:"7",rx:"1.5",fill:"none",stroke:"currentColor",strokeWidth:"1.5"})]})},T))}),n.jsxs("div",{className:"users-export",ref:Ze,children:[n.jsx("button",{className:"users-ghost-btn",onClick:()=>F(T=>!T),children:"Export"}),_&&n.jsxs("div",{className:"users-export-menu",children:[n.jsxs("button",{onClick:()=>He("json","all"),children:[n.jsxs("svg",{viewBox:"0 0 24 24",width:"14",height:"14","aria-hidden":"true",children:[n.jsx("path",{d:"M6 4h9l3 3v13H6z",fill:"none",stroke:"currentColor",strokeWidth:"1.5"}),n.jsx("path",{d:"M15 4v3h3",fill:"none",stroke:"currentColor",strokeWidth:"1.5"})]}),"JSON"]}),n.jsxs("button",{onClick:()=>He("xml","all"),children:[n.jsxs("svg",{viewBox:"0 0 24 24",width:"14",height:"14","aria-hidden":"true",children:[n.jsx("path",{d:"M6 4h9l3 3v13H6z",fill:"none",stroke:"currentColor",strokeWidth:"1.5"}),n.jsx("path",{d:"M15 4v3h3",fill:"none",stroke:"currentColor",strokeWidth:"1.5"})]}),"XML"]}),n.jsx("div",{className:"users-export-divider"}),n.jsxs("button",{onClick:()=>He("csv","all"),children:[n.jsxs("svg",{viewBox:"0 0 24 24",width:"14",height:"14","aria-hidden":"true",children:[n.jsx("path",{d:"M6 4h9l3 3v13H6z",fill:"none",stroke:"currentColor",strokeWidth:"1.5"}),n.jsx("path",{d:"M15 4v3h3",fill:"none",stroke:"currentColor",strokeWidth:"1.5"})]}),"CSV (all elements)"]}),n.jsxs("button",{onClick:()=>He("csv","view"),children:[n.jsxs("svg",{viewBox:"0 0 24 24",width:"14",height:"14","aria-hidden":"true",children:[n.jsx("path",{d:"M6 4h9l3 3v13H6z",fill:"none",stroke:"currentColor",strokeWidth:"1.5"}),n.jsx("path",{d:"M15 4v3h3",fill:"none",stroke:"currentColor",strokeWidth:"1.5"})]}),"CSV (only view)"]}),n.jsx("div",{className:"users-export-divider"}),n.jsxs("button",{onClick:()=>He("xls","all"),children:[n.jsxs("svg",{viewBox:"0 0 24 24",width:"14",height:"14","aria-hidden":"true",children:[n.jsx("path",{d:"M6 4h9l3 3v13H6z",fill:"none",stroke:"currentColor",strokeWidth:"1.5"}),n.jsx("path",{d:"M15 4v3h3",fill:"none",stroke:"currentColor",strokeWidth:"1.5"})]}),"XLS (all elements)"]}),n.jsxs("button",{onClick:()=>He("xls","view"),children:[n.jsxs("svg",{viewBox:"0 0 24 24",width:"14",height:"14","aria-hidden":"true",children:[n.jsx("path",{d:"M6 4h9l3 3v13H6z",fill:"none",stroke:"currentColor",strokeWidth:"1.5"}),n.jsx("path",{d:"M15 4v3h3",fill:"none",stroke:"currentColor",strokeWidth:"1.5"})]}),"XLS (only view)"]}),n.jsx("div",{className:"users-export-divider"}),n.jsxs("button",{onClick:()=>He("pdf","all"),children:[n.jsxs("svg",{viewBox:"0 0 24 24",width:"14",height:"14","aria-hidden":"true",children:[n.jsx("path",{d:"M6 4h9l3 3v13H6z",fill:"none",stroke:"currentColor",strokeWidth:"1.5"}),n.jsx("path",{d:"M15 4v3h3",fill:"none",stroke:"currentColor",strokeWidth:"1.5"})]}),"PDF (all elements)"]}),n.jsxs("button",{onClick:()=>He("pdf","view"),children:[n.jsxs("svg",{viewBox:"0 0 24 24",width:"14",height:"14","aria-hidden":"true",children:[n.jsx("path",{d:"M6 4h9l3 3v13H6z",fill:"none",stroke:"currentColor",strokeWidth:"1.5"}),n.jsx("path",{d:"M15 4v3h3",fill:"none",stroke:"currentColor",strokeWidth:"1.5"})]}),"PDF (only view)"]})]})]}),n.jsx("button",{className:"users-ghost-btn",title:"Filter",onClick:()=>ue(T=>!T),children:n.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:n.jsx("polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"})})}),n.jsx("button",{className:"users-primary-btn",onClick:()=>{j(null),x(!0)},children:"Add User"})]})]}),a==="Table"&&n.jsx("div",{className:"users-table",children:n.jsxs("table",{className:"users-grid",style:{tableLayout:"fixed",width:"100%",minWidth:`${We.reduce((T,Se)=>T+Se,0)}px`},children:[n.jsx("colgroup",{children:We.map((T,Se)=>n.jsx("col",{style:{width:`${T}px`}},Se))}),n.jsxs("thead",{children:[n.jsxs("tr",{children:[n.jsx("th",{className:"users-col check",children:n.jsx("input",{type:"checkbox","aria-label":"Select all",checked:Ye,onChange:et})}),n.jsxs("th",{className:"users-col name",children:[n.jsx("span",{className:"col-resize-handle",onMouseDown:T=>Fe(1,T)}),"Full name"]}),n.jsxs("th",{className:"users-col personalEmail",children:[n.jsx("span",{className:"col-resize-handle",onMouseDown:T=>Fe(2,T)}),"Personal Email"]}),n.jsxs("th",{className:"users-col phone",children:[n.jsx("span",{className:"col-resize-handle",onMouseDown:T=>Fe(3,T)}),"Phone"]}),n.jsxs("th",{className:"users-col employeeId",children:[n.jsx("span",{className:"col-resize-handle",onMouseDown:T=>Fe(4,T)}),"Employee ID"]}),n.jsxs("th",{className:"users-col workEmail",children:[n.jsx("span",{className:"col-resize-handle",onMouseDown:T=>Fe(5,T)}),"Work Email"]}),n.jsxs("th",{className:"users-col designation",children:[n.jsx("span",{className:"col-resize-handle",onMouseDown:T=>Fe(6,T)}),"Designation"]}),n.jsxs("th",{className:"users-col department",children:[n.jsx("span",{className:"col-resize-handle",onMouseDown:T=>Fe(7,T)}),"Department/Project"]}),n.jsxs("th",{className:"users-col manager",children:[n.jsx("span",{className:"col-resize-handle",onMouseDown:T=>Fe(8,T)}),"Reporting Manager"]}),n.jsxs("th",{className:"users-col doj",children:[n.jsx("span",{className:"col-resize-handle",onMouseDown:T=>Fe(9,T)}),"Date of Joining"]}),n.jsxs("th",{className:"users-col employmentType",children:[n.jsx("span",{className:"col-resize-handle",onMouseDown:T=>Fe(10,T)}),"Employment Type"]}),n.jsxs("th",{className:"users-col workMode",children:[n.jsx("span",{className:"col-resize-handle",onMouseDown:T=>Fe(11,T)}),"Work Mode"]}),n.jsxs("th",{className:"users-col actions",children:[n.jsx("span",{className:"col-resize-handle",onMouseDown:T=>Fe(12,T)}),"Actions"]})]}),J&&n.jsxs("tr",{className:"users-filter-row",children:[n.jsx("th",{className:"users-col check",children:n.jsx("button",{className:"filter-clear-btn",onClick:()=>{je({name:"",personalEmail:"",phone:"",employeeId:"",workEmail:"",designation:"",department:"",manager:"",dateOfJoining:"",employmentType:"",workMode:""}),ue(!1)},title:"Clear filters","aria-label":"Clear filters",children:n.jsx("svg",{viewBox:"0 0 24 24",width:"14",height:"14",fill:"none",stroke:"currentColor",strokeWidth:"2",children:n.jsx("path",{d:"M18 6 6 18M6 6l12 12"})})})}),n.jsx("th",{className:"users-col name",children:n.jsx("input",{className:"table-filter-input",value:Q.name,onChange:T=>je({...Q,name:T.target.value})})}),n.jsx("th",{className:"users-col personalEmail",children:n.jsx("input",{className:"table-filter-input",value:Q.personalEmail,onChange:T=>je({...Q,personalEmail:T.target.value})})}),n.jsx("th",{className:"users-col phone",children:n.jsx("input",{className:"table-filter-input",value:Q.phone,onChange:T=>je({...Q,phone:T.target.value})})}),n.jsx("th",{className:"users-col employeeId",children:n.jsx("input",{className:"table-filter-input",value:Q.employeeId,onChange:T=>je({...Q,employeeId:T.target.value})})}),n.jsx("th",{className:"users-col workEmail",children:n.jsx("input",{className:"table-filter-input",value:Q.workEmail,onChange:T=>je({...Q,workEmail:T.target.value})})}),n.jsx("th",{className:"users-col designation",children:n.jsx("input",{className:"table-filter-input",value:Q.designation,onChange:T=>je({...Q,designation:T.target.value})})}),n.jsx("th",{className:"users-col department",children:n.jsx("input",{className:"table-filter-input",value:Q.department,onChange:T=>je({...Q,department:T.target.value})})}),n.jsx("th",{className:"users-col manager",children:n.jsx("input",{className:"table-filter-input",value:Q.manager,onChange:T=>je({...Q,manager:T.target.value})})}),n.jsx("th",{className:"users-col doj",children:n.jsx("input",{className:"table-filter-input",value:Q.dateOfJoining,onChange:T=>je({...Q,dateOfJoining:T.target.value})})}),n.jsx("th",{className:"users-col employmentType",children:n.jsx("input",{className:"table-filter-input",value:Q.employmentType,onChange:T=>je({...Q,employmentType:T.target.value})})}),n.jsx("th",{className:"users-col workMode",children:n.jsx("input",{className:"table-filter-input",value:Q.workMode,onChange:T=>je({...Q,workMode:T.target.value})})}),n.jsx("th",{className:"users-col actions"})]})]}),n.jsxs("tbody",{children:[v&&n.jsx("tr",{children:n.jsx("td",{className:"users-empty",colSpan:13,children:"Loading users..."})}),!v&&pe.map(T=>n.jsxs("tr",{children:[n.jsx("td",{className:"users-col check",children:n.jsx("input",{type:"checkbox","aria-label":`Select ${T.email}`,checked:se.includes(T.id),onChange:()=>ct(T.id)})}),n.jsx("td",{className:"users-col name",children:n.jsxs("div",{className:"users-user",children:[n.jsx("div",{className:"users-avatar",children:tj(T.name||T.email||"U")}),n.jsx("div",{className:"users-user-name",children:T.name||"Unknown"})]})}),n.jsx("td",{className:"users-col personalEmail",children:T.personalEmail||"-"}),n.jsx("td",{className:"users-col phone",children:T.phone||"-"}),n.jsx("td",{className:"users-col employeeId",children:T.employeeId||"-"}),n.jsx("td",{className:"users-col workEmail",children:T.workEmail||T.email||"-"}),n.jsx("td",{className:"users-col designation",children:T.designation||"-"}),n.jsx("td",{className:"users-col department",children:T.department||"-"}),n.jsx("td",{className:"users-col manager",children:T.reportingManager||"-"}),n.jsx("td",{className:"users-col doj",children:Ad(T.dateOfJoining)}),n.jsx("td",{className:"users-col employmentType",children:T.employmentType||"-"}),n.jsx("td",{className:"users-col workMode",children:T.workMode||"-"}),n.jsxs("td",{className:"users-col actions",children:[n.jsx("button",{className:"users-action-btn",onClick:()=>G(T),children:"Edit"}),n.jsx("button",{className:"users-action-btn",onClick:()=>we(T),children:"Delete"})]})]},T.id)),!v&&$.length===0&&n.jsx("tr",{children:n.jsx("td",{className:"users-empty",colSpan:13,children:"No users found."})})]})]})}),a==="Board"&&n.jsxs("div",{className:"users-cards",children:[v&&n.jsx("div",{className:"users-empty",children:"Loading users..."}),!v&&pe.map(T=>n.jsxs("div",{className:"users-card",children:[n.jsxs("div",{className:"users-card-header",children:[n.jsx("div",{className:"users-avatar",children:tj(T.name||T.email||"U")}),n.jsxs("div",{children:[n.jsx("div",{className:"users-user-name",children:T.name||"Unknown"}),n.jsx("div",{className:"users-card-sub",children:T.workEmail||T.email||"-"})]})]}),n.jsxs("div",{className:"users-card-body",children:[n.jsxs("div",{children:[n.jsx("strong",{children:"Personal Email:"})," ",T.personalEmail||"-"]}),n.jsxs("div",{children:[n.jsx("strong",{children:"Phone:"})," ",T.phone||"-"]}),n.jsxs("div",{children:[n.jsx("strong",{children:"Employee ID:"})," ",T.employeeId||"-"]}),n.jsxs("div",{children:[n.jsx("strong",{children:"Designation:"})," ",T.designation||"-"]}),n.jsxs("div",{children:[n.jsx("strong",{children:"Department/Project:"})," ",T.department||"-"]}),n.jsxs("div",{children:[n.jsx("strong",{children:"Reporting Manager:"})," ",T.reportingManager||"-"]}),n.jsxs("div",{children:[n.jsx("strong",{children:"Date of Joining:"})," ",Ad(T.dateOfJoining)]}),n.jsxs("div",{children:[n.jsx("strong",{children:"Employment Type:"})," ",T.employmentType||"-"]}),n.jsxs("div",{children:[n.jsx("strong",{children:"Work Mode:"})," ",T.workMode||"-"]})]}),n.jsxs("div",{className:"users-card-actions",children:[n.jsx("button",{className:"users-action-btn",onClick:()=>G(T),children:"Edit"}),n.jsx("button",{className:"users-action-btn",onClick:()=>we(T),children:"Delete"})]})]},T.id)),!v&&$.length===0&&n.jsx("div",{className:"users-empty",children:"No users found."})]}),O&&n.jsx("div",{className:"modal-overlay",onClick:()=>x(!1),children:n.jsxs("div",{className:"modal-content",onClick:T=>T.stopPropagation(),children:[n.jsxs("div",{className:"modal-header",children:[n.jsx("h2",{children:k?"Edit User":"New User"}),n.jsx("button",{className:"modal-close",onClick:()=>{x(!1),j(null)},children:"x"})]}),n.jsx("div",{className:"modal-body",children:n.jsxs("div",{className:"user-form-grid",children:[n.jsxs("div",{className:"form-section",children:[n.jsx("label",{className:"form-label",children:"Full Name"}),n.jsx("input",{className:"form-input",value:ye.name,onChange:T=>lt({...ye,name:T.target.value}),placeholder:"Full name"})]}),n.jsxs("div",{className:"form-section",children:[n.jsx("label",{className:"form-label",children:"Personal Email ID"}),n.jsx("input",{className:"form-input",value:ye.personalEmail,onChange:T=>lt({...ye,personalEmail:T.target.value}),placeholder:"name@example.com"})]}),n.jsxs("div",{className:"form-section",children:[n.jsx("label",{className:"form-label",children:"Phone Number"}),n.jsx("input",{className:"form-input",value:ye.phone,onChange:T=>lt({...ye,phone:T.target.value}),placeholder:"+1 555 000 0000"})]}),n.jsxs("div",{className:"form-section",children:[n.jsx("label",{className:"form-label",children:"Employee ID"}),n.jsx("input",{className:"form-input",value:ye.employeeId,onChange:T=>lt({...ye,employeeId:T.target.value}),placeholder:"EMP-001"})]}),n.jsxs("div",{className:"form-section",children:[n.jsx("label",{className:"form-label",children:"Work Email ID"}),n.jsx("input",{className:"form-input",value:ye.workEmail,onChange:T=>lt({...ye,workEmail:T.target.value}),placeholder:"name@company.com"})]}),n.jsxs("div",{className:"form-section",children:[n.jsx("label",{className:"form-label",children:"Designation"}),n.jsx("input",{className:"form-input",value:ye.designation,onChange:T=>lt({...ye,designation:T.target.value}),placeholder:"Designation"})]}),n.jsxs("div",{className:"form-section",children:[n.jsx("label",{className:"form-label",children:"Department/Project"}),n.jsx("input",{className:"form-input",value:ye.department,onChange:T=>lt({...ye,department:T.target.value}),placeholder:"Department or project"})]}),n.jsxs("div",{className:"form-section",children:[n.jsx("label",{className:"form-label",children:"Reporting Manager"}),n.jsx("input",{className:"form-input",value:ye.manager,onChange:T=>lt({...ye,manager:T.target.value}),placeholder:"Manager name"})]}),n.jsxs("div",{className:"form-section",children:[n.jsx("label",{className:"form-label",children:"Date of Joining"}),n.jsx("input",{className:"form-input",type:"date",value:ye.dateOfJoining,onChange:T=>lt({...ye,dateOfJoining:T.target.value})})]}),n.jsxs("div",{className:"form-section",children:[n.jsx("label",{className:"form-label",children:"Employment Type"}),n.jsxs("select",{className:"form-select",value:ye.employmentType,onChange:T=>lt({...ye,employmentType:T.target.value}),children:[n.jsx("option",{value:"Full-time",children:"Full-time"}),n.jsx("option",{value:"Contract",children:"Contract"}),n.jsx("option",{value:"Intern",children:"Intern"})]})]}),n.jsxs("div",{className:"form-section",children:[n.jsx("label",{className:"form-label",children:"Work mode"}),n.jsxs("select",{className:"form-select",value:ye.workMode,onChange:T=>lt({...ye,workMode:T.target.value}),children:[n.jsx("option",{value:"Onsite",children:"Onsite"}),n.jsx("option",{value:"Remote",children:"Remote"}),n.jsx("option",{value:"Hybrid",children:"Hybrid"})]})]})]})}),n.jsxs("div",{className:"modal-footer",children:[n.jsx("button",{className:"btn-cancel",onClick:()=>{x(!1),j(null)},children:"Cancel"}),n.jsx("button",{className:"btn-submit",disabled:y,onClick:k?he:Me,children:y?"Saving...":k?"Save Changes":"Create User"})]})]})})]})]})}function DL(){const{userId:e}=Qu(),t=Wn();return n.jsxs("div",{className:"simple-detail-shell",children:[n.jsxs("div",{className:"simple-detail-header",children:[n.jsx("button",{className:"simple-detail-back",onClick:()=>t("/users"),children:"Back"}),n.jsxs("div",{children:[n.jsx("div",{className:"simple-detail-title",children:"User"}),n.jsx("div",{className:"simple-detail-subtitle",children:e})]})]}),n.jsxs("div",{className:"simple-detail-card",children:[n.jsxs("div",{className:"simple-detail-row",children:[n.jsx("div",{className:"simple-detail-label",children:"User ID"}),n.jsx("div",{className:"simple-detail-value",children:e})]}),n.jsxs("div",{className:"simple-detail-row",children:[n.jsx("div",{className:"simple-detail-label",children:"Role"}),n.jsx("div",{className:"simple-detail-value",children:"User"})]}),n.jsxs("div",{className:"simple-detail-row",children:[n.jsx("div",{className:"simple-detail-label",children:"Status"}),n.jsx("div",{className:"simple-detail-value",children:"Active"})]})]})]})}async function d1(e={}){const t=String(e.q||"").trim();return(await De.get("/suppliers",{params:t?{q:t}:{}})).data}async function _L(e){return(await De.post("/suppliers",e)).data}async function FL(e,t){return(await De.put(`/suppliers/${e}`,t)).data}async function UL(e){return(await De.delete(`/suppliers/${e}`)).data}const sf=()=>({companyName:"",companyMail:"",contactPerson:"",contactEmail:"",contactNumber:"",slaTerms:""});function BL(e){return{companyName:String(e.companyName||""),companyMail:String(e.companyMail||""),contactPerson:String(e.contactPerson||e.contactName||""),contactEmail:String(e.contactEmail||""),contactNumber:String(e.contactNumber||""),slaTerms:String(e.slaTerms||"")}}function zL({toolbarSearch:e="",controlledPage:t,onPageChange:s,onPaginationMetaChange:r}){const{user:i}=An(),a=typeof document<"u"?document.getElementById("ticket-left-panel"):null,[l,c]=u.useState([]),[d,p]=u.useState(e),[g,v]=u.useState(1),S=_m(),[O,x]=u.useState(!1),[y,M]=u.useState(!1),[k,j]=u.useState(null),[C,E]=u.useState(sf()),[B,_]=u.useState({create:!1,edit:!1,delete:!1}),[F,J]=u.useState(!1),[ue,Y]=u.useState(()=>typeof window>"u"?!1:window.innerWidth<=1100),[xe,Ne]=u.useState("all"),[Re,L]=u.useState(()=>ts().suppliers),[X,ce]=u.useState({company:"",companyMail:"",contact:"",email:"",contactNumber:"",sla:""}),[N,K]=u.useState([]),[W,ne]=u.useState(0),{widths:R,startResize:Q}=c1({initialWidths:[30,220,220,180,220,160,180,170],minWidth:0}),je=R.map(H=>`${H}px`).join(" "),se=t??g,ze=H=>{const pe=typeof H=="function"?H(se):H;if(typeof t=="number"){s==null||s(pe);return}v(pe)},Ze=async()=>{try{const H=await d1({q:d});c(Array.isArray(H)?H:[])}catch(H){console.warn("Failed to fetch suppliers",H)}};u.useEffect(()=>{Ze()},[d,W]),u.useEffect(()=>{(async()=>{if(!(i!=null&&i.id)){_({create:!1,edit:!1,delete:!1});return}if(String(i.role||"").toUpperCase()==="ADMIN"){_({create:!0,edit:!0,delete:!0});return}try{const pe=await l1(Number(i.id)),_e=Array.isArray(pe==null?void 0:pe.permissions)?pe.permissions:[],Ye=ct=>["supplier","suppliers"].includes(String(ct||"").toLowerCase()),et=ct=>_e.some(rt=>Ye(rt.module)&&!!rt.allowed&&String(rt.action||"").toLowerCase()===ct);_({create:et("create"),edit:et("edit"),delete:et("delete")})}catch{_({create:!1,edit:!1,delete:!1})}})()},[i==null?void 0:i.id,i==null?void 0:i.role]),u.useEffect(()=>{p(e)},[e]),u.useEffect(()=>{const H="suppliers-queue-expanded",pe="suppliers-queue-collapsed";return ue?(document.body.classList.remove(H),document.body.classList.add(pe)):(document.body.classList.add(H),document.body.classList.remove(pe)),()=>{document.body.classList.remove(H),document.body.classList.remove(pe)}},[ue]),u.useEffect(()=>(document.body.classList.add("suppliers-view-active"),()=>document.body.classList.remove("suppliers-view-active")),[]),u.useEffect(()=>{const H=()=>L(ts().suppliers);return window.addEventListener("left-panel-config-updated",H),()=>window.removeEventListener("left-panel-config-updated",H)},[]);const ye=()=>{if(!B.create){alert("Unauthorized");return}j(null),E(sf()),x(!0)};u.useEffect(()=>{const H=pe=>{const _e=pe.detail;!_e||_e.target!=="suppliers"||(_e.action==="new"&&ye(),_e.action==="filter"&&J(Ye=>!Ye),_e.action==="refresh"&&ne(Ye=>Ye+1))};return window.addEventListener("shared-toolbar-action",H),()=>window.removeEventListener("shared-toolbar-action",H)},[B.create]),u.useEffect(()=>{const H=pe=>{const _e=pe.detail;!_e||_e.target!=="suppliers"||_e.action==="toggle-left-panel"&&Y(Ye=>!Ye)};return window.addEventListener("shared-toolbar-action",H),()=>window.removeEventListener("shared-toolbar-action",H)},[]);const lt=async()=>{var pe,_e;if(!C.companyName.trim()){alert("Company name is required");return}const H={companyName:C.companyName.trim(),companyMail:C.companyMail.trim()||void 0,contactPerson:C.contactPerson.trim()||void 0,contactEmail:C.contactEmail.trim()||void 0,contactNumber:C.contactNumber.trim()||void 0,slaTerms:C.slaTerms.trim()||void 0};M(!0);try{if(k){if(!B.edit){alert("Unauthorized");return}await FL(k.id,H)}else{if(!B.create){alert("Unauthorized");return}await _L(H)}x(!1),j(null),E(sf()),await Ze()}catch(Ye){alert(((_e=(pe=Ye==null?void 0:Ye.response)==null?void 0:pe.data)==null?void 0:_e.error)||(Ye==null?void 0:Ye.message)||`Failed to ${k?"update":"create"} supplier`)}finally{M(!1)}},We=H=>{if(!B.edit){alert("Unauthorized");return}j(H),E(BL(H)),x(!0)},Fe=async H=>{var _e,Ye;if(!B.delete){alert("Unauthorized");return}if(window.confirm(`Delete supplier "${H.companyName}"?`))try{await UL(H.id),await Ze()}catch(et){alert(((Ye=(_e=et==null?void 0:et.response)==null?void 0:_e.data)==null?void 0:Ye.error)||(et==null?void 0:et.message)||"Failed to delete supplier")}},le=l.filter(H=>{const pe=(_e,Ye)=>String(_e||"").toLowerCase().includes(Ye.toLowerCase());if(xe!=="all"){const _e=Re.find(Ye=>Ye.id===xe);if(_e&&(_e.field==="sla"&&String(H.slaTerms||"").toLowerCase()!==String(_e.value||"").toLowerCase()||_e.field==="contact"&&String(H.contactEmail||H.contactPerson||H.contactName||"").toLowerCase()!==String(_e.value||"").toLowerCase()||_e.field==="company"&&String(H.companyName||"").toLowerCase()!==String(_e.value||"").toLowerCase()))return!1}return!(X.company&&!pe(H.companyName,X.company)||X.companyMail&&!pe(H.companyMail,X.companyMail)||X.contact&&!pe(H.contactPerson||H.contactName,X.contact)||X.email&&!pe(H.contactEmail,X.email)||X.contactNumber&&!pe(H.contactNumber,X.contactNumber)||X.sla&&!pe(H.slaTerms,X.sla))}),Me=le.length,G=Math.max(1,Math.ceil(Me/S)),he=Math.min(se,G),we=(he-1)*S,$=le.slice(we,we+S);u.useEffect(()=>{se!==he&&ze(he)},[se,he]),u.useEffect(()=>{r==null||r({page:he,totalPages:G,totalRows:Me,rangeStart:Me===0?0:we+1,rangeEnd:Math.min(we+S,Me)})},[he,G,Me,we,r]);const V=le.length>0&&le.every(H=>N.includes(H.id)),ve=()=>{K(V?H=>H.filter(pe=>!le.some(_e=>_e.id===pe)):H=>Array.from(new Set([...H,...le.map(pe=>pe.id)])))},ge=H=>{K(pe=>pe.includes(H)?pe.filter(_e=>_e!==H):[...pe,H])},Ve=H=>H.field==="sla"?l.filter(pe=>String(pe.slaTerms||"").toLowerCase()===String(H.value||"").toLowerCase()).length:H.field==="contact"?l.filter(pe=>String(pe.contactEmail||pe.contactPerson||pe.contactName||"").toLowerCase()===String(H.value||"").toLowerCase()).length:H.field==="company"?l.filter(pe=>String(pe.companyName||"").toLowerCase()===String(H.value||"").toLowerCase()).length:0,Le=!ue&&a?Mi.createPortal(n.jsxs("aside",{className:"supplier-left-panel",children:[n.jsxs("div",{className:"queue-header",children:[n.jsx("div",{className:"queue-title-icon","aria-hidden":"true",children:n.jsxs("svg",{viewBox:"0 0 24 24",width:"18",height:"18",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[n.jsx("rect",{x:"1",y:"6",width:"13",height:"10",rx:"1"}),n.jsx("path",{d:"M14 9h4l3 3v4h-7z"}),n.jsx("circle",{cx:"6",cy:"18",r:"2"}),n.jsx("circle",{cx:"18",cy:"18",r:"2"})]})}),n.jsx("div",{className:"queue-title",children:n.jsx("button",{className:"queue-title-btn",title:"Supplier panel",children:n.jsx("div",{className:"queue-title-text",children:"Suppliers"})})}),n.jsx("button",{className:"queue-collapse-btn",title:"Hide Menu",onClick:()=>Y(!0),children:n.jsxs("svg",{viewBox:"0 0 24 24",width:"14",height:"14",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[n.jsx("polyline",{points:"13 18 7 12 13 6"}),n.jsx("polyline",{points:"19 18 13 12 19 6"})]})})]}),Re.length>0&&n.jsx("div",{className:"queue-list",children:Re.map(H=>{var pe;return n.jsxs("div",{className:`queue-item${xe===H.id?" queue-item-active":""}`,onClick:()=>Ne(_e=>_e===H.id?"all":H.id),children:[n.jsx("div",{className:"queue-avatar",children:((pe=H.label.trim()[0])==null?void 0:pe.toUpperCase())||"S"}),n.jsx("div",{className:"queue-name",children:H.label}),n.jsx("div",{className:"queue-count",children:Ve(H)})]},H.id)})})]}),a):null;return n.jsxs(n.Fragment,{children:[Le,n.jsxs("div",{className:"admin-view",children:[n.jsxs("div",{className:"admin-header",children:[n.jsxs("div",{children:[n.jsx("h2",{children:"Suppliers"}),n.jsx("p",{children:"Supplier directory"})]}),n.jsxs("div",{className:"admin-actions",children:[n.jsx("input",{className:"admin-search",placeholder:"Search suppliers...",value:d,onChange:H=>p(H.target.value)}),n.jsx("button",{className:"admin-icon-btn",title:"Filter",onClick:()=>J(H=>!H),children:n.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:n.jsx("polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"})})})]})]}),n.jsxs("div",{className:"admin-table",children:[n.jsxs("div",{className:"admin-row admin-head",style:{gridTemplateColumns:je},children:[n.jsx("div",{className:"admin-col check",children:n.jsx("input",{type:"checkbox","aria-label":"Select all suppliers",checked:V,onChange:ve})}),n.jsxs("div",{className:"admin-col name",children:[n.jsx("span",{className:"col-resize-handle",onMouseDown:H=>Q(1,H)}),"Company"]}),n.jsxs("div",{className:"admin-col role",children:[n.jsx("span",{className:"col-resize-handle",onMouseDown:H=>Q(2,H)}),"Company Mail"]}),n.jsxs("div",{className:"admin-col email",children:[n.jsx("span",{className:"col-resize-handle",onMouseDown:H=>Q(3,H)}),"Contact Person"]}),n.jsxs("div",{className:"admin-col role",children:[n.jsx("span",{className:"col-resize-handle",onMouseDown:H=>Q(4,H)}),"Contact Email"]}),n.jsxs("div",{className:"admin-col role",children:[n.jsx("span",{className:"col-resize-handle",onMouseDown:H=>Q(5,H)}),"Contact Number"]}),n.jsxs("div",{className:"admin-col sla",children:[n.jsx("span",{className:"col-resize-handle",onMouseDown:H=>Q(6,H)}),"SLA"]}),n.jsxs("div",{className:"admin-col role",children:[n.jsx("span",{className:"col-resize-handle",onMouseDown:H=>Q(7,H)}),"Action"]})]}),F&&n.jsxs("div",{className:"admin-row admin-filters",style:{gridTemplateColumns:je},children:[n.jsx("div",{className:"admin-col check",children:n.jsx("button",{className:"filter-clear-btn",onClick:()=>{ce({company:"",companyMail:"",contact:"",email:"",contactNumber:"",sla:""}),J(!1)},title:"Clear filters","aria-label":"Clear filters",children:n.jsx("svg",{viewBox:"0 0 24 24",width:"14",height:"14",fill:"none",stroke:"currentColor",strokeWidth:"2",children:n.jsx("path",{d:"M18 6 6 18M6 6l12 12"})})})}),n.jsx("div",{className:"admin-col name",children:n.jsx("input",{className:"table-filter-input",value:X.company,onChange:H=>ce({...X,company:H.target.value})})}),n.jsx("div",{className:"admin-col role",children:n.jsx("input",{className:"table-filter-input",value:X.companyMail,onChange:H=>ce({...X,companyMail:H.target.value})})}),n.jsx("div",{className:"admin-col email",children:n.jsx("input",{className:"table-filter-input",value:X.contact,onChange:H=>ce({...X,contact:H.target.value})})}),n.jsx("div",{className:"admin-col role",children:n.jsx("input",{className:"table-filter-input",value:X.email,onChange:H=>ce({...X,email:H.target.value})})}),n.jsx("div",{className:"admin-col role",children:n.jsx("input",{className:"table-filter-input",value:X.contactNumber,onChange:H=>ce({...X,contactNumber:H.target.value})})}),n.jsx("div",{className:"admin-col sla",children:n.jsx("input",{className:"table-filter-input",value:X.sla,onChange:H=>ce({...X,sla:H.target.value})})}),n.jsx("div",{className:"admin-col role"})]}),$.map(H=>n.jsxs("div",{className:"admin-row",style:{gridTemplateColumns:je},children:[n.jsx("div",{className:"admin-col check",children:n.jsx("input",{type:"checkbox","aria-label":`Select ${H.companyName}`,checked:N.includes(H.id),onChange:()=>ge(H.id)})}),n.jsx("div",{className:"admin-col name",children:H.companyName}),n.jsx("div",{className:"admin-col role",children:H.companyMail||"-"}),n.jsx("div",{className:"admin-col email",children:H.contactPerson||H.contactName||"-"}),n.jsx("div",{className:"admin-col role",children:H.contactEmail||"-"}),n.jsx("div",{className:"admin-col role",children:H.contactNumber||"-"}),n.jsx("div",{className:"admin-col sla",children:H.slaTerms||"-"}),n.jsx("div",{className:"admin-col role",children:B.edit||B.delete?n.jsxs("div",{className:"users-actions-cell",children:[B.edit&&n.jsx("button",{className:"users-action-btn",onClick:()=>We(H),children:"Edit"}),B.delete&&n.jsx("button",{className:"users-action-btn danger",onClick:()=>Fe(H),children:"Delete"})]}):"-"})]},H.id)),Me===0&&n.jsx("div",{className:"admin-empty",children:"No suppliers found."})]}),O&&n.jsx("div",{className:"modal-overlay",onClick:()=>x(!1),children:n.jsxs("div",{className:"modal-content",onClick:H=>H.stopPropagation(),children:[n.jsxs("div",{className:"modal-header",children:[n.jsx("h2",{children:k?"Edit Supplier":"New Supplier"}),n.jsx("button",{className:"modal-close",onClick:()=>x(!1),children:""})]}),n.jsxs("div",{className:"modal-body",children:[n.jsxs("div",{className:"form-section",children:[n.jsx("label",{className:"form-label",children:"Company Name *"}),n.jsx("input",{className:"form-input",value:C.companyName,onChange:H=>E({...C,companyName:H.target.value})})]}),n.jsxs("div",{className:"form-section",children:[n.jsx("label",{className:"form-label",children:"Company Mail"}),n.jsx("input",{className:"form-input",value:C.companyMail,onChange:H=>E({...C,companyMail:H.target.value})})]}),n.jsxs("div",{className:"form-section",children:[n.jsx("label",{className:"form-label",children:"Contact Person"}),n.jsx("input",{className:"form-input",value:C.contactPerson,onChange:H=>E({...C,contactPerson:H.target.value})})]}),n.jsxs("div",{className:"form-section",children:[n.jsx("label",{className:"form-label",children:"Contact Email"}),n.jsx("input",{className:"form-input",value:C.contactEmail,onChange:H=>E({...C,contactEmail:H.target.value})})]}),n.jsxs("div",{className:"form-section",children:[n.jsx("label",{className:"form-label",children:"Contact Number"}),n.jsx("input",{className:"form-input",value:C.contactNumber,onChange:H=>E({...C,contactNumber:H.target.value})})]}),n.jsxs("div",{className:"form-section",children:[n.jsx("label",{className:"form-label",children:"SLA Terms"}),n.jsx("input",{className:"form-input",value:C.slaTerms,onChange:H=>E({...C,slaTerms:H.target.value})})]})]}),n.jsxs("div",{className:"modal-footer",children:[n.jsx("button",{className:"btn-cancel",onClick:()=>x(!1),children:"Cancel"}),n.jsx("button",{className:"btn-submit",onClick:lt,disabled:y,children:y?"Saving...":k?"Update":"Save"})]})]})})]})]})}function WL(){const{supplierId:e}=Qu(),t=Wn();return n.jsxs("div",{className:"simple-detail-shell",children:[n.jsxs("div",{className:"simple-detail-header",children:[n.jsx("button",{className:"simple-detail-back",onClick:()=>t("/suppliers"),children:"Back"}),n.jsxs("div",{children:[n.jsx("div",{className:"simple-detail-title",children:"Supplier"}),n.jsx("div",{className:"simple-detail-subtitle",children:e})]})]}),n.jsxs("div",{className:"simple-detail-card",children:[n.jsxs("div",{className:"simple-detail-row",children:[n.jsx("div",{className:"simple-detail-label",children:"Supplier ID"}),n.jsx("div",{className:"simple-detail-value",children:e})]}),n.jsxs("div",{className:"simple-detail-row",children:[n.jsx("div",{className:"simple-detail-label",children:"SLA"}),n.jsx("div",{className:"simple-detail-value",children:"Gold Support"})]}),n.jsxs("div",{className:"simple-detail-row",children:[n.jsx("div",{className:"simple-detail-label",children:"Status"}),n.jsx("div",{className:"simple-detail-value",children:"Active"})]})]})]})}const Tt=["#2563eb","#14b8a6","#f97316","#8b5cf6","#0ea5e9","#f43f5e"];function qL(){const e=new Date,t=$=>{const V=ve=>String(ve).padStart(2,"0");return`${$.getFullYear()}-${V($.getMonth()+1)}-${V($.getDate())}T${V($.getHours())}:${V($.getMinutes())}:${V($.getSeconds())}`},[s,r]=u.useState(()=>{const $=new Date(e);return $.setDate(e.getDate()-30),$.setHours(0,0,0,0),t($)}),[i,a]=u.useState(()=>{const $=new Date(e);return $.setHours(23,59,59,0),t($)}),[l,c]=u.useState(!1),[d,p]=u.useState(!1),[g,v]=u.useState(""),[S,O]=u.useState("Off"),[x,y]=u.useState([]),M=oe.useRef(null),k=oe.useRef(null),[j,C]=u.useState([]),[E,B]=u.useState([]),[_,F]=u.useState([]),[J,ue]=u.useState([]),[Y,xe]=u.useState(!0),[Ne,Re]=u.useState(!1);u.useEffect(()=>{(async()=>{try{xe(!0);const V=await Dm({page:1,pageSize:500}),ve=Array.isArray(V)?V:(V==null?void 0:V.items)||[];C(ve);const ge=await Jo({page:1,pageSize:500}),Ve=Array.isArray(ge)?ge:(ge==null?void 0:ge.items)||[];B(Ve);const Le=await ua({limit:500});F(Array.isArray(Le)?Le:[]);const H=await d1();ue(Array.isArray(H)?H:[])}catch{}finally{xe(!1)}})()},[]),u.useEffect(()=>{const $=V=>{const ve=V.target;l&&M.current&&!M.current.contains(ve)&&c(!1),d&&k.current&&!k.current.contains(ve)&&p(!1)};return document.addEventListener("mousedown",$),()=>document.removeEventListener("mousedown",$)},[l,d]);const L=u.useMemo(()=>{const $=s?s.replace("T"," "):"Start",V=i?i.replace("T"," "):"End";return`${$} to ${V}`},[s,i]),X=[{label:"Last 5 minutes",minutes:5},{label:"Last 15 minutes",minutes:15},{label:"Last 30 minutes",minutes:30},{label:"Last 1 hour",minutes:60},{label:"Last 3 hours",minutes:180},{label:"Last 6 hours",minutes:360},{label:"Last 12 hours",minutes:720},{label:"Last 24 hours",minutes:1440},{label:"Last 2 days",minutes:2880},{label:"Last 7 days",minutes:10080},{label:"Last 30 days",minutes:43200}],ce=$=>{const V=new Date,ve=new Date(V.getTime()-$*60*1e3);r(t(ve)),a(t(V)),c(!1)},N=()=>{s&&i&&y($=>{const V=`${s.replace("T"," ")} to ${i.replace("T"," ")}`;return[V,...$.filter(ge=>ge!==V)].slice(0,5)}),c(!1)},K=u.useMemo(()=>{const $=j.length,V=j.filter(Le=>{const H=String(Le.status||"").toLowerCase();return H!=="closed"&&H!=="resolved"}).length,ve=j.filter(Le=>String(Le.status||"").toLowerCase().includes("supplier")).length,ge=j.reduce((Le,H)=>{const pe=H.status||"Unknown";return Le[pe]=(Le[pe]||0)+1,Le},{}),Ve=j.reduce((Le,H)=>{const pe=H.priority||"Unspecified";return Le[pe]=(Le[pe]||0)+1,Le},{});return{total:$,open:V,withSupplier:ve,byStatus:ge,byPriority:Ve}},[j]),W=u.useMemo(()=>{const $=E.length,V=E.filter(H=>String(H.status||"").toLowerCase()==="in use").length,ve=E.filter(H=>String(H.status||"").toLowerCase()==="available").length,ge=E.filter(H=>String(H.status||"").toLowerCase()==="retired").length,Ve=E.filter(H=>{const pe=String(H.status||"").toLowerCase();return pe.includes("fault")||pe.includes("repair")}).length,Le=E.reduce((H,pe)=>{const _e=pe.assetType||pe.category||"Unknown";return H[_e]=(H[_e]||0)+1,H},{});return{total:$,inUse:V,available:ve,retired:ge,faulty:Ve,byType:Le}},[E]),ne=u.useMemo(()=>{const $=_.length,V=_.reduce((ge,Ve)=>{const Le=Ve.department||Ve.departmentName||"Unassigned";return ge[Le]=(ge[Le]||0)+1,ge},{}),ve=_.reduce((ge,Ve)=>{const Le=Ve.workMode||"Unspecified";return ge[Le]=(ge[Le]||0)+1,ge},{});return{total:$,byDept:V,byWorkMode:ve}},[_]),R=u.useMemo(()=>({total:J.length}),[J]),Q=u.useMemo(()=>{const $=j.filter(ve=>{const ge=String(ve.status||"").toLowerCase();return ge.includes("breach")||ge.includes("overdue")||ge.includes("hold")}).length,V=j.filter(ve=>!ve.assigneeId).length;return{totalTickets:K.total,openTickets:K.open,slaRisk:$,unassigned:V}},[K.open,K.total,j]),je=u.useMemo(()=>[{label:"Total Assets",value:W.total,icon:"stack"},{label:"In Use",value:W.inUse,icon:"check"},{label:"Near License Expires",value:0,icon:"license"},{label:"Repair",value:W.faulty,icon:"tool"},{label:"Near ASM Expires",value:0,icon:"bell"},{label:"Overall Cost",value:0,icon:"cash"},{label:"Maintenance",value:0,icon:"wrench"},{label:"Decommissioned",value:W.retired,icon:"x"}],[W]),se=($,V=6)=>Object.entries($).sort((ve,ge)=>ge[1]-ve[1]).slice(0,V),ze=u.useMemo(()=>{const $={};return E.forEach(V=>{const ve=V.location||V.site||V.region||"Unknown";$[ve]=($[ve]||0)+1}),se($)},[E]),Ze=u.useMemo(()=>{const $={};return E.forEach(V=>{const ve=V.supplier||V.manufacturer||"Unknown";$[ve]=($[ve]||0)+1}),se($)},[E]),ye=u.useMemo(()=>{const $={};return E.forEach(V=>{const ge=(V.riskLevel||V.dataSensitivity||V.securityClassification||"Normal").toString().toUpperCase();$[ge]=($[ge]||0)+1}),se($)},[E]),lt=u.useMemo(()=>{const $={};return E.forEach(V=>{const ve=V.os||V.osVersion||"Unknown";$[ve]=($[ve]||0)+1}),se($)},[E]),We=u.useMemo(()=>{const $={};return E.forEach(V=>{const ve=V.status||"Unknown";$[ve]=($[ve]||0)+1}),se($,4)},[E]),Fe=u.useMemo(()=>{const $={};return E.forEach(V=>{const ve=V.assetType||V.category||"Unknown";$[ve]=($[ve]||0)+1}),se($,6)},[E]),le=u.useMemo(()=>{const $={};return E.forEach(V=>{(Array.isArray(V.installedSoftware)?V.installedSoftware:typeof V.installedSoftwareText=="string"?V.installedSoftwareText.split(","):[]).map(ge=>ge.trim()).filter(Boolean).forEach(ge=>{$[ge]=($[ge]||0)+1})}),se($,12)},[E]),Me=u.useMemo(()=>{const $={};return E.forEach(V=>{const ve=Array.isArray(V.serviceIds)?V.serviceIds:[];ve.length===0?$.Unknown=($.Unknown||0)+1:ve.forEach(ge=>{const Ve=`Service ${ge}`;$[Ve]=($[Ve]||0)+1})}),se($,6)},[E]),G=u.useMemo(()=>{const $=E.map(V=>Number(V.purchaseCost||V.cost||0)).filter(V=>Number.isFinite(V)&&V>0).slice(0,12);return $.length?$:[10,18,24,12,28,34,16,20,26,14,22,30]},[E]),he=$=>$.reduce((V,[,ve])=>V+ve,0)||1,we=async()=>{try{Re(!0);const V=[["metric","value"],["total_tickets",String(Q.totalTickets)],["open_tickets",String(Q.openTickets)],["sla_risk",String(Q.slaRisk)],["unassigned",String(Q.unassigned)],["total_assets",String(W.total)],["total_users",String(ne.total)]].map(Le=>Le.join(",")).join(`
`),ve=new Blob([V],{type:"text/csv;charset=utf-8;"}),ge=URL.createObjectURL(ve),Ve=document.createElement("a");Ve.href=ge,Ve.download=`itsm-report-summary-${new Date().toISOString().slice(0,10)}.csv`,document.body.appendChild(Ve),Ve.click(),Ve.remove(),URL.revokeObjectURL(ge)}finally{Re(!1)}};return n.jsxs("div",{className:"reports-view",children:[n.jsxs("div",{className:"reports-header reports-command-bar",children:[n.jsxs("div",{children:[n.jsx("h2",{children:"Reports"}),n.jsx("p",{children:"Grafana-style reporting workspace with flexible date ranges"})]}),n.jsxs("div",{className:"reports-actions",children:[n.jsxs("div",{className:"reports-range",ref:M,children:[n.jsxs("button",{className:"reports-range-btn",onClick:()=>c($=>!$),children:[n.jsxs("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[n.jsx("circle",{cx:"12",cy:"12",r:"9"}),n.jsx("path",{d:"M12 7v6l4 2"})]}),L,n.jsx("span",{className:"reports-utc",children:"UTC"}),n.jsx("svg",{viewBox:"0 0 24 24",width:"14",height:"14",fill:"none",stroke:"currentColor",strokeWidth:"2",children:n.jsx("path",{d:"M6 9l6 6 6-6"})})]}),l&&n.jsxs("div",{className:"reports-range-panel",children:[n.jsxs("div",{className:"range-left",children:[n.jsx("div",{className:"range-title",children:"Absolute time range"}),n.jsx("label",{children:"From"}),n.jsx("input",{type:"date",value:s.slice(0,10),onChange:$=>r(`${$.target.value}T00:00`)}),n.jsx("label",{children:"To"}),n.jsx("input",{type:"date",value:i.slice(0,10),onChange:$=>a(`${$.target.value}T23:59`)}),n.jsx("div",{className:"range-actions",children:n.jsx("button",{className:"range-apply",onClick:N,children:"Apply time range"})}),n.jsx("div",{className:"range-recent-title",children:"Recently used absolute ranges"}),n.jsxs("div",{className:"range-recent",children:[x.length===0&&n.jsx("div",{className:"range-empty",children:"No recent ranges"}),x.map($=>n.jsx("button",{onClick:()=>{const[V,ve]=$.split(" to ");r(V.replace(" ","T")),a(ve.replace(" ","T")),c(!1)},children:$},$))]})]}),n.jsxs("div",{className:"range-right",children:[n.jsxs("div",{className:"range-search",children:[n.jsxs("svg",{viewBox:"0 0 24 24",width:"14",height:"14",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[n.jsx("circle",{cx:"11",cy:"11",r:"7"}),n.jsx("line",{x1:"16.5",y1:"16.5",x2:"21",y2:"21"})]}),n.jsx("input",{placeholder:"Search quick ranges",value:g,onChange:$=>v($.target.value)})]}),n.jsx("div",{className:"range-list",children:X.filter($=>$.label.toLowerCase().includes(g.toLowerCase())).map($=>n.jsx("button",{onClick:()=>ce($.minutes),children:$.label},$.label))})]})]})]}),n.jsxs("div",{className:"reports-refresh",ref:k,children:[n.jsxs("button",{className:"reports-refresh-btn",onClick:()=>p($=>!$),children:[n.jsxs("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[n.jsx("path",{d:"M21 12a9 9 0 1 1-3-6.7"}),n.jsx("path",{d:"M21 3v6h-6"})]}),n.jsx("svg",{viewBox:"0 0 24 24",width:"14",height:"14",fill:"none",stroke:"currentColor",strokeWidth:"2",children:n.jsx("path",{d:"M6 9l6 6 6-6"})})]}),d&&n.jsx("div",{className:"reports-refresh-menu",children:["Off","Auto","5s","10s","30s","1m","5m","15m","30m","1h","2h","1d"].map($=>n.jsx("button",{onClick:()=>{O($),p(!1)},children:$},$))})]}),n.jsx("button",{className:"reports-open-btn",onClick:we,disabled:Ne,children:Ne?"Exporting...":"Export Summary CSV"})]})]}),Y&&n.jsx("div",{className:"reports-loading",children:"Loading data"}),n.jsxs("section",{className:"reports-executive-strip",children:[n.jsxs("article",{className:"reports-exec-card",children:[n.jsx("h4",{children:"Total Tickets"}),n.jsx("strong",{children:Q.totalTickets})]}),n.jsxs("article",{className:"reports-exec-card",children:[n.jsx("h4",{children:"Open Tickets"}),n.jsx("strong",{children:Q.openTickets})]}),n.jsxs("article",{className:"reports-exec-card",children:[n.jsx("h4",{children:"SLA At Risk"}),n.jsx("strong",{children:Q.slaRisk})]}),n.jsxs("article",{className:"reports-exec-card",children:[n.jsx("h4",{children:"Unassigned"}),n.jsx("strong",{children:Q.unassigned})]})]}),n.jsxs("section",{className:"reports-availability",children:[n.jsx("div",{className:"reports-section-title",children:"Availability"}),n.jsx("div",{className:"reports-metrics",children:je.map($=>n.jsxs("div",{className:"reports-metric",children:[n.jsxs("div",{className:"reports-metric-icon",children:[$.icon==="stack"&&n.jsx("svg",{viewBox:"0 0 24 24",width:"18",height:"18",fill:"none",stroke:"currentColor",strokeWidth:"2",children:n.jsx("path",{d:"M4 7h16M4 12h16M4 17h16"})}),$.icon==="check"&&n.jsx("svg",{viewBox:"0 0 24 24",width:"18",height:"18",fill:"none",stroke:"currentColor",strokeWidth:"2",children:n.jsx("path",{d:"M20 6 9 17l-5-5"})}),$.icon==="license"&&n.jsxs("svg",{viewBox:"0 0 24 24",width:"18",height:"18",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[n.jsx("rect",{x:"3",y:"4",width:"18",height:"16",rx:"2"}),n.jsx("path",{d:"M8 9h8M8 13h6"})]}),$.icon==="tool"&&n.jsx("svg",{viewBox:"0 0 24 24",width:"18",height:"18",fill:"none",stroke:"currentColor",strokeWidth:"2",children:n.jsx("path",{d:"M14.7 6.3a5 5 0 1 0 3 3l-7.4 7.4-2.8-2.8 7.4-7.4z"})}),$.icon==="bell"&&n.jsxs("svg",{viewBox:"0 0 24 24",width:"18",height:"18",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[n.jsx("path",{d:"M18 8a6 6 0 10-12 0c0 7-3 7-3 7h18s-3 0-3-7"}),n.jsx("path",{d:"M13.7 21a2 2 0 01-3.4 0"})]}),$.icon==="cash"&&n.jsxs("svg",{viewBox:"0 0 24 24",width:"18",height:"18",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[n.jsx("circle",{cx:"12",cy:"12",r:"9"}),n.jsx("path",{d:"M9 12h6M12 9v6"})]}),$.icon==="wrench"&&n.jsxs("svg",{viewBox:"0 0 24 24",width:"18",height:"18",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[n.jsx("path",{d:"M22 19l-6-6"}),n.jsx("path",{d:"M14 7a4 4 0 1 0 3 3"})]}),$.icon==="x"&&n.jsx("svg",{viewBox:"0 0 24 24",width:"18",height:"18",fill:"none",stroke:"currentColor",strokeWidth:"2",children:n.jsx("path",{d:"M18 6L6 18M6 6l12 12"})})]}),n.jsx("div",{className:"reports-metric-value",children:$.value}),n.jsx("div",{className:"reports-metric-label",children:$.label})]},$.label))})]}),n.jsxs("section",{className:"reports-grid",children:[n.jsxs("div",{className:"report-card",children:[n.jsx("div",{className:"report-card-title",children:"Assets by Location"}),n.jsxs("div",{className:"report-card-visual donut",children:[n.jsxs("svg",{viewBox:"0 0 140 140",children:[n.jsx("circle",{cx:"70",cy:"70",r:"42",stroke:"#e5e7eb",strokeWidth:"16",fill:"none"}),ze.map(([$,V],ve)=>{const ge=2*Math.PI*42,Ve=V/he(ze)*ge,Le=ze.slice(0,ve).reduce((H,[,pe])=>H+pe,0);return n.jsx("circle",{cx:"70",cy:"70",r:"42",stroke:Tt[ve%Tt.length],strokeWidth:"16",fill:"none",strokeDasharray:`${Ve} ${ge-Ve}`,strokeDashoffset:-(Le/he(ze))*ge},$)})]}),n.jsx("div",{className:"report-legend",children:ze.map(([$],V)=>n.jsxs("span",{children:[n.jsx("i",{style:{background:Tt[V%Tt.length]}}),$]},$))})]})]}),n.jsxs("div",{className:"report-card",children:[n.jsx("div",{className:"report-card-title",children:"Assets by Vendors"}),n.jsxs("div",{className:"report-card-visual donut",children:[n.jsxs("svg",{viewBox:"0 0 140 140",children:[n.jsx("circle",{cx:"70",cy:"70",r:"42",stroke:"#e5e7eb",strokeWidth:"16",fill:"none"}),Ze.map(([$,V],ve)=>{const ge=2*Math.PI*42,Ve=V/he(Ze)*ge,Le=Ze.slice(0,ve).reduce((H,[,pe])=>H+pe,0);return n.jsx("circle",{cx:"70",cy:"70",r:"42",stroke:Tt[ve%Tt.length],strokeWidth:"16",fill:"none",strokeDasharray:`${Ve} ${ge-Ve}`,strokeDashoffset:-(Le/he(Ze))*ge},$)})]}),n.jsx("div",{className:"report-legend single",children:Ze.slice(0,3).map(([$],V)=>n.jsxs("span",{children:[n.jsx("i",{style:{background:Tt[V%Tt.length]}}),$]},$))})]})]}),n.jsxs("div",{className:"report-card",children:[n.jsx("div",{className:"report-card-title",children:"Assets by Business Impact"}),n.jsxs("div",{className:"report-card-visual donut",children:[n.jsxs("svg",{viewBox:"0 0 140 140",children:[n.jsx("circle",{cx:"70",cy:"70",r:"42",stroke:"#e5e7eb",strokeWidth:"16",fill:"none"}),ye.map(([$,V],ve)=>{const ge=2*Math.PI*42,Ve=V/he(ye)*ge,Le=ye.slice(0,ve).reduce((H,[,pe])=>H+pe,0);return n.jsx("circle",{cx:"70",cy:"70",r:"42",stroke:Tt[ve%Tt.length],strokeWidth:"16",fill:"none",strokeDasharray:`${Ve} ${ge-Ve}`,strokeDashoffset:-(Le/he(ye))*ge},$)})]}),n.jsx("div",{className:"report-legend",children:ye.map(([$],V)=>n.jsxs("span",{children:[n.jsx("i",{style:{background:Tt[V%Tt.length]}}),$]},$))})]})]}),n.jsxs("div",{className:"report-card",children:[n.jsx("div",{className:"report-card-title",children:"Assets by OS"}),n.jsxs("div",{className:"report-card-visual bar",children:[n.jsx("div",{className:"report-bars",children:lt.map(([$,V],ve)=>n.jsx("span",{className:"bar a",style:{height:`${Math.max(20,V/he(lt)*100)}%`,background:Tt[ve%Tt.length]}},$))}),n.jsx("div",{className:"report-legend single",children:lt.slice(0,3).map(([$],V)=>n.jsxs("span",{children:[n.jsx("i",{style:{background:Tt[V%Tt.length]}}),$]},$))})]})]}),n.jsxs("div",{className:"report-card",children:[n.jsx("div",{className:"report-card-title",children:"Assets by Overall Components Cost"}),n.jsx("div",{className:"report-card-visual bar thin",children:n.jsx("div",{className:"report-bars dense",children:G.map(($,V)=>n.jsx("span",{className:"bar a",style:{height:`${Math.max(20,$/Math.max(1,Math.max(...G))*100)}%`}},V))})})]}),n.jsxs("div",{className:"report-card",children:[n.jsx("div",{className:"report-card-title",children:"Assets by State"}),n.jsxs("div",{className:"report-card-visual bar",children:[n.jsx("div",{className:"report-bars",children:We.map(([$,V],ve)=>n.jsx("span",{className:"bar a",style:{height:`${Math.max(25,V/he(We)*100)}%`,background:Tt[ve%Tt.length]}},$))}),n.jsx("div",{className:"report-legend single",children:We.map(([$],V)=>n.jsxs("span",{children:[n.jsx("i",{style:{background:Tt[V%Tt.length]}}),$]},$))})]})]}),n.jsxs("div",{className:"report-card",children:[n.jsx("div",{className:"report-card-title",children:"Assets by Types"}),n.jsxs("div",{className:"report-card-visual bar",children:[n.jsx("div",{className:"report-bars",children:Fe.map(([$,V],ve)=>n.jsx("span",{className:"bar a",style:{height:`${Math.max(25,V/he(Fe)*100)}%`,background:Tt[ve%Tt.length]}},$))}),n.jsx("div",{className:"report-legend",children:Fe.map(([$],V)=>n.jsxs("span",{children:[n.jsx("i",{style:{background:Tt[V%Tt.length]}}),$]},$))})]})]}),n.jsxs("div",{className:"report-card",children:[n.jsx("div",{className:"report-card-title",children:"Assets by Components"}),n.jsx("div",{className:"report-card-visual stack",children:n.jsx("div",{className:"report-stack dense",children:le.slice(0,8).map(([$],V)=>n.jsxs("div",{className:"stack-row",children:[n.jsx("span",{className:"stack a"}),n.jsx("span",{className:"stack b"}),n.jsx("span",{className:"stack c"})]},V))})})]}),n.jsxs("div",{className:"report-card",children:[n.jsx("div",{className:"report-card-title",children:"Assets by Business Services"}),n.jsxs("div",{className:"report-card-visual bar",children:[n.jsx("div",{className:"report-bars",children:Me.map(([$,V],ve)=>n.jsx("span",{className:"bar a",style:{height:`${Math.max(25,V/he(Me)*100)}%`,background:Tt[ve%Tt.length]}},$))}),n.jsx("div",{className:"report-legend single",children:Me.map(([$],V)=>n.jsxs("span",{children:[n.jsx("i",{style:{background:Tt[V%Tt.length]}}),$]},$))})]})]})]}),n.jsxs("section",{className:"reports-data-grid",children:[n.jsxs("div",{className:"report-card",children:[n.jsx("div",{className:"report-card-title",children:"Tickets Summary"}),n.jsxs("div",{className:"report-micro",children:[n.jsxs("div",{children:[n.jsx("strong",{children:"Total:"})," ",K.total]}),n.jsxs("div",{children:[n.jsx("strong",{children:"Open:"})," ",K.open]}),n.jsxs("div",{children:[n.jsx("strong",{children:"With Supplier:"})," ",K.withSupplier]})]}),n.jsx("div",{className:"report-mini-list",children:Object.entries(K.byStatus).slice(0,6).map(([$,V])=>n.jsxs("div",{className:"mini-bar-row",children:[n.jsx("span",{children:$}),n.jsx("div",{className:"mini-bar-track",children:n.jsx("div",{className:"mini-bar-fill medium",style:{width:`${Math.min(100,V/Math.max(1,K.total)*100)}%`}})}),n.jsx("strong",{children:V})]},$))})]}),n.jsxs("div",{className:"report-card",children:[n.jsx("div",{className:"report-card-title",children:"Ticket Priority Mix"}),n.jsx("div",{className:"report-mini-list",children:Object.entries(K.byPriority).slice(0,6).map(([$,V])=>n.jsxs("div",{className:"mini-bar-row",children:[n.jsx("span",{children:$}),n.jsx("div",{className:"mini-bar-track",children:n.jsx("div",{className:"mini-bar-fill high",style:{width:`${Math.min(100,V/Math.max(1,K.total)*100)}%`}})}),n.jsx("strong",{children:V})]},$))})]}),n.jsxs("div",{className:"report-card",children:[n.jsx("div",{className:"report-card-title",children:"Assets Summary"}),n.jsxs("div",{className:"report-micro",children:[n.jsxs("div",{children:[n.jsx("strong",{children:"Total:"})," ",W.total]}),n.jsxs("div",{children:[n.jsx("strong",{children:"In Use:"})," ",W.inUse]}),n.jsxs("div",{children:[n.jsx("strong",{children:"Available:"})," ",W.available]}),n.jsxs("div",{children:[n.jsx("strong",{children:"Retired:"})," ",W.retired]})]}),n.jsx("div",{className:"report-mini-list",children:Object.entries(W.byType).slice(0,6).map(([$,V])=>n.jsxs("div",{className:"mini-bar-row",children:[n.jsx("span",{children:$}),n.jsx("div",{className:"mini-bar-track",children:n.jsx("div",{className:"mini-bar-fill low",style:{width:`${Math.min(100,V/Math.max(1,W.total)*100)}%`}})}),n.jsx("strong",{children:V})]},$))})]}),n.jsxs("div",{className:"report-card",children:[n.jsx("div",{className:"report-card-title",children:"Users Summary"}),n.jsxs("div",{className:"report-micro",children:[n.jsxs("div",{children:[n.jsx("strong",{children:"Total Users:"})," ",ne.total]}),n.jsxs("div",{children:[n.jsx("strong",{children:"Suppliers:"})," ",R.total]})]}),n.jsx("div",{className:"report-mini-list",children:Object.entries(ne.byWorkMode).slice(0,6).map(([$,V])=>n.jsxs("div",{className:"mini-bar-row",children:[n.jsx("span",{children:$}),n.jsx("div",{className:"mini-bar-track",children:n.jsx("div",{className:"mini-bar-fill medium",style:{width:`${Math.min(100,V/Math.max(1,ne.total)*100)}%`}})}),n.jsx("strong",{children:V})]},$))})]})]})]})}function HL(){const e=typeof document<"u"?document.getElementById("ticket-left-panel"):null,[t,s]=u.useState(()=>typeof window>"u"?!1:window.innerWidth<=1100);u.useEffect(()=>(document.body.classList.add("accounts-view-active"),()=>document.body.classList.remove("accounts-view-active")),[]),u.useEffect(()=>{const i="accounts-queue-expanded",a="accounts-queue-collapsed";return t?(document.body.classList.remove(i),document.body.classList.add(a)):(document.body.classList.add(i),document.body.classList.remove(a)),()=>{document.body.classList.remove(i),document.body.classList.remove(a)}},[t]),u.useEffect(()=>{const i=a=>{const l=a.detail;!l||l.target!=="accounts"||l.action==="toggle-left-panel"&&s(c=>!c)};return window.addEventListener("shared-toolbar-action",i),()=>window.removeEventListener("shared-toolbar-action",i)},[]);const r=!t&&e?Mi.createPortal(n.jsxs("aside",{className:"account-left-panel",children:[n.jsxs("div",{className:"queue-header",children:[n.jsx("div",{className:"queue-title-icon","aria-hidden":"true",children:n.jsxs("svg",{viewBox:"0 0 24 24",width:"18",height:"18",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[n.jsx("path",{d:"M8 2h8l4 4v16H8z"}),n.jsx("path",{d:"M16 2v4h4"}),n.jsx("rect",{x:"2",y:"3",width:"8",height:"10",rx:"1.5"}),n.jsx("path",{d:"M4 6h4"}),n.jsx("path",{d:"M4 9h1"}),n.jsx("path",{d:"M6 9h1"}),n.jsx("path",{d:"M4 11h1"}),n.jsx("path",{d:"M6 11h1"}),n.jsx("circle",{cx:"12",cy:"17",r:"2.5"}),n.jsx("path",{d:"M11 17h2"}),n.jsx("path",{d:"M12 15.5v3"}),n.jsx("path",{d:"M15.5 20.5 20 16"}),n.jsx("path",{d:"M19 17l1 1"})]})}),n.jsx("div",{className:"queue-title",children:n.jsx("div",{className:"queue-title-top",children:n.jsx("div",{className:"queue-title-text",children:"Accounts"})})}),n.jsx("button",{className:"queue-collapse-btn",title:"Hide Menu",onClick:()=>s(!0),children:n.jsxs("svg",{viewBox:"0 0 24 24",width:"14",height:"14",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[n.jsx("polyline",{points:"13 18 7 12 13 6"}),n.jsx("polyline",{points:"19 18 13 12 19 6"})]})})]}),n.jsx("div",{className:"queue-list",children:n.jsxs("div",{className:"queue-item queue-item-active",children:[n.jsx("div",{className:"queue-avatar",children:n.jsx("svg",{viewBox:"0 0 24 24",width:"14",height:"14",fill:"none",stroke:"currentColor",strokeWidth:"2",children:n.jsx("path",{d:"M5 12h14"})})}),n.jsx("div",{className:"queue-name",children:"Will implement it later"})]})})]}),e):null;return n.jsxs(n.Fragment,{children:[r,n.jsx("div",{style:{padding:16},children:n.jsx("div",{className:"users-empty",children:"Will implement it later"})})]})}const rf="rememberMe",af="rememberedEmail";function lf(){const e=Wn(),t=lr(),[s,r]=NC(),{refreshUser:i}=An(),[a,l]=u.useState(!1),[c,d]=u.useState(!1),[p,g]=u.useState({VITE_API_BASE:"/api",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1}.VITE_GOOGLE_CLIENT_ID||""),[v,S]=u.useState({VITE_API_BASE:"/api",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1}.VITE_GOOGLE_HOSTED_DOMAIN||""),[O,x]=u.useState([]),[y,M]=u.useState(""),[k,j]=u.useState(""),[C,E]=u.useState(""),[B,_]=u.useState(""),[F,J]=u.useState(!1),[ue,Y]=u.useState(""),[xe,Ne]=u.useState(""),[Re,L]=u.useState(""),[X,ce]=u.useState(""),[N,K]=u.useState(""),W=u.useMemo(()=>{if(t.pathname==="/reset-password")return"reset";const G=s.get("mode");return G==="forgot"||G==="reset"||G==="mfa"?G:"login"},[t.pathname,s]),ne=s.get("token")||"",R=t.pathname==="/portal/login",Q=R?"/portal/login":"/login",je=R?"/portal/home":"/dashboard";u.useEffect(()=>{try{const G=localStorage.getItem(rf)==="1",he=localStorage.getItem(af)||"";G&&(J(!0),he&&E(he))}catch{}},[]);const se=(G,he="")=>{try{G?(localStorage.setItem(rf,"1"),localStorage.setItem(af,he.trim())):(localStorage.removeItem(rf),localStorage.removeItem(af))}catch{}};u.useEffect(()=>{let G=!1;if(!p)return kP().then(he=>{if(G)return;const we=String((he==null?void 0:he.clientId)||"").trim();we&&g(we);const $=String((he==null?void 0:he.hostedDomain)||"").trim();$&&S($)}).catch(()=>{}),()=>{G=!0}},[p]),u.useEffect(()=>{let G=!1;return CP().then(he=>{if(G)return;const we=Array.isArray(he==null?void 0:he.providers)?he.providers:[];x(we.filter($=>$&&typeof $.provider=="string"))}).catch(()=>{}),()=>{G=!0}},[]),u.useEffect(()=>{const G=String(s.get("ssoError")||"").trim();G&&j(G);const he=String(s.get("ssoSuccess")||"").trim()==="1",we=String(s.get("accessToken")||"").trim(),$=String(s.get("refreshToken")||"").trim();if(he&&we&&$){const ge=String(s.get("rememberMe")||"1").trim()!=="0";wP(we,$,ge),i(),e(je,{replace:!0});return}const V=String(s.get("challengeToken")||"").trim(),ve=String(s.get("mfaCodePreview")||"").trim();V&&(K(V),ve&&M(`MFA code (dev preview): ${ve}`))},[e,je,i,s]);async function ze(G){if(G!=null&&G.mfaRequired&&(G!=null&&G.challengeToken)){K(G.challengeToken),r({mode:"mfa"}),G!=null&&G.mfaCodePreview?M(`MFA code (dev preview): ${G.mfaCodePreview}`):M("Verification code sent to your email.");return}i(),e(je)}async function Ze(G){var he,we;G.preventDefault(),j(""),M("");try{l(!0);const $=await NP(C,B,F);se(F,C),await ze($)}catch($){j(((we=(he=$==null?void 0:$.response)==null?void 0:he.data)==null?void 0:we.error)||$.message||"Login failed")}finally{l(!1)}}async function ye(){if(j(""),M(""),!c||!window.google){j(p?"Google sign-in is not ready yet.":"Google login is not configured by admin.");return}try{l(!0),se(F,C),window.google.accounts.id.prompt()}catch(G){j((G==null?void 0:G.message)||"Google login failed"),l(!1)}}function lt(G){if(a)return;se(F,C);const he=F?"1":"0";window.location.href=`/api/auth/sso/${G}/start?rememberMe=${he}`}async function We(G){var he,we;if(G.preventDefault(),j(""),M(""),!ue.trim()){j("Email is required.");return}try{l(!0);const $=await AP(ue);$!=null&&$.resetUrlPreview?M(`Recovery link (dev preview): ${$.resetUrlPreview}`):M("Recovery link sent. Please check your email to set a new password.")}catch($){j(((we=(he=$==null?void 0:$.response)==null?void 0:he.data)==null?void 0:we.error)||$.message||"Unable to send reset link")}finally{l(!1)}}async function Fe(G){var he,we;if(G.preventDefault(),j(""),M(""),!ne){j("Missing reset token.");return}if(xe.length<8){j("Password must be at least 8 characters.");return}if(xe!==Re){j("Passwords do not match.");return}try{l(!0),await EP(ne,xe),M("Your password has been changed."),Ne(""),L("")}catch($){j(((we=(he=$==null?void 0:$.response)==null?void 0:he.data)==null?void 0:we.error)||$.message||"Unable to reset password")}finally{l(!1)}}async function le(G){var he,we;G.preventDefault(),j(""),M("");try{l(!0);const $=await TP(N,X,F);await ze($)}catch($){j(((we=(he=$==null?void 0:$.response)==null?void 0:he.data)==null?void 0:we.error)||$.message||"Invalid verification code")}finally{l(!1)}}u.useEffect(()=>{if(!p||W!=="login"||typeof window>"u")return;let G=!1;const he=async $=>{var V,ve;if($!=null&&$.credential){j(""),M("");try{l(!0);const ge=await SP($.credential,F);await ze(ge)}catch(ge){j(((ve=(V=ge==null?void 0:ge.response)==null?void 0:V.data)==null?void 0:ve.error)||ge.message||"Google login failed")}finally{l(!1)}}};return(()=>new Promise(($,V)=>{if(document.querySelector('script[data-google-gsi="1"]')){$();return}const ge=document.createElement("script");ge.src="https://accounts.google.com/gsi/client",ge.async=!0,ge.defer=!0,ge.dataset.googleGsi="1",ge.onload=()=>$(),ge.onerror=()=>V(new Error("Failed to load Google script")),document.head.appendChild(ge)}))().then(()=>{G||!window.google||(window.google.accounts.id.initialize({client_id:p,hd:v||void 0,callback:he}),d(!0))}).catch($=>{j(($==null?void 0:$.message)||"Google login setup failed")}),()=>{G=!0}},[p,v,W,F]);const Me=G=>{e(G==="login"?Q:G==="forgot"?`${Q}?mode=forgot`:G==="mfa"?`${Q}?mode=mfa`:`/reset-password${ne?`?token=${encodeURIComponent(ne)}`:""}`),j(""),M("")};return n.jsx("div",{className:"login-page",children:n.jsx("div",{className:"login-shell",children:n.jsxs("div",{className:"login-card",children:[n.jsxs("div",{className:"login-app-switch",children:[n.jsx("button",{type:"button",className:`login-app-switch-btn${R?"":" active"}`,onClick:()=>e("/login"),children:"Agent Application"}),n.jsx("button",{type:"button",className:`login-app-switch-btn${R?" active":""}`,onClick:()=>e("/portal/login"),children:"User Portal"})]}),W!=="forgot"&&n.jsx("div",{className:"login-title",children:W==="reset"?"SET NEW PASSWORD":W==="mfa"?"MFA VERIFICATION":"LOG IN"}),W!=="forgot"&&y?n.jsx("div",{className:"login-alert login-alert-success",children:y}):null,W!=="forgot"&&k?n.jsx("div",{className:"login-alert login-alert-error",children:k}):null,W==="login"&&n.jsxs("form",{onSubmit:Ze,className:"login-form",children:[n.jsxs("button",{type:"button",className:"login-google-primary login-google-match",onClick:ye,disabled:a||!p,children:[n.jsx("span",{className:"login-google-icon","aria-hidden":"true",children:n.jsxs("svg",{viewBox:"0 0 24 24",width:"20",height:"20",children:[n.jsx("path",{fill:"#EA4335",d:"M12 10.2v3.9h5.5c-.2 1.3-1.5 3.9-5.5 3.9-3.3 0-6-2.8-6-6.2s2.7-6.2 6-6.2c1.9 0 3.2.8 3.9 1.5l2.7-2.7C16.9 2.7 14.7 1.8 12 1.8 6.9 1.8 2.8 6 2.8 11.1S6.9 20.4 12 20.4c6.9 0 9.2-4.8 9.2-7.3 0-.5-.1-.9-.1-1.3H12z"}),n.jsx("path",{fill:"#34A853",d:"M2.8 11.1c0 1.6.6 3.1 1.7 4.2l3-2.3c-.4-.6-.7-1.2-.7-1.9s.2-1.3.7-1.9l-3-2.3c-1.1 1.1-1.7 2.6-1.7 4.2z"}),n.jsx("path",{fill:"#4A90E2",d:"M12 20.4c2.7 0 4.9-.9 6.5-2.5l-3.1-2.4c-.8.5-2 .9-3.4.9-2.5 0-4.6-1.7-5.3-4l-3 2.3c1.4 3.2 4.7 5.7 8.3 5.7z"}),n.jsx("path",{fill:"#FBBC05",d:"M7.7 12.4c-.2-.4-.3-.9-.3-1.3s.1-.9.3-1.3l-3-2.3c-.6 1.1-.9 2.3-.9 3.6s.3 2.5.9 3.6l3-2.3z"})]})}),n.jsx("span",{children:"Continue With Google"})]}),O.some(G=>G.provider==="zoho"&&G.enabled)?n.jsxs("button",{type:"button",className:"login-google-primary",onClick:()=>lt("zoho"),disabled:a,children:[n.jsx("span",{className:"login-google-icon",children:"Z"}),n.jsx("span",{children:"Log in with Zoho"})]}):null,O.some(G=>G.provider==="outlook"&&G.enabled)?n.jsxs("button",{type:"button",className:"login-google-primary",onClick:()=>lt("outlook"),disabled:a,children:[n.jsx("span",{className:"login-google-icon",children:"O"}),n.jsx("span",{children:"Log in with Outlook"})]}):null,n.jsx("div",{className:"login-or",children:"Or"}),n.jsx("input",{className:"login-input",autoComplete:"username",value:C,onChange:G=>{const he=G.target.value;E(he),F&&se(!0,he)},placeholder:"Email"}),n.jsx("input",{className:"login-input",type:"password",autoComplete:"current-password",value:B,onChange:G=>_(G.target.value),placeholder:"Password"}),n.jsxs("div",{className:"login-remember-row",children:[n.jsxs("label",{className:"login-remember",children:[n.jsx("input",{type:"checkbox",checked:F,onChange:G=>{const he=G.target.checked;J(he),se(he,C)}}),n.jsx("span",{children:"Remember me"})]}),n.jsx("button",{type:"button",className:"login-link-btn login-forgot-inline",onClick:()=>Me("forgot"),children:"Forgotten Password?"})]}),n.jsx("button",{disabled:a,type:"submit",className:"login-submit-btn login-submit-green",children:"Log in"})]}),W==="forgot"&&n.jsxs("form",{onSubmit:We,className:"forgot-form",children:[n.jsxs("div",{className:"forgot-header",children:[n.jsx("div",{className:"forgot-title",children:"Forgotten Password"}),n.jsx("button",{type:"button",className:"forgot-close-btn",onClick:()=>Me("login"),"aria-label":"Close",children:"x"})]}),n.jsx("div",{className:"forgot-help",children:"To reset your password, please enter the Email Address for your account below."}),n.jsx("div",{className:"forgot-divider"}),k?n.jsx("div",{className:"login-alert login-alert-error",children:k}):null,y?n.jsxs("div",{className:"forgot-success",children:[n.jsxs("div",{children:[n.jsx("strong",{children:"Email sent!"})," Check your spam/junk folder!"]}),n.jsx("button",{type:"button",className:"login-link-btn forgot-success-link",onClick:()=>Me("login"),children:"Login"})]}):null,n.jsxs("div",{className:"forgot-input-wrap",children:[n.jsx("span",{className:"forgot-mail-icon",children:""}),n.jsx("input",{className:"forgot-input",value:ue,onChange:G=>Y(G.target.value),placeholder:"Email Address"})]}),n.jsx("button",{disabled:a,type:"submit",className:"forgot-submit-btn",children:"Submit"})]}),W==="reset"&&n.jsxs("form",{onSubmit:Fe,className:"login-form",children:[n.jsx("input",{className:"login-input",type:"password",value:xe,onChange:G=>Ne(G.target.value),placeholder:"New Password"}),n.jsx("input",{className:"login-input",type:"password",value:Re,onChange:G=>L(G.target.value),placeholder:"Confirm Password"}),n.jsx("button",{disabled:a,type:"submit",className:"login-submit-btn",children:"Update Password"}),n.jsx("button",{type:"button",className:"login-link-btn",onClick:()=>Me("login"),children:"Back to login"}),y?n.jsx("button",{type:"button",className:"login-link-btn",onClick:()=>Me("login"),children:"Login"}):null]}),W==="mfa"&&n.jsxs("form",{onSubmit:le,className:"login-form",children:[n.jsx("input",{className:"login-input",value:X,onChange:G=>ce(G.target.value),placeholder:"Verification Code"}),n.jsx("button",{disabled:a,type:"submit",className:"login-submit-btn",children:"Verify"}),n.jsx("button",{type:"button",className:"login-link-btn",onClick:()=>Me("login"),children:"Cancel"})]})]})})})}function nj({children:e,roles:t}){const{user:s}=An();return s?t&&t.length>0&&!t.includes(s.role)?n.jsx(sh,{to:"/unauthorized",replace:!0}):e:n.jsx(sh,{to:"/portal/login",replace:!0})}function VL(){const e=Wn();return n.jsxs(jR,{display:"flex",height:"100vh",alignItems:"center",justifyContent:"center",flexDirection:"column",children:[n.jsx(py,{variant:"h4",children:"403  Forbidden"}),n.jsx(py,{variant:"body1",sx:{mt:1},children:"You don't have access to view this page."}),n.jsx(LR,{sx:{mt:2},variant:"contained",onClick:()=>e(-1),children:"Go Back"})]})}function sj(){const{user:e,logout:t}=An(),s=Wn(),r=lr(),i=ma(e,"G"),a=qr(e),[l,c]=u.useState(!1),d=()=>{s({"/portal/home":"/","/portal/tickets":"/tickets","/portal/assets":"/assets","/portal/new-ticket":"/tickets"}[r.pathname]||"/")};return n.jsxs("div",{className:"portal-root portal-home",children:[n.jsxs("header",{className:"portal-topbar",children:[n.jsx("div",{className:"portal-logo",children:"TB ITSM"}),n.jsxs("div",{className:"portal-top-actions",children:[n.jsxs("nav",{className:"portal-nav",children:[n.jsx("button",{className:"portal-nav-link active",onClick:()=>s("/portal/home"),children:"Home"}),n.jsx("button",{className:"portal-nav-link",onClick:()=>s("/portal/new-ticket"),children:"Report an issue"}),n.jsx("button",{className:"portal-nav-link",onClick:()=>s("/portal/tickets"),children:"My Tickets"}),n.jsx("button",{className:"portal-nav-link",onClick:()=>s("/portal/assets"),children:"My Devices"})]}),n.jsxs("div",{className:"portal-profile",onClick:()=>c(!0),children:[n.jsx("div",{className:"portal-profile-name",children:(e==null?void 0:e.name)||"User"}),n.jsx("div",{className:"portal-avatar unified-user-avatar",children:a?n.jsx("img",{src:a,alt:(e==null?void 0:e.name)||"User",className:"unified-user-avatar-image"}):i})]})]})]}),n.jsxs("section",{className:"portal-hero",children:[n.jsx("h1",{children:"What are you looking for?"}),n.jsxs("div",{className:"portal-cards",children:[n.jsxs("button",{className:"portal-card",onClick:()=>s("/portal/new-ticket"),children:[n.jsx("div",{className:"portal-card-icon",children:"!"}),n.jsx("div",{className:"portal-card-title",children:"Report an issue"}),n.jsx("div",{className:"portal-card-sub",children:"Click here to report a new issue"})]}),n.jsxs("button",{className:"portal-card",onClick:()=>s("/portal/tickets"),children:[n.jsx("div",{className:"portal-card-icon",children:"T"}),n.jsx("div",{className:"portal-card-title",children:"My Tickets"}),n.jsx("div",{className:"portal-card-sub",children:"View and update your issues and requests"})]}),n.jsxs("button",{className:"portal-card",onClick:()=>s("/portal/assets"),children:[n.jsx("div",{className:"portal-card-icon",children:"D"}),n.jsx("div",{className:"portal-card-title",children:"My Devices"}),n.jsx("div",{className:"portal-card-sub",children:"View a list of your devices"})]})]})]}),l&&n.jsx("div",{className:"portal-profile-overlay",onClick:()=>c(!1),children:n.jsxs("aside",{className:"portal-profile-panel",onClick:p=>p.stopPropagation(),children:[n.jsx("button",{className:"portal-profile-close",onClick:()=>c(!1),"aria-label":"Close",children:"x"}),n.jsxs("div",{className:"portal-profile-header",children:[n.jsx("div",{className:"portal-profile-avatar",children:i}),n.jsxs("div",{children:[n.jsx("div",{className:"portal-profile-title",children:(e==null?void 0:e.name)||"User"}),n.jsx("div",{className:"portal-profile-email",children:(e==null?void 0:e.email)||"user@example.com"}),n.jsxs("div",{className:"portal-profile-status",children:[n.jsx("span",{className:"portal-status-dot"}),"Available"]})]})]}),n.jsxs("div",{className:"portal-profile-links",children:[n.jsx("button",{onClick:()=>{c(!1),s("/security")},children:"Account & Password"}),n.jsx("button",{onClick:()=>{c(!1),d()},children:"Switch to Agent Application"}),n.jsx("button",{onClick:()=>{t(),s("/login")},children:"Log out"})]})]})})]})}function KL(){const{user:e,logout:t}=An(),s=Wn(),r=lr(),i=ma(e,"U"),a=qr(e),[l,c]=u.useState("All Tickets"),[d,p]=u.useState(""),[g,v]=u.useState(!1),[S,O]=u.useState([]),[x,y]=u.useState(!1),[M,k]=u.useState(""),j=()=>{s({"/portal/home":"/","/portal/tickets":"/tickets","/portal/assets":"/assets","/portal/new-ticket":"/tickets"}[r.pathname]||"/")};return u.useEffect(()=>{(async()=>{var E,B;if(e!=null&&e.id){y(!0),k("");try{const _=await Dm({q:d||void 0,pageSize:50}),F=Array.isArray(_==null?void 0:_.items)?_.items:Array.isArray(_)?_:[],J=l==="Open Tickets"?F.filter(ue=>String(ue.status||"").toLowerCase()!=="closed"):l==="Closed Tickets"?F.filter(ue=>String(ue.status||"").toLowerCase()==="closed"):F;O(J)}catch(_){k(((B=(E=_==null?void 0:_.response)==null?void 0:E.data)==null?void 0:B.error)||"Failed to load tickets")}finally{y(!1)}}})()},[e==null?void 0:e.id,d,l]),n.jsxs("div",{className:"portal-root",children:[n.jsxs("header",{className:"portal-topbar",children:[n.jsx("div",{className:"portal-logo",children:"TB ITSM"}),n.jsxs("div",{className:"portal-top-actions",children:[n.jsxs("nav",{className:"portal-nav",children:[n.jsx("button",{className:"portal-nav-link",onClick:()=>s("/portal/home"),children:"Home"}),n.jsx("button",{className:"portal-nav-link",onClick:()=>s("/portal/new-ticket"),children:"Report an issue"}),n.jsx("button",{className:"portal-nav-link active",onClick:()=>s("/portal/tickets"),children:"My Tickets"}),n.jsx("button",{className:"portal-nav-link",onClick:()=>s("/portal/assets"),children:"My Devices"})]}),n.jsxs("div",{className:"portal-profile",onClick:()=>v(!0),children:[n.jsx("div",{className:"portal-profile-name",children:(e==null?void 0:e.name)||"User"}),n.jsx("div",{className:"portal-avatar unified-user-avatar",children:a?n.jsx("img",{src:a,alt:(e==null?void 0:e.name)||"User",className:"unified-user-avatar-image"}):i})]})]})]}),n.jsxs("section",{className:"portal-page",children:[n.jsx("div",{className:"portal-page-toolbar portal-page-toolbar-header",children:n.jsxs("div",{className:"portal-toolbar-title-group",children:[n.jsx("button",{className:"portal-back-btn",onClick:()=>s("/portal/home"),"aria-label":"Back",children:""}),n.jsx("h1",{children:"My Tickets"})]})}),n.jsxs("div",{className:"portal-page-toolbar",children:[n.jsxs("select",{value:l,onChange:C=>c(C.target.value),children:[n.jsx("option",{children:"All Tickets"}),n.jsx("option",{children:"Open Tickets"}),n.jsx("option",{children:"Closed Tickets"})]}),n.jsxs("div",{className:"portal-search",children:[n.jsx("input",{placeholder:"Search...",value:d,onChange:C=>p(C.target.value)}),n.jsx("span",{className:"portal-search-icon",children:""})]}),n.jsx("button",{className:"portal-more-btn","aria-label":"More",children:""})]}),x?n.jsx("div",{className:"portal-empty-state",children:"Loading tickets..."}):M?n.jsx("div",{className:"portal-empty-state",children:M}):S.length===0?n.jsx("div",{className:"portal-empty-state",children:"No Tickets found"}):n.jsx("div",{className:"portal-list",children:S.map(C=>n.jsxs("div",{className:"portal-list-item",children:[n.jsxs("div",{className:"portal-list-main",children:[n.jsx("div",{className:"portal-list-title",children:C.subject||C.summary||C.ticketId||"Ticket"}),n.jsx("div",{className:"portal-list-sub",children:C.description||C.category||"No description"})]}),n.jsxs("div",{className:"portal-list-meta",children:[n.jsx("span",{children:C.status||"New"}),n.jsx("span",{children:C.priority||"Normal"})]})]},C.id||C.ticketId))})]}),g&&n.jsx("div",{className:"portal-profile-overlay",onClick:()=>v(!1),children:n.jsxs("aside",{className:"portal-profile-panel",onClick:C=>C.stopPropagation(),children:[n.jsx("button",{className:"portal-profile-close",onClick:()=>v(!1),"aria-label":"Close",children:"x"}),n.jsxs("div",{className:"portal-profile-header",children:[n.jsx("div",{className:"portal-profile-avatar",children:i}),n.jsxs("div",{children:[n.jsx("div",{className:"portal-profile-title",children:(e==null?void 0:e.name)||"User"}),n.jsx("div",{className:"portal-profile-email",children:(e==null?void 0:e.email)||"user@example.com"}),n.jsxs("div",{className:"portal-profile-status",children:[n.jsx("span",{className:"portal-status-dot"}),"Available"]})]})]}),n.jsxs("div",{className:"portal-profile-links",children:[n.jsx("button",{onClick:()=>{v(!1),s("/security")},children:"Account & Password"}),n.jsx("button",{onClick:()=>{v(!1),j()},children:"Switch to Agent Application"}),n.jsx("button",{onClick:()=>{t(),s("/login")},children:"Log out"})]})]})})]})}function QL(){const{user:e,logout:t}=An(),s=Wn(),r=lr(),i=ma(e,"U"),a=qr(e),[l,c]=u.useState(!1),[d,p]=u.useState([]),[g,v]=u.useState(!1),[S,O]=u.useState(""),[x,y]=u.useState(""),M=()=>{s({"/portal/home":"/","/portal/tickets":"/tickets","/portal/assets":"/assets","/portal/new-ticket":"/tickets"}[r.pathname]||"/")};u.useEffect(()=>{let E=!0;const B=(J,ue)=>new Promise((Y,xe)=>{const Ne=window.setTimeout(()=>xe(new Error("timeout")),ue);J.then(Re=>{window.clearTimeout(Ne),Y(Re)},Re=>{window.clearTimeout(Ne),xe(Re)})}),_=J=>Array.isArray(J==null?void 0:J.items)?J.items:Array.isArray(J)?J:[];return(async()=>{var ue,Y;if(!(e!=null&&e.id))return;v(!0),O("");const J=window.setTimeout(()=>{E&&(v(!1),O("Request timed out while loading assets. Please refresh and try again."))},15e3);try{const xe=Number(e.id),Ne=String((e==null?void 0:e.email)||"").trim().toLowerCase(),Re=String((e==null?void 0:e.name)||"").trim().toLowerCase(),L=ce=>{var R,Q;const N=Number((ce==null?void 0:ce.assignedToId)||0),K=String((ce==null?void 0:ce.assignedUserEmail)||"").trim().toLowerCase(),W=String(((R=ce==null?void 0:ce.assignedTo)==null?void 0:R.email)||"").trim().toLowerCase(),ne=String(((Q=ce==null?void 0:ce.assignedTo)==null?void 0:Q.name)||"").trim().toLowerCase();return xe>0&&N===xe||Ne&&(K===Ne||W===Ne)||Re&&ne===Re};let X=[];try{const ce=await B(IP({pageSize:200,_ts:Date.now()}),6e3);X=_(ce).filter(L)}catch{}if(!X.length)try{const ce=await B(Jo({assignedToId:xe,pageSize:200,_ts:Date.now()}),6e3);X=_(ce).filter(L)}catch{}if(!X.length)try{const ce=await B(Jo({pageSize:500,_ts:Date.now()}),6e3);X=_(ce).filter(L)}catch{}if(!X.length)throw new Error("No assets assigned.");E&&p(X)}catch(xe){if(E){const Ne=((Y=(ue=xe==null?void 0:xe.response)==null?void 0:ue.data)==null?void 0:Y.error)||(xe==null?void 0:xe.message)||"Failed to load assets";O(Ne==="No assets assigned."?"":Ne),Ne==="No assets assigned."&&p([])}}finally{window.clearTimeout(J),E&&v(!1)}})(),()=>{E=!1}},[e==null?void 0:e.id,e==null?void 0:e.email,e==null?void 0:e.name]);const k=u.useMemo(()=>{const E=x.trim().toLowerCase();return d.filter(B=>E?[B==null?void 0:B.name,B==null?void 0:B.assetId,B==null?void 0:B.assetType,B==null?void 0:B.category,B==null?void 0:B.serial,B==null?void 0:B.model,B==null?void 0:B.location,B==null?void 0:B.site].map(F=>String(F||"").toLowerCase()).join(" ").includes(E):!0)},[d,x]),j=E=>{const B=String(E||"").trim().toLowerCase();return B.includes("repair")||B.includes("fault")?"warn":B.includes("stock")||B.includes("available")?"info":B.includes("active")||B.includes("use")?"ok":"neutral"},C=E=>{const B=String((E==null?void 0:E.assetType)||(E==null?void 0:E.category)||"").toLowerCase();return B.includes("laptop")?"LP":B.includes("desktop")?"DT":B.includes("printer")?"PR":B.includes("server")?"SV":B.includes("network")?"NW":"AS"};return n.jsxs("div",{className:"portal-root",children:[n.jsxs("header",{className:"portal-topbar",children:[n.jsx("div",{className:"portal-logo",children:"TB ITSM"}),n.jsxs("div",{className:"portal-top-actions",children:[n.jsxs("nav",{className:"portal-nav",children:[n.jsx("button",{className:"portal-nav-link",onClick:()=>s("/portal/home"),children:"Home"}),n.jsx("button",{className:"portal-nav-link",onClick:()=>s("/portal/new-ticket"),children:"Report an issue"}),n.jsx("button",{className:"portal-nav-link",onClick:()=>s("/portal/tickets"),children:"My Tickets"}),n.jsx("button",{className:"portal-nav-link active",onClick:()=>s("/portal/assets"),children:"My Devices"})]}),n.jsxs("div",{className:"portal-profile",onClick:()=>c(!0),children:[n.jsx("div",{className:"portal-profile-name",children:(e==null?void 0:e.name)||"User"}),n.jsx("div",{className:"portal-avatar unified-user-avatar",children:a?n.jsx("img",{src:a,alt:(e==null?void 0:e.name)||"User",className:"unified-user-avatar-image"}):i})]})]})]}),n.jsxs("section",{className:"portal-page",children:[n.jsxs("div",{className:"portal-page-toolbar portal-page-toolbar-header",children:[n.jsxs("div",{className:"portal-toolbar-title-group",children:[n.jsx("button",{className:"portal-back-btn",onClick:()=>s("/portal/home"),"aria-label":"Back",children:""}),n.jsx("h1",{children:"My Assets"})]}),n.jsxs("div",{className:"portal-assets-search portal-toolbar-search",children:[n.jsx("span",{"aria-hidden":"true",children:"Search"}),n.jsx("input",{value:x,onChange:E=>y(E.target.value),placeholder:"Search"})]})]}),g?n.jsx("div",{className:"portal-table-empty",children:"Loading assets..."}):S?n.jsx("div",{className:"portal-table-empty",children:S}):k.length===0?n.jsx("div",{className:"portal-table-empty",children:"No assets assigned."}):n.jsx("div",{className:"portal-asset-cards",children:k.map(E=>{var B,_;return n.jsxs("div",{className:"portal-asset-card",children:[n.jsxs("div",{className:"portal-asset-header",children:[n.jsxs("div",{className:"portal-asset-headline",children:[n.jsx("div",{className:"portal-asset-media",children:C(E)}),n.jsxs("div",{children:[n.jsx("div",{className:"portal-asset-title",children:E.name||E.assetId||"Asset"}),n.jsx("div",{className:"portal-asset-sub",children:E.assetType||E.category||"Type not set"})]})]}),n.jsx("span",{className:`portal-asset-status portal-asset-status-${j(E.status||"")}`,children:E.status||"Unknown"})]}),n.jsxs("div",{className:"portal-asset-grid",children:[n.jsxs("div",{children:[n.jsx("span",{children:"Asset ID"}),n.jsx("strong",{children:E.assetId||"-"})]}),n.jsxs("div",{children:[n.jsx("span",{children:"Model"}),n.jsx("strong",{children:E.model||"-"})]}),n.jsxs("div",{children:[n.jsx("span",{children:"Category"}),n.jsx("strong",{children:E.category||"-"})]}),n.jsxs("div",{children:[n.jsx("span",{children:"Serial No"}),n.jsx("strong",{children:E.serial||"-"})]}),n.jsxs("div",{children:[n.jsx("span",{children:"Location"}),n.jsx("strong",{children:E.location||E.site||"-"})]}),n.jsxs("div",{children:[n.jsx("span",{children:"Assigned To"}),n.jsx("strong",{children:((B=E==null?void 0:E.assignedTo)==null?void 0:B.name)||((_=E==null?void 0:E.assignedTo)==null?void 0:_.email)||(E==null?void 0:E.assignedUserEmail)||"You"})]}),n.jsxs("div",{children:[n.jsx("span",{children:"Warranty"}),n.jsx("strong",{children:E.warrantyUntil?String(E.warrantyUntil).slice(0,10):"-"})]}),n.jsxs("div",{children:[n.jsx("span",{children:"Status"}),n.jsx("strong",{children:E.status||"-"})]})]}),n.jsx("div",{className:"portal-asset-actions",children:n.jsx("button",{type:"button",className:"portal-asset-action",onClick:()=>s("/portal/new-ticket"),children:"Report Issue"})})]},E.id)})})]}),l&&n.jsx("div",{className:"portal-profile-overlay",onClick:()=>c(!1),children:n.jsxs("aside",{className:"portal-profile-panel",onClick:E=>E.stopPropagation(),children:[n.jsx("button",{className:"portal-profile-close",onClick:()=>c(!1),"aria-label":"Close",children:"x"}),n.jsxs("div",{className:"portal-profile-header",children:[n.jsx("div",{className:"portal-profile-avatar",children:i}),n.jsxs("div",{children:[n.jsx("div",{className:"portal-profile-title",children:(e==null?void 0:e.name)||"User"}),n.jsx("div",{className:"portal-profile-email",children:(e==null?void 0:e.email)||"user@example.com"}),n.jsxs("div",{className:"portal-profile-status",children:[n.jsx("span",{className:"portal-status-dot"}),"Available"]})]})]}),n.jsxs("div",{className:"portal-profile-links",children:[n.jsx("button",{onClick:()=>{c(!1),s("/security")},children:"Account & Password"}),n.jsx("button",{onClick:()=>{c(!1),M()},children:"Switch to Agent Application"}),n.jsx("button",{onClick:()=>{t(),s("/login")},children:"Log out"})]})]})})]})}function GL(){const{user:e,logout:t}=An(),s=Wn(),r=lr(),i=ma(e,"U"),a=qr(e),l=u.useRef(null),[c,d]=u.useState(""),[p,g]=u.useState(""),[v,S]=u.useState(""),[O,x]=u.useState(!1),[y,M]=u.useState(!1),[k,j]=u.useState(""),C=()=>{s({"/portal/home":"/","/portal/tickets":"/tickets","/portal/assets":"/assets","/portal/new-ticket":"/tickets"}[r.pathname]||"/")},E=(_,F)=>{l.current&&(l.current.focus(),F!==void 0?document.execCommand(_,!1,F):document.execCommand(_,!1))},B=async()=>{var F,J,ue,Y;const _=((J=(F=l.current)==null?void 0:F.innerText)==null?void 0:J.trim())||"";if(!c.trim()||!_||!p||!v){j("Please fill all required fields.");return}try{M(!0),j(""),await Tu({subject:c.trim(),summary:c.trim(),description:_,impact:p,urgency:v,type:"Incident",createdFrom:"User portal",requesterId:e==null?void 0:e.id,requesterEmail:e==null?void 0:e.email}),j("Ticket created successfully."),s("/portal/tickets")}catch(xe){j(((Y=(ue=xe==null?void 0:xe.response)==null?void 0:ue.data)==null?void 0:Y.error)||"Failed to create ticket")}finally{M(!1)}};return n.jsxs("div",{className:"portal-root",children:[n.jsxs("header",{className:"portal-topbar",children:[n.jsx("div",{className:"portal-logo",children:"TB ITSM"}),n.jsxs("div",{className:"portal-top-actions",children:[n.jsxs("nav",{className:"portal-nav",children:[n.jsx("button",{className:"portal-nav-link",onClick:()=>s("/portal/home"),children:"Home"}),n.jsx("button",{className:"portal-nav-link active",onClick:()=>s("/portal/new-ticket"),children:"Report an issue"}),n.jsx("button",{className:"portal-nav-link",onClick:()=>s("/portal/tickets"),children:"My Tickets"}),n.jsx("button",{className:"portal-nav-link",onClick:()=>s("/portal/assets"),children:"My Devices"})]}),n.jsxs("div",{className:"portal-profile",onClick:()=>x(!0),children:[n.jsx("div",{className:"portal-profile-name",children:(e==null?void 0:e.name)||"User"}),n.jsx("div",{className:"portal-avatar unified-user-avatar",children:a?n.jsx("img",{src:a,alt:(e==null?void 0:e.name)||"User",className:"unified-user-avatar-image"}):i})]})]})]}),n.jsxs("section",{className:"portal-page",children:[n.jsxs("div",{className:"portal-page-toolbar portal-page-toolbar-header",children:[n.jsxs("div",{className:"portal-toolbar-title-group",children:[n.jsx("button",{className:"portal-back-btn",onClick:()=>s("/portal/home"),"aria-label":"Back",children:""}),n.jsxs("div",{children:[n.jsx("h1",{children:"New Ticket"}),n.jsx("p",{className:"portal-page-sub",children:"Please complete the following form to submit a new Ticket."})]})]}),n.jsx("div",{className:"portal-required-hint",children:"* denotes a mandatory field"})]}),n.jsxs("div",{className:"portal-form",children:[n.jsxs("label",{className:"portal-field",children:[n.jsx("span",{children:"Contact *"}),n.jsxs("div",{className:"portal-contact",children:[n.jsx("div",{className:"portal-contact-avatar",children:i}),n.jsxs("div",{children:[n.jsx("div",{className:"portal-contact-name",children:(e==null?void 0:e.name)||"User"}),n.jsx("div",{className:"portal-contact-sub",children:(e==null?void 0:e.email)||"user@example.com"})]})]})]}),n.jsxs("label",{className:"portal-field",children:[n.jsx("span",{children:"Summary *"}),n.jsx("input",{value:c,onChange:_=>d(_.target.value)})]}),n.jsxs("label",{className:"portal-field",children:[n.jsx("span",{children:"Details *"}),n.jsxs("div",{className:"portal-editor",children:[n.jsxs("div",{className:"portal-editor-toolbar",children:[n.jsx("button",{type:"button",onClick:()=>E("bold"),children:n.jsx("strong",{children:"B"})}),n.jsx("button",{type:"button",onClick:()=>E("italic"),children:n.jsx("em",{children:"I"})}),n.jsx("button",{type:"button",onClick:()=>E("underline"),children:n.jsx("span",{style:{textDecoration:"underline"},children:"U"})}),n.jsx("span",{className:"compose-toolbar-divider"}),n.jsx("button",{type:"button",onClick:()=>E("insertOrderedList"),children:"1."}),n.jsx("button",{type:"button",onClick:()=>E("insertUnorderedList"),children:""}),n.jsx("button",{type:"button",onClick:()=>E("formatBlock","blockquote"),children:'""'}),n.jsx("span",{className:"compose-toolbar-divider"}),n.jsx("button",{type:"button",onClick:()=>E("insertHorizontalRule"),children:"-"}),n.jsx("button",{type:"button",onClick:()=>E("removeFormat"),children:"Tx"})]}),n.jsx("div",{ref:l,className:"portal-editor-body",contentEditable:!0,suppressContentEditableWarning:!0,"data-placeholder":"Please provide a detailed description and include screenshots where possible."})]})]}),n.jsxs("div",{className:"portal-grid",children:[n.jsxs("label",{className:"portal-field",children:[n.jsx("span",{children:"Impact *"}),n.jsxs("select",{value:p,onChange:_=>g(_.target.value),children:[n.jsx("option",{value:"",children:"Select..."}),n.jsx("option",{children:"Low"}),n.jsx("option",{children:"Medium"}),n.jsx("option",{children:"High"})]})]}),n.jsxs("label",{className:"portal-field",children:[n.jsx("span",{children:"Urgency *"}),n.jsxs("select",{value:v,onChange:_=>S(_.target.value),children:[n.jsx("option",{value:"",children:"Select..."}),n.jsx("option",{children:"Low"}),n.jsx("option",{children:"Medium"}),n.jsx("option",{children:"High"})]})]})]}),k?n.jsx("div",{className:"portal-form-result",children:k}):null,n.jsx("div",{className:"portal-submit-row",children:n.jsx("button",{className:"portal-submit-btn",onClick:B,disabled:y,children:y?"Submitting...":"Submit"})})]})]}),O&&n.jsx("div",{className:"portal-profile-overlay",onClick:()=>x(!1),children:n.jsxs("aside",{className:"portal-profile-panel",onClick:_=>_.stopPropagation(),children:[n.jsx("button",{className:"portal-profile-close",onClick:()=>x(!1),"aria-label":"Close",children:"x"}),n.jsxs("div",{className:"portal-profile-header",children:[n.jsx("div",{className:"portal-profile-avatar",children:i}),n.jsxs("div",{children:[n.jsx("div",{className:"portal-profile-title",children:(e==null?void 0:e.name)||"User"}),n.jsx("div",{className:"portal-profile-email",children:(e==null?void 0:e.email)||"user@example.com"}),n.jsxs("div",{className:"portal-profile-status",children:[n.jsx("span",{className:"portal-status-dot"}),"Available"]})]})]}),n.jsxs("div",{className:"portal-profile-links",children:[n.jsx("button",{onClick:()=>{x(!1),s("/security")},children:"Account & Password"}),n.jsx("button",{onClick:()=>{x(!1),C()},children:"Switch to Agent Application"}),n.jsx("button",{onClick:()=>{t(),s("/login")},children:"Log out"})]})]})})]})}function JL(){const e=Wn(),{user:t,refreshUser:s}=An(),r=String((t==null?void 0:t.role)||"").toUpperCase()==="ADMIN",i=oe.useRef(null),[a,l]=u.useState("account-information"),[c,d]=u.useState(!1),[p,g]=u.useState(""),[v,S]=u.useState(""),[O,x]=u.useState(!1),[y,M]=u.useState(""),[k,j]=u.useState(""),[C,E]=u.useState(!1),[B,_]=u.useState({currentPassword:"",newPassword:"",confirmPassword:""}),F=ma(t,"U"),J=qr(t),ue=String((t==null?void 0:t.name)||"").trim(),Y=ue.split(/\s+/).filter(Boolean),xe=Y[0]||"",Ne=Y.slice(1).join(" "),Re=(xe||ue||String((t==null?void 0:t.email)||"U")).trim().charAt(0).toUpperCase()||"U",[L,X]=u.useState({firstName:xe,surname:Ne,initial:Re,phoneNo:String((t==null?void 0:t.phone)||(t==null?void 0:t.phoneNumber)||"").trim(),avatarUrl:J});oe.useEffect(()=>{const R=String((t==null?void 0:t.name)||"").trim(),Q=R.split(/\s+/).filter(Boolean),je=Q[0]||"",se=Q.slice(1).join(" "),ze=(je||R||String((t==null?void 0:t.email)||"U")).trim().charAt(0).toUpperCase()||"U";X({firstName:je,surname:se,initial:ze,phoneNo:String((t==null?void 0:t.phone)||(t==null?void 0:t.phoneNumber)||"").trim(),avatarUrl:qr(t)})},[t==null?void 0:t.name,t==null?void 0:t.email,t==null?void 0:t.phone,t==null?void 0:t.phoneNumber]);const ce=()=>{var R;(R=i.current)==null||R.click()},N=R=>{var se;const Q=(se=R.target.files)==null?void 0:se[0];if(!Q)return;if(!String(Q.type||"").startsWith("image/")){j("Please select a valid image file.");return}if(Q.size>2*1024*1024){j("Image size should be less than 2MB.");return}const je=new FileReader;je.onload=()=>{const ze=String(je.result||"");ze&&(j(""),X(Ze=>({...Ze,avatarUrl:ze})))},je.onerror=()=>j("Failed to read selected image."),je.readAsDataURL(Q)},K=()=>{j(""),X(R=>({...R,avatarUrl:""})),i.current&&(i.current.value="")},W=async()=>{var R,Q;if(g(""),S(""),!B.currentPassword.trim()||!B.newPassword.trim()){S("Current password and new password are required.");return}if(B.newPassword.length<8){S("New password must be at least 8 characters.");return}if(B.newPassword!==B.confirmPassword){S("New password and confirm password do not match.");return}d(!0);try{await RP(B.currentPassword,B.newPassword),g("Password updated successfully."),_({currentPassword:"",newPassword:"",confirmPassword:""})}catch(je){S(((Q=(R=je==null?void 0:je.response)==null?void 0:R.data)==null?void 0:Q.error)||(je==null?void 0:je.message)||"Failed to change password")}finally{d(!1)}},ne=async()=>{var Q,je;if(!(t!=null&&t.id)){j("User ID not found. Unable to save.");return}j(""),M("");const R=`${L.firstName} ${L.surname}`.trim();try{x(!0),await ll(Number(t.id),{...r?{name:R||void 0}:{},phone:L.phoneNo.trim()||void 0,avatarUrl:L.avatarUrl||null}),sL(t,L.avatarUrl||""),s(),E(!1),M("Account information updated successfully.")}catch(se){j(((je=(Q=se==null?void 0:se.response)==null?void 0:Q.data)==null?void 0:je.error)||(se==null?void 0:se.message)||"Failed to save account information")}finally{x(!1)}};return n.jsx("div",{className:"work-main",children:n.jsxs("div",{className:"account-security-page",children:[n.jsxs("div",{className:"account-security-banner",children:[n.jsx("h2",{children:"Account Security"}),n.jsx("button",{className:"account-security-close",onClick:()=>e("/dashboard"),"aria-label":"Close",children:""})]}),n.jsxs("div",{className:"account-security-layout",children:[n.jsxs("aside",{className:"account-security-sidebar",children:[n.jsxs("div",{className:"account-security-user",children:[n.jsx("div",{className:"account-security-avatar unified-user-avatar",children:L.avatarUrl?n.jsx("img",{src:L.avatarUrl,alt:(t==null?void 0:t.name)||"User",className:"unified-user-avatar-image"}):F}),n.jsxs("div",{children:[n.jsx("div",{className:"account-security-name",children:(t==null?void 0:t.name)||"User"}),n.jsx("div",{className:"account-security-email",children:(t==null?void 0:t.email)||""})]})]}),n.jsx("button",{className:"account-security-return",onClick:()=>e("/dashboard"),children:"Return to application"}),n.jsxs("div",{className:"account-security-nav",children:[n.jsx("button",{className:a==="account-information"?"active":"",onClick:()=>l("account-information"),children:"Account Information"}),n.jsx("button",{className:a==="password"?"active":"",onClick:()=>l("password"),children:"Password"}),n.jsx("button",{type:"button",disabled:!0,title:"Disabled for now",children:"Two-Factor Authentication"})]})]}),n.jsxs("section",{className:"account-security-content",children:[a==="account-information"&&n.jsxs("div",{className:"account-security-card",children:[n.jsx("h3",{children:"Staff Details"}),k?n.jsx("div",{className:"account-security-alert error",children:k}):null,y?n.jsx("div",{className:"account-security-alert success",children:y}):null,C?n.jsxs("div",{className:"account-security-inline-actions",style:{justifyContent:"flex-start",marginBottom:10},children:[n.jsx("input",{ref:i,type:"file",accept:"image/*",style:{display:"none"},onChange:N}),n.jsx("button",{type:"button",onClick:ce,children:"Change Photo"}),n.jsx("button",{type:"button",onClick:K,children:"Remove Photo"})]}):null,n.jsx("div",{className:"account-security-info-list",children:n.jsxs("div",{className:"account-security-table",role:"table","aria-label":"Staff Details",children:[n.jsxs("div",{className:"account-security-table-row",role:"row",children:[n.jsx("div",{className:"account-security-table-cell account-security-table-label",role:"cell",children:"User Name"}),n.jsx("div",{className:"account-security-table-cell",role:"cell",children:n.jsx("span",{className:"account-security-table-value",children:(t==null?void 0:t.name)||"Not set"})})]}),n.jsxs("div",{className:"account-security-table-row",role:"row",children:[n.jsx("div",{className:"account-security-table-cell account-security-table-label",role:"cell",children:"Email ID"}),n.jsx("div",{className:"account-security-table-cell",role:"cell",children:n.jsx("span",{className:"account-security-table-value",children:(t==null?void 0:t.email)||"Not set"})})]}),n.jsxs("div",{className:"account-security-table-row",role:"row",children:[n.jsx("div",{className:"account-security-table-cell account-security-table-label",role:"cell",children:"Role"}),n.jsx("div",{className:"account-security-table-cell",role:"cell",children:n.jsx("span",{className:"account-security-table-value",children:(t==null?void 0:t.role)||"Not set"})})]}),n.jsxs("div",{className:"account-security-table-row",role:"row",children:[n.jsx("div",{className:"account-security-table-cell account-security-table-label",role:"cell",children:"First Name"}),n.jsx("div",{className:"account-security-table-cell",role:"cell",children:!C||!r?n.jsx("span",{className:"account-security-table-value",children:L.firstName||"Not set"}):n.jsx("input",{type:"text",value:L.firstName,placeholder:"Not set",onChange:R=>X(Q=>({...Q,firstName:R.target.value}))})})]}),n.jsxs("div",{className:"account-security-table-row",role:"row",children:[n.jsx("div",{className:"account-security-table-cell account-security-table-label",role:"cell",children:"Surname"}),n.jsx("div",{className:"account-security-table-cell",role:"cell",children:!C||!r?n.jsx("span",{className:"account-security-table-value",children:L.surname||"Not set"}):n.jsx("input",{type:"text",value:L.surname,placeholder:"Not set",onChange:R=>X(Q=>({...Q,surname:R.target.value}))})})]}),n.jsxs("div",{className:"account-security-table-row",role:"row",children:[n.jsx("div",{className:"account-security-table-cell account-security-table-label",role:"cell",children:"Initial"}),n.jsx("div",{className:"account-security-table-cell",role:"cell",children:!C||!r?n.jsx("span",{className:"account-security-table-value",children:L.initial||"Not set"}):n.jsx("input",{type:"text",value:L.initial,className:"account-security-input-short",onChange:R=>X(Q=>({...Q,initial:R.target.value.toUpperCase().slice(0,2)}))})})]}),n.jsxs("div",{className:"account-security-table-row",role:"row",children:[n.jsx("div",{className:"account-security-table-cell account-security-table-label",role:"cell",children:"Phone No"}),n.jsx("div",{className:"account-security-table-cell",role:"cell",children:C?n.jsx("input",{type:"text",value:L.phoneNo,placeholder:"Not set",onChange:R=>X(Q=>({...Q,phoneNo:R.target.value}))}):n.jsx("span",{className:"account-security-table-value",children:L.phoneNo||"Not set"})})]})]})}),n.jsx("div",{className:"account-security-inline-actions",children:C?n.jsx("button",{type:"button",onClick:ne,disabled:O,children:O?"Saving...":"Save"}):n.jsx("button",{type:"button",onClick:()=>{j(""),M(""),E(!0)},children:"Edit"})}),r?null:n.jsx("div",{className:"account-security-alert",style:{marginTop:10},children:"User Name can be changed only by Admin."})]}),a==="password"&&n.jsxs("div",{className:"account-security-card",children:[n.jsx("h3",{children:"Change Password"}),v?n.jsx("div",{className:"account-security-alert error",children:v}):null,p?n.jsx("div",{className:"account-security-alert success",children:p}):null,n.jsxs("label",{children:["Old Password",n.jsx("input",{type:"password",value:B.currentPassword,onChange:R=>_(Q=>({...Q,currentPassword:R.target.value})),placeholder:"Enter current password"})]}),n.jsxs("label",{children:["New Password",n.jsx("input",{type:"password",value:B.newPassword,onChange:R=>_(Q=>({...Q,newPassword:R.target.value})),placeholder:"Enter new password"})]}),n.jsxs("label",{children:["Re-enter New Password",n.jsx("input",{type:"password",value:B.confirmPassword,onChange:R=>_(Q=>({...Q,confirmPassword:R.target.value})),placeholder:"Re-enter new password"})]}),n.jsx("button",{className:"account-security-submit",disabled:c,onClick:W,children:c?"Submitting...":"Submit"})]})]})]})]})})}async function Qg(e={}){return(await De.get("/notifications",{params:e})).data}async function u1(){return(await De.get("/notifications/state")).data}async function YL(e){return(await De.put("/notifications/state",e)).data}function rj(e){return Array.isArray(e)?Array.from(new Set(e.map(t=>Number(t)).filter(t=>Number.isFinite(t)&&t>0))).slice(0,5e3):[]}function XL(e){const t=(e==null?void 0:e.id)!=null?String(e.id).trim():"";if(t)return t;const s=(e==null?void 0:e.email)!=null?String(e.email).trim().toLowerCase():"";return s?`email:${s}`:"anon"}function m1(e){return`itsm.notifications.state.${XL(e)}`}function p1(){return"itsm.notifications.state.anon"}function f1(e){try{const t=m1(e),s=!!(e!=null&&e.id),r=window.localStorage.getItem(t)||(s?window.localStorage.getItem(p1()):null);if(!r)return{readIds:[],deletedIds:[],clearedAt:void 0};const i=JSON.parse(r),a=Number(i==null?void 0:i.clearedAt);return{readIds:rj(i==null?void 0:i.readIds),deletedIds:rj(i==null?void 0:i.deletedIds),clearedAt:Number.isFinite(a)&&a>0?a:void 0}}catch{return{readIds:[],deletedIds:[],clearedAt:void 0}}}function jh(e,t){try{const s=JSON.stringify(t);window.localStorage.setItem(m1(e),s),window.localStorage.setItem(p1(),s)}catch{}}function Ed(e){const t=Number(e);return!Number.isFinite(t)||t<=0?null:t}function ZL(e){if(!e)return"Just now";const t=new Date(e);if(Number.isNaN(t.getTime()))return"Just now";const s=Date.now()-t.getTime(),r=Math.floor(s/6e4);if(r<1)return"Just now";if(r<60)return`${r} minute${r===1?"":"s"} ago`;const i=Math.floor(r/60);if(i<24)return`${i} hour${i===1?"":"s"} ago`;const a=Math.floor(i/24);return`${a} day${a===1?"":"s"} ago`}function eI(e){var a;const t=String(e.action||"").toLowerCase(),s=String(e.entity||"").toLowerCase(),r=String(e.ticketId||((a=e.meta)==null?void 0:a.ticketId)||""),i=r?`Ticket ${r}`:"Ticket";return s==="ticket"?t.includes("create")?{title:"New ticket logged",sub:i}:t.includes("transition")?{title:`${i} status updated`,sub:`Action: ${e.action}`}:t.includes("resolve")?{title:`${i} resolved`,sub:`Action: ${e.action}`}:t.includes("delete")?{title:`${i} deleted`,sub:`Action: ${e.action}`}:{title:`${i} updated`,sub:`Action: ${e.action}`}:s==="sla"?{title:"Maintenance / SLA policy update",sub:`Action: ${e.action}`}:s==="asset"?{title:"Asset updated",sub:`Action: ${e.action}`}:s==="change"||s==="problem"||s==="service"||s==="supplier"?{title:`${s[0].toUpperCase()}${s.slice(1)} updated`,sub:`Action: ${e.action}`}:{title:"System notification",sub:`Action: ${e.action||"update"}`}}function tI(){const{user:e}=An(),[t,s]=oe.useState([]),[r,i]=oe.useState(!1),[a,l]=oe.useState({readIds:[],deletedIds:[],clearedAt:void 0}),c=oe.useRef(!1),d=oe.useCallback(async()=>{try{i(!0);const x=await Qg({limit:120});s(Array.isArray(x)?x:[])}finally{i(!1)}},[]);oe.useEffect(()=>{let x=!1;return c.current=!1,(async()=>{let k=f1(e);try{if(e){const j=await u1();k={readIds:Array.isArray(j==null?void 0:j.readIds)?j.readIds.map(C=>Number(C)).filter(C=>Number.isFinite(C)&&C>0):[],deletedIds:Array.isArray(j==null?void 0:j.deletedIds)?j.deletedIds.map(C=>Number(C)).filter(C=>Number.isFinite(C)&&C>0):[],clearedAt:Number.isFinite(Number(j==null?void 0:j.clearedAt))?Number(j.clearedAt):void 0}}}catch{}x||(l(k),jh(e,k),c.current=!0,window.dispatchEvent(new CustomEvent("notifications-state-changed")))})(),()=>{x=!0}},[e==null?void 0:e.id]),oe.useEffect(()=>{c.current&&(jh(e,a),e&&YL(a).catch(()=>{}),window.dispatchEvent(new CustomEvent("notifications-state-changed")))},[a,e]),oe.useEffect(()=>{d();const x=window.setInterval(d,3e4);return()=>window.clearInterval(x)},[d]);const p=t.filter(x=>{const y=Ed(x.id);if(!y||a.deletedIds.includes(y))return!1;if(!a.clearedAt)return!0;const M=x.createdAt?new Date(x.createdAt).getTime():0;return!Number.isFinite(M)||M>a.clearedAt}),g=x=>{l(y=>({...y,readIds:y.readIds.includes(x)?y.readIds:[...y.readIds,x]}))},v=x=>{l(y=>({...y,deletedIds:y.deletedIds.includes(x)?y.deletedIds:[...y.deletedIds,x],readIds:y.readIds.includes(x)?y.readIds:[...y.readIds,x]}))},S=oe.useCallback(()=>{const x=p.map(y=>Ed(y.id)).filter(y=>!!y);l(y=>({...y,readIds:Array.from(new Set([...y.readIds,...x]))}))},[p]),O=oe.useCallback(()=>{const x=p.map(y=>Ed(y.id)).filter(y=>!!y);l(y=>({...y,deletedIds:Array.from(new Set([...y.deletedIds,...x])),readIds:Array.from(new Set([...y.readIds,...x])),clearedAt:Date.now()}))},[p]);return oe.useEffect(()=>{const x=()=>S(),y=()=>O();return window.addEventListener("notifications-mark-all-read",x),window.addEventListener("notifications-delete-all",y),()=>{window.removeEventListener("notifications-mark-all-read",x),window.removeEventListener("notifications-delete-all",y)}},[S,O]),n.jsx("div",{className:"panel-notifications",children:n.jsxs("div",{className:"panel-list",children:[r&&p.length===0?n.jsx("div",{className:"panel-empty",children:"Loading notifications..."}):null,!r&&p.length===0?n.jsx("div",{className:"panel-empty",children:"No notifications"}):null,p.map(x=>{const y=Ed(x.id);if(!y)return null;const M=a.readIds.includes(y),k=eI(x);return n.jsxs("div",{className:`panel-card${M?" panel-card-read":""}`,children:[n.jsx("div",{className:"panel-card-time",children:ZL(x.createdAt)}),n.jsx("div",{className:"panel-card-title",children:k.title}),n.jsx("div",{className:"panel-card-sub",children:k.sub}),n.jsxs("div",{className:"panel-card-actions",children:[n.jsxs("button",{className:"panel-card-btn",onClick:()=>g(y),disabled:M,children:[n.jsx("svg",{viewBox:"0 0 24 24",width:"11",height:"11",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{marginRight:5},children:n.jsx("path",{d:"M20 6 9 17l-5-5"})}),M?"Read":"Mark read"]}),n.jsxs("button",{className:"panel-card-btn panel-card-btn-danger",onClick:()=>v(y),children:[n.jsxs("svg",{viewBox:"0 0 24 24",width:"11",height:"11",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{marginRight:5},children:[n.jsx("path",{d:"M3 6h18"}),n.jsx("path",{d:"M8 6V4h8v2"}),n.jsx("path",{d:"M19 6l-1 14H6L5 6"})]}),"Delete"]})]})]},y)})]})})}const ij=[0,5,10,15,30,60,120,1440],nI=[{value:"all",label:"All Tasks"},{value:"today",label:"Today"},{value:"upcoming",label:"Upcoming"},{value:"overdue",label:"Overdue"},{value:"completed",label:"Completed"}],lo={inAppReminder:!0,desktopReminder:!1,defaultReminderMinutes:15},of=()=>new Date().toISOString().slice(0,10),Ir=e=>{if(!e.dueDate)return Number.NaN;const t=e.dueTime||"23:59";return new Date(`${e.dueDate}T${t}:00`).getTime()},sI=e=>{const t=Ir(e);if(!Number.isFinite(t))return"-";const s=Math.round((t-Date.now())/6e4);return Math.abs(s)<1?"now":s>0?`in ${s}m`:`${Math.abs(s)}m ago`},aj=e=>{const t=Ir(e);return Number.isFinite(t)?new Date(t).toLocaleString():"No deadline"};function rI(){const{user:e}=An(),t=String((e==null?void 0:e.id)||(e==null?void 0:e.email)||"guest"),s=`itsm.todo.tasks.v5.${t}`,r=`itsm.todo.settings.v5.${t}`,[i,a]=u.useState(()=>{try{if(typeof window>"u")return[];const W=window.localStorage.getItem(s),ne=W?JSON.parse(W):[];return Array.isArray(ne)?ne:[]}catch{return[]}}),[l,c]=u.useState(()=>{try{if(typeof window>"u")return lo;const W=window.localStorage.getItem(r),ne=W?JSON.parse(W):null;return ne&&typeof ne=="object"?{...lo,...ne}:lo}catch{return lo}}),[d,p]=u.useState("all"),[g,v]=u.useState(!1),[S,O]=u.useState(!1),[x,y]=u.useState(""),[M,k]=u.useState(""),[j,C]=u.useState(of()),[E,B]=u.useState("19:00"),[_,F]=u.useState(lo.defaultReminderMinutes),[J,ue]=u.useState("none"),[Y,xe]=u.useState(null),[Ne,Re]=u.useState([]);oe.useEffect(()=>{typeof window>"u"||window.localStorage.setItem(s,JSON.stringify(i))},[i,s]),oe.useEffect(()=>{typeof window>"u"||window.localStorage.setItem(r,JSON.stringify(l))},[l,r]),oe.useEffect(()=>{F(l.defaultReminderMinutes)},[l.defaultReminderMinutes]),oe.useEffect(()=>{const W=()=>{const R=Date.now(),Q=[];a(je=>je.map(se=>{if(se.completed||se.notifiedAt)return se;const ze=Ir(se);if(!Number.isFinite(ze))return se;const Ze=ze-se.reminderMinutes*6e4;return R<Ze?se:(Q.push({id:se.id,message:`${se.title} - due ${aj(se)}`}),{...se,notifiedAt:new Date().toISOString()})})),Q.length>0&&l.inAppReminder&&Re(je=>[...Q,...je].slice(0,5)),Q.length>0&&l.desktopReminder&&typeof window<"u"&&"Notification"in window&&(Notification.permission==="default"&&Notification.requestPermission().catch(()=>{}),Notification.permission==="granted"&&Q.forEach(je=>{try{new Notification("Task Reminder",{body:je.message})}catch{}}))};W();const ne=window.setInterval(W,3e4);return()=>window.clearInterval(ne)},[l.desktopReminder,l.inAppReminder]);const L=u.useMemo(()=>{const W=Date.now(),ne=new Date(of()).getTime(),R=ne+24*60*60*1e3,Q=i.slice().sort((je,se)=>Ir(je)-Ir(se));return d==="completed"?Q.filter(je=>je.completed):d==="today"?Q.filter(je=>!je.completed&&Ir(je)>=ne&&Ir(je)<R):d==="upcoming"?Q.filter(je=>!je.completed&&Ir(je)>=W):d==="overdue"?Q.filter(je=>!je.completed&&Ir(je)<W):Q},[d,i]),X=()=>{const W=x.trim();if(!W)return;const ne={id:`todo-${Date.now()}`,title:W,details:M.trim(),completed:!1,dueDate:j,dueTime:E,reminderMinutes:_,repeat:J,notifiedAt:null};a(R=>[ne,...R]),y(""),k(""),ue("none"),xe(null),v(!1)},ce=W=>{a(ne=>ne.map(R=>R.id===W?{...R,completed:!R.completed}:R))},N=W=>{a(ne=>ne.filter(R=>R.id!==W)),Re(ne=>ne.filter(R=>R.id!==W)),xe(null)},K=W=>{a(ne=>ne.map(R=>R.id===W?{...R,dueDate:of(),dueTime:R.dueTime||"19:00",notifiedAt:null}:R)),xe(null)};return n.jsxs("div",{className:"todo-list todo-v4",children:[n.jsxs("div",{className:"todo-v4-head",children:[n.jsx("div",{className:"todo-v4-title",children:"My Tasks"}),n.jsxs("div",{className:"todo-v4-head-actions",children:[n.jsxs("button",{className:"todo-v4-new-btn",onClick:()=>v(W=>!W),"aria-label":"New Task",children:[n.jsx("svg",{viewBox:"0 0 24 24",width:"14",height:"14",fill:"none",stroke:"currentColor",strokeWidth:"2",children:n.jsx("path",{d:"M12 5v14M5 12h14"})}),"New Task"]}),n.jsx("button",{className:"todo-close",onClick:()=>O(W=>!W),"aria-label":"Settings",children:n.jsxs("svg",{viewBox:"0 0 24 24",width:"14",height:"14",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[n.jsx("line",{x1:"4",y1:"7",x2:"20",y2:"7"}),n.jsx("line",{x1:"4",y1:"12",x2:"20",y2:"12"}),n.jsx("line",{x1:"4",y1:"17",x2:"20",y2:"17"}),n.jsx("circle",{cx:"9",cy:"7",r:"2"}),n.jsx("circle",{cx:"15",cy:"12",r:"2"}),n.jsx("circle",{cx:"11",cy:"17",r:"2"})]})})]})]}),S&&n.jsxs("div",{className:"todo-v4-settings",children:[n.jsxs("label",{className:"todo-checkbox",children:[n.jsx("input",{type:"checkbox",checked:l.inAppReminder,onChange:W=>c(ne=>({...ne,inAppReminder:W.target.checked}))}),"In-app reminders"]}),n.jsxs("label",{className:"todo-checkbox",children:[n.jsx("input",{type:"checkbox",checked:l.desktopReminder,onChange:W=>c(ne=>({...ne,desktopReminder:W.target.checked}))}),"Desktop notifications"]}),n.jsx("label",{className:"todo-label",children:"Default reminder"}),n.jsx("select",{className:"todo-input",value:l.defaultReminderMinutes,onChange:W=>c(ne=>({...ne,defaultReminderMinutes:Number(W.target.value)})),children:ij.map(W=>n.jsx("option",{value:W,children:W===0?"At due time":`${W} minutes before`},W))})]}),g&&n.jsxs("div",{className:"todo-v4-add",children:[n.jsx("input",{className:"todo-input",placeholder:"Add a task",value:x,onChange:W=>y(W.target.value),onKeyDown:W=>W.key==="Enter"&&X()}),n.jsx("textarea",{className:"todo-textarea",placeholder:"Details (optional)",value:M,onChange:W=>k(W.target.value)}),n.jsxs("div",{className:"todo-inline",children:[n.jsx("input",{type:"date",className:"todo-input",value:j,onChange:W=>C(W.target.value)}),n.jsx("input",{type:"time",className:"todo-input",value:E,onChange:W=>B(W.target.value)})]}),n.jsxs("div",{className:"todo-inline",children:[n.jsx("select",{className:"todo-input",value:_,onChange:W=>F(Number(W.target.value)),children:ij.map(W=>n.jsx("option",{value:W,children:W===0?"Reminder: Due time":`Reminder: ${W}m before`},W))}),n.jsxs("select",{className:"todo-input",value:J,onChange:W=>ue(W.target.value),children:[n.jsx("option",{value:"none",children:"No repeat"}),n.jsx("option",{value:"daily",children:"Daily"}),n.jsx("option",{value:"weekly",children:"Weekly"}),n.jsx("option",{value:"monthly",children:"Monthly"})]}),n.jsx("button",{className:"todo-primary",onClick:X,children:"Add"})]})]}),n.jsx("div",{className:"todo-v4-toolbar",children:n.jsx("select",{className:"todo-input",value:d,onChange:W=>p(W.target.value),children:nI.map(W=>n.jsx("option",{value:W.value,children:W.label},W.value))})}),l.inAppReminder&&Ne.length>0&&n.jsx("div",{className:"todo-v4-reminders",children:Ne.map(W=>n.jsx("div",{className:"todo-reminder-item",children:W.message},W.id))}),L.length===0?n.jsx("div",{className:"panel-empty",children:"No tasks found."}):n.jsx("div",{className:"todo-items",children:L.map(W=>n.jsxs("div",{className:`todo-item todo-v4-item${W.completed?" todo-item-done":""}`,children:[n.jsxs("div",{className:"todo-v4-row",children:[n.jsxs("label",{className:"todo-checkbox",children:[n.jsx("input",{type:"checkbox",checked:W.completed,onChange:()=>ce(W.id)}),n.jsx("span",{className:"todo-item-title",children:W.title})]}),n.jsx("button",{className:"todo-close",onClick:()=>xe(ne=>ne===W.id?null:W.id),"aria-label":"Task menu",children:n.jsxs("svg",{viewBox:"0 0 24 24",width:"14",height:"14",fill:"currentColor",children:[n.jsx("circle",{cx:"12",cy:"5",r:"2"}),n.jsx("circle",{cx:"12",cy:"12",r:"2"}),n.jsx("circle",{cx:"12",cy:"19",r:"2"})]})})]}),W.details?n.jsx("div",{className:"todo-item-sub",children:W.details}):null,n.jsxs("div",{className:"todo-item-sub",children:["Due: ",aj(W)," (",sI(W),")"]}),n.jsxs("div",{className:"todo-item-sub",children:["Reminder: ",W.reminderMinutes===0?"At due time":`${W.reminderMinutes}m before`," | Repeat: ",W.repeat]}),Y===W.id&&n.jsxs("div",{className:"todo-v4-menu",children:[n.jsx("button",{className:"todo-ghost",onClick:()=>K(W.id),children:"Add deadline (today)"}),n.jsx("button",{className:"todo-ghost",onClick:()=>N(W.id),children:"Delete"})]})]},W.id))})]})}const iI=["All Activity","My Activity","Today Activity"],aI=48;function lI(e){if(!e)return"Just now";const t=new Date(e);if(Number.isNaN(t.getTime()))return"Just now";const s=Date.now()-t.getTime(),r=Math.floor(s/6e4);if(r<1)return"Just now";if(r<60)return`${r} minute${r===1?"":"s"} ago`;const i=Math.floor(r/60);return i<24?`${i} hour${i===1?"":"s"} ago`:`${Math.floor(i/24)} day${Math.floor(i/24)===1?"":"s"} ago`}function oI(e){const t=String(e||"").trim().toLowerCase();return t==="create_ticket"?"New Ticket Logged":t==="add_history"?"Internal Note":t==="assign_asset"?"Asset Assigned":t==="unassign_asset"?"Asset Unassigned":t==="transition"?"Ticket Status Updated":t==="resolve"?"Resolved":t==="respond"?"Mark As Responded":t==="update_ticket"?"Ticket Updated":t==="delete_ticket"?"Ticket Deleted":String(e||"Ticket Action").replace(/_/g," ").replace(/\b\w/g,s=>s.toUpperCase())}function cI(e){var s,r,i,a,l,c,d;const t=String((e==null?void 0:e.action)||"").toLowerCase();if(t==="add_history")return String(((s=e==null?void 0:e.meta)==null?void 0:s.note)||"").trim()||"Ticket note added.";if(t==="transition"){const p=String(((r=e==null?void 0:e.meta)==null?void 0:r.from)||"").trim(),g=String(((i=e==null?void 0:e.meta)==null?void 0:i.to)||"").trim();return p||g?`Status changed: ${p||"-"} -> ${g||"-"}`:"Ticket status changed."}return t==="assign_asset"?`Asset assigned${(a=e==null?void 0:e.meta)!=null&&a.assetId?`: ${e.meta.assetId}`:""}`:t==="respond"?String(((l=e==null?void 0:e.meta)==null?void 0:l.message)||"").trim()||"Response sent to requester.":t==="resolve"?String(((c=e==null?void 0:e.meta)==null?void 0:c.resolution)||"").trim()||"Ticket resolved.":t==="update_ticket"?"Ticket details updated.":t==="create_ticket"?String(((d=e==null?void 0:e.meta)==null?void 0:d.subject)||"").trim()||"Ticket created.":t==="delete_ticket"?"Ticket removed.":""}function dI(e){const t=Number(e);return!Number.isFinite(t)||t<=0?"SY":`U${t}`}function uI({filter:e}){const{user:t}=An(),[s,r]=oe.useState(!1),[i,a]=oe.useState([]),l=oe.useCallback(async()=>{try{r(!0);const c=await Qg({limit:300}),d=Date.now()-aI*60*60*1e3,p=new Date,g=new Date(p.getFullYear(),p.getMonth(),p.getDate()).getTime(),v=g+24*60*60*1e3,S=Number(t==null?void 0:t.id),O=(Array.isArray(c)?c:[]).filter(x=>String((x==null?void 0:x.entity)||"").toLowerCase()==="ticket").filter(x=>{const y=new Date(String((x==null?void 0:x.createdAt)||""));return!Number.isNaN(y.getTime())&&y.getTime()>=d}).filter(x=>{if(e==="My Activity")return Number.isFinite(S)&&Number(x==null?void 0:x.userId)===S;if(e==="Today Activity"){const y=new Date(String((x==null?void 0:x.createdAt)||"")).getTime();return Number.isFinite(y)&&y>=g&&y<v}return!0}).sort((x,y)=>new Date(String((y==null?void 0:y.createdAt)||0)).getTime()-new Date(String((x==null?void 0:x.createdAt)||0)).getTime()).map(x=>{var k;const y=String((x==null?void 0:x.ticketId)||((k=x==null?void 0:x.meta)==null?void 0:k.ticketId)||"").trim(),M=y?`#${y.replace(/^TB#?/i,"")}`:"#-";return{id:Number((x==null?void 0:x.id)||0),ticketLabel:M,title:oI(String((x==null?void 0:x.action)||"")),detail:cI(x),timeLabel:lI(String((x==null?void 0:x.createdAt)||"")),author:dI(x==null?void 0:x.userId),createdAtRaw:String((x==null?void 0:x.createdAt)||"")}});a(O)}catch{a([])}finally{r(!1)}},[e,t==null?void 0:t.id]);return oe.useEffect(()=>{l();const c=window.setInterval(l,3e4);return()=>window.clearInterval(c)},[l]),n.jsx("div",{className:"panel-feed",children:n.jsxs("div",{className:"panel-list",children:[s&&i.length===0?n.jsx("div",{className:"panel-empty",children:"Loading feed..."}):null,!s&&i.length===0?n.jsx("div",{className:"panel-empty",children:"No ticket actions in last 48 hours."}):null,i.map(c=>n.jsxs("div",{className:"panel-feed-card",children:[n.jsx("div",{className:"panel-feed-avatar",children:c.author}),n.jsxs("div",{className:"panel-feed-body",children:[n.jsxs("div",{className:"panel-feed-title",children:[n.jsx("span",{className:"panel-feed-id",children:c.ticketLabel})," - ",c.title]}),c.detail?n.jsx("div",{className:"panel-feed-detail",children:c.detail}):null,n.jsx("div",{className:"panel-feed-time",children:c.timeLabel})]})]},`${c.id}-${c.createdAtRaw}`))]})})}const mI=[{type:"Tickets",title:"#1030094 - Internal Note",subtitle:"ADL remote reboot done."},{type:"Tickets",title:"#1030093 - New request logged",subtitle:"Beacon Portrait, London."},{type:"Assets",title:"Beacon Portrait Eastbound",subtitle:"Unit ID: 3759"},{type:"Assets",title:"Dell Latitude 7440",subtitle:"Assigned to Girikumar"},{type:"Users",title:"Girikumaran",subtitle:"giri.kumaran@astragroup.co.uk"},{type:"Suppliers",title:"BT Plc",subtitle:"SLA: Gold support"}];function pI({query:e}){const t=u.useMemo(()=>{const r=e.trim().toLowerCase();return r?mI.filter(i=>`${i.type} ${i.title} ${i.subtitle}`.toLowerCase().includes(r)):[]},[e]),s=u.useMemo(()=>t.reduce((r,i)=>(r[i.type]=r[i.type]||[],r[i.type].push(i),r),{}),[t]);return e.trim()?t.length===0?n.jsx("div",{className:"panel-empty",children:"No results found"}):n.jsxs("div",{className:"panel-search-results",children:[n.jsxs("div",{className:"panel-search-meta",children:[n.jsxs("span",{children:[t.length," results"]}),n.jsx("span",{children:"Showing best matches"})]}),Object.entries(s).map(([r,i])=>n.jsxs("div",{className:"panel-search-group",children:[n.jsx("div",{className:"panel-search-group-title",children:r}),n.jsx("div",{className:"panel-search-group-list",children:i.map(a=>n.jsxs("div",{className:"panel-search-item",children:[n.jsx("div",{className:"panel-search-item-title",children:a.title}),n.jsx("div",{className:"panel-search-item-sub",children:a.subtitle})]},`${r}-${a.title}`))})]},r))]}):n.jsx("div",{className:"panel-muted",children:"Start typing to search tickets, assets, users, and suppliers."})}async function fI(){var t;const e=await De.get("/users/me/presence");return{status:vl((t=e==null?void 0:e.data)==null?void 0:t.status)}}async function hI(e){var s;const t=await De.put("/users/me/presence",{status:e});return{status:vl((s=t==null?void 0:t.data)==null?void 0:s.status)}}const Td={page:1,totalPages:1,totalRows:0,rangeStart:0,rangeEnd:0},gI={dashboard:"Dashboard",tickets:"Tickets",assets:"Assets",users:"Users",suppliers:"Suppliers",accounts:"Accounts",reports:"Reports",admin:"Admin"},vI={dashboard:"/dashboard",tickets:"/tickets",assets:"/assets",users:"/users",suppliers:"/supplier",accounts:"/accounts",reports:"/reports",admin:"/admin"};function xI(e){return e.startsWith("/tickets")?"tickets":e.startsWith("/assets")?"assets":e.startsWith("/users")?"users":e.startsWith("/supplier")?"suppliers":e.startsWith("/accounts")?"accounts":e.startsWith("/reports")?"reports":e.startsWith("/admin")?"admin":"dashboard"}function Fa(e){const t=Number(e);return!Number.isFinite(t)||t<=0?null:t}function yI(){const[e,t]=u.useState("dashboard"),{user:s}=An(),r=lr(),i=Wn(),[a,l]=u.useState(!1),[c,d]=u.useState(!1),[p,g]=u.useState(()=>So()),v=oe.useRef(!1),S=oe.useRef(null),[O,x]=u.useState(null),[y,M]=u.useState("All Activity"),[k,j]=u.useState(0),[C,E]=u.useState(null),B=oe.useRef(0),_=oe.useRef(!1),[F,J]=u.useState(""),[ue,Y]=u.useState(""),[xe,Ne]=u.useState(1),[Re,L]=u.useState(Td),[X,ce]=u.useState(1),[N,K]=u.useState(Td),[W,ne]=u.useState(1),[R,Q]=u.useState(Td),[je,se]=u.useState(1),[ze,Ze]=u.useState(Td),[ye,lt]=u.useState(""),We=O?360:a?300:0,Fe=oe.useRef(null),le=oe.useRef(null),Me=oe.useRef(null),G=oe.useRef(null);u.useEffect(()=>{t(xI(r.pathname))},[r.pathname]),u.useEffect(()=>{const fe=gt=>{var At;const He=gt.target;if(a){const mt=Fe.current&&Fe.current.contains(He),Ut=le.current&&le.current.contains(He);!mt&&!Ut&&(l(!1),d(!1))}O&&Me.current&&!Me.current.contains(He)&&((At=He.closest)!=null&&At.call(He,"[data-panel-toggle]")||x(null))};return document.addEventListener("mousedown",fe),()=>document.removeEventListener("mousedown",fe)},[a,O]),u.useEffect(()=>{Iy(p),!(!v.current||!(s!=null&&s.id))&&S.current!==p&&hI(p).then(fe=>{S.current=vl(fe==null?void 0:fe.status)}).catch(()=>{})},[p,s==null?void 0:s.id]),u.useEffect(()=>{let fe=!1;return(async()=>{v.current=!1,S.current=null;const He=So();if(g(He),!(s!=null&&s.id)){v.current=!0;return}try{const At=await fI();if(fe)return;const mt=vl(At==null?void 0:At.status);S.current=mt,g(mt),Iy(mt)}catch{}finally{fe||(v.current=!0)}})(),()=>{fe=!0}},[s==null?void 0:s.id]),u.useEffect(()=>{const fe=()=>g(So());return window.addEventListener("storage",fe),window.addEventListener(Yo,fe),()=>{window.removeEventListener("storage",fe),window.removeEventListener(Yo,fe)}},[]),u.useEffect(()=>{const fe=At=>new Intl.DateTimeFormat("en-GB",{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1,timeZone:At}).format(new Date),gt=()=>{lt(`( UTC - ${fe("UTC")}) (IST - ${fe("Asia/Kolkata")})`)};gt();const He=window.setInterval(gt,1e3);return()=>window.clearInterval(He)},[]),u.useEffect(()=>{O==="search"&&G.current&&G.current.focus()},[O]),u.useEffect(()=>{let fe=!1;return(async()=>{if(s)try{const He=await u1();if(fe)return;const At={readIds:Array.isArray(He==null?void 0:He.readIds)?He.readIds.map(mt=>Number(mt)).filter(mt=>Number.isFinite(mt)&&mt>0):[],deletedIds:Array.isArray(He==null?void 0:He.deletedIds)?He.deletedIds.map(mt=>Number(mt)).filter(mt=>Number.isFinite(mt)&&mt>0):[],clearedAt:Number.isFinite(Number(He==null?void 0:He.clearedAt))?Number(He.clearedAt):void 0};jh(s,At),window.dispatchEvent(new CustomEvent("notifications-state-changed"))}catch{}})(),()=>{fe=!0}},[s]),u.useEffect(()=>{let fe=!0,gt=null;const He=async()=>{var Ut,T;if(!s){fe&&j(0);return}try{const Se=await Qg({limit:120}),ke=f1(s),Pe=(Array.isArray(Se)?Se:[]).filter(de=>{const $e=Fa(de==null?void 0:de.id);if(!$e||ke.deletedIds.includes($e))return!1;if(!ke.clearedAt)return!0;const re=de!=null&&de.createdAt?new Date(String(de.createdAt)).getTime():0;return!Number.isFinite(re)||re>ke.clearedAt}),Xe=Pe.filter(de=>{const $e=Fa(de==null?void 0:de.id);return!$e||!ke.readIds.includes($e)}).length;fe&&j(Xe);const dt=Pe.slice().sort((de,$e)=>(Fa(de==null?void 0:de.id)||0)-(Fa($e==null?void 0:$e.id)||0)),w=dt.length&&Fa((Ut=dt[dt.length-1])==null?void 0:Ut.id)||0;if(!_.current){_.current=!0,B.current=w;return}const ee=dt.filter(de=>(Fa(de==null?void 0:de.id)||0)>B.current);if(ee.length>0&&fe){const de=ee[ee.length-1],$e=String((de==null?void 0:de.ticketId)||((T=de==null?void 0:de.meta)==null?void 0:T.ticketId)||""),re=String((de==null?void 0:de.entity)||"").toLowerCase()==="ticket"?"New request logged.":"New notification.",Dt=$e?`ID:${$e}`:`Action: ${String((de==null?void 0:de.action)||"update")}`;E({title:re,sub:Dt}),gt&&window.clearTimeout(gt),gt=window.setTimeout(()=>{E(null)},3e3)}B.current=w}catch{fe&&j(0)}};He();const At=window.setInterval(He,3e4),mt=()=>He();return window.addEventListener("notifications-state-changed",mt),()=>{fe=!1,gt&&window.clearTimeout(gt),window.clearInterval(At),window.removeEventListener("notifications-state-changed",mt)}},[s]),u.useEffect(()=>{s!=null&&s.role&&(s.role==="USER"&&!r.pathname.startsWith("/tickets")&&!r.pathname.startsWith("/reports")&&!r.pathname.startsWith("/security")&&i("/tickets",{replace:!0}),s.role==="AGENT"&&(r.pathname.startsWith("/admin")||r.pathname.startsWith("/users"))&&i("/tickets",{replace:!0}))},[s==null?void 0:s.role,r.pathname,i]);const he=fe=>{if(t(fe),fe==="dashboard"){i("/dashboard");return}if(fe==="suppliers"){i("/supplier");return}if(fe==="reports"){i("/reports");return}i(`/${fe}`)},we=u.useMemo(()=>{if(r.pathname.startsWith("/tickets/")){const gt=decodeURIComponent(r.pathname.split("/")[2]||"");return[{label:"Tickets",path:"/tickets"},{label:gt||"Details",path:r.pathname}]}if(r.pathname.startsWith("/assets/")){const gt=decodeURIComponent(r.pathname.split("/")[2]||"");return[{label:"Assets",path:"/assets"},{label:gt||"Details",path:r.pathname}]}if(r.pathname.startsWith("/users/")){const gt=decodeURIComponent(r.pathname.split("/")[2]||"");return[{label:"Users",path:"/users"},{label:gt||"Details",path:r.pathname}]}if(r.pathname.startsWith("/supplier/")){const gt=decodeURIComponent(r.pathname.split("/")[2]||"");return[{label:"Suppliers",path:"/supplier"},{label:gt||"Details",path:r.pathname}]}if(r.pathname.startsWith("/admin"))return[{label:"Admin",path:"/admin"},{label:"Settings",path:"/admin"}];if(r.pathname.startsWith("/security"))return[{label:"Account Security",path:"/security"}];const fe=e==="tickets"?"tickets":e||"dashboard";return[{label:gI[fe]||"Dashboard",path:vI[fe]||"/dashboard"}]},[e,r.pathname]),$=r.pathname.startsWith("/tickets"),V=r.pathname.startsWith("/dashboard"),ve=r.pathname.startsWith("/reports"),ge=r.pathname==="/users",Ve=r.pathname==="/accounts",Le=r.pathname==="/assets",H=r.pathname.startsWith("/assets/"),pe=r.pathname==="/supplier",_e=r.pathname==="/admin",Ye=r.pathname.startsWith("/security"),et=!$&&!V&&!ve&&!_e&&!Ve&&!Ye,ct=ge||Ve?Re:Le?N:pe?R:_e?ze:null;u.useEffect(()=>{(ge||Ve)&&Ne(1),Le&&ce(1),pe&&ne(1),_e&&se(1)},[ue,ge,Ve,Le,pe,_e]);const rt=ge?"users":Ve?"accounts":Le?"assets":pe?"suppliers":_e?"admin":null,qe=rt==="assets"?"assets-tool-bar":rt==="users"?"users-tool-bar":rt==="accounts"?"accounts-tool-bar":rt==="suppliers"?"suppliers-tool-bar":rt==="admin"?"admin-tool-bar":"tickets-tool-bar",yt=Zp.find(fe=>fe.value===p)||Zp[0],St=yt.style==="ring"?"presence-dot-ring":"presence-dot-solid",hn=ma(s,"G"),tn=qr(s);return n.jsxs("div",{className:"app-root",children:[n.jsx(_R,{activeNav:e,setActiveNav:he,role:s==null?void 0:s.role}),n.jsx("div",{id:"ticket-left-panel",className:"ticket-left-panel"}),n.jsxs("div",{className:"nav-top-bar",children:[n.jsx("div",{className:"nav-top-bar-left",children:n.jsx("nav",{className:"breadcrumb","aria-label":"Breadcrumb",children:we.map((fe,gt)=>n.jsxs(oe.Fragment,{children:[n.jsx("button",{type:"button",className:"breadcrumb-link",onClick:()=>i(fe.path),children:fe.label}),gt<we.length-1&&n.jsx("span",{className:"breadcrumb-sep",children:">"})]},`${fe.label}-${gt}`))})}),n.jsxs("div",{className:"nav-top-bar-right",children:[n.jsx("div",{className:"app-pill-btn app-time-pill",role:"status","aria-live":"polite",children:ye}),n.jsxs("button",{className:"app-pill-btn",onClick:()=>{if(!r.pathname.startsWith("/tickets")){sessionStorage.setItem("openNewTicket","1"),i("/tickets");return}window.dispatchEvent(new CustomEvent("open-new-ticket"))},children:[n.jsx("svg",{viewBox:"0 0 24 24",width:"14",height:"14",fill:"none",stroke:"currentColor",strokeWidth:"2",children:n.jsx("path",{d:"M12 5v14M5 12h14"})}),"New Ticket"]}),n.jsx("button",{className:`app-icon-btn ${O==="search"?"app-icon-btn-active":""}`,"data-panel-toggle":!0,"aria-label":"Search",onClick:()=>x(O==="search"?null:"search"),children:n.jsxs("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"1.8",children:[n.jsx("circle",{cx:"11",cy:"11",r:"7"}),n.jsx("path",{d:"M20 20l-3.5-3.5"})]})}),n.jsx("button",{className:`app-icon-btn ${O==="todo"?"app-icon-btn-active":""}`,"data-panel-toggle":!0,"aria-label":"To-Do",onClick:()=>x(O==="todo"?null:"todo"),children:n.jsxs("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"1.8",children:[n.jsx("rect",{x:"4",y:"5",width:"16",height:"15",rx:"2"}),n.jsx("path",{d:"M8 9h8M8 13h8M8 17h5"})]})}),n.jsx("button",{className:`app-icon-btn ${O==="feed"?"app-icon-btn-active":""}`,"data-panel-toggle":!0,"aria-label":"Feed",onClick:()=>x(O==="feed"?null:"feed"),children:n.jsx("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"1.8",children:n.jsx("path",{d:"M4 6h16M4 12h16M4 18h10"})})}),n.jsxs("button",{className:`app-icon-btn ${O==="notifications"?"app-icon-btn-active":""}`,"data-panel-toggle":!0,"aria-label":"Notifications",onClick:()=>x(O==="notifications"?null:"notifications"),children:[n.jsxs("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"1.8",children:[n.jsx("path",{d:"M6 17h12l-1.5-2.5V11a4.5 4.5 0 0 0-9 0v3.5L6 17z"}),n.jsx("path",{d:"M10 19a2 2 0 0 0 4 0"})]}),k>0?n.jsx("span",{className:"app-icon-badge",children:k>99?"99+":k}):null]}),n.jsx("div",{className:"profile-menu-anchor",ref:Fe,children:n.jsxs("button",{className:"profile-avatar-btn","aria-label":"Profile menu",onClick:()=>{l(fe=>!fe),d(!1)},style:{"--presence-color":yt.color},children:[tn?n.jsx("img",{src:tn,alt:(s==null?void 0:s.name)||"User",className:"unified-user-avatar-image"}):hn,n.jsx("span",{className:`profile-avatar-presence-dot ${St}`})]})})]})]}),C?n.jsxs("div",{className:"app-notification-popup",children:[n.jsx("button",{className:"app-notification-popup-close",onClick:()=>E(null),"aria-label":"Close",children:""}),n.jsx("div",{className:"app-notification-popup-title",children:C.title}),n.jsx("div",{className:"app-notification-popup-sub",children:C.sub})]}):null,n.jsxs("main",{className:"main-area",style:We?{marginRight:We}:void 0,children:[a&&n.jsxs("div",{className:"profile-panel",ref:le,children:[n.jsx("div",{className:"profile-panel-header",children:n.jsx("button",{className:"profile-panel-close",onClick:()=>{l(!1),d(!1)},"aria-label":"Close",children:""})}),n.jsxs("div",{className:"profile-panel-body",children:[n.jsxs("div",{className:"profile-panel-user",children:[n.jsxs("div",{className:"profile-panel-avatar unified-user-avatar",children:[tn?n.jsx("img",{src:tn,alt:(s==null?void 0:s.name)||"User",className:"unified-user-avatar-image"}):hn,n.jsx("span",{className:`profile-panel-status-dot ${St}`,style:{"--presence-color":yt.color}})]}),n.jsxs("div",{className:"profile-panel-user-main",children:[n.jsx("div",{className:"profile-panel-name",children:(s==null?void 0:s.name)||"User"}),n.jsx("div",{className:"profile-panel-email",children:(s==null?void 0:s.email)||"user@example.com"}),n.jsxs("div",{className:"profile-panel-status-wrap",children:[n.jsxs("button",{className:"profile-panel-status-btn",onClick:()=>d(fe=>!fe),children:[n.jsx("span",{className:`profile-panel-status-indicator ${St}`,style:{"--presence-color":yt.color}}),p]}),c&&n.jsx("div",{className:"profile-panel-status-menu",children:Zp.map(fe=>n.jsxs("button",{className:`profile-panel-status-option${fe.value===p?" active":""}`,onClick:()=>{g(fe.value),d(!1)},children:[n.jsx("span",{className:`profile-panel-status-indicator ${fe.style==="ring"?"presence-dot-ring":"presence-dot-solid"}`,style:{"--presence-color":fe.color}}),n.jsx("span",{className:"profile-panel-status-option-main",children:n.jsx("span",{className:"profile-panel-status-option-title",children:fe.value})}),n.jsx("span",{className:"profile-panel-status-option-check","aria-hidden":"true",children:fe.value===p?"":""})]},fe.value))})]})]})]}),n.jsxs("div",{className:"profile-panel-links",children:[n.jsx("button",{onClick:()=>{l(!1),d(!1),i("/security")},children:"Account & Password"}),n.jsx("button",{onClick:()=>{l(!1),i("/portal/home")},children:"Switch to End-User Portal"}),n.jsx("button",{onClick:()=>Zw(),children:"Log out"})]})]})]}),O&&n.jsxs("div",{className:"app-panel",ref:Me,children:[n.jsxs("div",{className:"app-panel-header",children:[n.jsxs("div",{className:"app-panel-title",children:[O==="search"&&"Search",O==="notifications"&&"Notifications",O==="todo"&&"To-Do",O==="feed"&&"Feed"]}),n.jsxs("div",{className:"app-panel-header-controls",children:[O==="notifications"?n.jsxs(n.Fragment,{children:[n.jsxs("button",{className:"panel-icon-btn","aria-label":"Mark all read",onClick:()=>window.dispatchEvent(new CustomEvent("notifications-mark-all-read")),children:[n.jsx("svg",{viewBox:"0 0 24 24",width:"12",height:"12",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{marginRight:6},children:n.jsx("path",{d:"M20 6 9 17l-5-5"})}),"Read all"]}),n.jsxs("button",{className:"panel-icon-btn","aria-label":"Delete all",onClick:()=>window.dispatchEvent(new CustomEvent("notifications-delete-all")),children:[n.jsxs("svg",{viewBox:"0 0 24 24",width:"12",height:"12",fill:"none",stroke:"currentColor",strokeWidth:"2",style:{marginRight:6},children:[n.jsx("path",{d:"M3 6h18"}),n.jsx("path",{d:"M8 6V4h8v2"}),n.jsx("path",{d:"M19 6l-1 14H6L5 6"})]}),"Delete all"]})]}):null,O==="feed"?n.jsx("select",{value:y,onChange:fe=>M(fe.target.value),children:iI.map(fe=>n.jsx("option",{children:fe},fe))}):null]}),n.jsx("button",{className:"app-panel-close",onClick:()=>x(null),"aria-label":"Close panel",children:""})]}),n.jsxs("div",{className:"app-panel-body",children:[O==="search"&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"app-panel-search",children:[n.jsx("input",{ref:G,placeholder:"Search tickets, assets, users, suppliers...",value:F,onChange:fe=>J(fe.target.value)}),n.jsx("button",{className:"app-panel-search-btn","aria-label":"Search",children:n.jsxs("svg",{viewBox:"0 0 24 24",width:"16",height:"16",fill:"none",stroke:"currentColor",strokeWidth:"1.8",children:[n.jsx("circle",{cx:"11",cy:"11",r:"7"}),n.jsx("path",{d:"M20 20l-3.5-3.5"})]})})]}),n.jsx(pI,{query:F})]}),O==="notifications"&&n.jsx(tI,{}),O==="todo"&&n.jsx(rI,{}),O==="feed"&&n.jsx(uI,{filter:y})]})]}),et&&n.jsxs("div",{className:qe,children:[n.jsxs("div",{className:"tool-bar-left",children:[H&&n.jsx("button",{className:"table-icon-btn",title:"Back to Assets","aria-label":"Back to Assets",onClick:()=>i("/assets"),children:n.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:n.jsx("polyline",{points:"15 18 9 12 15 6"})})}),n.jsx("button",{className:"table-icon-btn toolbar-left-panel-toggle",title:"Toggle Left Panel","aria-label":"Toggle Left Panel",onClick:()=>{rt&&window.dispatchEvent(new CustomEvent("shared-toolbar-action",{detail:{action:"toggle-left-panel",target:rt}}))},children:n.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[n.jsx("line",{x1:"4",y1:"7",x2:"20",y2:"7"}),n.jsx("line",{x1:"4",y1:"12",x2:"20",y2:"12"}),n.jsx("line",{x1:"4",y1:"17",x2:"20",y2:"17"})]})}),n.jsxs("div",{className:"global-search",children:[n.jsx("input",{type:"text",placeholder:"Search...",value:ue,onChange:fe=>Y(fe.target.value)}),n.jsx("span",{className:"search-icon",children:n.jsxs("svg",{viewBox:"0 0 24 24",width:"14",height:"14",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[n.jsx("circle",{cx:"11",cy:"11",r:"7"}),n.jsx("line",{x1:"16.5",y1:"16.5",x2:"21",y2:"21"})]})})]})]}),n.jsx("div",{className:"tool-bar-right",children:_e?n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"admin-settings-footer-meta",children:[n.jsx("span",{children:"Last updated by Admin  2 mins ago"}),n.jsx("span",{children:"Platform version 3.8.2"})]}),n.jsxs("div",{className:"admin-settings-footer-actions",children:[n.jsx("button",{className:"admin-settings-ghost",onClick:()=>{window.dispatchEvent(new CustomEvent("shared-toolbar-action",{detail:{action:"admin-cancel",target:"admin"}}))},children:"Cancel"}),n.jsx("button",{className:"admin-settings-primary",onClick:()=>{window.dispatchEvent(new CustomEvent("shared-toolbar-action",{detail:{action:"admin-save",target:"admin"}}))},children:"Save Changes"})]})]}):n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"pagination",children:ct?`${ct.rangeStart}-${ct.rangeEnd} of ${ct.totalRows}`:""}),ct&&n.jsxs("div",{className:"toolbar-pagination-group",children:[n.jsx("button",{className:"users-page-btn",onClick:()=>{ge||Ve?Ne(fe=>Math.max(1,fe-1)):Le?ce(fe=>Math.max(1,fe-1)):pe?ne(fe=>Math.max(1,fe-1)):_e&&se(fe=>Math.max(1,fe-1))},disabled:ct.page<=1,"aria-label":"Previous page",children:"<"}),n.jsx("button",{className:"users-page-btn active","aria-label":"Current page",children:ct.page}),n.jsx("button",{className:"users-page-btn",onClick:()=>{ge||Ve?Ne(fe=>Math.min(Re.totalPages,fe+1)):Le?ce(fe=>Math.min(N.totalPages,fe+1)):pe?ne(fe=>Math.min(R.totalPages,fe+1)):_e&&se(fe=>Math.min(ze.totalPages,fe+1))},disabled:ct.page>=ct.totalPages,"aria-label":"Next page",children:">"})]}),n.jsx("button",{className:"table-icon-btn",title:"Refresh","aria-label":"Refresh",onClick:()=>{rt&&window.dispatchEvent(new CustomEvent("shared-toolbar-action",{detail:{action:"refresh",target:rt}}))},children:n.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[n.jsx("polyline",{points:"23 4 23 10 17 10"}),n.jsx("polyline",{points:"1 20 1 14 7 14"}),n.jsx("path",{d:"M3.51 9a9 9 0 0 1 14.13-3.36L23 10M1 14l5.36 4.36A9 9 0 0 0 20.49 15"})]})}),n.jsx("button",{className:"table-primary-btn",onClick:()=>{rt&&window.dispatchEvent(new CustomEvent("shared-toolbar-action",{detail:{action:"new",target:rt}}))},children:"+ New"}),n.jsx("button",{className:"table-icon-btn",title:"Filter","aria-label":"Filter",onClick:()=>{rt&&window.dispatchEvent(new CustomEvent("shared-toolbar-action",{detail:{action:"filter",target:rt}}))},children:n.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:n.jsx("polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"})})})]})})]}),n.jsxs(P0,{children:[n.jsx(Lt,{path:"/dashboard",element:n.jsx("div",{className:"work-main",children:n.jsx(My,{})})}),n.jsx(Lt,{path:"/",element:n.jsx(sh,{to:"/portal/login",replace:!0})}),n.jsx(Lt,{path:"/tickets",element:n.jsxs(n.Fragment,{children:[n.jsx($y,{}),n.jsx("div",{style:{marginTop:24},children:n.jsx(Dy,{})})]})}),n.jsx(Lt,{path:"/tickets/:ticketId",element:n.jsxs(n.Fragment,{children:[n.jsx($y,{}),n.jsx("div",{style:{marginTop:24},children:n.jsx(Dy,{})})]})}),n.jsx(Lt,{path:"/assets",element:n.jsx("div",{className:"work-main",children:n.jsx(GP,{toolbarSearch:ue,controlledPage:X,onPageChange:ce,onPaginationMetaChange:K})})}),n.jsx(Lt,{path:"/assets/:assetId",element:n.jsx("div",{className:"work-main",children:n.jsx(JP,{})})}),n.jsx(Lt,{path:"/supplier",element:n.jsx("div",{className:"work-main",children:n.jsx(zL,{toolbarSearch:ue,controlledPage:W,onPageChange:ne,onPaginationMetaChange:Q})})}),n.jsx(Lt,{path:"/supplier/:supplierId",element:n.jsx("div",{className:"work-main",children:n.jsx(WL,{})})}),n.jsx(Lt,{path:"/users",element:n.jsx("div",{className:"work-main",children:n.jsx($L,{toolbarSearch:ue,controlledPage:xe,onPageChange:Ne,onPaginationMetaChange:L})})}),n.jsx(Lt,{path:"/users/:userId",element:n.jsx("div",{className:"work-main",children:n.jsx(DL,{})})}),n.jsx(Lt,{path:"/accounts",element:n.jsx("div",{className:"work-main",children:n.jsx(HL,{})})}),n.jsx(Lt,{path:"/reports",element:n.jsx("div",{className:"work-main",children:n.jsx(qL,{})})}),n.jsx(Lt,{path:"/admin",element:n.jsx(IL,{toolbarSearch:ue,controlledPage:je,onPageChange:se,onPaginationMetaChange:Ze})}),n.jsx(Lt,{path:"/security",element:n.jsx(JL,{})}),n.jsx(Lt,{path:"*",element:n.jsx("div",{className:"work-main",children:n.jsx(My,{})})})]})]})]})}function jI(){return n.jsxs(P0,{children:[n.jsx(Lt,{path:"/login",element:n.jsx(lf,{})}),n.jsx(Lt,{path:"/reset-password",element:n.jsx(lf,{})}),n.jsx(Lt,{path:"/portal/login",element:n.jsx(lf,{})}),n.jsx(Lt,{path:"/portal/dashboard",element:n.jsx(sj,{})}),n.jsx(Lt,{path:"/portal/tickets",element:n.jsx(KL,{})}),n.jsx(Lt,{path:"/portal/assets",element:n.jsx(QL,{})}),n.jsx(Lt,{path:"/portal/new-ticket",element:n.jsx(GL,{})}),n.jsx(Lt,{path:"/unauthorized",element:n.jsx(VL,{})}),n.jsx(Lt,{path:"/portal/home",element:n.jsx(nj,{children:n.jsx(sj,{})})}),n.jsx(Lt,{path:"/*",element:n.jsx(nj,{children:n.jsx(yI,{})})})]})}j0(document.getElementById("root")).render(n.jsxs(oe.StrictMode,{children:[(()=>{if(typeof window<"u"){const{pathname:e,hash:t}=window.location;if(e!=="/"&&t.startsWith("#/"))return window.location.replace(`/${t}`),null;e!=="/"&&!t&&window.location.replace("/#/portal/login")}return null})(),n.jsx(wC,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:n.jsxs(MP,{children:[n.jsx(DR,{}),n.jsx(jI,{})]})})]}));export{Tu as a,FP as b,wI as c,Sd as d,NI as e,SI as f,wd as g,kI as h,Dm as l,DP as m,Nd as p,Xp as r,_a as t,_P as u};
